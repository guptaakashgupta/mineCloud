function log(e){this.console&&console.log(e)}!function(){function e(e){var t=function(e,t){return o("",e,t)},i=n;e&&(n[e]||(n[e]={}),i=n[e]),i.define&&i.define.packaged||(r.original=i.define,i.define=r,i.define.packaged=!0),i.require&&i.require.packaged||(o.original=i.require,i.require=t,i.require.packaged=!0)}var t="",n=function(){return this}();if(!t&&"undefined"!=typeof requirejs){var i=n.define;return n.define=function(e,t,n){return"function"!=typeof n?i.apply(this,arguments):i(e,t,function(e,i,r){return"module"==t[2]&&(r.packaged=!0),n.apply(this,arguments)})},n.define.packaged=!0,void 0}var r=function(e,t,n){return"string"!=typeof e?(r.original?r.original.apply(window,arguments):(console.error("dropping module because define wasn't a string."),console.trace()),void 0):(2==arguments.length&&(n=t),r.modules||(r.modules={}),r.modules[e]=n,void 0)},o=function(e,t,n){if("[object Array]"===Object.prototype.toString.call(t)){for(var i=[],r=0,s=t.length;s>r;++r){var l=a(e,t[r]);if(!l&&o.original)return o.original.apply(window,arguments);i.push(l)}n&&n.apply(null,i)}else{if("string"==typeof t){var u=a(e,t);return!u&&o.original?o.original.apply(window,arguments):(n&&n(),u)}if(o.original)return o.original.apply(window,arguments)}},s=function(e,t){if(-1!==t.indexOf("!")){var n=t.split("!");return s(e,n[0])+"!"+s(e,n[1])}if("."==t.charAt(0)){var i=e.split("/").slice(0,-1).join("/");for(t=i+"/"+t;-1!==t.indexOf(".")&&r!=t;){var r=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return t},a=function(e,t){t=s(e,t);var n=r.modules[t];if(!n)return null;if("function"==typeof n){var i={},a={id:t,uri:"",exports:i,packaged:!0},l=function(e,n){return o(t,e,n)},u=n(l,i,a);return i=u||a.exports,r.modules[t]=i,i}return n};e(t)}(),define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/multi_select","ace/worker/worker_client","ace/keyboard/hash_handler","ace/keyboard/state_handler","ace/placeholder","ace/config","ace/theme/textmate"],function(e,t){e("./lib/fixoldbrowsers");var n=e("./lib/dom"),i=e("./lib/event"),r=e("./editor").Editor,o=e("./edit_session").EditSession,s=e("./undomanager").UndoManager,a=e("./virtual_renderer").VirtualRenderer,l=e("./multi_select").MultiSelect;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./keyboard/state_handler"),e("./placeholder"),t.config=e("./config"),t.edit=function(t){if("string"==typeof t){var u=t;(t=document.getElementById(t))||console.log("can't match div #"+u)}if(t.env&&t.env.editor instanceof r)return t.env.editor;var c=new o(n.getInnerText(t));c.setUndoManager(new s),t.innerHTML="";var h=new r(new a(t,e("./theme/textmate")));new l(h),h.setSession(c);var f={};return f.document=c,f.editor=h,h.resize(),i.addListener(window,"resize",function(){h.resize()}),t.env=f,h.env=f,h}}),define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(e){e("./regexp"),e("./es5-shim")}),define("ace/lib/regexp",["require","exports","module"],function(){function e(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function t(e,t,n){if(Array.prototype.indexOf)return e.indexOf(t,n);for(var i=n||0;i<e.length;i++)if(e[i]===t)return i;return-1}var n={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},i=void 0===n.exec.call(/()??/,"")[1],r=function(){var e=/^/g;return n.test.call(e,""),!e.lastIndex}();r&&i||(RegExp.prototype.exec=function(o){var s,a,l=n.exec.apply(this,arguments);if("string"==typeof o&&l){if(!i&&l.length>1&&t(l,"")>-1&&(a=RegExp(this.source,n.replace.call(e(this),"g","")),n.replace.call(o.slice(l.index),a,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(l[e]=void 0)})),this._xregexp&&this._xregexp.captureNames)for(var u=1;u<l.length;u++)s=this._xregexp.captureNames[u-1],s&&(l[s]=l[u]);!r&&this.global&&!l[0].length&&this.lastIndex>l.index&&this.lastIndex--}return l},r||(RegExp.prototype.test=function(e){var t=n.exec.call(this,e);return t&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--,!!t}))}),define("ace/lib/es5-shim",["require","exports","module"],function(){function e(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){}}Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=u.call(arguments,1),i=function(){if(this instanceof i){var r=function(){};r.prototype=t.prototype;var o=new r,s=t.apply(o,n.concat(u.call(arguments)));return null!==s&&Object(s)===s?s:o}return t.apply(e,n.concat(u.call(arguments)))};return i});var t,n,i,r,o,s=Function.prototype.call,a=Array.prototype,l=Object.prototype,u=a.slice,c=s.bind(l.toString),h=s.bind(l.hasOwnProperty);if((o=h(l,"__defineGetter__"))&&(t=s.bind(l.__defineGetter__),n=s.bind(l.__defineSetter__),i=s.bind(l.__lookupGetter__),r=s.bind(l.__lookupSetter__)),Array.isArray||(Array.isArray=function(e){return"[object Array]"==c(e)}),Array.prototype.forEach||(Array.prototype.forEach=function(e){var t=D(this),n=arguments[1],i=0,r=t.length>>>0;if("[object Function]"!=c(e))throw new TypeError;for(;r>i;)i in t&&e.call(n,t[i],i,t),i++}),Array.prototype.map||(Array.prototype.map=function(e){var t=D(this),n=t.length>>>0,i=Array(n),r=arguments[1];if("[object Function]"!=c(e))throw new TypeError;for(var o=0;n>o;o++)o in t&&(i[o]=e.call(r,t[o],o,t));return i}),Array.prototype.filter||(Array.prototype.filter=function(e){var t=D(this),n=t.length>>>0,i=[],r=arguments[1];if("[object Function]"!=c(e))throw new TypeError;for(var o=0;n>o;o++)o in t&&e.call(r,t[o],o,t)&&i.push(t[o]);return i}),Array.prototype.every||(Array.prototype.every=function(e){var t=D(this),n=t.length>>>0,i=arguments[1];if("[object Function]"!=c(e))throw new TypeError;for(var r=0;n>r;r++)if(r in t&&!e.call(i,t[r],r,t))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(e){var t=D(this),n=t.length>>>0,i=arguments[1];if("[object Function]"!=c(e))throw new TypeError;for(var r=0;n>r;r++)if(r in t&&e.call(i,t[r],r,t))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=D(this),n=t.length>>>0;if("[object Function]"!=c(e))throw new TypeError;if(!n&&1==arguments.length)throw new TypeError;var i,r=0;if(arguments.length>=2)i=arguments[1];else for(;;){if(r in t){i=t[r++];break}if(++r>=n)throw new TypeError}for(;n>r;r++)r in t&&(i=e.call(void 0,i,t[r],r,t));return i}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){var t=D(this),n=t.length>>>0;if("[object Function]"!=c(e))throw new TypeError;if(!n&&1==arguments.length)throw new TypeError;var i,r=n-1;if(arguments.length>=2)i=arguments[1];else for(;;){if(r in t){i=t[r--];break}if(--r<0)throw new TypeError}do r in this&&(i=e.call(void 0,i,t[r],r,t));while(r--);return i}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=D(this),n=t.length>>>0;if(!n)return-1;var i=0;for(arguments.length>1&&(i=S(arguments[1])),i=i>=0?i:Math.max(0,n+i);n>i;i++)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){var t=D(this),n=t.length>>>0;if(!n)return-1;var i=n-1;for(arguments.length>1&&(i=Math.min(i,S(arguments[1]))),i=i>=0?i:n-Math.abs(i);i>=0;i--)if(i in t&&e===t[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__||(e.constructor?e.constructor.prototype:l)}),!Object.getOwnPropertyDescriptor){var f="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(e,t){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError(f+e);if(h(e,t)){var n,s,a;if(n={enumerable:!0,configurable:!0},o){var u=e.__proto__;e.__proto__=l;var s=i(e,t),a=r(e,t);if(e.__proto__=u,s||a)return s&&(n.get=s),a&&(n.set=a),n}return n.value=e[t],n}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){return Object.keys(e)}),Object.create||(Object.create=function(e,t){var n;if(null===e)n={__proto__:null};else{if("object"!=typeof e)throw new TypeError("typeof prototype["+typeof e+"] != 'object'");var i=function(){};i.prototype=e,n=new i,n.__proto__=e}return void 0!==t&&Object.defineProperties(n,t),n}),Object.defineProperty){var d=e({}),p="undefined"==typeof document||e(document.createElement("div"));if(!d||!p)var g=Object.defineProperty}if(!Object.defineProperty||g){var m="Property description must be an object: ",v="Object.defineProperty called on non-object: ",y="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(e,s,a){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError(v+e);if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError(m+a);if(g)try{return g.call(Object,e,s,a)}catch(u){}if(h(a,"value"))if(o&&(i(e,s)||r(e,s))){var c=e.__proto__;e.__proto__=l,delete e[s],e[s]=a.value,e.__proto__=c}else e[s]=a.value;else{if(!o)throw new TypeError(y);h(a,"get")&&t(e,s,a.get),h(a,"set")&&n(e,s,a.set)}return e}}Object.defineProperties||(Object.defineProperties=function(e,t){for(var n in t)h(t,n)&&Object.defineProperty(e,n,t[n]);return e}),Object.seal||(Object.seal=function(e){return e}),Object.freeze||(Object.freeze=function(e){return e});try{Object.freeze(function(){})}catch(E){Object.freeze=function(e){return function(t){return"function"==typeof t?t:e(t)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(e){return e}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(e){if(Object(e)===e)throw new TypeError;for(var t="";h(e,t);)t+="?";e[t]=!0;var n=h(e,t);return delete e[t],n}),!Object.keys){var A=!0,b=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],w=b.length;for(var x in{toString:null})A=!1;Object.keys=function R(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");var R=[];for(var t in e)h(e,t)&&R.push(t);if(A)for(var n=0,i=w;i>n;n++){var r=b[n];h(e,r)&&R.push(r)}return R}}Date.prototype.toISOString&&-1!==new Date(-621987552e5).toISOString().indexOf("-000001")||(Date.prototype.toISOString=function(){var e,t,n,i;if(!isFinite(this))throw new RangeError;for(e=[this.getUTCMonth()+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],i=this.getUTCFullYear(),i=(0>i?"-":i>9999?"+":"")+("00000"+Math.abs(i)).slice(i>=0&&9999>=i?-4:-6),t=e.length;t--;)n=e[t],10>n&&(e[t]="0"+n);return i+"-"+e.slice(0,2).join("-")+"T"+e.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"}),Date.now||(Date.now=function(){return(new Date).getTime()}),Date.prototype.toJSON||(Date.prototype.toJSON=function(){if("function"!=typeof this.toISOString)throw new TypeError;return this.toISOString()}),864e13!==Date.parse("+275760-09-13T00:00:00.000Z")&&(Date=function(e){var t=function r(t,n,i,o,s,a,l){var u=arguments.length;if(this instanceof e){var c=1==u&&String(t)===t?new e(r.parse(t)):u>=7?new e(t,n,i,o,s,a,l):u>=6?new e(t,n,i,o,s,a):u>=5?new e(t,n,i,o,s):u>=4?new e(t,n,i,o):u>=3?new e(t,n,i):u>=2?new e(t,n):u>=1?new e(t):new e;return c.constructor=r,c}return e.apply(this,arguments)},n=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d{3}))?)?(?:Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$");for(var i in e)t[i]=e[i];return t.now=e.now,t.UTC=e.UTC,t.prototype=e.prototype,t.prototype.constructor=t,t.parse=function(t){var i=n.exec(t);if(i){i.shift();for(var r=1;7>r;r++)i[r]=+(i[r]||(3>r?1:0)),1==r&&i[r]--;var o=+i.pop(),s=+i.pop(),a=i.pop(),l=0;if(a){if(s>23||o>59)return 0/0;l=6e4*(60*s+o)*("+"==a?-1:1)}var u=+i[0];return u>=0&&99>=u?(i[0]=u+400,e.UTC.apply(this,i)+l-126227808e5):e.UTC.apply(this,i)+l}return e.parse.apply(this,arguments)},t}(Date));var C="	\n\f\r   ᠎             　\u2028\u2029";if(!String.prototype.trim||C.trim()){C="["+C+"]";var _=new RegExp("^"+C+C+"*"),F=new RegExp(C+C+"*$");String.prototype.trim=function(){return String(this).replace(_,"").replace(F,"")}}var S=function(e){return e=+e,e!==e?e=0:0!==e&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e},T="a"!="a"[0],D=function(e){if(null==e)throw new TypeError;return T&&"string"==typeof e&&e?e.split(""):Object(e)}}),define("ace/lib/dom",["require","exports","module"],function(e,t){var n="http://www.w3.org/1999/xhtml";t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||n,e):document.createElement(e)},t.setText=function(e,t){void 0!==e.innerText&&(e.innerText=t),void 0!==e.textContent&&(e.textContent=t)},t.hasCssClass=function(e,t){var n=e.className.split(/\s+/g);return-1!==n.indexOf(t)},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=" "+n)},t.removeCssClass=function(e,t){for(var n=e.className.split(/\s+/g);;){var i=n.indexOf(t);if(-1==i)break;n.splice(i,1)}e.className=n.join(" ")},t.toggleCssClass=function(e,t){for(var n=e.className.split(/\s+/g),i=!0;;){var r=n.indexOf(t);if(-1==r)break;i=!1,n.splice(r,1)}return i&&n.push(t),e.className=n.join(" "),i},t.setCssClass=function(e,n,i){i?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var n,i=0;if(t=t||document,t.createStyleSheet&&(n=t.styleSheets)){for(;i<n.length;)if(n[i++].owningElement.id===e)return!0}else if(n=t.getElementsByTagName("style"))for(;i<n.length;)if(n[i++].id===e)return!0;return!1},t.importCssString=function(e,i,r){if(r=r||document,i&&t.hasCssString(i,r))return null;var o;if(r.createStyleSheet)o=r.createStyleSheet(),o.cssText=e,i&&(o.owningElement.id=i);else{o=r.createElementNS?r.createElementNS(n,"style"):r.createElement("style"),o.appendChild(r.createTextNode(e)),i&&(o.id=i);var s=r.getElementsByTagName("head")[0]||r.documentElement;s.appendChild(o)}},t.importCssStylsheet=function(e,n){if(n.createStyleSheet)n.createStyleSheet(e);else{var i=t.createElement("link");i.rel="stylesheet",i.href=e;var r=n.getElementsByTagName("head")[0]||n.documentElement;r.appendChild(i)}},t.getInnerWidth=function(e){return parseInt(t.computedStyle(e,"paddingLeft"),10)+parseInt(t.computedStyle(e,"paddingRight"),10)+e.clientWidth},t.getInnerHeight=function(e){return parseInt(t.computedStyle(e,"paddingTop"),10)+parseInt(t.computedStyle(e,"paddingBottom"),10)+e.clientHeight},void 0!==window.pageYOffset?(t.getPageScrollTop=function(){return window.pageYOffset},t.getPageScrollLeft=function(){return window.pageXOffset}):(t.getPageScrollTop=function(){return document.body.scrollTop},t.getPageScrollLeft=function(){return document.body.scrollLeft}),t.computedStyle=window.getComputedStyle?function(e,t){return t?(window.getComputedStyle(e,"")||{})[t]||"":window.getComputedStyle(e,"")||{}}:function(e,t){return t?e.currentStyle[t]:e.currentStyle},t.scrollbarWidth=function(e){var n=t.createElement("p");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px";var i=t.createElement("div"),r=i.style;r.position="absolute",r.left="-10000px",r.overflow="hidden",r.width="200px",r.minWidth="0px",r.height="150px",i.appendChild(n);var o=e.body||e.documentElement;o.appendChild(i);var s=n.offsetWidth;r.overflow="scroll";var a=n.offsetWidth;return s==a&&(a=i.clientWidth),o.removeChild(i),s-a},t.setInnerHtml=function(e,t){var n=e.cloneNode(!1);return n.innerHTML=t,e.parentNode.replaceChild(n,e),n},t.setInnerText=function(e,t){var n=e.ownerDocument;n.body&&"textContent"in n.body?e.textContent=t:e.innerText=t},t.getInnerText=function(e){var t=e.ownerDocument;return t.body&&"textContent"in t.body?e.textContent:e.innerText||e.textContent||""},t.getParentWindow=function(e){return e.defaultView||e.parentWindow}}),define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent","ace/lib/dom"],function(e,t){function n(e,t,n){var o=0;if(o=!r.isOpera||"KeyboardEvent"in window||!r.isMac?0|(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0):0|(t.metaKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.ctrlKey?8:0),n in i.MODIFIER_KEYS){switch(i.MODIFIER_KEYS[n]){case"Alt":o=2;break;case"Shift":o=4;break;case"Ctrl":o=1;break;default:o=8}n=0}return 8&o&&(91==n||93==n)&&(n=0),o||n in i.FUNCTION_KEYS||n in i.PRINTABLE_KEYS?e(t,o,n):!1}var i=e("./keys"),r=e("./useragent");if(e("./dom"),t.addListener=function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1);if(e.attachEvent){var i=function(){n(window.event)};n._wrapper=i,e.attachEvent("on"+t,i)}},t.removeListener=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):(e.detachEvent&&e.detachEvent("on"+t,n._wrapper||n),void 0)},t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},t.getButton=function(e){return"dblclick"==e.type?0:"contextmenu"==e.type||e.ctrlKey&&r.isMac?2:e.preventDefault?e.button:{1:0,2:2,4:1}[e.button]},t.capture=document.documentElement.setCapture?function(e,n,i){function r(s){n(s),o||(o=!0,i(s)),t.removeListener(e,"mousemove",n),t.removeListener(e,"mouseup",r),t.removeListener(e,"losecapture",r),e.releaseCapture()}var o=!1;t.addListener(e,"mousemove",n),t.addListener(e,"mouseup",r),t.addListener(e,"losecapture",r),e.setCapture()}:function(e,t,n){function i(e){t&&t(e),n&&n(e),document.removeEventListener("mousemove",t,!0),document.removeEventListener("mouseup",i,!0),e.stopPropagation()}document.addEventListener("mousemove",t,!0),document.addEventListener("mouseup",i,!0)},t.addMouseWheelListener=function(e,n){var i=8,r=function(e){void 0!==e.wheelDelta?void 0!==e.wheelDeltaX?(e.wheelX=-e.wheelDeltaX/i,e.wheelY=-e.wheelDeltaY/i):(e.wheelX=0,e.wheelY=-e.wheelDelta/i):e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=5*(e.detail||0),e.wheelY=0):(e.wheelX=0,e.wheelY=5*(e.detail||0)),n(e)};t.addListener(e,"DOMMouseScroll",r),t.addListener(e,"mousewheel",r)},t.addMultiMouseDownListener=function(e,n,i,o){var s,a,l,u=0,c={2:"dblclick",3:"tripleclick",4:"quadclick"};t.addListener(e,"mousedown",function(e){if(0!=t.getButton(e))u=0;else{var r=Math.abs(e.clientX-s)>5||Math.abs(e.clientY-a)>5;(!l||r)&&(u=0),u+=1,l&&clearTimeout(l),l=setTimeout(function(){l=null},n[u-1]||600)}if(1==u&&(s=e.clientX,a=e.clientY),i[o]("mousedown",e),u>4)u=0;else if(u>1)return i[o](c[u],e)}),r.isOldIE&&t.addListener(e,"dblclick",function(e){u=2,l&&clearTimeout(l),l=setTimeout(function(){l=null},n[u-1]||600),i[o]("mousedown",e),i[o](c[u],e)})},t.addCommandKeyListener=function(e,i){var o=t.addListener;if(r.isOldGecko||r.isOpera&&!("KeyboardEvent"in window)){var s=null;o(e,"keydown",function(e){s=e.keyCode}),o(e,"keypress",function(e){return n(i,e,s)})}else{var a=null;o(e,"keydown",function(e){return a=e.keyIdentifier||e.keyCode,n(i,e,e.keyCode)})}},window.postMessage&&!r.isOldIE){var o=1;t.nextTick=function(e,n){n=n||window;var i="zero-timeout-message-"+o;t.addListener(n,"message",function r(o){o.data==i&&(t.stopPropagation(o),t.removeListener(n,"message",r),e())}),n.postMessage(i,"*")}}else t.nextTick=function(e,t){t=t||window,window.setTimeout(e,0)}}),define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t){var n=e("./oop"),i=function(){var e={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,meta:8,command:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}};for(var t in e.FUNCTION_KEYS){var i=e.FUNCTION_KEYS[t].toLowerCase();e[i]=parseInt(t,10)}return n.mixin(e,e.MODIFIER_KEYS),n.mixin(e,e.PRINTABLE_KEYS),n.mixin(e,e.FUNCTION_KEYS),e.enter=e["return"],e.escape=e.esc,e.del=e["delete"],e[173]="-",e}();n.mixin(t,i),t.keyCodeToString=function(e){return(i[e]||String.fromCharCode(e)).toLowerCase()}}),define("ace/lib/oop",["require","exports","module"],function(e,t){t.inherits=function(){var e=function(){};return function(t,n){e.prototype=n.prototype,t.super_=n.prototype,t.prototype=new e,t.prototype.constructor=t}}(),t.mixin=function(e,t){for(var n in t)e[n]=t[n]},t.implement=function(e,n){t.mixin(e,n)}}),define("ace/lib/useragent",["require","exports","module"],function(e,t){var n=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),i=navigator.userAgent;t.isWin="win"==n,t.isMac="mac"==n,t.isLinux="linux"==n,t.isIE="Microsoft Internet Explorer"==navigator.appName&&parseFloat(navigator.userAgent.match(/MSIE ([0-9]+[\.0-9]+)/)[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=window.controllers&&"Gecko"===window.navigator.product,t.isOldGecko=t.isGecko&&parseInt((navigator.userAgent.match(/rv\:(\d+)/)||[])[1],10)<4,t.isOpera=window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),t.isWebKit=parseFloat(i.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(i.split(" Chrome/")[1])||void 0,t.isAIR=i.indexOf("AdobeAIR")>=0,t.isIPad=i.indexOf("iPad")>=0,t.isTouchPad=i.indexOf("TouchPad")>=0,t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS}}),define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands"],function(e,t){e("./lib/fixoldbrowsers");var n=e("./lib/oop"),i=e("./lib/lang"),r=e("./lib/useragent"),o=e("./keyboard/textinput").TextInput,s=e("./mouse/mouse_handler").MouseHandler,a=e("./mouse/fold_handler").FoldHandler,l=e("./keyboard/keybinding").KeyBinding,u=e("./edit_session").EditSession,c=e("./search").Search,h=e("./range").Range,f=e("./lib/event_emitter").EventEmitter,d=e("./commands/command_manager").CommandManager,p=e("./commands/default_commands").commands,g=function(e,t){var n=e.getContainerElement();this.container=n,this.renderer=e,this.commands=new d(r.isMac?"mac":"win",p),this.textInput=new o(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.keyBinding=new l(this),this.$mouseHandler=new s(this),new a(this),this.$blockScrolling=0,this.$search=(new c).set({wrap:!0}),this.setSession(t||new u(""))};!function(){n.implement(this,f),this.setKeyboardHandler=function(e){this.keyBinding.setKeyboardHandler(e)},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session!=e){if(this.session){var t=this.session;this.session.removeEventListener("change",this.$onDocumentChange),this.session.removeEventListener("changeMode",this.$onChangeMode),this.session.removeEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.session.removeEventListener("changeTabSize",this.$onChangeTabSize),this.session.removeEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.session.removeEventListener("changeWrapMode",this.$onChangeWrapMode),this.session.removeEventListener("onChangeFold",this.$onChangeFold),this.session.removeEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.session.removeEventListener("changeBackMarker",this.$onChangeBackMarker),this.session.removeEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.session.removeEventListener("changeAnnotation",this.$onChangeAnnotation),this.session.removeEventListener("changeOverwrite",this.$onCursorChange),this.session.removeEventListener("changeScrollTop",this.$onScrollTopChange),this.session.removeEventListener("changeLeftTop",this.$onScrollLeftChange);var n=this.session.getSelection();n.removeEventListener("changeCursor",this.$onCursorChange),n.removeEventListener("changeSelection",this.$onSelectionChange)}this.session=e,this.$onDocumentChange=this.onDocumentChange.bind(this),e.addEventListener("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.addEventListener("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.addEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.addEventListener("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.addEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.addEventListener("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.addEventListener("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.addEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.addEventListener("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.addEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.addEventListener("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.addEventListener("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.addEventListener("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.addEventListener("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.addEventListener("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.addEventListener("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull(),this._emit("changeSession",{session:e,oldSession:t})}},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?1==t?this.navigateFileEnd():-1==t&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e){this.renderer.setTheme(e)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.setFontSize=function(e){this.container.style.fontSize=e,this.renderer.updateFontSize()},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var e=this;this.$highlightPending=!0,setTimeout(function(){e.$highlightPending=!1;var t=e.session.findMatchingBracket(e.getCursorPosition());if(t){var n=new h(t.row,t.column,t.row,t.column+1);e.session.$bracketHighlight=e.session.addMarker(n,"ace_bracket","text")}},10)}},this.focus=function(){var e=this;setTimeout(function(){e.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus"))},this.onBlur=function(){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur"))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(e){var t,n=e.data,i=n.range;t=i.start.row==i.end.row&&"insertLines"!=n.action&&"removeLines"!=n.action?i.end.row:1/0,this.renderer.updateLines(i.start.row,t),this._emit("change",e),this.$cursorChange()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||this.renderer.scrollCursorIntoView(),this.$highlightBrackets(),this.$updateHighlightActiveLine(),this._emit("changeSelection")},this.$updateHighlightActiveLine=function(){var e=this.getSession();if(e.$highlightLineMarker&&e.removeMarker(e.$highlightLineMarker),e.$highlightLineMarker=null,this.$highlightActiveLine){var t=this.getCursorPosition(),n=this.session.getFoldLine(t.row);if("line"!=this.getSelectionStyle()||!this.selection.isMultiLine()){var i;i=n?new h(n.start.row,0,n.end.row+1,0):new h(t.row,0,t.row+1,0),e.$highlightLineMarker=e.addMarker(i,"ace_active-line","background")}}},this.onSelectionChange=function(){var e=this.session;if(e.$selectionMarker&&e.removeMarker(e.$selectionMarker),e.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var t=this.selection.getRange(),n=this.getSelectionStyle();e.$selectionMarker=e.addMarker(t,"ace_selection",n)}var i=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(i),this._emit("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(!t.isEmpty()&&!t.isMultiLine()){var n=t.start.column-1,i=t.end.column+1,r=e.getLine(t.start.row),o=r.length,s=r.substring(Math.max(n,0),Math.min(i,o));if(!(n>=0&&/^[\w\d]/.test(s)||o>=i&&/[\w\d]$/.test(s))&&(s=r.substring(t.start.column,t.end.column),/^[\w\d]+$/.test(s))){var a=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:s});return a}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(){this.renderer.updateText()},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getCopyText=function(){var e="";return this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange())),this._emit("copy",e),e},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e){this.$readOnly||(this._emit("paste",e),this.insert(e))},this.insert=function(e){var t=this.session,n=t.getMode(),i=this.getCursorPosition();if(this.getBehavioursEnabled()){var r=n.transformAction(t.getState(i.row),"insertion",this,t,e);r&&(e=r.text)}if(e=e.replace("	",this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()){var o=new h.fromPoints(i,i);o.end.column+=e.length,this.session.remove(o)}}else i=this.session.remove(this.getSelectionRange()),this.clearSelection();this.clearSelection();var s=i.column,a=t.getState(i.row),l=n.checkOutdent(a,t.getLine(i.row),e),u=t.getLine(i.row),c=n.getNextLineIndent(a,u.slice(0,i.column),t.getTabString()),f=t.insert(i,e);r&&r.selection&&(2==r.selection.length?this.selection.setSelectionRange(new h(i.row,s+r.selection[0],i.row,s+r.selection[1])):this.selection.setSelectionRange(new h(i.row+r.selection[0],r.selection[1],i.row+r.selection[2],r.selection[3])));var a=t.getState(i.row);if(t.getDocument().isNewLine(e)){this.moveCursorTo(i.row+1,0);
for(var d=t.getTabSize(),p=Number.MAX_VALUE,g=i.row+1;g<=f.row;++g){var m=0;u=t.getLine(g);for(var v=0;v<u.length;++v)if("	"==u.charAt(v))m+=d;else{if(" "!=u.charAt(v))break;m+=1}/[^\s]/.test(u)&&(p=Math.min(m,p))}for(var g=i.row+1;g<=f.row;++g){var y=p;u=t.getLine(g);for(var v=0;v<u.length&&y>0;++v)"	"==u.charAt(v)?y-=d:" "==u.charAt(v)&&(y-=1);t.remove(new h(g,0,g,v))}t.indentRows(i.row+1,f.row,c)}l&&n.autoOutdent(a,t,i.row)},this.onTextInput=function(e){this.keyBinding.onTextInput(e)},this.onCommandKey=function(e,t,n){this.keyBinding.onCommandKey(e,t,n)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.$mouseHandler.setScrollSpeed(e)},this.getScrollSpeed=function(){return this.$mouseHandler.getScrollSpeed()},this.setDragDelay=function(e){this.$mouseHandler.setDragDelay(e)},this.getDragDelay=function(){return this.$mouseHandler.getDragDelay()},this.$selectionStyle="line",this.setSelectionStyle=function(e){this.$selectionStyle!=e&&(this.$selectionStyle=e,this.onSelectionChange(),this._emit("changeSelectionStyle",{data:e}))},this.getSelectionStyle=function(){return this.$selectionStyle},this.$highlightActiveLine=!0,this.setHighlightActiveLine=function(e){this.$highlightActiveLine!=e&&(this.$highlightActiveLine=e,this.$updateHighlightActiveLine())},this.getHighlightActiveLine=function(){return this.$highlightActiveLine},this.$highlightGutterLine=!0,this.setHighlightGutterLine=function(e){this.$highlightGutterLine!=e&&(this.renderer.setHighlightGutterLine(e),this.$highlightGutterLine=e)},this.getHighlightGutterLine=function(){return this.$highlightGutterLine},this.$highlightSelectedWord=!0,this.setHighlightSelectedWord=function(e){this.$highlightSelectedWord!=e&&(this.$highlightSelectedWord=e,this.$onSelectionChange())},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.$readOnly=!1,this.setReadOnly=function(e){this.$readOnly=e},this.getReadOnly=function(){return this.$readOnly},this.$modeBehaviours=!0,this.setBehavioursEnabled=function(e){this.$modeBehaviours=e},this.getBehavioursEnabled=function(){return this.$modeBehaviours},this.setShowFoldWidgets=function(e){var t=this.renderer.$gutterLayer;t.getShowFoldWidgets()!=e&&(this.renderer.$gutterLayer.setShowFoldWidgets(e),this.$showFoldWidgets=e,this.renderer.updateFull())},this.getShowFoldWidgets=function(){return this.renderer.$gutterLayer.getShowFoldWidgets()},this.setFadeFoldWidgets=function(e){this.renderer.setFadeFoldWidgets(e)},this.getFadeFoldWidgets=function(){return this.renderer.getFadeFoldWidgets()},this.remove=function(e){this.selection.isEmpty()&&("left"==e?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,i=n.getState(t.start.row),r=n.getMode().transformAction(i,"deletion",this,n,t);r&&(t=r)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(this.selection.isEmpty()){var e=this.getCursorPosition(),t=e.column;if(0!==t){var n,i,r=this.session.getLine(e.row);t<r.length?(n=r.charAt(t)+r.charAt(t-1),i=new h(e.row,t-1,e.row,t+1)):(n=r.charAt(t-1)+r.charAt(t-2),i=new h(e.row,t-2,e.row,t)),this.session.replace(i,n)}}},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(!(t.start.row<t.end.row||t.start.column<t.end.column)){var n;if(this.session.getUseSoftTabs()){var r=e.getTabSize(),o=this.getCursorPosition(),s=e.documentToScreenColumn(o.row,o.column),a=r-s%r;n=i.stringRepeat(" ",a)}else n="	";return this.insert(n)}var l=this.$getSelectedRows();e.indentRows(l.first,l.last,"	")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.removeLines=function(){var e,t=this.$getSelectedRows();e=0===t.first||t.last+1<this.session.getLength()?new h(t.first,0,t.last+1,0):new h(t.first-1,this.session.getLine(t.first-1).length,t.last,this.session.getLine(t.last).length),this.session.remove(e),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,n=e.getRange();if(n.isEmpty()){var i=n.start.row;t.duplicateLines(i,i)}else{var r=e.isBackwards(),o=e.isBackwards()?n.start:n.end,s=t.insert(o,t.getTextRange(n),!1);n.start=o,n.end=s,e.setSelectionRange(n,r)}},this.moveLinesDown=function(){this.$moveLines(function(e,t){return this.session.moveLinesDown(e,t)})},this.moveLinesUp=function(){this.$moveLines(function(e,t){return this.session.moveLinesUp(e,t)})},this.moveText=function(e,t){return this.$readOnly?null:this.session.moveText(e,t)},this.copyLinesUp=function(){this.$moveLines(function(e,t){return this.session.duplicateLines(e,t),0})},this.copyLinesDown=function(){this.$moveLines(function(e,t){return this.session.duplicateLines(e,t)})},this.$moveLines=function(e){var t=this.$getSelectedRows(),n=this.selection;if(!n.isMultiLine())var i=n.getRange(),r=n.isBackwards();var o=e.call(this,t.first,t.last);i?(i.start.row+=o,i.end.row+=o,n.setSelectionRange(i,r)):(n.setSelectionAnchor(t.last+o+1,0),n.$moveSelection(function(){n.moveCursorTo(t.first+o,0)}))},this.$getSelectedRows=function(){var e=this.getSelectionRange().collapseRows();return{first:e.start.row,last:e.end.row}},this.onCompositionStart=function(){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var n=this.renderer,i=this.renderer.layerConfig,r=e*Math.floor(i.height/i.lineHeight);this.$blockScrolling++,1==t?this.selection.$moveSelection(function(){this.moveCursorBy(r,0)}):0==t&&(this.selection.moveCursorBy(r,0),this.selection.clearSelection()),this.$blockScrolling--;var o=n.scrollTop;n.scrollBy(0,r*i.lineHeight),null!=t&&n.scrollCursorIntoView(null,.5),n.animateScrolling(o)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,n,i){this.renderer.scrollToLine(e,t,n,i)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e){var t=this.getCursorPosition(),n=this.session.getBracketRange(t);if(!n){if(n=this.find({needle:/[{}()\[\]]/g,preventScroll:!0,start:{row:t.row,column:t.column-1}}),!n)return;var i=n.start;i.row==t.row&&Math.abs(i.column-t.column)<2&&(n=this.session.getBracketRange(i))}i=n&&n.cursor||i,i&&(e?n&&n.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(i.row,i.column):(this.clearSelection(),this.moveCursorTo(i.row,i.column)))},this.gotoLine=function(e,t,n){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.$blockScrolling+=1,this.moveCursorTo(e-1,t||0),this.$blockScrolling-=1,this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,n)},this.navigateTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.navigateUp=function(e){this.selection.clearSelection(),e=e||1,this.selection.moveCursorBy(-e,0)},this.navigateDown=function(e){this.selection.clearSelection(),e=e||1,this.selection.moveCursorBy(e,0)},this.navigateLeft=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorLeft();else{var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateRight=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorRight();else{var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){var e=this.renderer.scrollTop;this.selection.moveCursorFileEnd(),this.clearSelection(),this.renderer.animateScrolling(e)},this.navigateFileStart=function(){var e=this.renderer.scrollTop;this.selection.moveCursorFileStart(),this.clearSelection(),this.renderer.animateScrolling(e)},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var n=this.$search.find(this.session),i=0;return n?(this.$tryReplace(n,e)&&(i=1),null!==n&&(this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end)),i):i},this.replaceAll=function(e,t){t&&this.$search.set(t);var n=this.$search.findAll(this.session),i=0;if(!n.length)return i;this.$blockScrolling+=1;var r=this.getSelectionRange();this.clearSelection(),this.selection.moveCursorTo(0,0);for(var o=n.length-1;o>=0;--o)this.$tryReplace(n[o],e)&&i++;return this.selection.setSelectionRange(r),this.$blockScrolling-=1,i},this.$tryReplace=function(e,t){var n=this.session.getTextRange(e);return t=this.$search.replace(n,t),null!==t?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,i){t||(t={}),"string"==typeof e||e instanceof RegExp?t.needle=e:"object"==typeof e&&n.mixin(t,e);var r=this.selection.getRange();null==t.needle&&(e=this.session.getTextRange(r)||this.$search.$options.needle,e||(r=this.session.getWordRange(r.start.row,r.start.column),e=this.session.getTextRange(r)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:r});var o=this.$search.find(this.session);return t.preventScroll?o:o?(this.revealRange(o,i),o):(t.backwards?r.start=r.end:r.end=r.start,this.selection.setRange(r),void 0)},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.$blockScrolling+=1,this.session.unfold(e),this.selection.setSelectionRange(e),this.$blockScrolling-=1;var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),0!=t&&this.renderer.animateScrolling(n)},this.undo=function(){this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy()}}.call(g.prototype),t.Editor=g}),define("ace/lib/lang",["require","exports","module"],function(e,t){t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){return new Array(t+1).join(e)};var n=/^\s\s*/,i=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(n,"")},t.stringTrimRight=function(e){return e.replace(i,"")},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){for(var t=[],n=0,i=e.length;i>n;n++)t[n]=e[n]&&"object"==typeof e[n]?this.copyObject(e[n]):e[n];return t},t.deepCopy=function(e){if("object"!=typeof e)return e;var t=e.constructor();for(var n in e)t[n]="object"==typeof e[n]?this.deepCopy(e[n]):e[n];return t},t.arrayToMap=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,function(e){n.push({offset:arguments[arguments.length-2],length:e.length})}),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},i=function(e){return i.cancel(),t=setTimeout(n,e||0),i};return i.schedule=i,i.call=function(){return this.cancel(),e(),i},i.cancel=function(){return clearTimeout(t),t=null,i},i}}),define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom"],function(e,t){var n=e("../lib/event"),i=e("../lib/useragent"),r=e("../lib/dom"),o=function(e,t){function o(e){try{e?(u.value=c,u.selectionStart=0,u.selectionEnd=1):u.select()}catch(t){}}function s(e){if(!f){var n=e||u.value;n&&(n.length>1&&(n.charAt(0)==c?n=n.substr(1):n.charAt(n.length-1)==c&&(n=n.slice(0,-1))),n&&n!=c&&(d?t.onPaste(n):t.onTextInput(n)))}f=!1,d=!1,o(!0)}function a(){return document.activeElement===u}function l(){setTimeout(function(){p&&(u.style.cssText=p,p=""),s(),null==t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=!0,t.renderer.$moveTextAreaToCursor())},0)}var u=r.createElement("textarea");u.className="ace_text-input",i.isTouchPad&&u.setAttribute("x-palm-disable-auto-cap",!0),u.wrap="off",u.spellcheck=!1,u.style.top="-2em",e.insertBefore(u,e.firstChild);var c=i.isIE?"":"\0";o(!0),a()&&t.onFocus();var h=!1,f=!1,d=!1,p="",g=function(e){h||s(e.data),setTimeout(function(){h||o(!0)},0)},m=function(){setTimeout(function(){h||""!=u.value&&s()},0)},v=function(){h=!0,t.onCompositionStart(),setTimeout(y,0)},y=function(){h&&t.onCompositionUpdate(u.value)},E=function(){h=!1,t.onCompositionEnd()},A=function(e){f=!0;var n=t.getCopyText();n?u.value=n:e.preventDefault(),o(),setTimeout(function(){s()},0)},b=function(e){f=!0;var n=t.getCopyText();n?(u.value=n,t.onCut()):e.preventDefault(),o(),setTimeout(function(){s()},0)};if(n.addCommandKeyListener(u,t.onCommandKey.bind(t)),n.addListener(u,"input",g),i.isOldIE){var w={13:1,27:1};n.addListener(u,"keyup",function(e){h&&(!u.value||w[e.keyCode])&&setTimeout(E,0),(0|u.value.charCodeAt(0))<129||(h?y():v())}),n.addListener(u,"propertychange",function(){u.value!=c&&setTimeout(s,0)})}n.addListener(u,"paste",function(e){d=!0,e.clipboardData&&e.clipboardData.getData?(s(e.clipboardData.getData("text/plain")),e.preventDefault()):m()}),"onbeforecopy"in u&&"undefined"!=typeof clipboardData?(n.addListener(u,"beforecopy",function(e){if(!p){var n=t.getCopyText();n?clipboardData.setData("Text",n):e.preventDefault()}}),n.addListener(e,"keydown",function(e){if(e.ctrlKey&&88==e.keyCode){var i=t.getCopyText();i&&(clipboardData.setData("Text",i),t.onCut()),n.preventDefault(e)}}),n.addListener(u,"cut",b)):!i.isOpera||"KeyboardEvent"in window?(n.addListener(u,"copy",A),n.addListener(u,"cut",b)):n.addListener(e,"keydown",function(e){if((!i.isMac||e.metaKey)&&e.ctrlKey&&(88==e.keyCode||67==e.keyCode)){var n=t.getCopyText();n&&(u.value=n,u.select(),88==e.keyCode&&t.onCut())}}),n.addListener(u,"compositionstart",v),i.isGecko&&n.addListener(u,"text",y),i.isWebKit&&n.addListener(u,"keyup",y),n.addListener(u,"compositionend",E),n.addListener(u,"blur",function(){t.onBlur()}),n.addListener(u,"focus",function(){t.onFocus(),o()}),this.focus=function(){o(),u.focus()},this.blur=function(){u.blur()},this.isFocused=a,this.getElement=function(){return u},this.onContextMenu=function(e){p||(p=u.style.cssText),u.style.cssText="position:fixed; z-index:100000;"+(i.isIE?"background:rgba(0, 0, 0, 0.03); opacity:0.1;":"")+"left:"+(e.clientX-2)+"px; top:"+(e.clientY-2)+"px;",t.selection.isEmpty()?u.value="":o(!0),"mousedown"==e.type&&(t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=null),i.isWin&&(i.isGecko||i.isIE)&&n.capture(t.container,function(e){u.style.left=e.clientX-2+"px",u.style.top=e.clientY-2+"px"},l))},this.onContextMenuClose=l,i.isGecko||n.addListener(u,"contextmenu",function(e){t.textInput.onContextMenu(e),l()})};t.TextInput=o}),define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop"],function(e,t){var n=e("../lib/event"),i=e("../lib/useragent"),r=e("./default_handlers").DefaultHandlers,o=e("./default_gutter_handler").GutterHandler,s=e("./mouse_event").MouseEvent,a=e("./dragdrop").DragdropHandler,l=function(e){this.editor=e,new r(this),new o(this),new a(this),n.addListener(e.container,"mousedown",function(t){return e.focus(),n.preventDefault(t)});var t=e.renderer.getMouseEventTarget();n.addListener(t,"click",this.onMouseEvent.bind(this,"click")),n.addListener(t,"mousemove",this.onMouseMove.bind(this,"mousemove")),n.addMultiMouseDownListener(t,[300,300,250],this,"onMouseEvent"),n.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel"));var i=e.renderer.$gutter;n.addListener(i,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),n.addListener(i,"click",this.onMouseEvent.bind(this,"gutterclick")),n.addListener(i,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),n.addListener(i,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"))};!function(){this.$scrollSpeed=1,this.setScrollSpeed=function(e){this.$scrollSpeed=e},this.getScrollSpeed=function(){return this.$scrollSpeed},this.onMouseEvent=function(e,t){this.editor._emit(e,new s(t,this.editor))},this.$dragDelay=250,this.setDragDelay=function(e){this.$dragDelay=e},this.getDragDelay=function(){return this.$dragDelay},this.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;n&&n.length&&this.editor._emit(e,new s(t,this.editor))},this.onMouseWheel=function(e,t){var n=new s(t,this.editor);n.speed=2*this.$scrollSpeed,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){t&&this.setState(t),this.x=e.x,this.y=e.y,this.isMousePressed=!0;var r=this.editor.renderer;r.$keepTextAreaAtCursor&&(r.$keepTextAreaAtCursor=null);var o=this,s=function(e){o.x=e.clientX,o.y=e.clientY},a=function(e){clearInterval(u),o[o.state+"End"]&&o[o.state+"End"](e),o.$clickSelection=null,null==r.$keepTextAreaAtCursor&&(r.$keepTextAreaAtCursor=!0,r.$moveTextAreaToCursor()),o.isMousePressed=!1},l=function(){o[o.state]&&o[o.state]()};if(i.isOldIE&&"dblclick"==e.domEvent.type)return setTimeout(function(){l(),a(e.domEvent)}),void 0;n.capture(this.editor.container,s,a);var u=setInterval(l,20)}}.call(l.prototype),t.MouseHandler=l}),define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/useragent"],function(e,t){function n(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e));var n=["select","startSelect","drag","dragEnd","dragWait","dragWaitEnd","startDrag","focusWait"];n.forEach(function(t){e[t]=this[t]},this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange"),e.$focusWaitTimout=250}function i(e,t,n,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))}function r(e,t){if(e.start.row==e.end.row)var n=2*t.column-e.start.column-e.end.column;else var n=2*t.row-e.start.row-e.end.row;return 0>n?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}var o=e("../lib/dom"),s=(e("../lib/useragent"),5);!function(){this.onMouseDown=function(e){var t=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var i=this.editor,r=e.getButton();if(0!==r){var o=i.getSelectionRange(),s=o.isEmpty();return s&&(i.moveCursorToPosition(n),i.selection.clearSelection()),i.textInput.onContextMenu(e.domEvent),void 0}return t&&!i.isFocused()&&(i.focus(),this.$focusWaitTimout&&!this.$clickSelection)?(this.setState("focusWait"),this.captureMouse(e),e.preventDefault()):(!t||this.$clickSelection||e.getShiftKey()?this.startSelect(n):t&&(this.mousedownEvent.time=(new Date).getTime(),this.setState("dragWait")),this.captureMouse(e),e.preventDefault())},this.startSelect=function(e){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y),this.mousedownEvent.getShiftKey()?this.editor.selection.selectToPosition(e):this.$clickSelection||(this.editor.moveCursorToPosition(e),this.editor.selection.clearSelection()),this.setState("select")},this.select=function(){var e,t=this.editor,n=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var i=this.$clickSelection.comparePoint(n);if(-1==i)e=this.$clickSelection.end;else if(1==i)e=this.$clickSelection.start;else{var o=r(this.$clickSelection,n);n=o.cursor,e=o.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(n),t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,n=this.editor,i=n.renderer.screenToTextCoordinates(this.x,this.y),o=n.selection[e](i.row,i.column);if(this.$clickSelection){var s=this.$clickSelection.comparePoint(o.start),a=this.$clickSelection.comparePoint(o.end);if(-1==s&&0>=a)t=this.$clickSelection.end,(o.end.row!=i.row||o.end.column!=i.column)&&(i=o.start);else if(1==a&&s>=0)t=this.$clickSelection.start,(o.start.row!=i.row||o.start.column!=i.column)&&(i=o.end);else if(-1==s&&1==a)i=o.end,t=o.start;else{var l=r(this.$clickSelection,i);i=l.cursor,t=l.anchor}n.selection.setSelectionAnchor(t.row,t.column)}n.selection.selectToPosition(i),n.renderer.scrollCursorIntoView()},this.startDrag=function(){var e=this.editor;this.setState("drag"),this.dragRange=e.getSelectionRange();var t=e.getSelectionStyle();this.dragSelectionMarker=e.session.addMarker(this.dragRange,"ace_selection",t),e.clearSelection(),o.addCssClass(e.container,"ace_dragging"),this.$dragKeybinding||(this.$dragKeybinding={handleKeyboard:function(e,t,n){return"esc"==n?{command:this.command}:void 0},command:{exec:function(e){var t=e.$mouseHandler;t.dragCursor=null,t.dragEnd(),t.startSelect()}}}),e.keyBinding.addKeyboardHandler(this.$dragKeybinding)},this.focusWait=function(){var e=i(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),t=(new Date).getTime();(e>s||t-this.mousedownEvent.time>this.$focusWaitTimout)&&this.startSelect()},this.dragWait=function(){var e=i(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),t=(new Date).getTime(),n=this.editor;e>s?this.startSelect(this.mousedownEvent.getDocumentPosition()):t-this.mousedownEvent.time>n.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(e){this.mousedownEvent.domEvent=e,this.startSelect()},this.drag=function(){var e=this.editor;this.dragCursor=e.renderer.screenToTextCoordinates(this.x,this.y),e.moveCursorToPosition(this.dragCursor),e.renderer.scrollCursorIntoView()},this.dragEnd=function(e){var t=this.editor,n=this.dragCursor,i=this.dragRange;if(o.removeCssClass(t.container,"ace_dragging"),t.session.removeMarker(this.dragSelectionMarker),t.keyBinding.removeKeyboardHandler(this.$dragKeybinding),n){if(t.clearSelection(),e&&(e.ctrlKey||e.altKey)){var r=t.session,s=i;s.end=r.insert(n,r.getTextRange(i)),s.start=n}else{if(i.contains(n.row,n.column))return;var s=t.moveText(i,n)}s&&t.selection.setSelectionRange(s)}},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),n=this.editor,i=n.session,r=i.getBracketRange(t);return r?(r.isEmpty()&&(r.start.column--,r.end.column++),this.$clickSelection=r,this.setState("select"),void 0):(this.$clickSelection=n.selection.getWordRange(t.row,t.column),this.setState("selectByWords"),void 0)},this.onTripleClick=function(e){var t=e.getDocumentPosition(),n=this.editor;this.setState("selectByLines"),this.$clickSelection=n.selection.getLineRange(t.row)},this.onQuadClick=function(){var e=this.editor;e.selectAll(),this.$clickSelection=e.getSelectionRange(),this.setState("null")},this.onMouseWheel=function(e){if(!e.getShiftKey()&&!e.getAccelKey()){var t=this.editor,n=t.renderer.isScrollableBy(e.wheelX*e.speed,e.wheelY*e.speed);if(n)this.$passScrollEvent=!1;else{if(this.$passScrollEvent)return;if(!this.$scrollStopTimeout){var i=this;this.$scrollStopTimeout=setTimeout(function(){i.$passScrollEvent=!0,i.$scrollStopTimeout=null},200)}}return t.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.preventDefault()}}}.call(n.prototype),t.DefaultHandlers=n}),define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event"],function(e,t){function n(e){function t(){h=i.createElement("div"),h.className="ace_gutter-tooltip",h.style.maxWidth="500px",h.style.display="none",a.container.appendChild(h)}function n(){h||t();var e=c.getDocumentPosition().row,n=l.$annotations[e];if(!n)return o();var i=a.session.getLength();if(e==i){var r=a.renderer.pixelToScreenCoordinates(0,c.y).row,u=c.$pos;if(r>a.session.documentToScreenRow(u.row,u.column))return o()}f!=n&&(f=n.text.join("<br/>"),h.style.display="block",h.innerHTML=f,a.on("mousewheel",o),s(c))}function o(){u&&(u=clearTimeout(u)),f&&(h.style.display="none",f=null,a.removeEventListener("mousewheel",o))}function s(e){var t=a.renderer.$gutter.getBoundingClientRect();h.style.left=e.x-t.left+15+"px",e.y+3*a.renderer.lineHeight+15<t.bottom?(h.style.bottom="",h.style.top=e.y-t.top+15+"px"):(h.style.top="",h.style.bottom=t.bottom-e.y+5+"px")}var a=e.editor,l=a.renderer.$gutterLayer;e.editor.setDefaultHandler("guttermousedown",function(t){if(a.isFocused()){var n=l.getRegion(t);if(!n){var i=t.getDocumentPosition().row,r=a.session.selection;if(t.getShiftKey())r.selectTo(i,0);else{if(2==t.domEvent.detail)return a.selectAll(),t.preventDefault();e.$clickSelection=a.selection.getLineRange(i)}return e.captureMouse(t,"selectByLines"),t.preventDefault()}}});var u,c,h,f;e.editor.setDefaultHandler("guttermousemove",function(t){var r=t.domEvent.target||t.domEvent.srcElement;return i.hasCssClass(r,"ace_fold-widget")?o():(f&&s(t),c=t,u||(u=setTimeout(function(){u=null,c&&!e.isMousePressed?n():o()},50)),void 0)}),r.addListener(a.renderer.$gutter,"mouseout",function(){c=null,f&&!u&&(u=setTimeout(function(){u=null,o()},50))})}var i=e("../lib/dom"),r=e("../lib/event");t.GutterHandler=n}),define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t){var n=e("../lib/event"),i=e("../lib/useragent"),r=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};!function(){this.stopPropagation=function(){n.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){n.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var e=this.editor;if(e.getReadOnly())this.$inSelection=!1;else{var t=e.getSelectionRange();if(t.isEmpty())this.$inSelection=!1;else{var n=this.getDocumentPosition();this.$inSelection=t.contains(n.row,n.column)}}return this.$inSelection},this.getButton=function(){return n.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=i.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}.call(r.prototype)}),define("ace/mouse/dragdrop",["require","exports","module","ace/lib/event"],function(e,t){var n=e("../lib/event"),i=function(e){var t,i,r,o,s,a,l,u=e.editor,c=0,h=u.container;n.addListener(h,"dragenter",function(e){if(c++,!t){s=u.getSelectionRange(),a=u.selection.isBackwards();var i=u.getSelectionStyle();t=u.session.addMarker(s,"ace_selection",i),u.clearSelection(),clearInterval(o),o=setInterval(f,20)}return n.preventDefault(e)}),n.addListener(h,"dragover",function(e){return i=e.clientX,r=e.clientY,n.preventDefault(e)});var f=function(){l=u.renderer.screenToTextCoordinates(i,r),u.moveCursorToPosition(l),u.renderer.scrollCursorIntoView()};n.addListener(h,"dragleave",function(e){return c--,c>0?void 0:(console.log(e.type,c,e.target),clearInterval(o),u.session.removeMarker(t),t=null,u.selection.setSelectionRange(s,a),n.preventDefault(e))}),n.addListener(h,"drop",function(e){return console.log(e.type,c,e.target),c=0,clearInterval(o),u.session.removeMarker(t),t=null,s.end=u.session.insert(l,e.dataTransfer.getData("Text")),s.start=l,u.focus(),u.selection.setSelectionRange(s),n.preventDefault(e)})};t.DragdropHandler=i}),define("ace/mouse/fold_handler",["require","exports","module"],function(e,t){function n(e){e.on("click",function(t){var n=t.getDocumentPosition(),i=e.session,r=i.getFoldAt(n.row,n.column,1);r&&(t.getAccelKey()?i.removeFold(r):i.expandFold(r),t.stop())}),e.on("gutterclick",function(t){var n=e.renderer.$gutterLayer.getRegion(t);if("foldWidgets"==n){var i=t.getDocumentPosition().row,r=e.session;r.foldWidgets&&r.foldWidgets[i]&&e.session.onFoldWidgetClick(i,t),t.stop()}})}t.FoldHandler=n}),define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t){var n=e("../lib/keys"),i=e("../lib/event"),r=function(e){this.$editor=e,this.$data={},this.$handlers=[],this.setDefaultHandler(e.commands)
};!function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0),this.$data={editor:this.$editor}},this.setKeyboardHandler=function(e){if(this.$handlers[this.$handlers.length-1]!=e){for(;this.$handlers[1];)this.removeKeyboardHandler(this.$handlers[1]);this.addKeyboardHandler(e,1)}},this.addKeyboardHandler=function(e,t){if(e){var n=this.$handlers.indexOf(e);-1!=n&&this.$handlers.splice(n,1),void 0==t?this.$handlers.push(e):this.$handlers.splice(t,0,e),-1==n&&e.attach&&e.attach(this.$editor)}},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return-1==t?!1:(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.$callKeyboardHandlers=function(e,t,n,r){for(var o,s=this.$handlers.length;s--&&(o=this.$handlers[s].handleKeyboard(this.$data,e,t,n,r),!o||!o.command););if(!o||!o.command)return!1;var a=!1,l=this.$editor.commands;return a="null"!=o.command?l.exec(o.command,this.$editor,o.args,r):1!=o.passEvent,a&&r&&-1!=e&&i.stopEvent(r),a},this.onCommandKey=function(e,t,i){var r=n.keyCodeToString(i);this.$callKeyboardHandlers(t,r,i,e)},this.onTextInput=function(e){var t=this.$callKeyboardHandlers(-1,e);t||this.$editor.commands.exec("insertstring",this.$editor,e)}}.call(r.prototype),t.KeyBinding=r}),define("ace/edit_session",["require","exports","module","ace/config","ace/lib/oop","ace/lib/lang","ace/lib/net","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t){var n=e("./config"),i=e("./lib/oop"),r=e("./lib/lang"),o=e("./lib/net"),s=e("./lib/event_emitter").EventEmitter,a=e("./selection").Selection,l=e("./mode/text").Mode,u=e("./range").Range,c=e("./document").Document,h=e("./background_tokenizer").BackgroundTokenizer,f=e("./search_highlight").SearchHighlight,d=function(e,t){this.$modified=!0,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$resetRowCache(0),this.$wrapData=[],this.$foldData=[],this.$rowLengthCache=[],this.$undoSelect=!0,this.$foldData.toString=function(){var e="";return this.forEach(function(t){e+="\n"+t.toString()}),e},"object"==typeof e&&e.getLine?this.setDocument(e):this.setDocument(new c(e)),this.selection=new a(this),this.setMode(t)};!function(){function t(e){return 4352>e?!1:e>=4352&&4447>=e||e>=4515&&4519>=e||e>=4602&&4607>=e||e>=9001&&9002>=e||e>=11904&&11929>=e||e>=11931&&12019>=e||e>=12032&&12245>=e||e>=12272&&12283>=e||e>=12288&&12350>=e||e>=12353&&12438>=e||e>=12441&&12543>=e||e>=12549&&12589>=e||e>=12593&&12686>=e||e>=12688&&12730>=e||e>=12736&&12771>=e||e>=12784&&12830>=e||e>=12832&&12871>=e||e>=12880&&13054>=e||e>=13056&&19903>=e||e>=19968&&42124>=e||e>=42128&&42182>=e||e>=43360&&43388>=e||e>=44032&&55203>=e||e>=55216&&55238>=e||e>=55243&&55291>=e||e>=63744&&64255>=e||e>=65040&&65049>=e||e>=65072&&65106>=e||e>=65108&&65126>=e||e>=65128&&65131>=e||e>=65281&&65376>=e||e>=65504&&65510>=e}i.implement(this,s),this.setDocument=function(e){if(this.doc)throw new Error("Document is already set");this.doc=e,e.on("change",this.onChange.bind(this)),this.on("changeFold",this.onChangeFold.bind(this)),this.bgTokenizer&&(this.bgTokenizer.setDocument(this.getDocument()),this.bgTokenizer.start(0))},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e)return this.$docRowCache=[],this.$screenRowCache=[],void 0;var t=this.$getRowCacheIndex(this.$docRowCache,e)+1,n=this.$docRowCache.length;this.$docRowCache.splice(t,n),this.$screenRowCache.splice(t,n)},this.$getRowCacheIndex=function(e,t){for(var n=0,i=e.length-1;i>=n;){var r=n+i>>1,o=e[r];if(t>o)n=r+1;else{if(!(o>t))return r;i=r-1}}return n&&n-1},this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},this.onChange=function(e){var t=e.data;this.$modified=!0,this.$resetRowCache(t.range.start.row);var n=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&!t.ignore&&(this.$deltasDoc.push(t),n&&0!=n.length&&this.$deltasFold.push({action:"removeFolds",folds:n}),this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(t),this._emit("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveCursorTo(0,0),this.selection.clearSelection(),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var n,i=this.bgTokenizer.getTokens(e),r=0;if(null==t)o=i.length-1,r=this.getLine(e).length;else for(var o=0;o<i.length&&(r+=i[o].value.length,!(r>=t));o++);return n=i[o],n?(n.index=o,n.start=r-n.value.length,n):null},this.highlight=function(e){if(!this.$searchHighlight){var t=new f(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.setUndoManager=function(e){if(this.$undoManager=e,this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel(),e){var t=this;this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.$deltasFold.length&&(t.$deltas.push({group:"fold",deltas:t.$deltasFold}),t.$deltasFold=[]),t.$deltasDoc.length&&(t.$deltas.push({group:"doc",deltas:t.$deltasDoc}),t.$deltasDoc=[]),t.$deltas.length>0&&e.execute({action:"aceupdate",args:[t.$deltas,t]}),t.$deltas=[]},this.$informUndoManager=r.deferredCall(this.$syncInformUndoManager)}},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?r.stringRepeat(" ",this.getTabSize()):"	"},this.$useSoftTabs=!0,this.setUseSoftTabs=function(e){this.$useSoftTabs!==e&&(this.$useSoftTabs=e)},this.getUseSoftTabs=function(){return this.$useSoftTabs},this.$tabSize=4,this.setTabSize=function(e){isNaN(e)||this.$tabSize===e||(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._emit("changeTabSize"))},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&0==e.column%this.$tabSize},this.$overwrite=!1,this.setOverwrite=function(e){this.$overwrite!=e&&(this.$overwrite=e,this._emit("changeOverwrite"))},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._emit("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._emit("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._emit("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._emit("changeBreakpoint",{})},this.setBreakpoint=function(e,t){void 0===t&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._emit("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._emit("changeBreakpoint",{})},this.addMarker=function(e,t,n,i){var r=this.$markerId++,o={range:e,type:n||"line",renderer:"function"==typeof n?n:null,clazz:t,inFront:!!i,id:r};return i?(this.$frontMarkers[r]=o,this._emit("changeFrontMarker")):(this.$backMarkers[r]=o,this._emit("changeBackMarker")),r},this.addDynamicMarker=function(e,t){if(e.update){var n=this.$markerId++;return e.id=n,e.inFront=!!t,t?(this.$frontMarkers[n]=e,this._emit("changeFrontMarker")):(this.$backMarkers[n]=e,this._emit("changeBackMarker")),e}},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];if(t){var n=t.inFront?this.$frontMarkers:this.$backMarkers;t&&(delete n[e],this._emit(t.inFront?"changeFrontMarker":"changeBackMarker"))}},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.setAnnotations=function(e){this.$annotations=e,this._emit("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||{}},this.clearAnnotations=function(){this.$annotations={},this._emit("changeAnnotation",{})},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);this.$autoNewLine=t?t[1]:"\n"},this.getWordRange=function(e,t){var n=this.getLine(e),i=!1;if(t>0&&(i=!!n.charAt(t-1).match(this.tokenRe)),i||(i=!!n.charAt(t).match(this.tokenRe)),i)var r=this.tokenRe;else if(/^\s+$/.test(n.slice(t-1,t+1)))var r=/\s/;else var r=this.nonTokenRe;var o=t;if(o>0){do o--;while(o>=0&&n.charAt(o).match(r));o++}for(var s=t;s<n.length&&n.charAt(s).match(r);)s++;return new u(e,o,e,s)},this.getAWordRange=function(e,t){for(var n=this.getWordRange(e,t),i=this.getLine(n.end.row);i.charAt(n.end.column).match(/[ \t]/);)n.end.column+=1;return n},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.$useWorker=!0,this.setUseWorker=function(e){this.$useWorker!=e&&(this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker())},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._emit("tokenizerUpdate",e)},this.$modes={},this._loadMode=function(t,i){function r(e){return u.$modes[t]?i(u.$modes[t]):(u.$modes[t]=new e.Mode,u.$modes[t].$id=t,u._emit("loadmode",{name:t,mode:u.$modes[t]}),i(u.$modes[t]),void 0)}function s(e,t){return n.get("packaged")?(o.loadScript(n.moduleUrl(e,"mode"),t),void 0):t()}if(this.$modes["null"]||(this.$modes["null"]=this.$modes["ace/mode/text"]=new l),this.$modes[t])return i(this.$modes[t]);var a,u=this;try{a=e(t)}catch(c){}return a&&a.Mode?r(a):(this.$mode||this.$setModePlaceholder(),s(t,function(){e([t],r)}),void 0)},this.$setModePlaceholder=function(){this.$mode=this.$modes["null"];var e=this.$mode.getTokenizer();if(this.bgTokenizer)this.bgTokenizer.setTokenizer(e);else{this.bgTokenizer=new h(e);var t=this;this.bgTokenizer.addEventListener("update",function(e){t._emit("tokenizerUpdate",e)})}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=this.$mode.tokenRe,this.nonTokenRe=this.$mode.nonTokenRe},this.$mode=null,this.$modeId=null,this.setMode=function(e){if(e=e||"null","string"==typeof e){if(this.$modeId==e)return;this.$modeId=e;var t=this;return this._loadMode(e,function(n){t.$modeId===e&&t.setMode(n)}),void 0}if(this.$mode!==e){this.$mode=e,this.$modeId=e.$id,this.$stopWorker(),this.$useWorker&&this.$startWorker();var n=e.getTokenizer();if(void 0!==n.addEventListener){var i=this.onReloadTokenizer.bind(this);n.addEventListener("update",i)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(n);else{this.bgTokenizer=new h(n);var t=this;this.bgTokenizer.addEventListener("update",function(e){t._emit("tokenizerUpdate",e)})}this.bgTokenizer.setDocument(this.getDocument()),this.bgTokenizer.start(0),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,this.$setFolding(e.foldingRules),this._emit("changeMode")}},this.$stopWorker=function(){this.$worker&&this.$worker.terminate(),this.$worker=null},this.$startWorker=function(){if("undefined"==typeof Worker||e.noWorker)this.$worker=null;else try{this.$worker=this.$mode.createWorker(this)}catch(t){console.log("Could not load worker"),console.log(t),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){e=Math.round(Math.max(0,e)),this.$scrollTop!==e&&(this.$scrollTop=e,this._emit("changeScrollTop",e))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){e=Math.round(Math.max(0,e)),this.$scrollLeft!==e&&(this.$scrollLeft=e,this._emit("changeScrollLeft",e))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.screenWidth},this.$computeWidth=function(e){if(this.$modified||e){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var t=this.doc.getAllLines(),n=this.$rowLengthCache,i=0,r=0,o=this.$foldData[r],s=o?o.start.row:1/0,a=t.length,l=0;a>l;l++){if(l>s){if(l=o.end.row+1,l>=a)break;o=this.$foldData[r++],s=o?o.start.row:1/0}null==n[l]&&(n[l]=this.$getStringScreenWidth(t[l])[0]),n[l]>i&&(i=n[l])}this.screenWidth=i}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.undoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=null,i=e.length-1;-1!=i;i--){var r=e[i];"doc"==r.group?(this.doc.revertDeltas(r.deltas),n=this.$getUndoSelection(r.deltas,!0,n)):r.deltas.forEach(function(e){this.addFolds(e.folds)},this)}return this.$fromUndo=!1,n&&this.$undoSelect&&!t&&this.selection.setSelectionRange(n),n}},this.redoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=null,i=0;i<e.length;i++){var r=e[i];"doc"==r.group&&(this.doc.applyDeltas(r.deltas),n=this.$getUndoSelection(r.deltas,!1,n))}return this.$fromUndo=!1,n&&this.$undoSelect&&!t&&this.selection.setSelectionRange(n),n}},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t,n){function i(e){var n="insertText"==e.action||"insertLines"==e.action;return t?!n:n}var r,o,s=e[0],a=!1;i(s)?(r=s.range.clone(),a=!0):(r=u.fromPoints(s.range.start,s.range.start),a=!1);for(var l=1;l<e.length;l++)s=e[l],i(s)?(o=s.range.start,-1==r.compare(o.row,o.column)&&r.setStart(s.range.start),o=s.range.end,1==r.compare(o.row,o.column)&&r.setEnd(s.range.end),a=!0):(o=s.range.start,-1==r.compare(o.row,o.column)&&(r=u.fromPoints(s.range.start,s.range.start)),a=!1);if(null!=n){var c=n.compareRange(r);1==c?r.setStart(n.start):-1==c&&r.setEnd(n.end)}return r},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t){var n=this.getTextRange(e);this.remove(e);var i=t.row,r=t.column;if(!e.isMultiLine()&&e.start.row==i&&e.end.column<r&&(r-=n.length),e.isMultiLine()&&e.end.row<i){var o=this.doc.$split(n);i-=o.length-1}var s=i+e.end.row-e.start.row,a=e.isMultiLine()?e.end.column:r+e.end.column-e.start.column,l=new u(i,r,s,a);return this.insert(l.start,n),l},this.indentRows=function(e,t,n){n=n.replace(/\t/g,this.getTabString());for(var i=e;t>=i;i++)this.insert({row:i,column:0},n)},this.outdentRows=function(e){for(var t=e.collapseRows(),n=new u(0,0,0,0),i=this.getTabSize(),r=t.start.row;r<=t.end.row;++r){var o=this.getLine(r);n.start.row=r,n.end.row=r;for(var s=0;i>s&&" "==o.charAt(s);++s);i>s&&"	"==o.charAt(s)?(n.start.column=s,n.end.column=s+1):(n.start.column=0,n.end.column=s),this.remove(n)}},this.moveLinesUp=function(e,t){if(0>=e)return 0;var n=this.doc.removeLines(e,t);return this.doc.insertLines(e-1,n),-1},this.moveLinesDown=function(e,t){if(t>=this.doc.getLength()-1)return 0;var n=this.doc.removeLines(e,t);return this.doc.insertLines(e+1,n),1},this.duplicateLines=function(e,t){var e=this.$clipRowToDocument(e),t=this.$clipRowToDocument(t),n=this.getLines(e,t);this.doc.insertLines(e,n);var i=t-e+1;return i},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return 0>t?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){if(t=Math.max(0,t),0>e)e=0,t=0;else{var n=this.doc.getLength();e>=n?(e=n-1,t=this.doc.getLine(n-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){if(this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0),e){var t=this.getLength();this.$wrapData=[];for(var n=0;t>n;n++)this.$wrapData.push([]);this.$updateWrapData(0,t-1)}this._emit("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){(this.$wrapLimitRange.min!==e||this.$wrapLimitRange.max!==t)&&(this.$wrapLimitRange.min=e,this.$wrapLimitRange.max=t,this.$modified=!0,this._emit("changeWrapMode"))},this.adjustWrapLimit=function(e){var t=this.$constrainWrapLimit(e);return t!=this.$wrapLimit&&t>0?(this.$wrapLimit=t,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._emit("changeWrapLimit")),!0):!1},this.$constrainWrapLimit=function(e){var t=this.$wrapLimitRange.min;t&&(e=Math.max(t,e));var n=this.$wrapLimitRange.max;return n&&(e=Math.min(n,e)),Math.max(1,e)},this.getWrapLimit=function(){return this.$wrapLimit},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t,n=this.$useWrapMode,i=e.data.action,r=e.data.range.start.row,o=e.data.range.end.row,s=e.data.range.start,a=e.data.range.end,l=null;if(-1!=i.indexOf("Lines")?(o="insertLines"==i?r+e.data.lines.length:r,t=e.data.lines?e.data.lines.length:o-r):t=o-r,0!=t)if(-1!=i.indexOf("remove")){this[n?"$wrapData":"$rowLengthCache"].splice(r,t);var u=this.$foldData;l=this.getFoldsInRange(e.data.range),this.removeFolds(l);var c=this.getFoldLine(a.row),h=0;if(c){c.addRemoveChars(a.row,a.column,s.column-a.column),c.shiftRow(-t);var f=this.getFoldLine(r);f&&f!==c&&(f.merge(c),c=f),h=u.indexOf(c)+1}for(h;h<u.length;h++){var c=u[h];c.start.row>=a.row&&c.shiftRow(-t)}o=r}else{var d;if(n){d=[r,0];for(var p=0;t>p;p++)d.push([]);this.$wrapData.splice.apply(this.$wrapData,d)}else d=Array(t),d.unshift(r,0),this.$rowLengthCache.splice.apply(this.$rowLengthCache,d);var u=this.$foldData,c=this.getFoldLine(r),h=0;if(c){var g=c.range.compareInside(s.row,s.column);0==g?(c=c.split(s.row,s.column),c.shiftRow(t),c.addRemoveChars(o,0,a.column-s.column)):-1==g&&(c.addRemoveChars(r,0,a.column-s.column),c.shiftRow(t)),h=u.indexOf(c)+1}for(h;h<u.length;h++){var c=u[h];c.start.row>=r&&c.shiftRow(t)}}else{t=Math.abs(e.data.range.start.column-e.data.range.end.column),-1!=i.indexOf("remove")&&(l=this.getFoldsInRange(e.data.range),this.removeFolds(l),t=-t);var c=this.getFoldLine(r);c&&c.addRemoveChars(r,s.column,t)}return n&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),n?this.$updateWrapData(r,o):this.$updateRowLengthCache(r,o),l},this.$updateRowLengthCache=function(e,t){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(e,t){var n,i,o=this.doc.getAllLines(),s=this.getTabSize(),a=this.$wrapData,l=this.$wrapLimit,u=e;for(t=Math.min(t,o.length-1);t>=u;)if(i=this.getFoldLine(u,i)){for(n=[],i.walk(function(e,t,i,r){var s;if(e){s=this.$getDisplayTokens(e,n.length),s[0]=d;for(var a=1;a<s.length;a++)s[a]=p}else s=this.$getDisplayTokens(o[t].substring(r,i),n.length);n=n.concat(s)}.bind(this),i.end.row,o[i.end.row].length+1);0!=n.length&&n[n.length-1]>=m;)n.pop();a[i.start.row]=this.$computeWrapSplits(n,l,s),u=i.end.row+1}else n=this.$getDisplayTokens(r.stringTrimRight(o[u])),a[u]=this.$computeWrapSplits(n,l,s),u++};var a=1,c=2,d=3,p=4,g=9,m=10,v=11,y=12;this.$computeWrapSplits=function(e,t){function n(t){var n=e.slice(o,t),r=n.length;n.join("").replace(/12/g,function(){r-=1}).replace(/2/g,function(){r-=1}),s+=r,i.push(s),o=t}if(0==e.length)return[];for(var i=[],r=e.length,o=0,s=0;r-o>t;){var a=o+t;if(e[a]>=m){for(;e[a]>=m;)a++;n(a)}else if(e[a]!=d&&e[a]!=p){for(var l=Math.max(a-10,o-1);a>l&&e[a]<d;)a--;for(;a>l&&e[a]==g;)a--;a>l?n(++a):(a=o+t,n(a))}else{for(a;a!=o-1&&e[a]!=d;a--);if(a>o){n(a);continue}for(a=o+t;a<e.length&&e[a]==p;a++);if(a==e.length)break;n(a)}}return i},this.$getDisplayTokens=function(e,n){var i,r=[];n=n||0;for(var o=0;o<e.length;o++){var s=e.charCodeAt(o);if(9==s){i=this.getScreenTabSize(r.length+n),r.push(v);for(var l=1;i>l;l++)r.push(y)}else 32==s?r.push(m):s>39&&48>s||s>57&&64>s?r.push(g):s>=4352&&t(s)?r.push(a,c):r.push(a)}return r},this.$getStringScreenWidth=function(e,n,i){if(0==n)return[0,0];null==n&&(n=1/0),i=i||0;var r,o;for(o=0;o<e.length&&(r=e.charCodeAt(o),i+=9==r?this.getScreenTabSize(i):r>=4352&&t(r)?2:1,!(i>n));o++);return[i,o]},this.getRowLength=function(e){return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1:1},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var n=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(e,t){var n=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:void 0},this.getScreenTabSize=function(e){return this.$tabSize-e%this.$tabSize},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t){if(0>e)return{row:0,column:0};var n,i,r=0,o=0,s=0,a=0,l=this.$screenRowCache,u=this.$getRowCacheIndex(l,e);if(u>0&&u<l.length)var s=l[u],r=this.$docRowCache[u],c=e>s||e==s&&u==l.length-1;else var c=0!=u||!l.length;for(var h=this.getLength()-1,f=this.getNextFoldLine(r),d=f?f.start.row:1/0;e>=s&&(a=this.getRowLength(r),!(s+a-1>=e||r>=h));)s+=a,r++,r>d&&(r=f.end.row+1,f=this.getNextFoldLine(r,f),d=f?f.start.row:1/0),c&&(this.$docRowCache.push(r),this.$screenRowCache.push(s));if(f&&f.start.row<=r)n=this.getFoldDisplayLine(f),r=f.start.row;else{if(e>=s+a||r>h)return{row:h,column:this.getLine(h).length};n=this.getLine(r),f=null}if(this.$useWrapMode){var p=this.$wrapData[r];p&&(i=p[e-s],e>s&&p.length&&(o=p[e-s-1]||p[p.length-1],n=n.substring(o)))}return o+=this.$getStringScreenWidth(n,t)[1],this.$useWrapMode&&o>=i&&(o=i-1),f?f.idxToPosition(o):{row:r,column:o}},this.documentToScreenPosition=function(e,t){if("undefined"==typeof t)var n=this.$clipPositionToDocument(e.row,e.column);else n=this.$clipPositionToDocument(e,t);e=n.row,t=n.column;var i=0,r=null,o=null;o=this.getFoldAt(e,t,1),o&&(e=o.start.row,t=o.start.column);var s,a=0,l=this.$docRowCache,u=this.$getRowCacheIndex(l,e);if(u>0&&u<l.length)var a=l[u],i=this.$screenRowCache[u],c=e>a||e==a&&u==l.length-1;else var c=0!=u||!l.length;for(var h=this.getNextFoldLine(a),f=h?h.start.row:1/0;e>a;){if(a>=f){if(s=h.end.row+1,s>e)break;h=this.getNextFoldLine(s,h),f=h?h.start.row:1/0}else s=a+1;i+=this.getRowLength(a),a=s,c&&(this.$docRowCache.push(a),this.$screenRowCache.push(i))}var d="";if(h&&a>=f?(d=this.getFoldDisplayLine(h,e,t),r=h.start.row):(d=this.getLine(e).substring(0,t),r=e),this.$useWrapMode){for(var p=this.$wrapData[r],g=0;d.length>=p[g];)i++,g++;d=d.substring(p[g-1]||0,d.length)}return{row:i,column:this.$getStringScreenWidth(d)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(this.$useWrapMode)for(var n=this.$wrapData.length,i=0,r=0,t=this.$foldData[r++],o=t?t.start.row:1/0;n>i;)e+=this.$wrapData[i].length+1,i++,i>o&&(i=t.end.row+1,t=this.$foldData[r++],o=t?t.start.row:1/0);else{e=this.getLength();for(var s=this.$foldData,r=0;r<s.length;r++)t=s[r],e-=t.end.row-t.start.row}return e}}.call(d.prototype),e("./edit_session/folding").Folding.call(d.prototype),e("./edit_session/bracket_match").BracketMatch.call(d.prototype),t.EditSession=d}),define("ace/config",["require","exports","module","ace/lib/lang"],function(e,t,n){"no use strict";function i(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}var r=e("./lib/lang"),o=function(){return this}(),s={packaged:!1,workerPath:"",modePath:"",themePath:"",suffix:".js",$moduleUrls:{}};t.get=function(e){if(!s.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return s[e]},t.set=function(e,t){if(!s.hasOwnProperty(e))throw new Error("Unknown config key: "+e);s[e]=t},t.all=function(){return r.copyObject(s)},t.moduleUrl=function(e,t){if(s.$moduleUrls[e])return s.$moduleUrls[e];var n=e.split("/");t=t||n[n.length-2]||"";var i=n[n.length-1].replace(t,"").replace(/(^[\-_])|([\-_]$)/,"");return!i&&n.length>1&&(i=n[n.length-2]),this.get(t+"Path")+"/"+t+"-"+i+this.get("suffix")},t.setModuleUrl=function(e,t){return s.$moduleUrls[e]=t},t.init=function(){if(s.packaged=e.packaged||n.packaged||o.define&&define.packaged,!o.document)return"";for(var r={},a="",l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var c=l[u],h=c.src||c.getAttribute("src");if(h){for(var f=c.attributes,d=0,p=f.length;p>d;d++){var g=f[d];0===g.name.indexOf("data-ace-")&&(r[i(g.name.replace(/^data-ace-/,""))]=g.value)}var m=h.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);m&&(a=m[1])}}a&&(r.base=r.base||a,r.packaged=!0),r.workerPath=r.workerPath||r.base,r.modePath=r.modePath||r.base,r.themePath=r.themePath||r.base,delete r.base;for(var v in r)"undefined"!=typeof r[v]&&t.set(v,r[v])}}),define("ace/lib/net",["require","exports","module","ace/lib/useragent"],function(e,t){var n=e("./useragent");t.get=function(e,n){var i=t.createXhr();i.open("GET",e,!0),i.onreadystatechange=function(){4===i.readyState&&n(i.responseText)},i.send(null)};var i=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"];t.createXhr=function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(t=0;3>t;t++){n=i[t];try{e=new ActiveXObject(n)}catch(r){}if(e){i=[n];break}}if(!e)throw new Error("createXhr(): XMLHttpRequest not available");return e},t.loadScript=function(e,t){var i=document.getElementsByTagName("head")[0],r=document.createElement("script");r.src=e,i.appendChild(r),n.isOldIE?r.onreadystatechange=function(){"loaded"==this.readyState&&t()}:r.onload=t}}),define("ace/lib/event_emitter",["require","exports","module"],function(e,t){var n={};n._emit=n._dispatchEvent=function(e,t){this._eventRegistry=this._eventRegistry||{},this._defaultHandlers=this._defaultHandlers||{};var n=this._eventRegistry[e]||[],i=this._defaultHandlers[e];if(n.length||i){"object"==typeof t&&t||(t={}),t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=function(){this.propagationStopped=!0}),t.preventDefault||(t.preventDefault=function(){this.defaultPrevented=!0});for(var r=0;r<n.length&&(n[r](t),!t.propagationStopped);r++);return i&&!t.defaultPrevented?i(t):void 0}},n.setDefaultHandler=function(e,t){if(this._defaultHandlers=this._defaultHandlers||{},this._defaultHandlers[e])throw new Error("The default handler for '"+e+"' is already set");this._defaultHandlers[e]=t},n.on=n.addEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];n||(n=this._eventRegistry[e]=[]),-1==n.indexOf(t)&&n.push(t)},n.removeListener=n.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}},n.removeAllListeners=function(e){this._eventRegistry&&(this._eventRegistry[e]=[])},t.EventEmitter=n}),define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t){var n=e("./lib/oop"),i=e("./lib/lang"),r=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,s=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var t=this;this.lead.on("change",function(e){t._emit("changeCursor"),t.$isEmpty||t._emit("changeSelection"),!t.$keepDesiredColumnOnChange&&e.old.column!=e.value.column&&(t.$desiredColumn=null)}),this.selectionAnchor.on("change",function(){t.$isEmpty||t._emit("changeSelection")})};!function(){n.implement(this,r),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return this.isEmpty()?!1:this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.anchor.setPosition(e,t),this.$isEmpty&&(this.$isEmpty=!1,this._emit("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(e){if(this.$isEmpty)return this.moveCursorTo(this.lead.row,this.lead.column+e),void 0;var t=this.getSelectionAnchor(),n=this.getSelectionLead(),i=this.isBackwards();(!i||0!==t.column)&&this.setSelectionAnchor(t.row,t.column+e),(i||0!==n.column)&&this.$moveSelection(function(){this.moveCursorTo(n.row,n.column+e)})},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.isEmpty()?o.fromPoints(t,t):this.isBackwards()?o.fromPoints(t,e):o.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){var e=this.doc.getLength()-1;this.setSelectionAnchor(0,0),this.moveCursorTo(e,this.doc.getLine(e).length)},this.setRange=this.setSelectionRange=function(e,t){t?(this.setSelectionAnchor(e.end.row,e.end.column),this.selectTo(e.start.row,e.start.column)):(this.setSelectionAnchor(e.start.row,e.start.column),this.selectTo(e.end.row,e.end.column)),this.$desiredColumn=null},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})},this.selectToPosition=function(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if("undefined"==typeof t){var n=e||this.lead;e=n.row,t=n.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var n,i="number"==typeof e?e:this.lead.row,r=this.session.getFoldLine(i);return r?(i=r.start.row,n=r.end.row):n=i,t?new o(i,0,n,this.session.getLine(n).length):new o(i,0,n+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.moveCursorLeft=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,-1))this.moveCursorTo(e.start.row,e.start.column);else if(0==t.column)t.row>0&&this.moveCursorTo(t.row-1,this.doc.getLine(t.row-1).length);else{var n=this.session.getTabSize();this.session.isTabStop(t)&&this.doc.getLine(t.row).slice(t.column-n,t.column).split(" ").length-1==n?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,1))this.moveCursorTo(e.end.row,e.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);
else{var n=this.session.getTabSize(),t=this.lead;this.session.isTabStop(t)&&this.doc.getLine(t.row).slice(t.column,t.column+n).split(" ").length-1==n?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,n=this.session.documentToScreenRow(e,t),i=this.session.screenToDocumentPosition(n,0),r=this.session.getDisplayLine(e,null,i.row,i.column),o=r.match(/^\s*/);o[0].length==t?this.moveCursorTo(i.row,i.column):this.moveCursorTo(i.row,i.column+o[0].length)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var n=this.session.getLine(t.row);if(t.column==n.length){var i=n.search(/\s+$/);i>0&&(t.column=i)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e,t=this.lead.row,n=this.lead.column,i=this.doc.getLine(t),r=i.substring(n);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var o=this.session.getFoldAt(t,n,1);return o?(this.moveCursorTo(o.end.row,o.end.column),void 0):((e=this.session.nonTokenRe.exec(r))&&(n+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,r=i.substring(n)),n>=i.length?(this.moveCursorTo(t,i.length),this.moveCursorRight(),t<this.doc.getLength()-1&&this.moveCursorWordRight(),void 0):((e=this.session.tokenRe.exec(r))&&(n+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,n),void 0))},this.moveCursorLongWordLeft=function(){var e,t=this.lead.row,n=this.lead.column;if(e=this.session.getFoldAt(t,n,-1))return this.moveCursorTo(e.start.row,e.start.column),void 0;var r=this.session.getFoldStringAt(t,n,-1);null==r&&(r=this.doc.getLine(t).substring(0,n));var o,s=i.stringReverse(r);return this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,(o=this.session.nonTokenRe.exec(s))&&(n-=this.session.nonTokenRe.lastIndex,s=s.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),0>=n?(this.moveCursorTo(t,0),this.moveCursorLeft(),t>0&&this.moveCursorWordLeft(),void 0):((o=this.session.tokenRe.exec(s))&&(n-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,n),void 0)},this.$shortWordEndIndex=function(e){var t,n,i=0,r=/\s/,o=this.session.tokenRe;if(o.lastIndex=0,t=this.session.tokenRe.exec(e))i=this.session.tokenRe.lastIndex;else{for(;(n=e[i])&&r.test(n);)i++;if(1>=i)for(o.lastIndex=0;(n=e[i])&&!o.test(n);)if(o.lastIndex=0,i++,r.test(n)){if(i>2){i--;break}for(;(n=e[i])&&r.test(n);)i++;if(i>2)break}}return o.lastIndex=0,i},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),i=n.substring(t),r=this.session.getFoldAt(e,t,1);if(r)return this.moveCursorTo(r.end.row,r.end.column);if(t==n.length){var o=this.doc.getLength();do e++,i=this.doc.getLine(e);while(o>e&&/^\s*$/.test(i));/^\s+/.test(i)||(i=""),t=0}var s=this.$shortWordEndIndex(i);this.moveCursorTo(e,t+s)},this.moveCursorShortWordLeft=function(){var e,t=this.lead.row,n=this.lead.column;if(e=this.session.getFoldAt(t,n,-1))return this.moveCursorTo(e.start.row,e.start.column);var r=this.session.getLine(t).substring(0,n);if(0==n){do t--,r=this.doc.getLine(t);while(t>0&&/^\s*$/.test(r));n=r.length,/\s+$/.test(r)||(r="")}var o=i.stringReverse(r),s=this.$shortWordEndIndex(o);return this.moveCursorTo(t,n-s)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var n=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===t&&(this.$desiredColumn?n.column=this.$desiredColumn:this.$desiredColumn=n.column);var i=this.session.screenToDocumentPosition(n.row+e,n.column);this.moveCursorTo(i.row,i.column+t,0===t)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,n){var i=this.session.getFoldAt(e,t,1);i&&(e=i.start.row,t=i.start.column),this.$keepDesiredColumnOnChange=!0,this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,n){var i=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(i.row,i.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e}}.call(s.prototype),t.Selection=s}),define("ace/range",["require","exports","module"],function(e,t){var n=function(e,t,n,i){this.start={row:e,column:t},this.end={row:n,column:i}};!function(){this.isEqual=function(e){return this.start.row==e.start.row&&this.end.row==e.end.row&&this.start.column==e.start.column&&this.end.column==e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return 0==this.compare(e,t)},this.compareRange=function(e){var t,n=e.end,i=e.start;return t=this.compare(n.row,n.column),1==t?(t=this.compare(i.row,i.column),1==t?2:0==t?1:0):-1==t?-2:(t=this.compare(i.row,i.column),-1==t?-1:1==t?42:0)},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return 0==this.comparePoint(e.start)&&0==this.comparePoint(e.end)},this.intersects=function(e){var t=this.compareRange(e);return-1==t||0==t||1==t},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){"object"==typeof e?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){"object"==typeof e?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return 0==this.compare(e,t)?this.isEnd(e,t)||this.isStart(e,t)?!1:!0:!1},this.insideStart=function(e,t){return 0==this.compare(e,t)?this.isEnd(e,t)?!1:!0:!1},this.insideEnd=function(e,t){return 0==this.compare(e,t)?this.isStart(e,t)?!1:!0:!1},this.compare=function(e,t){return this.isMultiLine()||e!==this.start.row?e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0:t<this.start.column?-1:t>this.end.column?1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var i={row:t+1,column:0};if(this.start.row>t)var r={row:t+1,column:0};if(this.start.row<e)var r={row:e,column:0};if(this.end.row<e)var i={row:e,column:0};return n.fromPoints(r||this.start,i||this.end)},this.extend=function(e,t){var i=this.compare(e,t);if(0==i)return this;if(-1==i)var r={row:e,column:t};else var o={row:e,column:t};return n.fromPoints(r||this.start,o||this.end)},this.isEmpty=function(){return this.start.row==this.end.row&&this.start.column==this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return n.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new n(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new n(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),i=e.documentToScreenPosition(this.end);return new n(t.row,t.column,i.row,i.column)}}.call(n.prototype),n.fromPoints=function(e,t){return new n(e.row,e.column,t.row,t.column)},t.Range=n}),define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode"],function(e,t){var n=e("../tokenizer").Tokenizer,i=e("./text_highlight_rules").TextHighlightRules,r=e("./behaviour").Behaviour,o=e("../unicode"),s=function(){this.$tokenizer=new n((new i).getRules()),this.$behaviour=new r};!function(){this.tokenRe=new RegExp("^["+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+"\\$_]|s])+","g"),this.getTokenizer=function(){return this.$tokenizer},this.toggleCommentLines=function(){},this.getNextLineIndent=function(){return""},this.checkOutdent=function(){return!1},this.autoOutdent=function(){},this.$getIndent=function(e){var t=e.match(/^(\s+)/);return t?t[1]:""},this.createWorker=function(){return null},this.createModeDelegates=function(e){if(this.$embeds){this.$modes={};for(var t=0;t<this.$embeds.length;t++)e[this.$embeds[t]]&&(this.$modes[this.$embeds[t]]=new e[this.$embeds[t]]);for(var n=["toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction"],t=0;t<n.length;t++)!function(e){var i=n[t],r=e[i];e[n[t]]=function(){return this.$delegator(i,arguments,r)}}(this)}},this.$delegator=function(e,t,n){for(var i=t[0],r=0;r<this.$embeds.length;r++)if(this.$modes[this.$embeds[r]]){var o=i.split(this.$embeds[r]);if(!o[0]&&o[1]){t[0]=o[1];var s=this.$modes[this.$embeds[r]];return s[e].apply(s,t)}}var a=n.apply(this,t);return n?a:void 0},this.transformAction=function(e,t){if(this.$behaviour){var n=this.$behaviour.getBehaviours();for(var i in n)if(n[i][t]){var r=n[i][t].apply(this,arguments);if(r)return r}}}}.call(s.prototype),t.Mode=s}),define("ace/tokenizer",["require","exports","module"],function(e,t){var n=function(e,t){t=t?"g"+t:"g",this.rules=e,this.regExps={},this.matchMappings={};for(var n in this.rules){for(var i=this.rules[n],r=i,o=[],s=0,a=this.matchMappings[n]={},l=0;l<r.length;l++){r[l].regex instanceof RegExp&&(r[l].regex=r[l].regex.toString().slice(1,-1));var u=new RegExp("(?:("+r[l].regex+")|(.))").exec("a").length-2,c=r[l].regex.replace(/\\([0-9]+)/g,function(e,t){return"\\"+(parseInt(t,10)+s+1)});if(u>1&&r[l].token.length!==u-1)throw new Error("For "+r[l].regex+" the matching groups and length of the token array don't match (rule #"+l+" of state "+n+")");a[s]={rule:l,len:u},s+=u,o.push(c)}this.regExps[n]=new RegExp("(?:("+o.join(")|(")+")|(.))",t)}};!function(){this.getLineTokens=function(e,t){var n=t||"start",i=this.rules[n],r=this.matchMappings[n],o=this.regExps[n];o.lastIndex=0;for(var s,a=[],l=0,u={type:null,value:""};s=o.exec(e);){for(var c="text",h=null,f=[s[0]],d=0;d<s.length-2;d++)if(void 0!==s[d+1]){if(h=i[r[d].rule],r[d].len>1&&(f=s.slice(d+2,d+1+r[d].len)),c="function"==typeof h.token?h.token.apply(this,f):h.token,h.next){if(n=h.next,i=this.rules[n],r=this.matchMappings[n],l=o.lastIndex,o=this.regExps[n],void 0===o)throw new Error("You indicated a state of "+h.next+" to go to, but it doesn't exist!");o.lastIndex=l}break}if(f[0]){"string"==typeof c&&(f=[f.join("")],c=[c]);for(var d=0;d<f.length;d++)f[d]&&(h&&!h.merge&&"text"!==c[d]||u.type!==c[d]?(u.type&&a.push(u),u={type:c[d],value:f[d]}):u.value+=f[d])}if(l==e.length)break;l=o.lastIndex}return u.type&&a.push(u),{tokens:a,state:n}}}.call(n.prototype),t.Tokenizer=n}),define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(e,t){var n=e("../lib/lang"),i=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{token:"text",regex:".+"}]}};!function(){this.addRules=function(e,t){for(var n in e){for(var i=e[n],r=0;r<i.length;r++){var o=i[r];o.next&&(o.next=t+o.next)}this.$rules[t+n]=i}},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,i,r){var o=(new e).getRules();if(r)for(var s=0;s<r.length;s++)r[s]=t+r[s];else{r=[];for(var a in o)r.push(t+a)}this.addRules(o,t);for(var s=0;s<r.length;s++)Array.prototype.unshift.apply(this.$rules[r[s]],n.deepCopy(i));this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds},this.createKeywordMapper=function(e,t,n,i){var r=Object.create(null);return Object.keys(e).forEach(function(t){for(var n=e[t].split(i||"|"),o=n.length;o--;)r[n[o]]=t}),e=null,n?function(e){return r[e.toLowerCase()]||t}:function(e){return r[e]||t}}}.call(i.prototype),t.TextHighlightRules=i}),define("ace/mode/behaviour",["require","exports","module"],function(e,t){var n=function(){this.$behaviours={}};!function(){this.add=function(e,t,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n},this.addBehaviours=function(e){for(var t in e)for(var n in e[t])this.add(t,n,e[t][n])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if("function"==typeof e)var n=(new e).getBehaviours(t);else var n=e.getBehaviours(t);this.addBehaviours(n)},this.getBehaviours=function(e){if(!e)return this.$behaviours;for(var t={},n=0;n<e.length;n++)this.$behaviours[e[n]]&&(t[e[n]]=this.$behaviours[e[n]]);return t}}.call(n.prototype),t.Behaviour=n}),define("ace/unicode",["require","exports","module"],function(e,t){function n(e){var n=/\w{4}/g;for(var i in e)t.packages[i]=e[i].replace(n,"\\u$&")}t.packages={},n({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"})
}),define("ace/document",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t){var n=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,r=e("./range").Range,o=e("./anchor").Anchor,s=function(e){this.$lines=[],0==e.length?this.$lines=[""]:Array.isArray(e)?this.insertLines(0,e):this.insert({row:0,column:0},e)};!function(){n.implement(this,i),this.setValue=function(e){var t=this.getLength();this.remove(new r(0,0,t,this.getLine(t-1).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new o(this,e,t)},this.$split=0=="aaa".split(/a/).length?function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n"},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";case"auto":return this.$autoNewLine}},this.$autoNewLine="\n",this.$newLineMode="auto",this.setNewLineMode=function(e){this.$newLineMode!==e&&(this.$newLineMode=e)},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return"\r\n"==e||"\r"==e||"\n"==e},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){if(e.start.row==e.end.row)return this.$lines[e.start.row].substring(e.start.column,e.end.column);var t=this.getLines(e.start.row+1,e.end.row-1);return t.unshift((this.$lines[e.start.row]||"").substring(e.start.column)),t.push((this.$lines[e.end.row]||"").substring(0,e.end.column)),t.join(this.getNewLineCharacter())},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t&&(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length),e},this.insert=function(e,t){if(!t||0===t.length)return e;e=this.$clipPosition(e),this.getLength()<=1&&this.$detectNewLine(t);var n=this.$split(t),i=n.splice(0,1)[0],r=0==n.length?null:n.splice(n.length-1,1)[0];return e=this.insertInLine(e,i),null!==r&&(e=this.insertNewLine(e),e=this.insertLines(e.row,n),e=this.insertInLine(e,r||"")),e},this.insertLines=function(e,t){if(0==t.length)return{row:e,column:0};if(t.length>65535){var n=this.insertLines(e,t.slice(65535));t=t.slice(0,65535)}var i=[e,0];i.push.apply(i,t),this.$lines.splice.apply(this.$lines,i);var o=new r(e,0,e+t.length,0),s={action:"insertLines",range:o,lines:t};return this._emit("change",{data:s}),n||o.end},this.insertNewLine=function(e){e=this.$clipPosition(e);var t=this.$lines[e.row]||"";this.$lines[e.row]=t.substring(0,e.column),this.$lines.splice(e.row+1,0,t.substring(e.column,t.length));var n={row:e.row+1,column:0},i={action:"insertText",range:r.fromPoints(e,n),text:this.getNewLineCharacter()};return this._emit("change",{data:i}),n},this.insertInLine=function(e,t){if(0==t.length)return e;var n=this.$lines[e.row]||"";this.$lines[e.row]=n.substring(0,e.column)+t+n.substring(e.column);var i={row:e.row,column:e.column+t.length},o={action:"insertText",range:r.fromPoints(e,i),text:t};return this._emit("change",{data:o}),i},this.remove=function(e){if(e.start=this.$clipPosition(e.start),e.end=this.$clipPosition(e.end),e.isEmpty())return e.start;var t=e.start.row,n=e.end.row;if(e.isMultiLine()){var i=0==e.start.column?t:t+1,r=n-1;e.end.column>0&&this.removeInLine(n,0,e.end.column),r>=i&&this.removeLines(i,r),i!=t&&(this.removeInLine(t,e.start.column,this.getLine(t).length),this.removeNewLine(e.start.row))}else this.removeInLine(t,e.start.column,e.end.column);return e.start},this.removeInLine=function(e,t,n){if(t!=n){var i=new r(e,t,e,n),o=this.getLine(e),s=o.substring(t,n),a=o.substring(0,t)+o.substring(n,o.length);this.$lines.splice(e,1,a);var l={action:"removeText",range:i,text:s};return this._emit("change",{data:l}),i.start}},this.removeLines=function(e,t){var n=new r(e,0,t+1,0),i=this.$lines.splice(e,t-e+1),o={action:"removeLines",range:n,nl:this.getNewLineCharacter(),lines:i};return this._emit("change",{data:o}),i},this.removeNewLine=function(e){var t=this.getLine(e),n=this.getLine(e+1),i=new r(e,t.length,e+1,0),o=t+n;this.$lines.splice(e,2,o);var s={action:"removeText",range:i,text:this.getNewLineCharacter()};this._emit("change",{data:s})},this.replace=function(e,t){if(0==t.length&&e.isEmpty())return e.start;if(t==this.getTextRange(e))return e.end;if(this.remove(e),t)var n=this.insert(e.start,t);else n=e.start;return n},this.applyDeltas=function(e){for(var t=0;t<e.length;t++){var n=e[t],i=r.fromPoints(n.range.start,n.range.end);"insertLines"==n.action?this.insertLines(i.start.row,n.lines):"insertText"==n.action?this.insert(i.start,n.text):"removeLines"==n.action?this.removeLines(i.start.row,i.end.row-1):"removeText"==n.action&&this.remove(i)}},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--){var n=e[t],i=r.fromPoints(n.range.start,n.range.end);"insertLines"==n.action?this.removeLines(i.start.row,i.end.row-1):"insertText"==n.action?this.remove(i):"removeLines"==n.action?this.insertLines(i.start.row,n.lines):"removeText"==n.action&&this.insert(i.start,n.text)}}}.call(s.prototype),t.Document=s}),define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t){var n=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,r=t.Anchor=function(e,t,n){this.document=e,"undefined"==typeof n?this.setPosition(t.row,t.column):this.setPosition(t,n),this.$onChange=this.onChange.bind(this),e.on("change",this.$onChange)};!function(){n.implement(this,i),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.onChange=function(e){var t=e.data,n=t.range;if(!(n.start.row==n.end.row&&n.start.row!=this.row||n.start.row>this.row||n.start.row==this.row&&n.start.column>this.column)){var i=this.row,r=this.column;"insertText"===t.action?n.start.row===i&&n.start.column<=r?n.start.row===n.end.row?r+=n.end.column-n.start.column:(r-=n.start.column,i+=n.end.row-n.start.row):n.start.row!==n.end.row&&n.start.row<i&&(i+=n.end.row-n.start.row):"insertLines"===t.action?n.start.row<=i&&(i+=n.end.row-n.start.row):"removeText"==t.action?n.start.row==i&&n.start.column<r?r=n.end.column>=r?n.start.column:Math.max(0,r-(n.end.column-n.start.column)):n.start.row!==n.end.row&&n.start.row<i?(n.end.row==i&&(r=Math.max(0,r-n.end.column)+n.start.column),i-=n.end.row-n.start.row):n.end.row==i&&(i-=n.end.row-n.start.row,r=Math.max(0,r-n.end.column)+n.start.column):"removeLines"==t.action&&n.start.row<=i&&(n.end.row<=i?i-=n.end.row-n.start.row:(i=n.start.row,r=0)),this.setPosition(i,r,!0)}},this.setPosition=function(e,t,n){var i;if(i=n?{row:e,column:t}:this.$clipPositionToDocument(e,t),this.row!=i.row||this.column!=i.column){var r={row:this.row,column:this.column};this.row=i.row,this.column=i.column,this._emit("change",{old:r,value:i})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):0>e?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),0>t&&(n.column=0),n}}.call(r.prototype)}),define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t){var n=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,r=5e3,o=function(e){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var t=this;this.$worker=function(){if(t.running){for(var e=new Date,n=t.currentLine,i=t.doc,r=0,o=i.getLength();t.currentLine<o;){for(t.$tokenizeRow(t.currentLine);t.lines[t.currentLine];)t.currentLine++;if(r++,0==r%5&&new Date-e>20)return t.fireUpdateEvent(n,t.currentLine-1),t.running=setTimeout(t.$worker,20),void 0}t.running=!1,t.fireUpdateEvent(n,o-1)}}};!function(){n.implement(this,i),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var n={first:e,last:t};this._emit("update",{data:n})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.$updateOnChange=function(e){var t=e.range,n=t.start.row,i=t.end.row-n;if(0===i)this.lines[n]=null;else if("removeText"==e.action||"removeLines"==e.action)this.lines.splice(n,i+1,null),this.states.splice(n,i+1,null);else{var r=Array(i+1);r.unshift(n,1),this.lines.splice.apply(this.lines,r),this.states.splice.apply(this.states,r)}this.currentLine=Math.min(n,this.currentLine,this.doc.getLength()),this.stop(),this.running=setTimeout(this.$worker,700)},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),n=this.states[e-1];if(t.length>r){var i={value:t.substr(r),type:"text"};t=t.slice(0,r)}var o=this.tokenizer.getLineTokens(t,n);return i&&(o.tokens.push(i),o.state="start"),this.states[e]!==o.state?(this.states[e]=o.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=o.tokens}}.call(o.prototype),t.BackgroundTokenizer=o}),define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t){var n=e("./lib/lang"),i=(e("./lib/oop"),e("./range").Range),r=function(e,t,n){this.setRegexp(e),this.clazz=t,this.type=n||"text"};!function(){this.setRegexp=function(e){this.regExp+""!=e+""&&(this.regExp=e,this.cache=[])},this.update=function(e,t,r,o){if(this.regExp)for(var s=o.firstRow,a=o.lastRow,l=s;a>=l;l++){var u=this.cache[l];null==u&&(u=n.getMatchOffsets(r.getLine(l),this.regExp),u=u.map(function(e){return new i(l,e.offset,l,e.offset+e.length)}),this.cache[l]=u.length?u:"");for(var c=u.length;c--;)t.drawSingleLineMarker(e,u[c].toScreenRange(r),this.clazz,o,null,this.type)}}}.call(r.prototype),t.SearchHighlight=r}),define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(e,t){function n(){this.getFoldAt=function(e,t,n){var i=this.getFoldLine(e);if(!i)return null;for(var r=i.folds,o=0;o<r.length;o++){var s=r[o];if(s.range.contains(e,t)){if(1==n&&s.range.isEnd(e,t))continue;if(-1==n&&s.range.isStart(e,t))continue;return s}}},this.getFoldsInRange=function(e){e=e.clone();var t=e.start,n=e.end,i=this.$foldData,r=[];t.column+=1,n.column-=1;for(var o=0;o<i.length;o++){var s=i[o].range.compareRange(e);if(2!=s){if(-2==s)break;for(var a=i[o].folds,l=0;l<a.length;l++){var u=a[l];if(s=u.range.compareRange(e),-2==s)break;if(2!=s){if(42==s)break;r.push(u)}}}}return r},this.getAllFolds=function(){function e(n){if(t.push(n),n.subFolds)for(var i=0;i<n.subFolds.length;i++)e(n.subFolds[i])}for(var t=[],n=this.$foldData,i=0;i<n.length;i++)for(var r=0;r<n[i].folds.length;r++)e(n[i].folds[r]);return t},this.getFoldStringAt=function(e,t,n,i){if(i=i||this.getFoldLine(e),!i)return null;for(var r,o,s={end:{column:0}},a=0;a<i.folds.length;a++){o=i.folds[a];var l=o.range.compareEnd(e,t);if(-1==l){r=this.getLine(o.start.row).substring(s.end.column,o.start.column);break}if(0===l)return null;s=o}return r||(r=this.getLine(o.start.row).substring(s.end.column)),-1==n?r.substring(0,t-s.end.column):1==n?r.substring(t-s.end.column):r},this.getFoldLine=function(e,t){var n=this.$foldData,i=0;for(t&&(i=n.indexOf(t)),-1==i&&(i=0),i;i<n.length;i++){var r=n[i];if(r.start.row<=e&&r.end.row>=e)return r;if(r.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var n=this.$foldData,i=0;for(t&&(i=n.indexOf(t)),-1==i&&(i=0),i;i<n.length;i++){var r=n[i];if(r.end.row>=e)return r}return null},this.getFoldedRowCount=function(e,t){for(var n=this.$foldData,i=t-e+1,r=0;r<n.length;r++){var o=n[r],s=o.end.row,a=o.start.row;if(s>=t){t>a&&(a>=e?i-=t-a:i=0);break}s>=e&&(i-=a>=e?s-a:s-e+1)}return i},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort(function(e,t){return e.start.row-t.start.row}),e},this.addFold=function(e,t){var n,i=this.$foldData,s=!1;n=e instanceof o?e:new o(t,e),this.$clipRangeToDocument(n.range);var a=n.start.row,l=n.start.column,u=n.end.row,c=n.end.column;if(n.placeholder.length<2)throw"Placeholder has to be at least 2 characters";if(a==u&&2>c-l)throw"The range has to be at least 2 characters width";var h=this.getFoldAt(a,l,1),f=this.getFoldAt(u,c,-1);if(h&&f==h)return h.addSubFold(n);if(h&&!h.range.isStart(a,l)||f&&!f.range.isEnd(u,c))throw"A fold can't intersect already existing fold"+n.range+h.range;var d=this.getFoldsInRange(n.range);d.length>0&&(this.removeFolds(d),n.subFolds=d);for(var p=0;p<i.length;p++){var g=i[p];if(u==g.start.row){g.addFold(n),s=!0;break}if(a==g.end.row){if(g.addFold(n),s=!0,!n.sameRow){var m=i[p+1];if(m&&m.start.row==u){g.merge(m);break}}break}if(u<=g.start.row)break}return s||(g=this.$addFoldLine(new r(this.$foldData,n))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._emit("changeFold",{data:n}),n},this.addFolds=function(e){e.forEach(function(e){this.addFold(e)},this)},this.removeFold=function(e){var t=e.foldLine,n=t.start.row,i=t.end.row,r=this.$foldData,o=t.folds;if(1==o.length)r.splice(r.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))o.pop(),t.end.row=o[o.length-1].end.row,t.end.column=o[o.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))o.shift(),t.start.row=o[0].start.row,t.start.column=o[0].start.column;else if(e.sameRow)o.splice(o.indexOf(e),1);else{var s=t.split(e.start.row,e.start.column);o=s.folds,o.shift(),s.start.row=o[0].start.row,s.start.column=o[0].start.column}this.$useWrapMode?this.$updateWrapData(n,i):this.$updateRowLengthCache(n,i),this.$modified=!0,this._emit("changeFold",{data:e})},this.removeFolds=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);t.forEach(function(e){this.removeFold(e)},this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach(function(e){this.addFold(e)},this),e.subFolds=[]},this.expandFolds=function(e){e.forEach(function(e){this.expandFold(e)},this)},this.unfold=function(e,t){var n,r;if(n=null==e?new i(0,0,this.getLength(),0):"number"==typeof e?new i(e,0,e,this.getLine(e).length):"row"in e?i.fromPoints(e,e):e,r=this.getFoldsInRange(n),t)this.removeFolds(r);else for(;r.length;)this.expandFolds(r),r=this.getFoldsInRange(n)},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var n=this.getFoldLine(e,t);return n?n.end.row:e},this.getFoldDisplayLine=function(e,t,n,i,r){null==i&&(i=e.start.row,r=0),null==t&&(t=e.end.row,n=this.getLine(t).length);var o=this.doc,s="";return e.walk(function(e,t,n,a){if(!(i>t)){if(t==i){if(r>n)return;a=Math.max(r,a)}s+=e?e:o.getLine(t).substring(a,n)}}.bind(this),t,n),s},this.getDisplayLine=function(e,t,n,i){var r=this.getFoldLine(e);if(!r){var o;return o=this.doc.getLine(e),o.substring(i||0,t||o.length)}return this.getFoldDisplayLine(r,e,t,n,i)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map(function(t){var n=t.folds.map(function(e){return e.clone()});return new r(e,n)})},this.toggleFold=function(e){var t,n,i=this.selection,r=i.getRange();if(r.isEmpty()){var o=r.start;if(t=this.getFoldAt(o.row,o.column))return this.expandFold(t),void 0;(n=this.findMatchingBracket(o))?1==r.comparePoint(n)?r.end=n:(r.start=n,r.start.column++,r.end.column--):(n=this.findMatchingBracket({row:o.row,column:o.column+1}))?(1==r.comparePoint(n)?r.end=n:r.start=n,r.start.column++):r=this.getCommentFoldRange(o.row,o.column)||r}else{var s=this.getFoldsInRange(r);if(e&&s.length)return this.expandFolds(s),void 0;1==s.length&&(t=s[0])}if(t||(t=this.getFoldAt(r.start.row,r.start.column)),t&&t.range.toString()==r.toString())return this.expandFold(t),void 0;var a="...";if(!r.isMultiLine()){if(a=this.getTextRange(r),a.length<4)return;a=a.trim().substring(0,2)+".."}this.addFold(a,r)},this.getCommentFoldRange=function(e,t){var n=new s(this,e,t),r=n.getCurrentToken();if(r&&/^comment|string/.test(r.type)){var o=new i,a=new RegExp(r.type.replace(/\..*/,"\\."));do r=n.stepBackward();while(r&&a.test(r.type));n.stepForward(),o.start.row=n.getCurrentTokenRow(),o.start.column=n.getCurrentTokenColumn()+2,n=new s(this,e,t);do r=n.stepForward();while(r&&a.test(r.type));return r=n.stepBackward(),o.end.row=n.getCurrentTokenRow(),o.end.column=n.getCurrentTokenColumn()+r.value.length,o}},this.foldAll=function(e,t){var n=this.foldWidgets;t=t||this.getLength();for(var i=e||0;t>i;i++)if(null==n[i]&&(n[i]=this.getFoldWidget(i)),"start"==n[i]){var r=this.getFoldWidgetRange(i);if(r&&r.end.row<t)try{this.addFold("...",r)}catch(o){}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=e){this.$foldStyle=e,"manual"==e&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)}},this.$setFolding=function(e){return this.$foldMode!=e?(this.$foldMode=e,this.removeListener("change",this.$updateFoldWidgets),this._emit("changeAnnotation"),e&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),void 0):(this.foldWidgets=null,void 0)):void 0},this.onFoldWidgetClick=function(e,t){var n,i=this.getFoldWidget(e),r=this.getLine(e),o=t.shiftKey,s=o||t.ctrlKey||t.altKey||t.metaKey;if(n="end"==i?this.getFoldAt(e,0,-1):this.getFoldAt(e,r.length,1))return s?this.removeFold(n):this.expandFold(n),void 0;var a=this.getFoldWidgetRange(e);if(a){if(!a.isMultiLine()&&(n=this.getFoldAt(a.start.row,a.start.column,1),n&&a.isEqual(n.range)))return this.removeFold(n),void 0;o||this.addFold("...",a),s&&this.foldAll(a.start.row+1,a.end.row)}else s&&this.foldAll(e+1,this.getLength()),(t.target||t.srcElement).className+=" invalid"},this.updateFoldWidgets=function(e){var t=e.data,n=t.range,i=n.start.row,r=n.end.row-i;if(0===r)this.foldWidgets[i]=null;else if("removeText"==t.action||"removeLines"==t.action)this.foldWidgets.splice(i,r+1,null);else{var o=Array(r+1);o.unshift(i,1),this.foldWidgets.splice.apply(this.foldWidgets,o)}}}var i=e("../range").Range,r=e("./fold_line").FoldLine,o=e("./fold").Fold,s=e("../token_iterator").TokenIterator;t.Folding=n}),define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t){function n(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var n=t[t.length-1];this.range=new i(t[0].start.row,t[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(e){e.setFoldLine(this)},this)}var i=e("../range").Range;!function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach(function(t){t.start.row+=e,t.end.row+=e})},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw"Can't add a fold to this FoldLine as it has no connection";this.folds.push(e),this.folds.sort(function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)}),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw"Trying to add fold to FoldRow that doesn't have a matching row";this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,n){var i,r,o,s=0,a=this.folds,l=!0;null==t&&(t=this.end.row,n=this.end.column);for(var u=0;u<a.length;u++){if(i=a[u],r=i.range.compareStart(t,n),-1==r)return e(null,t,n,s,l),void 0;if(o=e(null,i.start.row,i.start.column,s,l),o=!o&&e(i.placeholder,i.start.row,i.start.column,s),o||0==r)return;l=!i.sameRow,s=i.end.column}e(null,t,n,s,l)},this.getNextFoldTo=function(e,t){for(var n,i,r=0;r<this.folds.length;r++){if(n=this.folds[r],i=n.range.compareEnd(e,t),-1==i)return{fold:n,kind:"after"};if(0==i)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(e,t,n){var i,r,o=this.getNextFoldTo(e,t);if(o)if(i=o.fold,"inside"==o.kind&&i.start.column!=t&&i.start.row!=e)window.console&&window.console.log(e,t,i);else if(i.start.row==e){r=this.folds;var s=r.indexOf(i);for(0==s&&(this.start.column+=n),s;s<r.length;s++){if(i=r[s],i.start.column+=n,!i.sameRow)return;i.end.column+=n}this.end.column+=n}},this.split=function(e,t){var i=this.getNextFoldTo(e,t).fold,r=this.folds,o=this.foldData;if(!i)return null;var s=r.indexOf(i),a=r[s-1];this.end.row=a.end.row,this.end.column=a.end.column,r=r.splice(s,r.length-s);var l=new n(o,r);return o.splice(o.indexOf(this)+1,0,l),l},this.merge=function(e){for(var t=e.folds,n=0;n<t.length;n++)this.addFold(t[n]);var i=this.foldData;i.splice(i.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach(function(t){e.push("  "+t.toString())}),e.push("]"),e.join("\n")},this.idxToPosition=function(e){for(var t,n=0,i=0;i<this.folds.length;i++){var t=this.folds[i];if(e-=t.start.column-n,0>e)return{row:t.start.row,column:t.start.column+e};if(e-=t.placeholder.length,0>e)return t.start;n=t.end.column}return{row:this.end.row,column:this.end.column+e}}}.call(n.prototype),t.FoldLine=n}),define("ace/edit_session/fold",["require","exports","module"],function(e,t){var n=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=[]};!function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach(function(t){t.setFoldLine(e)})},this.clone=function(){var e=this.range.clone(),t=new n(e,this.placeholder);return this.subFolds.forEach(function(e){t.subFolds.push(e.clone())}),t},this.addSubFold=function(e){if(this.range.isEqual(e))return this;if(!this.range.containsRange(e))throw"A fold can't intersect already existing fold"+e.range+this.range;for(var t=e.range.start.row,n=e.range.start.column,i=0,r=-1;i<this.subFolds.length&&(r=this.subFolds[i].range.compare(t,n),1==r);i++);var o=this.subFolds[i];if(0==r)return o.addSubFold(e);for(var t=e.range.end.row,n=e.range.end.column,s=i,r=-1;s<this.subFolds.length&&(r=this.subFolds[s].range.compare(t,n),1==r);s++);if(this.subFolds[s],0==r)throw"A fold can't intersect already existing fold"+e.range+this.range;return this.subFolds.splice(i,s-i,e),e.setFoldLine(this.foldLine),e}}.call(n.prototype)}),define("ace/token_iterator",["require","exports","module"],function(e,t){var n=function(e,t,n){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var i=e.getTokenAt(t,n);this.$tokenIndex=i?i.index:-1};!function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){var e=this.$session.getLength();for(this.$tokenIndex+=1;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,n=e[t].start;if(void 0!==n)return n;for(n=0;t>0;)t-=1,n+=e[t].value.length;return n}}.call(n.prototype),t.TokenIterator=n}),define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t){function n(){this.findMatchingBracket=function(e){if(0==e.column)return null;var t=this.getLine(e.row).charAt(e.column-1);if(""==t)return null;var n=t.match(/([\(\[\{])|([\)\]\}])/);return n?n[1]?this.$findClosingBracket(n[1],e):this.$findOpeningBracket(n[2],e):null},this.getBracketRange=function(e){var t,n=this.getLine(e.row),i=!0,o=n.charAt(e.column-1),s=o&&o.match(/([\(\[\{])|([\)\]\}])/);if(s||(o=n.charAt(e.column),e={row:e.row,column:e.column+1},s=o&&o.match(/([\(\[\{])|([\)\]\}])/),i=!1),!s)return null;if(s[1]){var a=this.$findClosingBracket(s[1],e);if(!a)return null;t=r.fromPoints(e,a),i||(t.end.column++,t.start.column--),t.cursor=t.end}else{var a=this.$findOpeningBracket(s[2],e);if(!a)return null;t=r.fromPoints(a,e),i||(t.start.column++,t.end.column--),t.cursor=t.start}return t},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(e,t,n){var r=this.$brackets[e],o=1,s=new i(this,t.row,t.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){n||(n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("rparen",".paren")+")+"));for(var l=t.column-s.getCurrentTokenColumn()-2,u=a.value;;){for(;l>=0;){var c=u.charAt(l);if(c==r){if(o-=1,0==o)return{row:s.getCurrentTokenRow(),column:l+s.getCurrentTokenColumn()}}else c==e&&(o+=1);l-=1}do a=s.stepBackward();while(a&&!n.test(a.type));if(null==a)break;u=a.value,l=u.length-1}return null}},this.$findClosingBracket=function(e,t,n){var r=this.$brackets[e],o=1,s=new i(this,t.row,t.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){n||(n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("lparen",".paren")+")+"));for(var l=t.column-s.getCurrentTokenColumn();;){for(var u=a.value,c=u.length;c>l;){var h=u.charAt(l);if(h==r){if(o-=1,0==o)return{row:s.getCurrentTokenRow(),column:l+s.getCurrentTokenColumn()}}else h==e&&(o+=1);l+=1}do a=s.stepForward();while(a&&!n.test(a.type));if(null==a)break;l=0}return null}}}var i=e("../token_iterator").TokenIterator,r=e("../range").Range;t.BracketMatch=n}),define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t){var n=e("./lib/lang"),i=e("./lib/oop"),r=e("./range").Range,o=function(){this.$options={}};!function(){this.set=function(e){return i.mixin(this.$options,e),this},this.getOptions=function(){return n.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$matchIterator(e,this.$options);if(!t)return!1;var n=null;return t.forEach(function(e,t,i){if(e.start)n=e;else{var o=e.offset+(i||0);n=new r(t,o,t,o+e.length)}return!0}),n},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var i=t.range,o=i?e.getLines(i.start.row,i.end.row):e.doc.getAllLines(),s=[],a=t.re;if(t.$isMultiLine)for(var l=a.length,u=o.length-l,c=a.offset||0;u>=c;c++){for(var h=0;l>h&&-1!=o[c+h].search(a[h]);h++);var f=o[c],d=o[c+l-1],p=f.match(a[0])[0].length,g=d.match(a[l-1])[0].length;s.push(new r(c,f.length-p,c+l-1,g))}else for(var m=0;m<o.length;m++)for(var v=n.getMatchOffsets(o[m],a),h=0;h<v.length;h++){var y=v[h];s.push(new r(m,y.offset,m,y.offset+y.length))}if(i){for(var E=i.start.column,A=i.start.column,m=0,h=s.length-1;h>m&&s[m].start.column<E&&s[m].start.row==i.start.row;)m++;for(;h>m&&s[h].end.column>A&&s[h].end.row==i.end.row;)h--;return s.slice(m,h+1)}return s},this.replace=function(e,t){var n=this.$options,i=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(i){var r=i.exec(e);if(!r||r[0].length!=e.length)return null;if(t=e.replace(i,t),n.preserveCase){t=t.split("");for(var o=Math.min(e.length,e.length);o--;){var s=e[o];t[o]=s&&s.toLowerCase()!=s?t[o].toUpperCase():t[o].toLowerCase()}t=t.join("")}return t}},this.$matchIterator=function(e,t){var i=this.$assembleRegExp(t);if(!i)return!1;var o,s=this,a=t.backwards;if(t.$isMultiLine)var l=i.length,u=function(t,n,s){var a=t.search(i[0]);if(-1!=a){for(var u=1;l>u;u++)if(t=e.getLine(n+u),-1==t.search(i[u]))return;var c=t.match(i[l-1])[0].length,h=new r(n,a,n+l-1,c);return 1==i.offset?(h.start.row--,h.start.column=Number.MAX_VALUE):s&&(h.start.column+=s),o(h)?!0:void 0}};else if(a)var u=function(e,t,r){for(var s=n.getMatchOffsets(e,i),a=s.length-1;a>=0;a--)if(o(s[a],t,r))return!0};else var u=function(e,t,r){for(var s=n.getMatchOffsets(e,i),a=0;a<s.length;a++)if(o(s[a],t,r))return!0};return{forEach:function(n){o=n,s.$lineIterator(e,t).forEach(u)}}},this.$assembleRegExp=function(e){if(e.needle instanceof RegExp)return e.re=e.needle;var t=e.needle;if(!e.needle)return e.re=!1;e.regExp||(t=n.escapeRegExp(t)),e.wholeWord&&(t="\\b"+t+"\\b");var i=e.caseSensitive?"g":"gi";if(e.$isMultiLine=/[\n\r]/.test(t),e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(t,i);try{var r=new RegExp(t,i)}catch(o){r=!1}return e.re=r},this.$assembleMultilineRegExp=function(e,t){for(var n=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),i=[],r=0;r<n.length;r++)try{i.push(new RegExp(n[r],t))}catch(o){return!1}return""==n[0]?(i.shift(),i.offset=1):i.offset=0,i},this.$lineIterator=function(e,t){var n=1==t.backwards,i=0!=t.skipCurrent,r=t.range,o=t.start;o||(o=r?r[n?"end":"start"]:e.selection.getRange()),o.start&&(o=o[i!=n?"end":"start"]);var s=r?r.start.row:0,a=r?r.end.row:e.getLength()-1,l=n?function(n){var i=o.row,r=e.getLine(i).substring(0,o.column);if(!n(r,i)){for(i--;i>=s;i--)if(n(e.getLine(i),i))return;if(0!=t.wrap)for(i=a,s=o.row;i>=s;i--)if(n(e.getLine(i),i))return}}:function(n){var i=o.row,r=e.getLine(i).substr(o.column);if(!n(r,i,o.column)){for(i+=1;a>=i;i++)if(n(e.getLine(i),i))return;if(0!=t.wrap)for(i=s,a=o.row;a>=i;i++)if(n(e.getLine(i),i))return}};return{forEach:l}}}.call(o.prototype),t.Search=o}),define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t){var n=e("../lib/oop"),i=e("../keyboard/hash_handler").HashHandler,r=e("../lib/event_emitter").EventEmitter,o=function(e,t){this.platform=e,this.commands=this.byName={},this.commmandKeyBinding={},this.addCommands(t),this.setDefaultHandler("exec",function(e){return e.command.exec(e.editor,e.args||{})})};n.inherits(o,i),function(){n.implement(this,r),this.exec=function(e,t,n){if("string"==typeof e&&(e=this.commands[e]),!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;var i=this._emit("exec",{editor:t,command:e,args:n});return i===!1?!1:!0},this.toggleRecording=function(e){return this.$inReplay?void 0:(e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0))},this.replay=function(e){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach(function(t){"string"==typeof t?this.exec(t,e):this.exec(t[0],e,t[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(e){return e.map(function(e){return"string"!=typeof e[0]&&(e[0]=e[0].name),e[1]||(e=e[0]),e})}}.call(o.prototype),t.CommandManager=o}),define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys"],function(e,t){function n(e,t){this.platform=t,this.commands={},this.commmandKeyBinding={},this.addCommands(e)}var i=e("../lib/keys");!function(){this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e){var t="string"==typeof e?e:e.name;e=this.commands[t],delete this.commands[t];var n=this.commmandKeyBinding;for(var i in n)for(var r in n[i])n[i][r]==e&&delete n[i][r]},this.bindKey=function(e,t){if(e){if("function"==typeof t)return this.addCommand({exec:t,bindKey:e,name:e}),void 0;
var n=this.commmandKeyBinding;e.split("|").forEach(function(e){var i=this.parseKeys(e,t),r=i.hashId;(n[r]||(n[r]={}))[i.key]=t},this)}},this.addCommands=function(e){e&&Object.keys(e).forEach(function(t){var n=e[t];return"string"==typeof n?this.bindKey(n,t):("function"==typeof n&&(n={exec:n}),n.name||(n.name=t),this.addCommand(n),void 0)},this)},this.removeCommands=function(e){Object.keys(e).forEach(function(t){this.removeCommand(e[t])},this)},this.bindKeys=function(e){Object.keys(e).forEach(function(t){this.bindKey(t,e[t])},this)},this._buildKeyHash=function(e){var t=e.bindKey;if(t){var n="string"==typeof t?t:t[this.platform];this.bindKey(n,e)}},this.parseKeys=function(e){var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(e){return e}),n=t.pop(),r=i[n];if(i.FUNCTION_KEYS[r])n=i.FUNCTION_KEYS[r].toLowerCase();else{if(!t.length)return{key:n,hashId:-1};if(1==t.length&&"shift"==t[0])return{key:n.toUpperCase(),hashId:-1}}for(var o=0,s=t.length;s--;){var a=i.KEY_MODS[t[s]];if(null==a)throw"invalid modifier "+t[s]+" in "+e;o|=a}return{key:n,hashId:o}},this.findKeyCommand=function(e,t){var n=this.commmandKeyBinding;return n[e]&&n[e][t]},this.handleKeyboard=function(e,t,n){return{command:this.findKeyCommand(t,n)}}}.call(n.prototype),t.HashHandler=n}),define("ace/commands/default_commands",["require","exports","module","ace/lib/lang"],function(e,t){function n(e,t){return{win:e,mac:t}}var i=e("../lib/lang");t.commands=[{name:"selectall",bindKey:n("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",bindKey:n(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",bindKey:n("Ctrl-L","Command-L"),exec:function(e){var t=parseInt(prompt("Enter line number:"),10);isNaN(t)||e.gotoLine(t)},readOnly:!0},{name:"fold",bindKey:n("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},readOnly:!0},{name:"unfold",bindKey:n("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},readOnly:!0},{name:"foldall",bindKey:n("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll()},readOnly:!0},{name:"unfoldall",bindKey:n("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},readOnly:!0},{name:"findnext",bindKey:n("Ctrl-K","Command-G"),exec:function(e){e.findNext()},readOnly:!0},{name:"findprevious",bindKey:n("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},readOnly:!0},{name:"find",bindKey:n("Ctrl-F","Command-F"),exec:function(e){var t=prompt("Find:",e.getCopyText());e.find(t)},readOnly:!0},{name:"overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",bindKey:n("Ctrl-Shift-Home","Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0},{name:"gotostart",bindKey:n("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0},{name:"selectup",bindKey:n("Shift-Up","Shift-Up"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",readOnly:!0},{name:"golineup",bindKey:n("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selecttoend",bindKey:n("Ctrl-Shift-End","Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0},{name:"gotoend",bindKey:n("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0},{name:"selectdown",bindKey:n("Shift-Down","Shift-Down"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",readOnly:!0},{name:"golinedown",bindKey:n("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selectwordleft",bindKey:n("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",readOnly:!0},{name:"gotowordleft",bindKey:n("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",readOnly:!0},{name:"selecttolinestart",bindKey:n("Alt-Shift-Left","Command-Shift-Left"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",readOnly:!0},{name:"gotolinestart",bindKey:n("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",readOnly:!0},{name:"selectleft",bindKey:n("Shift-Left","Shift-Left"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",readOnly:!0},{name:"gotoleft",bindKey:n("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selectwordright",bindKey:n("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",readOnly:!0},{name:"gotowordright",bindKey:n("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",readOnly:!0},{name:"selecttolineend",bindKey:n("Alt-Shift-Right","Command-Shift-Right"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",readOnly:!0},{name:"gotolineend",bindKey:n("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",readOnly:!0},{name:"selectright",bindKey:n("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",readOnly:!0},{name:"gotoright",bindKey:n("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",bindKey:n(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",bindKey:n("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:n(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",bindKey:n("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",bindKey:n("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",readOnly:!0},{name:"selectlineend",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",readOnly:!0},{name:"togglerecording",bindKey:n("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",bindKey:n("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",bindKey:n("Ctrl-P","Ctrl-Shift-P"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",readOnly:!0},{name:"selecttomatching",bindKey:n("Ctrl-Shift-P",null),exec:function(e){e.jumpToMatching(!0)},readOnly:!0},{name:"cut",exec:function(e){var t=e.getSelectionRange();e._emit("cut",t),e.selection.isEmpty()||(e.session.remove(t),e.clearSelection())},multiSelectAction:"forEach"},{name:"removeline",bindKey:n("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},multiSelectAction:"forEach"},{name:"duplicateSelection",bindKey:n("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},multiSelectAction:"forEach"},{name:"togglecomment",bindKey:n("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEach"},{name:"replace",bindKey:n("Ctrl-R","Command-Option-F"),exec:function(e){var t=prompt("Find:",e.getCopyText());if(t){var n=prompt("Replacement:");n&&e.replace(n,{needle:t})}}},{name:"replaceall",bindKey:n("Ctrl-Shift-R","Command-Shift-Option-F"),exec:function(e){var t=prompt("Find:");if(t){var n=prompt("Replacement:");n&&e.replaceAll(n,{needle:t})}}},{name:"undo",bindKey:n("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",bindKey:n("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",bindKey:n("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()}},{name:"movelinesup",bindKey:n("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()}},{name:"copylinesdown",bindKey:n("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()}},{name:"movelinesdown",bindKey:n("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()}},{name:"del",bindKey:n("Delete","Delete|Ctrl-D"),exec:function(e){e.remove("right")},multiSelectAction:"forEach"},{name:"backspace",bindKey:n("Command-Backspace|Option-Backspace|Shift-Backspace|Backspace","Ctrl-Backspace|Command-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach"},{name:"removetolinestart",bindKey:n("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach"},{name:"removetolineend",bindKey:n("Alt-Delete","Ctrl-K"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach"},{name:"removewordleft",bindKey:n("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach"},{name:"removewordright",bindKey:n("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach"},{name:"outdent",bindKey:n("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach"},{name:"indent",bindKey:n("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach"},{name:"insertstring",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach"},{name:"inserttext",exec:function(e,t){e.insert(i.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach"},{name:"splitline",bindKey:n(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach"},{name:"transposeletters",bindKey:n("Ctrl-T","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)}},{name:"touppercase",bindKey:n("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach"},{name:"tolowercase",bindKey:n("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach"}]}),define("ace/undomanager",["require","exports","module"],function(e,t){var n=function(){this.reset()};!function(){this.execute=function(e){var t=e.args[0];this.$doc=e.args[1],this.$undoStack.push(t),this.$redoStack=[]},this.undo=function(e){var t=this.$undoStack.pop(),n=null;return t&&(n=this.$doc.undoChanges(t,e),this.$redoStack.push(t)),n},this.redo=function(e){var t=this.$redoStack.pop(),n=null;return t&&(n=this.$doc.redoChanges(t,e),this.$undoStack.push(t)),n},this.reset=function(){this.$undoStack=[],this.$redoStack=[]},this.hasUndo=function(){return this.$undoStack.length>0},this.hasRedo=function(){return this.$redoStack.length>0}}.call(n.prototype),t.UndoManager=n}),define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/useragent","ace/config","ace/lib/net","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/renderloop","ace/lib/event_emitter","text!ace/css/editor.css"],function(e,t){var n=e("./lib/oop"),i=e("./lib/dom"),r=e("./lib/event"),o=e("./lib/useragent"),s=e("./config"),a=e("./lib/net"),l=e("./layer/gutter").Gutter,u=e("./layer/marker").Marker,c=e("./layer/text").Text,h=e("./layer/cursor").Cursor,f=e("./scrollbar").ScrollBar,d=e("./renderloop").RenderLoop,p=e("./lib/event_emitter").EventEmitter,g=e("text!./css/editor.css");i.importCssString(g,"ace_editor");var m=function(e,t){var n=this;this.container=e,this.$keepTextAreaAtCursor=!o.isIE,i.addCssClass(e,"ace_editor"),this.setTheme(t),this.$gutter=i.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.scroller=i.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=i.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.setHighlightGutterLine(!0),this.$gutterLayer=new l(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onResize.bind(this,!0)),this.$markerBack=new u(this.content);var s=this.$textLayer=new c(this.content);this.canvas=s.element,this.$markerFront=new u(this.content),this.$cursorLayer=new h(this.content),this.$cursorPadding=8,this.$horizScroll=!1,this.$horizScrollAlwaysVisible=!1,this.$animatedScroll=!1,this.scrollBar=new f(e),this.scrollBar.addEventListener("scroll",function(e){n.$inScrollAnimation||n.session.setScrollTop(e.data)}),this.scrollTop=0,this.scrollLeft=0,r.addListener(this.scroller,"scroll",function(){var e=n.scroller.scrollLeft;n.scrollLeft=e,n.session.setScrollLeft(e)}),this.cursorPos={row:0,column:0},this.$textLayer.addEventListener("changeCharacterSize",function(){n.updateCharacterSize(),n.onResize(!0)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:1,characterWidth:1,minHeight:1,maxHeight:1,offset:0,height:1},this.$loop=new d(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.setPadding(4),this.updateCharacterSize()};!function(){this.showGutter=!0,this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,n.implement(this,p),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.characterWidth=this.$textLayer.getCharacterWidth(),this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()},this.setSession=function(e){this.session=e,this.scroller.className="ace_scroller",this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e),this.$loop.schedule(this.CHANGE_FULL)},this.updateLines=function(e,t){void 0===t&&(t=1/0),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t},this.$loop.schedule(this.CHANGE_LINES)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.onResize=function(e,t,n,r){var o=this.CHANGE_SIZE,s=this.$size;if(!(this.resizing>2)){if(this.resizing>1?this.resizing++:this.resizing=e?1:0,r||(r=i.getInnerHeight(this.container)),(e||s.height!=r)&&(s.height=r,this.scroller.style.height=r+"px",s.scrollerHeight=this.scroller.clientHeight,this.scrollBar.setHeight(s.scrollerHeight),this.session&&(this.session.setScrollTop(this.getScrollTop()),o|=this.CHANGE_FULL)),n||(n=i.getInnerWidth(this.container)),e||this.resizing>1||s.width!=n){s.width=n;var t=this.showGutter?this.$gutter.offsetWidth:0;this.scroller.style.left=t+"px",s.scrollerWidth=Math.max(0,n-t-this.scrollBar.getWidth()),this.scroller.style.right=this.scrollBar.getWidth()+"px",(this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)&&(o|=this.CHANGE_FULL)}e?this.$renderChanges(o,!0):this.$loop.schedule(o),e&&delete this.resizing}},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-2*this.$padding,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t)},this.setAnimatedScroll=function(e){this.$animatedScroll=e},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},this.getShowInvisibles=function(){return this.$textLayer.showInvisibles},this.getDisplayIndentGuides=function(){return this.$textLayer.displayIndentGuides},this.setDisplayIndentGuides=function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},this.$showPrintMargin=!0,this.setShowPrintMargin=function(e){this.$showPrintMargin=e,this.$updatePrintMargin()},this.getShowPrintMargin=function(){return this.$showPrintMargin},this.$printMarginColumn=80,this.setPrintMarginColumn=function(e){this.$printMarginColumn=e,this.$updatePrintMargin()},this.getPrintMarginColumn=function(){return this.$printMarginColumn},this.getShowGutter=function(){return this.showGutter},this.setShowGutter=function(e){this.showGutter!==e&&(this.$gutter.style.display=e?"block":"none",this.showGutter=e,this.onResize(!0))},this.getFadeFoldWidgets=function(){return i.hasCssClass(this.$gutter,"ace_fade-fold-widgets")},this.setFadeFoldWidgets=function(e){e?i.addCssClass(this.$gutter,"ace_fade-fold-widgets"):i.removeCssClass(this.$gutter,"ace_fade-fold-widgets")},this.$highlightGutterLine=!1,this.setHighlightGutterLine=function(e){return this.$highlightGutterLine!=e?(this.$highlightGutterLine=e,this.$gutterLineHighlight?(this.$gutterLineHighlight.style.display=e?"":"none",this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight(),void 0):(this.$gutterLineHighlight=i.createElement("div"),this.$gutterLineHighlight.className="ace_gutter-active-line",this.$gutter.appendChild(this.$gutterLineHighlight),void 0)):void 0},this.getHighlightGutterLine=function(){return this.$highlightGutterLine},this.$updateGutterLineHighlight=function(){this.$gutterLineHighlight.style.top=this.$cursorLayer.$pixelPos.top-this.layerConfig.offset+"px",this.$gutterLineHighlight.style.height=this.layerConfig.lineHeight+"px"},this.$updatePrintMargin=function(){var e;if(this.$showPrintMargin||this.$printMarginEl){this.$printMarginEl||(e=i.createElement("div"),e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=i.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild));var t=this.$printMarginEl.style;t.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px",t.visibility=this.$showPrintMargin?"visible":"hidden"}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.content},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(this.$keepTextAreaAtCursor){var e=this.$cursorLayer.$pixelPos.top,t=this.$cursorLayer.$pixelPos.left;if(e-=this.layerConfig.offset,!(0>e||e>this.layerConfig.height-this.lineHeight)){var n=this.characterWidth;this.$composition&&(n+=this.textarea.scrollWidth),t-=this.scrollLeft,t>this.$size.scrollerWidth-n&&(t=this.$size.scrollerWidth-n),this.showGutter&&(t+=this.$gutterLayer.gutterWidth),this.textarea.style.height=this.lineHeight+"px",this.textarea.style.width=n+"px",this.textarea.style.left=t+"px",this.textarea.style.top=e-1+"px"}}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var e=Math.floor((this.layerConfig.height+this.layerConfig.offset)/this.layerConfig.lineHeight);return this.layerConfig.firstRow-1+e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.getHScrollBarAlwaysVisible=function(){return this.$horizScrollAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.$horizScrollAlwaysVisible!=e&&(this.$horizScrollAlwaysVisible=e,(!this.$horizScrollAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL))},this.$updateScrollBar=function(){this.scrollBar.setInnerHeight(this.layerConfig.maxHeight),this.scrollBar.setScrollTop(this.scrollTop)},this.$renderChanges=function(e,t){if(t||e&&this.session&&this.container.offsetWidth){if((e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL)&&this.$computeLayerConfig(),e&this.CHANGE_H_SCROLL){this.scroller.scrollLeft=this.scrollLeft;var n=this.scroller.scrollLeft;this.scrollLeft=n,this.session.setScrollLeft(n),this.scroller.className=0==this.scrollLeft?"ace_scroller":"ace_scroller ace_scroll-left"}return e&this.CHANGE_FULL?(this.$textLayer.checkForSizeChanges(),this.$updateScrollBar(),this.$textLayer.update(this.layerConfig),this.showGutter&&this.$gutterLayer.update(this.layerConfig),this.$markerBack.update(this.layerConfig),this.$markerFront.update(this.layerConfig),this.$cursorLayer.update(this.layerConfig),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),void 0):e&this.CHANGE_SCROLL?(this.$updateScrollBar(),e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(this.layerConfig):this.$textLayer.scrollLines(this.layerConfig),this.showGutter&&this.$gutterLayer.update(this.layerConfig),this.$markerBack.update(this.layerConfig),this.$markerFront.update(this.layerConfig),this.$cursorLayer.update(this.layerConfig),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),void 0):(e&this.CHANGE_TEXT?(this.$textLayer.update(this.layerConfig),this.showGutter&&this.$gutterLayer.update(this.layerConfig)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.showGutter)&&this.$gutterLayer.update(this.layerConfig):(e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER)&&this.showGutter&&this.$gutterLayer.update(this.layerConfig),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(this.layerConfig),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(this.layerConfig),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(this.layerConfig),e&this.CHANGE_SIZE&&this.$updateScrollBar(),void 0)}},this.$computeLayerConfig=function(){var e=this.session,t=this.scrollTop%this.lineHeight,n=this.$size.scrollerHeight+this.lineHeight,i=this.$getLongestLine(),r=this.$horizScrollAlwaysVisible||this.$size.scrollerWidth-i<0,o=this.$horizScroll!==r;this.$horizScroll=r,o&&(this.scroller.style.overflowX=r?"scroll":"hidden",r||this.session.setScrollLeft(0));var s=this.session.getScreenLength()*this.lineHeight;this.session.setScrollTop(Math.max(0,Math.min(this.scrollTop,s-this.$size.scrollerHeight)));var a,l,u=Math.ceil(n/this.lineHeight)-1,c=Math.max(0,Math.round((this.scrollTop-t)/this.lineHeight)),h=c+u,f=this.lineHeight;c=e.screenToDocumentRow(c,0);var d=e.getFoldLine(c);d&&(c=d.start.row),a=e.documentToScreenRow(c,0),l=e.getRowLength(c)*f,h=Math.min(e.screenToDocumentRow(h,0),e.getLength()-1),n=this.$size.scrollerHeight+e.getRowLength(h)*f+l,t=this.scrollTop-a*f,this.layerConfig={width:i,padding:this.$padding,firstRow:c,firstRowScreen:a,lastRow:h,lineHeight:f,characterWidth:this.characterWidth,minHeight:n,maxHeight:s,offset:t,height:this.$size.scrollerHeight},this.$gutterLayer.element.style.marginTop=-t+"px",this.content.style.marginTop=-t+"px",this.content.style.width=i+2*this.$padding+"px",this.content.style.height=n+"px",o&&this.onResize(!0)},this.$updateLines=function(){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(!(e>n.lastRow+1||t<n.firstRow))return 1/0===t?(this.showGutter&&this.$gutterLayer.update(n),this.$textLayer.update(n),void 0):(this.$textLayer.updateLines(n,e,t),!0)},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.$textLayer.showInvisibles&&(e+=1),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n),this.scrollCursorIntoView(t,n)},this.scrollCursorIntoView=function(e,t){if(0!==this.$size.scrollerHeight){var n=this.$cursorLayer.getPixelPosition(e),i=n.left,r=n.top;this.scrollTop>r?(t&&(r-=t*this.$size.scrollerHeight),this.session.setScrollTop(r)):this.scrollTop+this.$size.scrollerHeight<r+this.lineHeight&&(t&&(r+=t*this.$size.scrollerHeight),this.session.setScrollTop(r+this.lineHeight-this.$size.scrollerHeight));var o=this.scrollLeft;o>i?(i<this.$padding+2*this.layerConfig.characterWidth&&(i=0),this.session.setScrollLeft(i)):o+this.$size.scrollerWidth<i+this.characterWidth&&this.session.setScrollLeft(Math.round(i+this.characterWidth-this.$size.scrollerWidth))}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){"number"==typeof e&&(e={row:e,column:0});var n=this.$cursorLayer.getPixelPosition(e),i=this.$size.scrollerHeight-this.lineHeight,r=n.top-i*(t||0);return this.session.setScrollTop(r),r},this.STEPS=8,this.$calcSteps=function(e,t){var n=0,i=this.STEPS,r=[],o=function(e,t,n){return n*(Math.pow(e-1,3)+1)+t};for(n=0;i>n;++n)r.push(o(n/this.STEPS,e,t-e));return r},this.scrollToLine=function(e,t,n,i){var r=this.$cursorLayer.getPixelPosition({row:e,column:0}),o=r.top;t&&(o-=this.$size.scrollerHeight/2);var s=this.scrollTop;this.session.setScrollTop(o),n!==!1&&this.animateScrolling(s,i)},this.animateScrolling=function(e,t){var n=this.scrollTop;if(this.$animatedScroll&&Math.abs(e-n)<1e5){var i=this,r=i.$calcSteps(e,n);this.$inScrollAnimation=!0,clearInterval(this.$timer),i.session.setScrollTop(r.shift()),this.$timer=setInterval(function(){r.length?(i.session.setScrollTop(r.shift()),i.session.$scrollTop=n):null!=n?(i.session.$scrollTop=-1,i.session.setScrollTop(n),n=null):(i.$timer=clearInterval(i.$timer),i.$inScrollAnimation=!1,t&&t())},10)}},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){0>e&&(e=0),this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){return 0>t&&this.session.getScrollTop()>0?!0:t>0&&this.session.getScrollTop()+this.$size.scrollerHeight<this.layerConfig.maxHeight?!0:void 0},this.pixelToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),i=(e+this.scrollLeft-n.left-this.$padding)/this.characterWidth,r=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),o=Math.round(i);return{row:r,column:o,side:i-o>0?1:-1}},this.screenToTextCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),i=Math.round((e+this.scrollLeft-n.left-this.$padding)/this.characterWidth),r=Math.floor((t+this.scrollTop-n.top)/this.lineHeight);return this.session.screenToDocumentPosition(r,Math.max(i,0))},this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),i=this.session.documentToScreenPosition(e,t),r=this.$padding+Math.round(i.column*this.characterWidth),o=i.row*this.lineHeight;return{pageX:n.left+r-this.scrollLeft,pageY:n.top+o-this.scrollTop}},this.visualizeFocus=function(){i.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){i.removeCssClass(this.container,"ace_focus")},this.showComposition=function(){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,i.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor()},this.setCompositionText=function(){this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(i.removeCssClass(this.textarea,"ace_composition"),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null)},this._loadTheme=function(e,t){return s.get("packaged")?(a.loadScript(s.moduleUrl(e,"theme"),t),void 0):t()},this.setTheme=function(t){function n(e){i.importCssString(e.cssText,e.cssClass,r.container.ownerDocument),r.$theme&&i.removeCssClass(r.container,r.$theme),r.$theme=e?e.cssClass:null,r.$theme&&i.addCssClass(r.container,r.$theme),e&&e.isDark?i.addCssClass(r.container,"ace_dark"):i.removeCssClass(r.container,"ace_dark"),r.$size&&(r.$size.width=0,r.onResize())}var r=this;if(this.$themeValue=t,t&&"string"!=typeof t)n(t);else{var o,s=t||"ace/theme/textmate";try{o=e(s)}catch(a){}if(o)return n(o);r._loadTheme(s,function(){e([s],function(e){r.$themeValue===t&&n(e)})})}},this.getTheme=function(){return this.$themeValue},this.setStyle=function(e,t){i.setCssClass(this.container,e,0!=t)},this.unsetStyle=function(e){i.removeCssClass(this.container,e)},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}.call(m.prototype),t.VirtualRenderer=m}),define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(e,t){var n=e("../lib/dom"),i=e("../lib/oop"),r=e("../lib/event_emitter").EventEmitter,o=function(e){this.element=n.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this)};!function(){i.implement(this,r),this.setSession=function(e){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=e,e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t,n,i=0;i<e.length;i++){var r=e[i],n=r.row,t=this.$annotations[n];t||(t=this.$annotations[n]={text:[]});var o=r.text.replace(/"/g,"&quot;").replace(/'/g,"&#8217;").replace(/</g,"&lt;");-1===t.text.indexOf(o)&&t.text.push(o);var s=r.type;"error"==s?t.className=" ace_error":"warning"==s&&" ace_error"!=t.className?t.className=" ace_warning":"info"==s&&!t.className&&(t.className=" ace_info")}},this.$updateAnnotations=function(e){if(this.$annotations.length){var t=e.data,n=t.range,i=n.start.row,r=n.end.row-i;if(0!==r)if("removeText"==t.action||"removeLines"==t.action)this.$annotations.splice(i,r+1,null);else{var o=Array(r+1);o.unshift(i,1),this.$annotations.splice.apply(this.$annotations,o)}}},this.update=function(e){for(var t={className:""},i=[],r=e.firstRow,o=e.lastRow,s=this.session.getNextFoldLine(r),a=s?s.start.row:1/0,l=this.$showFoldWidgets&&this.session.foldWidgets,u=this.session.$breakpoints,c=this.session.$decorations,h=0;r>a&&(r=s.end.row+1,s=this.session.getNextFoldLine(r,s),a=s?s.start.row:1/0),!(r>o);){var f=this.$annotations[r]||t;
if(i.push("<div class='ace_gutter-cell ",u[r]||"",c[r]||"",f.className,"' style='height:",this.session.getRowLength(r)*e.lineHeight,"px;'>",h=r+1),l){var d=l[r];null==d&&(d=l[r]=this.session.getFoldWidget(r)),d&&i.push("<span class='ace_fold-widget ace_",d,"start"==d&&r==a&&r<s.end.row?" ace_closed":" ace_open","' style='height:",e.lineHeight,"px","'></span>")}i.push("</div>"),r++}this.element=n.setInnerHtml(this.element,i.join("")),this.element.style.height=e.minHeight+"px",this.session.$useWrapMode&&(h=this.session.getLength());var p=(""+h).length*e.characterWidth,g=this.$padding||this.$computePadding();p+=g.left+g.right,p!==this.gutterWidth&&(this.gutterWidth=p,this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._emit("changeGutterWidth",p))},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?n.addCssClass(this.element,"ace_folding-enabled"):n.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=n.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=parseInt(e.paddingLeft)+1,this.$padding.right=parseInt(e.paddingRight),this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return e.x<t.left+n.left?"markers":this.$showFoldWidgets&&e.x>n.right-t.right?"foldWidgets":void 0}}.call(o.prototype),t.Gutter=o}),define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t){var n=e("../range").Range,i=e("../lib/dom"),r=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};!function(){this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.update=function(e){var e=e||this.config;if(e){this.config=e;var t=[];for(var n in this.markers){var r=this.markers[n];if(r.range){var o=r.range.clipRows(e.firstRow,e.lastRow);if(!o.isEmpty())if(o=o.toScreenRange(this.session),r.renderer){var s=this.$getTop(o.start.row,e),a=Math.round(this.$padding+o.start.column*e.characterWidth);r.renderer(t,o,a,s,e)}else o.isMultiLine()?"text"==r.type?this.drawTextMarker(t,o,r.clazz,e):this.drawMultiLineMarker(t,o,r.clazz,e,r.type):this.drawSingleLineMarker(t,o,r.clazz+" ace_start",e,null,r.type)}else r.update(t,this,this.session,e)}this.element=i.setInnerHtml(this.element,t.join(""))}},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(e,t,i,r){var o=t.start.row,s=new n(o,t.start.column,o,this.session.getScreenLastRowColumn(o));for(this.drawSingleLineMarker(e,s,i+" ace_start",r,1,"text"),o=t.end.row,s=new n(o,0,o,t.end.column),this.drawSingleLineMarker(e,s,i,r,0,"text"),o=t.start.row+1;o<t.end.row;o++)s.start.row=o,s.end.row=o,s.end.column=this.session.getScreenLastRowColumn(o),this.drawSingleLineMarker(e,s,i,r,1,"text")},this.drawMultiLineMarker=function(e,t,n,i,r){var o="background"===r?0:this.$padding,s=i.lineHeight,a=this.$getTop(t.start.row,i),l=Math.round(o+t.start.column*i.characterWidth);e.push("<div class='",n," ace_start' style='","height:",s,"px;","right:0;","top:",a,"px;","left:",l,"px;'></div>"),a=this.$getTop(t.end.row,i);var u=Math.round(t.end.column*i.characterWidth);e.push("<div class='",n,"' style='","height:",s,"px;","width:",u,"px;","top:",a,"px;","left:",o,"px;'></div>"),s=(t.end.row-t.start.row-1)*i.lineHeight,0>s||(a=this.$getTop(t.start.row+1,i),e.push("<div class='",n,"' style='","height:",s,"px;","right:0;","top:",a,"px;","left:",o,"px;'></div>"))},this.drawSingleLineMarker=function(e,t,n,i,r,o){var s="background"===o?0:this.$padding,a=i.lineHeight;if("background"===o)var l=i.width;else l=Math.round((t.end.column+(r||0)-t.start.column)*i.characterWidth);var u=this.$getTop(t.start.row,i),c=Math.round(s+t.start.column*i.characterWidth);e.push("<div class='",n,"' style='","height:",a,"px;","width:",l,"px;","top:",u,"px;","left:",c,"px;'></div>")}}.call(r.prototype),t.Marker=r}),define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,t){var n=e("../lib/oop"),i=e("../lib/dom"),r=e("../lib/lang"),o=e("../lib/useragent"),s=e("../lib/event_emitter").EventEmitter,a=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$characterSize={width:0,height:0},this.checkForSizeChanges(),this.$pollSizeChanges()};!function(){n.implement(this,s),this.EOF_CHAR="¶",this.EOL_CHAR="¬",this.TAB_CHAR="→",this.SPACE_CHAR="·",this.$padding=0,this.setPadding=function(e){this.$padding=e,this.element.style.padding="0 "+e+"px"},this.getLineHeight=function(){return this.$characterSize.height||1},this.getCharacterWidth=function(){return this.$characterSize.width||1},this.checkForSizeChanges=function(){var e=this.$measureSizes();if(e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$pollSizeChanges=function(){var e=this;this.$pollSizeChangesTimer=setInterval(function(){e.checkForSizeChanges()},500)},this.$fontStyles={fontFamily:1,fontSize:1,fontWeight:1,fontStyle:1,lineHeight:1},this.$measureSizes=o.isIE||o.isOldGecko?function(){var e=1e3;if(!this.$measureNode){var t=this.$measureNode=i.createElement("div"),n=t.style;if(n.width=n.height="auto",n.left=n.top=40*-e+"px",n.visibility="hidden",n.position="fixed",n.overflow="visible",n.whiteSpace="nowrap",t.innerHTML=r.stringRepeat("Xy",e),this.element.ownerDocument.body)this.element.ownerDocument.body.appendChild(t);else{for(var o=this.element.parentNode;!i.hasCssClass(o,"ace_editor");)o=o.parentNode;o.appendChild(t)}}if(!this.element.offsetWidth)return null;var n=this.$measureNode.style,s=i.computedStyle(this.element);for(var a in this.$fontStyles)n[a]=s[a];var l={height:this.$measureNode.offsetHeight,width:this.$measureNode.offsetWidth/(2*e)};return 0==l.width||0==l.height?null:l}:function(){if(!this.$measureNode){var e=this.$measureNode=i.createElement("div"),t=e.style;t.width=t.height="auto",t.left=t.top="-100px",t.visibility="hidden",t.position="fixed",t.overflow="visible",t.whiteSpace="nowrap",e.innerHTML="X";for(var n=this.element.parentNode;n&&!i.hasCssClass(n,"ace_editor");)n=n.parentNode;if(!n)return this.$measureNode=null;n.appendChild(e)}var r=this.$measureNode.getBoundingClientRect(),o={height:r.height,width:r.width};return 0==o.width||0==o.height?null:o},this.setSession=function(e){this.session=e,this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(e){return this.showInvisibles==e?!1:(this.showInvisibles=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides==e?!1:(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;for(var t=this.$tabStrings=[0],n=1;e+1>n;n++)this.showInvisibles?t.push("<span class='ace_invisible'>"+this.TAB_CHAR+Array(n).join("&#160;")+"</span>"):t.push(new Array(n+1).join("&#160;"));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var i="ace_indent-guide",r=Array(this.tabSize+1).join("&#160;"),o=r;this.showInvisibles&&(i+=" ace_invisible",o=this.TAB_CHAR+r.substr(6)),this.$tabStrings[" "]="<span class='"+i+"'>"+r+"</span>",this.$tabStrings["	"]="<span class='"+i+"'>"+o+"</span>"}},this.updateLines=function(e,t,n){(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)&&this.scrollLines(e),this.config=e;for(var r=Math.max(t,e.firstRow),o=Math.min(n,e.lastRow),s=this.element.childNodes,a=0,l=e.firstRow;r>l;l++){var u=this.session.getFoldLine(l);if(u){if(u.containsRow(r)){r=u.start.row;break}l=u.end.row}a++}for(var l=r,u=this.session.getNextFoldLine(l),c=u?u.start.row:1/0;l>c&&(l=u.end.row+1,u=this.session.getNextFoldLine(l,u),c=u?u.start.row:1/0),!(l>o);){var h=s[a++];if(h){var f=[];this.$renderLine(f,l,!this.$useLineGroups(),l==c?u:!1),i.setInnerHtml(h,f.join(""))}l++}},this.scrollLines=function(e){var t=this.config;if(this.config=e,!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);var n=this.element;if(t.firstRow<e.firstRow)for(var i=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);i>0;i--)n.removeChild(n.firstChild);if(t.lastRow>e.lastRow)for(var i=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);i>0;i--)n.removeChild(n.lastChild);if(e.firstRow<t.firstRow){var r=this.$renderLinesFragment(e,e.firstRow,t.firstRow-1);n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)}if(e.lastRow>t.lastRow){var r=this.$renderLinesFragment(e,t.lastRow+1,e.lastRow);n.appendChild(r)}},this.$renderLinesFragment=function(e,t,n){for(var r=this.element.ownerDocument.createDocumentFragment(),o=t,s=this.session.getNextFoldLine(o),a=s?s.start.row:1/0;o>a&&(o=s.end.row+1,s=this.session.getNextFoldLine(o,s),a=s?s.start.row:1/0),!(o>n);){var l=i.createElement("div"),u=[];if(this.$renderLine(u,o,!1,o==a?s:!1),l.innerHTML=u.join(""),this.$useLineGroups())l.className="ace_line_group",r.appendChild(l);else for(var c=l.childNodes;c.length;)r.appendChild(c[0]);o++}return r},this.update=function(e){this.config=e;for(var t=[],n=e.firstRow,r=e.lastRow,o=n,s=this.session.getNextFoldLine(o),a=s?s.start.row:1/0;o>a&&(o=s.end.row+1,s=this.session.getNextFoldLine(o,s),a=s?s.start.row:1/0),!(o>r);)this.$useLineGroups()&&t.push("<div class='ace_line_group'>"),this.$renderLine(t,o,!1,o==a?s:!1),this.$useLineGroups()&&t.push("</div>"),o++;this.element=i.setInnerHtml(this.element,t.join(""))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,n,i){var r=this,o=/\t|&|<|( +)|([\x00-\x1f\x80-\xa0\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g,s=function(e,n,i,o){if(n)return new Array(e.length+1).join("&#160;");if("&"==e)return"&#38;";if("<"==e)return"&#60;";if("	"==e){var s=r.session.getScreenTabSize(t+o);return t+=s-1,r.$tabStrings[s]}if("　"==e){var a=r.showInvisibles?"ace_cjk ace_invisible":"ace_cjk",l=r.showInvisibles?r.SPACE_CHAR:"";return t+=1,"<span class='"+a+"' style='width:"+2*r.config.characterWidth+"px'>"+l+"</span>"}return i?"<span class='ace_invisible ace_invalid'>"+r.SPACE_CHAR+"</span>":(t+=1,"<span class='ace_cjk' style='width:"+2*r.config.characterWidth+"px'>"+e+"</span>")},a=i.replace(o,s);if(this.$textToken[n.type])e.push(a);else{var l="ace_"+n.type.replace(/\./g," ace_"),u="";"fold"==n.type&&(u=" style='width:"+n.value.length*this.config.characterWidth+"px;' "),e.push("<span class='",l,"'",u,">",a,"</span>")}return t+i.length},this.renderIndentGuide=function(e,t){var n=t.search(this.$indentGuideRe);return 0>=n?t:" "==t[0]?(n-=n%this.tabSize,e.push(Array(n/this.tabSize+1).join(this.$tabStrings[" "])),t.substr(n)):"	"==t[0]?(e.push(Array(n+1).join(this.$tabStrings["	"])),t.substr(n)):t},this.$renderWrappedLine=function(e,t,n,i){for(var r=0,o=0,s=n[0],a=0,l=0;l<t.length;l++){var u=t[l],c=u.value;if(0==l&&this.displayIndentGuides){if(r=c.length,c=this.renderIndentGuide(e,c),!c)continue;r-=c.length}if(r+c.length<s)a=this.$renderToken(e,a,u,c),r+=c.length;else{for(;r+c.length>=s;)a=this.$renderToken(e,a,u,c.substring(0,s-r)),c=c.substring(s-r),r=s,i||e.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),o++,a=0,s=n[o]||Number.MAX_VALUE;0!=c.length&&(r+=c.length,a=this.$renderToken(e,a,u,c))}}},this.$renderSimpleLine=function(e,t){var n=0,i=t[0],r=i.value;this.displayIndentGuides&&(r=this.renderIndentGuide(e,r)),r&&(n=this.$renderToken(e,n,i,r));for(var o=1;o<t.length;o++)i=t[o],r=i.value,n=this.$renderToken(e,n,i,r)},this.$renderLine=function(e,t,n,i){if(!i&&0!=i&&(i=this.session.getFoldLine(t)),i)var r=this.$getFoldLineTokens(t,i);else var r=this.session.getTokens(t);if(n||e.push("<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),r.length){var o=this.session.getRowSplitData(t);o&&o.length?this.$renderWrappedLine(e,r,o,n):this.$renderSimpleLine(e,r)}this.showInvisibles&&(i&&(t=i.end.row),e.push("<span class='ace_invisible'>",t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")),n||e.push("</div>")},this.$getFoldLineTokens=function(e,t){function n(e,t,n){for(var i=0,o=0;o+e[i].value.length<t;)if(o+=e[i].value.length,i++,i==e.length)return;if(o!=t){var s=e[i].value.substring(t-o);s.length>n-t&&(s=s.substring(0,n-t)),r.push({type:e[i].type,value:s}),o=t+s.length,i+=1}for(;n>o&&i<e.length;){var s=e[i].value;s.length+o>n?r.push({type:e[i].type,value:s.substring(0,n-o)}):r.push(e[i]),o+=s.length,i+=1}}var i=this.session,r=[],o=i.getTokens(e);return t.walk(function(e,t,s,a,l){e?r.push({type:"fold",value:e}):(l&&(o=i.getTokens(t)),o.length&&n(o,a,s))},t.end.row,this.session.getLine(t.end.row).length),r},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}.call(a.prototype),t.Text=a}),define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t){var n=e("../lib/dom"),i=function(e){this.element=n.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.cursors=[],this.cursor=this.addCursor()};!function(){this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){this.isBlinking=e,e&&this.restartTimer()},this.addCursor=function(){var e=n.createElement("div"),t="ace_cursor";return this.isVisible||(t+=" ace_hidden"),this.overwrite&&(t+=" ace_overwrite"),e.className=t,this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1;for(var e=this.cursors.length;e--;)n.addCssClass(this.cursors[e],"ace_hidden");clearInterval(this.blinkId)},this.showCursor=function(){this.isVisible=!0;for(var e=this.cursors.length;e--;)n.removeCssClass(this.cursors[e],"ace_hidden");this.element.style.visibility="",this.restartTimer()},this.restartTimer=function(){if(clearInterval(this.blinkId),this.isBlinking&&this.isVisible){var e=1==this.cursors.length?this.cursor:this.element;this.blinkId=setInterval(function(){e.style.visibility="hidden",setTimeout(function(){e.style.visibility=""},400)},1e3)}},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(e),i=Math.round(this.$padding+n.column*this.config.characterWidth),r=(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:i,top:r}},this.update=function(e){if(this.config=e,this.session.selectionMarkerCount>0){for(var t,n=this.session.$selectionMarkers,i=0,r=0,i=n.length;i--;){t=n[i];var o=this.getPixelPosition(t.cursor,!0);if(!((o.top>e.height+e.offset||o.top<-e.offset)&&i>1)){var s=(this.cursors[r++]||this.addCursor()).style;s.left=o.left+"px",s.top=o.top+"px",s.width=e.characterWidth+"px",s.height=e.lineHeight+"px"}}if(r>1)for(;this.cursors.length>r;)this.removeCursor()}else{var o=this.getPixelPosition(null,!0),s=this.cursor.style;for(s.left=o.left+"px",s.top=o.top+"px",s.width=e.characterWidth+"px",s.height=e.lineHeight+"px";this.cursors.length>1;)this.removeCursor()}var a=this.session.getOverwrite();a!=this.overwrite&&this.$setOverwrite(a),this.$pixelPos=o,this.restartTimer()},this.$setOverwrite=function(e){this.overwrite=e;for(var t=this.cursors.length;t--;)e?n.addCssClass(this.cursors[t],"ace_overwrite"):n.removeCssClass(this.cursors[t],"ace_overwrite")},this.destroy=function(){clearInterval(this.blinkId)}}.call(i.prototype),t.Cursor=i}),define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t){var n=e("./lib/oop"),i=e("./lib/dom"),r=e("./lib/event"),o=e("./lib/event_emitter").EventEmitter,s=function(e){this.element=i.createElement("div"),this.element.className="ace_scrollbar",this.inner=i.createElement("div"),this.inner.className="ace_scrollbar-inner",this.element.appendChild(this.inner),e.appendChild(this.element),this.width=i.scrollbarWidth(e.ownerDocument),this.element.style.width=(this.width||15)+5+"px",r.addListener(this.element,"scroll",this.onScroll.bind(this))};!function(){n.implement(this,o),this.onScroll=function(){this._emit("scroll",{data:this.element.scrollTop})},this.getWidth=function(){return this.width},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=function(e){this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.element.scrollTop=e}}.call(s.prototype),t.ScrollBar=s}),define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t){var n=e("./lib/event"),i=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.window=t||window};!function(){this.schedule=function(e){if(this.changes=this.changes|e,!this.pending){this.pending=!0;var t=this;n.nextTick(function(){t.pending=!1;for(var e;e=t.changes;)t.changes=0,t.onRender(e)},this.window)}}}.call(i.prototype),t.RenderLoop=i}),define("text!ace/css/editor.css",[],".ace_editor {\n    position: absolute;\n    overflow: hidden;\n    font-family: 'Menlo', 'Monaco', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;\n    font-size: 12px;\n}\n\n.ace_scroller {\n    position: absolute;\n    overflow: hidden;\n}\n\n.ace_content {\n    position: absolute;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    cursor: text;\n}\n\n.ace_gutter {\n    position: absolute;\n    overflow : hidden;\n    height: 100%;\n    width: auto;\n    cursor: default;\n    z-index: 4;\n}\n\n.ace_gutter-active-line {\n    position: absolute;\n    left: 0;\n    right: 0;\n}\n\n.ace_scroller.ace_scroll-left {\n    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;\n}\n\n.ace_gutter-cell {\n    padding-left: 19px;\n    padding-right: 6px;\n    background-repeat: no-repeat;\n}\n\n.ace_gutter-cell.ace_error {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUM2OEZDQTQ4RTU0MTFFMUEzM0VFRTM2RUY1M0RBMjYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUM2OEZDQTU4RTU0MTFFMUEzM0VFRTM2RUY1M0RBMjYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBQzY4RkNBMjhFNTQxMUUxQTMzRUVFMzZFRjUzREEyNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBQzY4RkNBMzhFNTQxMUUxQTMzRUVFMzZFRjUzREEyNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkgXxbAAAAJbSURBVHjapFNNaBNBFH4zs5vdZLP5sQmNpT82QY209heh1ioWisaDRcSKF0WKJ0GQnrzrxasHsR6EnlrwD0TagxJabaVEpFYxLWlLSS822tr87m66ccfd2GKyVhA6MMybgfe97/vmPUQphd0sZjto9XIn9OOsvlu2nkqRzVU+6vvlzPf8W6bk8dxQ0NPbxAALgCgg2JkaQuhzQau/El0zbmUA7U0Es8v2CiYmKQJHGO1QICCLoqilMhkmurDAyapKgqItezi/USRdJqEYY4D5jCy03ht2yMkkvL91jTTX10qzyyu2hruPRN7jgbH+EOsXcMLgYiThEgAMhABW85oqy1DXdRIdvP1AHJ2acQXvDIrVHcdQNrEKNYSVMSZGMjEzIIAwDXIo+6G/FxcGnzkC3T2oMhLjre49sBB+RRcHLqdafK6sYdE/GGBwU1VpFNj0aN8pJbe+BkZyevUrvLl6Xmm0W9IuTc0DxrDNAJd5oEvI/KRsNC3bQyNjPO9yQ1YHcfj2QvfQc/5TUhJTBc2iM0U7AWDQtc1nJHvD/cfO2s7jaGkiTEfa/Ep8coLu7zmNmh8+dc5lZDuUeFAGUNA/OY6JVaypQ0vjr7XYjUvJM37vt+j1vuTK5DgVfVUoTjVe+y3/LxMxY2GgU+CSLy4cpfsYorRXuXIOi0Vt40h67uZFTdIo6nLaZcwUJWAzwNS0tBnqqKzQDnjdG/iPyZxo46HaKUpbvYkj8qYRTZsBhge+JHhZyh0x9b95JqjVJkT084kZIPwu/mPWqPgfQ5jXh2+92Ay7HedfAgwA6KDWafb4w3cAAAAASUVORK5CYII=\");\n    background-repeat: no-repeat;\n    background-position: 2px center;\n}\n\n.ace_gutter-cell.ace_warning {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUM2OEZDQTg4RTU0MTFFMUEzM0VFRTM2RUY1M0RBMjYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUM2OEZDQTk4RTU0MTFFMUEzM0VFRTM2RUY1M0RBMjYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBQzY4RkNBNjhFNTQxMUUxQTMzRUVFMzZFRjUzREEyNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBQzY4RkNBNzhFNTQxMUUxQTMzRUVFMzZFRjUzREEyNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pgd7PfIAAAGmSURBVHjaYvr//z8DJZiJgUIANoCRkREb9gLiSVAaQx4OQM7AAkwd7XU2/v++/rOttdYGEB9dASEvOMydGKfH8Gv/p4XTkvRBfLxeQAP+1cUhXopyvzhP7P/IoSj7g7Mw09cNKO6J1QQ0L4gICPIv/veg/8W+JdFvQNLHVsW9/nmn9zk7B+cCkDwhL7gt6knSZnx9/LuCEOcvkIAMP+cvto9nfqyZmmUAksfnBUtbM60gX/3/kgyv3/xSFOL5DZT+L8vP+Yfh5cvfPvp/xUHyQHXGyAYwgpwBjZYFT3Y1OEl/OfCH4ffv3wzc4iwMvNIsDJ+f/mH4+vIPAxsb631WW0Yln6ZpQLXdMK/DXGDflh+sIv37EivD5x//Gb7+YWT4y86sl7BCCkSD+Z++/1dkvsFRl+HnD1Rvje4F8whjMXmGj58YGf5zsDMwcnAwfPvKcml62DsQDeaDxN+/Y0qwlpEHqrdB94IRNIDUgfgfKJChGK4OikEW3gTiXUB950ASLFAF54AC94A0G9QAfOnmF9DCDzABFqS08IHYDIScdijOjQABBgC+/9awBH96jwAAAABJRU5ErkJggg==\");\n    background-position: 2px center;\n}\n\n.ace_gutter-cell.ace_info {\n    background-image: url(\"data:image/gif;base64,R0lGODlhEAAQAMQAAAAAAEFBQVJSUl5eXmRkZGtra39/f4WFhYmJiZGRkaampry8vMPDw8zMzNXV1dzc3OTk5Orq6vDw8P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAkAABQALAAAAAAQABAAAAUuICWOZGmeaBml5XGwFCQSBGyXRSAwtqQIiRuiwIM5BoYVbEFIyGCQoeJGrVptIQA7\");\n    background-position: 2px center;\n}\n.ace_dark .ace_gutter-cell.ace_info {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGRTk5MTVGREIxNDkxMUUxOTc5Q0FFREQyMTNGMjBFQyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGRTk5MTVGRUIxNDkxMUUxOTc5Q0FFREQyMTNGMjBFQyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZFOTkxNUZCQjE0OTExRTE5NzlDQUVERDIxM0YyMEVDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkZFOTkxNUZDQjE0OTExRTE5NzlDQUVERDIxM0YyMEVDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+SIDkjAAAAJ1JREFUeNpi/P//PwMlgImBQkB7A6qrq/+DMC55FkIGKCoq4pVnpFkgTp069f/+/fv/r1u37r+tre1/kg0A+ptn9uzZYLaRkRHpLvjw4cNXWVlZhufPnzOcO3eOdAO0tbVPAjHDmzdvGA4fPsxIsgGSkpJmv379Ynj37h2DjIyMCMkG3LhxQ/T27dsMampqDHZ2dq/pH41DxwCAAAMAFdc68dUsFZgAAAAASUVORK5CYII=\");\n}\n\n.ace_scrollbar {\n    position: absolute;\n    overflow-x: hidden;\n    overflow-y: scroll;\n    right: 0;\n}\n\n.ace_scrollbar-inner {\n    position: absolute;\n    width: 1px;\n    left: 0;\n}\n\n.ace_print-margin {\n    position: absolute;\n    height: 100%;\n}\n\n.ace_text-input {\n    position: absolute;\n    z-index: 0;\n    width: 0.5em;\n    height: 1em;\n    opacity: 0;\n    background: transparent;\n    -moz-appearance: none;\n    appearance: none;\n    border: none;\n    resize: none;\n    outline: none;\n    overflow: hidden;\n}\n\n.ace_text-input.ace_composition {\n    background: #fff;\n    color: #000;\n    z-index: 1000;\n    opacity: 1;\n    border: solid lightgray 1px;\n    margin: -1px\n}\n\n.ace_layer {\n    z-index: 1;\n    position: absolute;\n    overflow: hidden;\n    white-space: nowrap;\n    height: 100%;\n    width: 100%;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    /* setting pointer-events: auto; on node under the mouse, which changes\n        during scroll, will break mouse wheel scrolling in Safari */\n    pointer-events: none;\n}\n\n.ace_gutter-layer {\n    position: relative;\n    width: auto;\n    text-align: right;\n    pointer-events: auto;\n}\n\n.ace_text-layer {\n    color: black;\n    font: inherit !important;\n}\n\n.ace_cjk {\n    display: inline-block;\n    text-align: center;\n}\n\n.ace_cursor-layer {\n    z-index: 4;\n}\n\n.ace_cursor {\n    z-index: 4;\n    position: absolute;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n}\n\n.ace_cursor.ace_hidden {\n    opacity: 0.2;\n}\n\n.ace_editor.ace_multiselect .ace_cursor {\n    border-left-width: 1px;\n}\n\n.ace_line {\n    white-space: nowrap;\n}\n\n.ace_marker-layer .ace_step {\n    position: absolute;\n    z-index: 3;\n}\n\n.ace_marker-layer .ace_selection {\n    position: absolute;\n    z-index: 5;\n}\n\n.ace_marker-layer .ace_bracket {\n    position: absolute;\n    z-index: 6;\n}\n\n.ace_marker-layer .ace_active-line {\n    position: absolute;\n    z-index: 2;\n}\n\n.ace_marker-layer .ace_selected-word {\n    position: absolute;\n    z-index: 4;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n}\n\n.ace_line .ace_fold {\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n\n    display: inline-block;\n    height: 11px;\n    margin-top: -2px;\n    vertical-align: middle;\n\n    background-image:\n        url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%11%00%00%00%09%08%06%00%00%00%D4%E8%C7%0C%00%00%03%1EiCCPICC%20Profile%00%00x%01%85T%DFk%D3P%14%FE%DAe%9D%B0%E1%8B%3Ag%11%09%3Eh%91ndStC%9C%B6kW%BA%CDZ%EA6%B7!H%9B%A6m%5C%9A%C6%24%ED~%B0%07%D9%8Bo%3A%C5w%F1%07%3E%F9%07%0C%D9%83o%7B%92%0D%C6%14a%F8%AC%88%22L%F6%22%B3%9E%9B4M'S%03%B9%F7%BB%DF%F9%EE9'%E7%E4%5E%A0%F9qZ%D3%14%2F%0F%14USO%C5%C2%FC%C4%E4%14%DF%F2%01%5E%1CC%2B%FChM%8B%86%16J%26G%40%0F%D3%B2y%EF%B3%F3%0E%1E%C6lt%EEo%DF%AB%FEc%D5%9A%95%0C%11%F0%1C%20%BE%945%C4%22%E1Y%A0i%5C%D4t%13%E0%D6%89%EF%9D15%C2%CDLsX%A7%04%09%1Fg8oc%81%E1%8C%8D%23%96f45%40%9A%09%C2%07%C5B%3AK%B8%408%98i%E0%F3%0D%D8%CE%81%14%E4'%26%A9%92.%8B%3C%ABER%2F%E5dE%B2%0C%F6%F0%1Fs%83%F2_%B0%A8%94%E9%9B%AD%E7%10%8Dm%9A%19N%D1%7C%8A%DE%1F9%7Dp%8C%E6%00%D5%C1%3F_%18%BDA%B8%9DpX6%E3%A35~B%CD%24%AE%11%26%BD%E7%EEti%98%EDe%9A%97Y)%12%25%1C%24%BCbT%AE3li%E6%0B%03%89%9A%E6%D3%ED%F4P%92%B0%9F4%BF43Y%F3%E3%EDP%95%04%EB1%C5%F5%F6KF%F4%BA%BD%D7%DB%91%93%07%E35%3E%A7)%D6%7F%40%FE%BD%F7%F5r%8A%E5y%92%F0%EB%B4%1E%8D%D5%F4%5B%92%3AV%DB%DB%E4%CD%A6%23%C3%C4wQ%3F%03HB%82%8E%1Cd(%E0%91B%0Ca%9Ac%C4%AA%F8L%16%19%22J%A4%D2itTy%B28%D6%3B(%93%96%ED%1CGx%C9_%0E%B8%5E%16%F5%5B%B2%B8%F6%E0%FB%9E%DD%25%D7%8E%BC%15%85%C5%B7%A3%D8Q%ED%B5%81%E9%BA%B2%13%9A%1B%7Fua%A5%A3n%E17%B9%E5%9B%1Bm%AB%0B%08Q%FE%8A%E5%B1H%5Ee%CAO%82Q%D7u6%E6%90S%97%FCu%0B%CF2%94%EE%25v%12X%0C%BA%AC%F0%5E%F8*l%0AO%85%17%C2%97%BF%D4%C8%CE%DE%AD%11%CB%80q%2C%3E%AB%9ES%CD%C6%EC%25%D2L%D2%EBd%B8%BF%8A%F5B%C6%18%F9%901CZ%9D%BE%24M%9C%8A9%F2%DAP%0B'%06w%82%EB%E6%E2%5C%2F%D7%07%9E%BB%CC%5D%E1%FA%B9%08%AD.r%23%8E%C2%17%F5E%7C!%F0%BE3%BE%3E_%B7o%88a%A7%DB%BE%D3d%EB%A31Z%EB%BB%D3%91%BA%A2%B1z%94%8F%DB'%F6%3D%8E%AA%13%19%B2%B1%BE%B1~V%08%2B%B4%A2cjJ%B3tO%00%03%25mN%97%F3%05%93%EF%11%84%0B%7C%88%AE-%89%8F%ABbW%90O%2B%0Ao%99%0C%5E%97%0CI%AFH%D9.%B0%3B%8F%ED%03%B6S%D6%5D%E6i_s9%F3*p%E9%1B%FD%C3%EB.7U%06%5E%19%C0%D1s.%17%A03u%E4%09%B0%7C%5E%2C%EB%15%DB%1F%3C%9E%B7%80%91%3B%DBc%AD%3Dma%BA%8B%3EV%AB%DBt.%5B%1E%01%BB%0F%AB%D5%9F%CF%AA%D5%DD%E7%E4%7F%0Bx%A3%FC%06%A9%23%0A%D6%C2%A1_2%00%00%00%09pHYs%00%00%0B%13%00%00%0B%13%01%00%9A%9C%18%00%00%00%B5IDAT(%15%A5%91%3D%0E%02!%10%85ac%E1%05%D6%CE%D6%C6%CE%D2%E8%ED%CD%DE%C0%C6%D6N.%E0V%F8%3D%9Ca%891XH%C2%BE%D9y%3F%90!%E6%9C%C3%BFk%E5%011%C6-%F5%C8N%04%DF%BD%FF%89%DFt%83DN%60%3E%F3%AB%A0%DE%1A%5Dg%BE%10Q%97%1B%40%9C%A8o%10%8F%5E%828%B4%1B%60%87%F6%02%26%85%1Ch%1E%C1%2B%5Bk%FF%86%EE%B7j%09%9A%DA%9B%ACe%A3%F9%EC%DA!9%B4%D5%A6%81%86%86%98%CC%3C%5B%40%FA%81%B3%E9%CB%23%94%C16Azo%05%D4%E1%C1%95a%3B%8A'%A0%E8%CC%17%22%85%1D%BA%00%A2%FA%DC%0A%94%D1%D1%8D%8B%3A%84%17B%C7%60%1A%25Z%FC%8D%00%00%00%00IEND%AEB%60%82\"),\n        url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%05%00%00%007%08%06%00%00%00%C4%DD%80C%00%00%03%1EiCCPICC%20Profile%00%00x%01%85T%DFk%D3P%14%FE%DAe%9D%B0%E1%8B%3Ag%11%09%3Eh%91ndStC%9C%B6kW%BA%CDZ%EA6%B7!H%9B%A6m%5C%9A%C6%24%ED~%B0%07%D9%8Bo%3A%C5w%F1%07%3E%F9%07%0C%D9%83o%7B%92%0D%C6%14a%F8%AC%88%22L%F6%22%B3%9E%9B4M'S%03%B9%F7%BB%DF%F9%EE9'%E7%E4%5E%A0%F9qZ%D3%14%2F%0F%14USO%C5%C2%FC%C4%E4%14%DF%F2%01%5E%1CC%2B%FChM%8B%86%16J%26G%40%0F%D3%B2y%EF%B3%F3%0E%1E%C6lt%EEo%DF%AB%FEc%D5%9A%95%0C%11%F0%1C%20%BE%945%C4%22%E1Y%A0i%5C%D4t%13%E0%D6%89%EF%9D15%C2%CDLsX%A7%04%09%1Fg8oc%81%E1%8C%8D%23%96f45%40%9A%09%C2%07%C5B%3AK%B8%408%98i%E0%F3%0D%D8%CE%81%14%E4'%26%A9%92.%8B%3C%ABER%2F%E5dE%B2%0C%F6%F0%1Fs%83%F2_%B0%A8%94%E9%9B%AD%E7%10%8Dm%9A%19N%D1%7C%8A%DE%1F9%7Dp%8C%E6%00%D5%C1%3F_%18%BDA%B8%9DpX6%E3%A35~B%CD%24%AE%11%26%BD%E7%EEti%98%EDe%9A%97Y)%12%25%1C%24%BCbT%AE3li%E6%0B%03%89%9A%E6%D3%ED%F4P%92%B0%9F4%BF43Y%F3%E3%EDP%95%04%EB1%C5%F5%F6KF%F4%BA%BD%D7%DB%91%93%07%E35%3E%A7)%D6%7F%40%FE%BD%F7%F5r%8A%E5y%92%F0%EB%B4%1E%8D%D5%F4%5B%92%3AV%DB%DB%E4%CD%A6%23%C3%C4wQ%3F%03HB%82%8E%1Cd(%E0%91B%0Ca%9Ac%C4%AA%F8L%16%19%22J%A4%D2itTy%B28%D6%3B(%93%96%ED%1CGx%C9_%0E%B8%5E%16%F5%5B%B2%B8%F6%E0%FB%9E%DD%25%D7%8E%BC%15%85%C5%B7%A3%D8Q%ED%B5%81%E9%BA%B2%13%9A%1B%7Fua%A5%A3n%E17%B9%E5%9B%1Bm%AB%0B%08Q%FE%8A%E5%B1H%5Ee%CAO%82Q%D7u6%E6%90S%97%FCu%0B%CF2%94%EE%25v%12X%0C%BA%AC%F0%5E%F8*l%0AO%85%17%C2%97%BF%D4%C8%CE%DE%AD%11%CB%80q%2C%3E%AB%9ES%CD%C6%EC%25%D2L%D2%EBd%B8%BF%8A%F5B%C6%18%F9%901CZ%9D%BE%24M%9C%8A9%F2%DAP%0B'%06w%82%EB%E6%E2%5C%2F%D7%07%9E%BB%CC%5D%E1%FA%B9%08%AD.r%23%8E%C2%17%F5E%7C!%F0%BE3%BE%3E_%B7o%88a%A7%DB%BE%D3d%EB%A31Z%EB%BB%D3%91%BA%A2%B1z%94%8F%DB'%F6%3D%8E%AA%13%19%B2%B1%BE%B1~V%08%2B%B4%A2cjJ%B3tO%00%03%25mN%97%F3%05%93%EF%11%84%0B%7C%88%AE-%89%8F%ABbW%90O%2B%0Ao%99%0C%5E%97%0CI%AFH%D9.%B0%3B%8F%ED%03%B6S%D6%5D%E6i_s9%F3*p%E9%1B%FD%C3%EB.7U%06%5E%19%C0%D1s.%17%A03u%E4%09%B0%7C%5E%2C%EB%15%DB%1F%3C%9E%B7%80%91%3B%DBc%AD%3Dma%BA%8B%3EV%AB%DBt.%5B%1E%01%BB%0F%AB%D5%9F%CF%AA%D5%DD%E7%E4%7F%0Bx%A3%FC%06%A9%23%0A%D6%C2%A1_2%00%00%00%09pHYs%00%00%0B%13%00%00%0B%13%01%00%9A%9C%18%00%00%00%3AIDAT8%11c%FC%FF%FF%7F%18%03%1A%60%01%F2%3F%A0%891%80%04%FF%11-%F8%17%9BJ%E2%05%B1ZD%81v%26t%E7%80%F8%A3%82h%A12%1A%20%A3%01%02%0F%01%BA%25%06%00%19%C0%0D%AEF%D5%3ES%00%00%00%00IEND%AEB%60%82\");\n    background-repeat: no-repeat, repeat-x;\n    background-position: center center, top left;\n    color: transparent;\n\n    border: 1px solid black;\n    -moz-border-radius: 2px;\n    -webkit-border-radius: 2px;\n    border-radius: 2px;\n\n    cursor: pointer;\n    pointer-events: auto;\n}\n\n.ace_dark .ace_fold {\n}\n\n.ace_fold:hover{\n    background-image:\n        url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%11%00%00%00%09%08%06%00%00%00%D4%E8%C7%0C%00%00%03%1EiCCPICC%20Profile%00%00x%01%85T%DFk%D3P%14%FE%DAe%9D%B0%E1%8B%3Ag%11%09%3Eh%91ndStC%9C%B6kW%BA%CDZ%EA6%B7!H%9B%A6m%5C%9A%C6%24%ED~%B0%07%D9%8Bo%3A%C5w%F1%07%3E%F9%07%0C%D9%83o%7B%92%0D%C6%14a%F8%AC%88%22L%F6%22%B3%9E%9B4M'S%03%B9%F7%BB%DF%F9%EE9'%E7%E4%5E%A0%F9qZ%D3%14%2F%0F%14USO%C5%C2%FC%C4%E4%14%DF%F2%01%5E%1CC%2B%FChM%8B%86%16J%26G%40%0F%D3%B2y%EF%B3%F3%0E%1E%C6lt%EEo%DF%AB%FEc%D5%9A%95%0C%11%F0%1C%20%BE%945%C4%22%E1Y%A0i%5C%D4t%13%E0%D6%89%EF%9D15%C2%CDLsX%A7%04%09%1Fg8oc%81%E1%8C%8D%23%96f45%40%9A%09%C2%07%C5B%3AK%B8%408%98i%E0%F3%0D%D8%CE%81%14%E4'%26%A9%92.%8B%3C%ABER%2F%E5dE%B2%0C%F6%F0%1Fs%83%F2_%B0%A8%94%E9%9B%AD%E7%10%8Dm%9A%19N%D1%7C%8A%DE%1F9%7Dp%8C%E6%00%D5%C1%3F_%18%BDA%B8%9DpX6%E3%A35~B%CD%24%AE%11%26%BD%E7%EEti%98%EDe%9A%97Y)%12%25%1C%24%BCbT%AE3li%E6%0B%03%89%9A%E6%D3%ED%F4P%92%B0%9F4%BF43Y%F3%E3%EDP%95%04%EB1%C5%F5%F6KF%F4%BA%BD%D7%DB%91%93%07%E35%3E%A7)%D6%7F%40%FE%BD%F7%F5r%8A%E5y%92%F0%EB%B4%1E%8D%D5%F4%5B%92%3AV%DB%DB%E4%CD%A6%23%C3%C4wQ%3F%03HB%82%8E%1Cd(%E0%91B%0Ca%9Ac%C4%AA%F8L%16%19%22J%A4%D2itTy%B28%D6%3B(%93%96%ED%1CGx%C9_%0E%B8%5E%16%F5%5B%B2%B8%F6%E0%FB%9E%DD%25%D7%8E%BC%15%85%C5%B7%A3%D8Q%ED%B5%81%E9%BA%B2%13%9A%1B%7Fua%A5%A3n%E17%B9%E5%9B%1Bm%AB%0B%08Q%FE%8A%E5%B1H%5Ee%CAO%82Q%D7u6%E6%90S%97%FCu%0B%CF2%94%EE%25v%12X%0C%BA%AC%F0%5E%F8*l%0AO%85%17%C2%97%BF%D4%C8%CE%DE%AD%11%CB%80q%2C%3E%AB%9ES%CD%C6%EC%25%D2L%D2%EBd%B8%BF%8A%F5B%C6%18%F9%901CZ%9D%BE%24M%9C%8A9%F2%DAP%0B'%06w%82%EB%E6%E2%5C%2F%D7%07%9E%BB%CC%5D%E1%FA%B9%08%AD.r%23%8E%C2%17%F5E%7C!%F0%BE3%BE%3E_%B7o%88a%A7%DB%BE%D3d%EB%A31Z%EB%BB%D3%91%BA%A2%B1z%94%8F%DB'%F6%3D%8E%AA%13%19%B2%B1%BE%B1~V%08%2B%B4%A2cjJ%B3tO%00%03%25mN%97%F3%05%93%EF%11%84%0B%7C%88%AE-%89%8F%ABbW%90O%2B%0Ao%99%0C%5E%97%0CI%AFH%D9.%B0%3B%8F%ED%03%B6S%D6%5D%E6i_s9%F3*p%E9%1B%FD%C3%EB.7U%06%5E%19%C0%D1s.%17%A03u%E4%09%B0%7C%5E%2C%EB%15%DB%1F%3C%9E%B7%80%91%3B%DBc%AD%3Dma%BA%8B%3EV%AB%DBt.%5B%1E%01%BB%0F%AB%D5%9F%CF%AA%D5%DD%E7%E4%7F%0Bx%A3%FC%06%A9%23%0A%D6%C2%A1_2%00%00%00%09pHYs%00%00%0B%13%00%00%0B%13%01%00%9A%9C%18%00%00%00%B5IDAT(%15%A5%91%3D%0E%02!%10%85ac%E1%05%D6%CE%D6%C6%CE%D2%E8%ED%CD%DE%C0%C6%D6N.%E0V%F8%3D%9Ca%891XH%C2%BE%D9y%3F%90!%E6%9C%C3%BFk%E5%011%C6-%F5%C8N%04%DF%BD%FF%89%DFt%83DN%60%3E%F3%AB%A0%DE%1A%5Dg%BE%10Q%97%1B%40%9C%A8o%10%8F%5E%828%B4%1B%60%87%F6%02%26%85%1Ch%1E%C1%2B%5Bk%FF%86%EE%B7j%09%9A%DA%9B%ACe%A3%F9%EC%DA!9%B4%D5%A6%81%86%86%98%CC%3C%5B%40%FA%81%B3%E9%CB%23%94%C16Azo%05%D4%E1%C1%95a%3B%8A'%A0%E8%CC%17%22%85%1D%BA%00%A2%FA%DC%0A%94%D1%D1%8D%8B%3A%84%17B%C7%60%1A%25Z%FC%8D%00%00%00%00IEND%AEB%60%82\"),\n        url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%05%00%00%007%08%06%00%00%00%C4%DD%80C%00%00%03%1EiCCPICC%20Profile%00%00x%01%85T%DFk%D3P%14%FE%DAe%9D%B0%E1%8B%3Ag%11%09%3Eh%91ndStC%9C%B6kW%BA%CDZ%EA6%B7!H%9B%A6m%5C%9A%C6%24%ED~%B0%07%D9%8Bo%3A%C5w%F1%07%3E%F9%07%0C%D9%83o%7B%92%0D%C6%14a%F8%AC%88%22L%F6%22%B3%9E%9B4M'S%03%B9%F7%BB%DF%F9%EE9'%E7%E4%5E%A0%F9qZ%D3%14%2F%0F%14USO%C5%C2%FC%C4%E4%14%DF%F2%01%5E%1CC%2B%FChM%8B%86%16J%26G%40%0F%D3%B2y%EF%B3%F3%0E%1E%C6lt%EEo%DF%AB%FEc%D5%9A%95%0C%11%F0%1C%20%BE%945%C4%22%E1Y%A0i%5C%D4t%13%E0%D6%89%EF%9D15%C2%CDLsX%A7%04%09%1Fg8oc%81%E1%8C%8D%23%96f45%40%9A%09%C2%07%C5B%3AK%B8%408%98i%E0%F3%0D%D8%CE%81%14%E4'%26%A9%92.%8B%3C%ABER%2F%E5dE%B2%0C%F6%F0%1Fs%83%F2_%B0%A8%94%E9%9B%AD%E7%10%8Dm%9A%19N%D1%7C%8A%DE%1F9%7Dp%8C%E6%00%D5%C1%3F_%18%BDA%B8%9DpX6%E3%A35~B%CD%24%AE%11%26%BD%E7%EEti%98%EDe%9A%97Y)%12%25%1C%24%BCbT%AE3li%E6%0B%03%89%9A%E6%D3%ED%F4P%92%B0%9F4%BF43Y%F3%E3%EDP%95%04%EB1%C5%F5%F6KF%F4%BA%BD%D7%DB%91%93%07%E35%3E%A7)%D6%7F%40%FE%BD%F7%F5r%8A%E5y%92%F0%EB%B4%1E%8D%D5%F4%5B%92%3AV%DB%DB%E4%CD%A6%23%C3%C4wQ%3F%03HB%82%8E%1Cd(%E0%91B%0Ca%9Ac%C4%AA%F8L%16%19%22J%A4%D2itTy%B28%D6%3B(%93%96%ED%1CGx%C9_%0E%B8%5E%16%F5%5B%B2%B8%F6%E0%FB%9E%DD%25%D7%8E%BC%15%85%C5%B7%A3%D8Q%ED%B5%81%E9%BA%B2%13%9A%1B%7Fua%A5%A3n%E17%B9%E5%9B%1Bm%AB%0B%08Q%FE%8A%E5%B1H%5Ee%CAO%82Q%D7u6%E6%90S%97%FCu%0B%CF2%94%EE%25v%12X%0C%BA%AC%F0%5E%F8*l%0AO%85%17%C2%97%BF%D4%C8%CE%DE%AD%11%CB%80q%2C%3E%AB%9ES%CD%C6%EC%25%D2L%D2%EBd%B8%BF%8A%F5B%C6%18%F9%901CZ%9D%BE%24M%9C%8A9%F2%DAP%0B'%06w%82%EB%E6%E2%5C%2F%D7%07%9E%BB%CC%5D%E1%FA%B9%08%AD.r%23%8E%C2%17%F5E%7C!%F0%BE3%BE%3E_%B7o%88a%A7%DB%BE%D3d%EB%A31Z%EB%BB%D3%91%BA%A2%B1z%94%8F%DB'%F6%3D%8E%AA%13%19%B2%B1%BE%B1~V%08%2B%B4%A2cjJ%B3tO%00%03%25mN%97%F3%05%93%EF%11%84%0B%7C%88%AE-%89%8F%ABbW%90O%2B%0Ao%99%0C%5E%97%0CI%AFH%D9.%B0%3B%8F%ED%03%B6S%D6%5D%E6i_s9%F3*p%E9%1B%FD%C3%EB.7U%06%5E%19%C0%D1s.%17%A03u%E4%09%B0%7C%5E%2C%EB%15%DB%1F%3C%9E%B7%80%91%3B%DBc%AD%3Dma%BA%8B%3EV%AB%DBt.%5B%1E%01%BB%0F%AB%D5%9F%CF%AA%D5%DD%E7%E4%7F%0Bx%A3%FC%06%A9%23%0A%D6%C2%A1_2%00%00%00%09pHYs%00%00%0B%13%00%00%0B%13%01%00%9A%9C%18%00%00%003IDAT8%11c%FC%FF%FF%7F%3E%03%1A%60%01%F2%3F%A3%891%80%04%FFQ%26%F8w%C0%B43%A1%DB%0C%E2%8F%0A%A2%85%CAh%80%8C%06%08%3C%04%E8%96%18%00%A3S%0D%CD%CF%D8%C1%9D%00%00%00%00IEND%AEB%60%82\");\n    background-repeat: no-repeat, repeat-x;\n    background-position: center center, top left;\n}\n\n.ace_editor.ace_dragging .ace_content {\n    cursor: move;\n}\n\n.ace_gutter-tooltip {\n    background-color: #FFFFD5;\n    border: 1px solid gray;\n    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.4);\n    color: black;\n    display: inline-block;\n    padding: 4px;\n    position: absolute;\n    z-index: 300;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    cursor: default;\n}\n\n.ace_folding-enabled > .ace_gutter-cell {\n    padding-right: 13px;\n}\n\n.ace_fold-widget {\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n\n    margin: 0 -12px 0 1px;\n    display: inline-block;\n    width: 11px;\n    vertical-align: top;\n\n    background-image: url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%05%00%00%00%05%08%06%00%00%00%8Do%26%E5%00%00%004IDATx%DAe%8A%B1%0D%000%0C%C2%F2%2CK%96%BC%D0%8F9%81%88H%E9%D0%0E%96%C0%10%92%3E%02%80%5E%82%E4%A9*-%EEsw%C8%CC%11%EE%96w%D8%DC%E9*Eh%0C%151(%00%00%00%00IEND%AEB%60%82\");\n    background-repeat: no-repeat;\n    background-position: center;\n\n    border-radius: 3px;\n    \n    border: 1px solid transparent;\n}\n\n.ace_fold-widget.ace_end {\n    background-image: url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%05%00%00%00%05%08%06%00%00%00%8Do%26%E5%00%00%004IDATx%DAm%C7%C1%09%000%08C%D1%8C%ECE%C8E(%8E%EC%02)%1EZJ%F1%C1'%04%07I%E1%E5%EE%CAL%F5%A2%99%99%22%E2%D6%1FU%B5%FE0%D9x%A7%26Wz5%0E%D5%00%00%00%00IEND%AEB%60%82\");\n}\n\n.ace_fold-widget.ace_closed {\n    background-image: url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%03%00%00%00%06%08%06%00%00%00%06%E5%24%0C%00%00%009IDATx%DA5%CA%C1%09%000%08%03%C0%AC*(%3E%04%C1%0D%BA%B1%23%A4Uh%E0%20%81%C0%CC%F8%82%81%AA%A2%AArGfr%88%08%11%11%1C%DD%7D%E0%EE%5B%F6%F6%CB%B8%05Q%2F%E9tai%D9%00%00%00%00IEND%AEB%60%82\");\n}\n\n.ace_fold-widget:hover {\n    border: 1px solid rgba(0, 0, 0, 0.3);\n    background-color: rgba(255, 255, 255, 0.2);\n    -moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\n    -webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\n}\n\n.ace_fold-widget:active {\n    border: 1px solid rgba(0, 0, 0, 0.4);\n    background-color: rgba(0, 0, 0, 0.05);\n    -moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\n    -webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\n}\n/**\n * Dark version for fold widgets\n */\n.ace_dark .ace_fold-widget {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC\");\n}\n.ace_dark .ace_fold-widget.ace_end {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==\");\n}\n.ace_dark .ace_fold-widget.ace_closed {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==\");\n}\n.ace_dark .ace_fold-widget:hover {\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\n    background-color: rgba(255, 255, 255, 0.1);\n}\n.ace_dark .ace_fold-widget:active {\n    -moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\n    -webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\n}\n    \n    \n    \n.ace_fold-widget.ace_invalid {\n    background-color: #FFB4B4;\n    border-color: #DE5555;\n}\n\n.ace_fade-fold-widgets .ace_fold-widget {\n       -moz-transition: opacity 0.4s ease 0.05s;\n    -webkit-transition: opacity 0.4s ease 0.05s;\n         -o-transition: opacity 0.4s ease 0.05s;\n        -ms-transition: opacity 0.4s ease 0.05s;\n            transition: opacity 0.4s ease 0.05s;\n    opacity: 0;\n}\n\n.ace_fade-fold-widgets:hover .ace_fold-widget {\n       -moz-transition: opacity 0.05s ease 0.05s;\n    -webkit-transition: opacity 0.05s ease 0.05s;\n         -o-transition: opacity 0.05s ease 0.05s;\n        -ms-transition: opacity 0.05s ease 0.05s;\n            transition: opacity 0.05s ease 0.05s;\n    opacity:1;\n}\n\n.ace_underline {\n    text-decoration: underline;\n}\n\n.ace_bold {\n    font-weight: bold;\n}\n\n.ace_nobold .ace_bold {\n    font-weight: normal;\n}\n\n.ace_italic {\n    font-style: italic;\n}\n"),define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor"],function(e,t){function n(e,t,n){return p.$options.wrap=!0,p.$options.needle=t,p.$options.backwards=-1==n,p.find(e)
}function i(e,t){return e.row==t.row&&e.column==t.column}function r(e){e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),t.onSessionChange.call(e,e),e.on("changeSession",t.onSessionChange.bind(e)),e.on("mousedown",u),e.commands.addCommands(f.defaultCommands),o(e)}function o(e){function t(){i&&(r.style.cursor="",i=!1)}var n=e.textInput.getElement(),i=!1,r=e.renderer.content;c.addListener(n,"keydown",function(e){18!=e.keyCode||e.ctrlKey||e.shiftKey||e.metaKey?i&&(r.style.cursor=""):i||(r.style.cursor="crosshair",i=!0)}),c.addListener(n,"keyup",t),c.addListener(n,"blur",t)}var s=e("./range_list").RangeList,a=e("./range").Range,l=e("./selection").Selection,u=e("./mouse/multi_select_handler").onMouseDown,c=e("./lib/event"),h=e("./lib/lang"),f=e("./commands/multi_select_commands");t.commands=f.defaultCommands.concat(f.multiSelectCommands);var d=e("./search").Search,p=new d,g=e("./edit_session").EditSession;!function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}.call(g.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(e){if(!this.inMultiSelectMode&&0==this.rangeCount){var n=this.toOrientedRange();if(e.intersects(n))return t||this.fromOrientedRange(e);this.rangeList.add(n),this.$onAddRange(n)}e.cursor||(e.cursor=e.end);var i=this.rangeList.add(e);return this.$onAddRange(e),i.length&&this.$onRemoveRange(i),this.rangeCount>1&&!this.inMultiSelectMode&&(this._emit("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)}},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);return t?(this.$onRemoveRange(t),t[0]):void 0},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length?this.$onRemoveRange(e):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._emit("addRange",{range:e})},this.$onRemoveRange=function(e){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var n=e.length;n--;){var i=this.ranges.indexOf(e[n]);this.ranges.splice(i,1)}this._emit("removeRange",{ranges:e}),0==this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._emit("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),t=t||this.ranges[0],t&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new s,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeList.ranges.concat()},this.splitIntoLines=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=a.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var n=this.getRange(),i=this.isBackwards(),r=n.start.row,o=n.end.row;if(r==o){if(i)var s=n.end,l=n.start;else var s=n.start,l=n.end;return this.addRange(a.fromPoints(l,l)),this.addRange(a.fromPoints(s,s)),void 0}var u=[],c=this.getLineRange(r,!0);c.start.column=n.start.column,u.push(c);for(var h=r+1;o>h;h++)u.push(this.getLineRange(h,!0));c=this.getLineRange(o,!0),c.end.column=n.end.column,u.push(c),u.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=a.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var i=this.session.documentToScreenPosition(this.selectionLead),r=this.session.documentToScreenPosition(this.selectionAnchor),o=this.rectangularRangeBlock(i,r);o.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,n){var r=[],o=e.column<t.column;if(o)var s=e.column,l=t.column;else var s=t.column,l=e.column;var u=e.row<t.row;if(u)var c=e.row,h=t.row;else var c=t.row,h=e.row;0>s&&(s=0),0>c&&(c=0),c==h&&(n=!0);for(var f=c;h>=f;f++){var d=a.fromPoints(this.session.screenToDocumentPosition(f,s),this.session.screenToDocumentPosition(f,l));if(d.isEmpty()){if(p&&i(d.end,p))break;var p=d.end}d.cursor=o?d.start:d.end,r.push(d)}if(u&&r.reverse(),!n){for(var g=r.length-1;r[g].isEmpty()&&g>0;)g--;if(g>0)for(var m=0;r[m].isEmpty();)m++;for(var v=g;v>=m;v--)r[v].isEmpty()&&r.splice(v,1)}return r}}.call(l.prototype);var m=e("./editor").Editor;!function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(e.marker){this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);-1!=t&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(e){for(var t=this.session.$selectionMarkers,n=e.length;n--;){var i=e[n];if(i.marker){this.session.removeMarker(i.marker);var r=t.indexOf(i);-1!=r&&t.splice(r,1)}}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(f.keyboardHandler),this.commands.on("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(f.keyboardHandler),this.commands.removeEventListener("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onMultiSelectExec=function(e){var t=e.command,n=e.editor;n.multiSelect&&(t.multiSelectAction?"forEach"==t.multiSelectAction?n.forEachSelection(t,e.args):"single"==t.multiSelectAction?(n.exitMultiSelectMode(),t.exec(n,e.args||{})):t.multiSelectAction(n,e.args||{}):(t.exec(n,e.args||{}),n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()),e.preventDefault())},this.forEachSelection=function(e,t){if(!this.inVirtualSelectionMode){var n=this.session,i=this.selection,r=i.rangeList,o=i._eventRegistry;i._eventRegistry={};var s=new l(n);this.inVirtualSelectionMode=!0;for(var a=r.ranges.length;a--;)s.fromOrientedRange(r.ranges[a]),this.selection=n.selection=s,e.exec(this,t||{}),s.toOrientedRange(r.ranges[a]);s.detach(),this.selection=n.selection=i,this.inVirtualSelectionMode=!1,i._eventRegistry=o,i.mergeOverlappingRanges(),this.onCursorChange(),this.onSelectionChange()}},this.exitMultiSelectMode=function(){this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getCopyText=function(){var e="";if(this.inMultiSelectMode){var t=this.multiSelect.rangeList.ranges;e=[];for(var n=0;n<t.length;n++)e.push(this.session.getTextRange(t[n]));e=e.join(this.session.getDocument().getNewLineCharacter())}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.onPaste=function(e){if(!this.$readOnly){if(this._emit("paste",e),!this.inMultiSelectMode)return this.insert(e);var t=e.split(/\r\n|\r|\n/),n=this.selection.rangeList.ranges;if(t.length>n.length||t.length<=2||!t[1])return this.commands.exec("insertstring",this,e);for(var i=n.length;i--;){var r=n[i];r.isEmpty()||this.session.remove(r),this.session.insert(r.start,t[i])}}},this.findAll=function(e,t,n){t=t||{},t.needle=e||t.needle,this.$search.set(t);var i=this.$search.findAll(this.session);if(!i.length)return 0;this.$blockScrolling+=1;var r=this.multiSelect;n||r.toSingleRange(i[0]);for(var o=i.length;o--;)r.addRange(i[o],!0);return this.$blockScrolling-=1,i.length},this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange(),i=n.cursor==n.end,r=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(r.column=this.selection.$desiredColumn);var o=this.session.screenToDocumentPosition(r.row+e,r.column);if(n.isEmpty())var s=o;else var l=this.session.documentToScreenPosition(i?n.end:n.start),s=this.session.screenToDocumentPosition(l.row+e,l.column);if(i){var u=a.fromPoints(o,s);u.cursor=u.start}else{var u=a.fromPoints(s,o);u.cursor=u.end}if(u.desiredColumn=r.column,this.selection.inMultiSelectMode){if(t)var c=n.cursor}else this.selection.addRange(n);this.selection.addRange(u),c&&this.selection.substractPoint(c)},this.transposeSelections=function(e){for(var t=this.session,n=t.multiSelect,i=n.ranges,r=i.length;r--;){var o=i[r];if(o.isEmpty()){var s=t.getWordRange(o.start.row,o.start.column);o.start.row=s.start.row,o.start.column=s.start.column,o.end.row=s.end.row,o.end.column=s.end.column}}n.mergeOverlappingRanges();for(var a=[],r=i.length;r--;){var o=i[r];a.unshift(t.getTextRange(o))}0>e?a.unshift(a.pop()):a.push(a.shift());for(var r=i.length;r--;){var o=i[r],s=o.clone();t.replace(o,a[r]),o.start.row=s.start.row,o.start.column=s.start.column}},this.selectMore=function(e,t){var i=this.session,r=i.multiSelect,o=r.toOrientedRange();if(o.isEmpty()){var o=i.getWordRange(o.start.row,o.start.column);o.cursor=o.end,this.multiSelect.addRange(o)}var s=i.getTextRange(o),a=n(i,s,e);a&&(a.cursor=-1==e?a.start:a.end,this.multiSelect.addRange(a)),t&&this.multiSelect.substractPoint(o.cursor)},this.alignCursors=function(){var e=this.session,t=e.multiSelect,n=t.ranges;if(n.length){var i=-1,r=n.filter(function(e){return e.cursor.row==i?!0:(i=e.cursor.row,void 0)});t.$onRemoveRange(r);var o=0,s=1/0,l=n.map(function(t){var n=t.cursor,i=e.getLine(n.row),r=i.substr(n.column).search(/\S/g);return-1==r&&(r=0),n.column>o&&(o=n.column),s>r&&(s=r),r});n.forEach(function(t,n){var i=t.cursor,r=o-i.column,u=l[n]-s;r>u?e.insert(i,h.stringRepeat(" ",r-u)):e.remove(new a(i.row,i.column,i.row,i.column-r+u)),t.start.column=t.end.column=o,t.start.row=t.end.row=i.row,t.cursor=t.end}),t.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var u=this.selection.getRange(),c=u.start.row,f=u.end.row,d=this.session.doc.removeLines(c,f);d=this.$reAlignText(d),this.session.doc.insertLines(c,d),u.start.column=0,u.end.column=d[d.length-1].length,this.selection.setRange(u)}},this.$reAlignText=function(e){function t(e,t){return Array(e+1).join(t)}function n(e){return e[2]?t(o," ")+e[2]+t(s-e[2].length+a," ")+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function i(e){return e[2]?t(o+s-e[2].length," ")+e[2]+t(a," ")+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function r(e){return e[2]?t(o," ")+e[2]+t(a," ")+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}var o,s,a,l=!0,u=!0;return e.map(function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?null==o?(o=t[1].length,s=t[2].length,a=t[3].length,t):(o+s+a!=t[1].length+t[2].length+t[3].length&&(u=!1),o!=t[1].length&&(l=!1),o>t[1].length&&(o=t[1].length),s<t[2].length&&(s=t[2].length),a>t[3].length&&(a=t[3].length),t):[e]}).map(l?u?i:n:r)}}.call(m.prototype),t.onSessionChange=function(e){var t=e.session;t.multiSelect||(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t.multiSelect;var n=e.oldSession;n&&(n.multiSelect&&n.multiSelect.editor==this&&(n.multiSelect.editor=null),t.multiSelect.removeEventListener("addRange",this.$onAddRange),t.multiSelect.removeEventListener("removeRange",this.$onRemoveRange),t.multiSelect.removeEventListener("multiSelect",this.$onMultiSelect),t.multiSelect.removeEventListener("singleSelect",this.$onSingleSelect)),t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=r}),define("ace/range_list",["require","exports","module"],function(e,t){var n=function(){this.ranges=[]};!function(){this.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},this.pointIndex=function(e,t){for(var n=this.ranges,i=t||0;i<n.length;i++){var r=n[i],o=this.comparePoints(e,r.end);if(!(o>0))return 0==o?i:(o=this.comparePoints(e,r.start),o>=0?i:-i-1)}return-i-1},this.add=function(e){var t=this.pointIndex(e.start);0>t&&(t=-t-1);var n=this.pointIndex(e.end,t);return 0>n?n=-n-1:n++,this.ranges.splice(t,n-t,e)},this.addList=function(e){for(var t=[],n=e.length;n--;)t.push.call(t,this.add(e[n]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);return t>=0?this.ranges.splice(t,1):void 0},this.merge=function(){for(var e,t=[],n=this.ranges,i=n[0],r=1;r<n.length;r++){e=i,i=n[r];var o=this.comparePoints(e.end,i.start);0>o||(0!=o||e.isEmpty()||i.isEmpty())&&(this.comparePoints(e.end,i.end)<0&&(e.end.row=i.end.row,e.end.column=i.end.column),n.splice(r,1),t.push(i),i=e,r--)}return t},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);return t>=0?this.ranges[t]:void 0},this.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];var i=this.pointIndex({row:e,column:0});0>i&&(i=-i-1);var r=this.pointIndex({row:t,column:0},i);0>r&&(r=-r-1);for(var o=[],s=i;r>s;s++)o.push(n[s]);return o},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(e){var t=e.data.range;if("i"==e.data.action[0])var n=t.start,i=t.end;else var i=t.start,n=t.end;for(var r=n.row,o=i.row,s=o-r,a=-n.column+i.column,l=this.ranges,u=0,c=l.length;c>u;u++){var h=l[u];if(!(h.end.row<r)){if(h.start.row>r)break;h.start.row==r&&h.start.column>=n.column&&(h.start.column+=a,h.start.row+=s),h.end.row==r&&h.end.column>=n.column&&(h.end.column+=a,h.end.row+=s)}}if(0!=s&&c>u)for(;c>u;u++){var h=l[u];h.start.row+=s,h.end.row+=s}}}.call(n.prototype),t.RangeList=n}),define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event"],function(e,t){function n(e,t){return e.row==t.row&&e.column==t.column}function i(e){var t=e.domEvent,i=t.altKey,o=t.shiftKey,s=e.getAccelKey(),a=e.getButton();if(e.editor.inMultiSelectMode&&2==a)return e.editor.textInput.onContextMenu(e.domEvent),void 0;if(!s&&!i)return 0==a&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode(),void 0;var l=e.editor,u=l.selection,c=l.inMultiSelectMode,h=e.getDocumentPosition(),f=u.getCursor(),d=e.inSelection()||u.isEmpty()&&n(h,f),p=e.x,g=e.y,m=function(e){p=e.clientX,g=e.clientY},v=function(){var e=l.renderer.pixelToScreenCoordinates(p,g),t=y.screenToDocumentPosition(e.row,e.column);n(A,e)&&n(t,u.selectionLead)||(A=e,l.selection.moveCursorToPosition(t),l.selection.clearSelection(),l.renderer.scrollCursorIntoView(),l.removeSelectionMarkers(b),b=u.rectangularRangeBlock(A,E),b.forEach(l.addSelectionMarker,l),l.updateSelectionMarkers())},y=l.session,E=l.renderer.pixelToScreenCoordinates(p,g),A=E;if(!s||o||i||0!=a){if(!o&&i&&0==a){e.stop(),c&&!s?u.toSingleRange():!c&&s&&u.addRange(),u.moveCursorToPosition(h),u.clearSelection();var b=[],w=function(){clearInterval(C),l.removeSelectionMarkers(b);for(var e=0;e<b.length;e++)u.addRange(b[e])},x=v;r.capture(l.container,m,w);var C=setInterval(function(){x()},20);return e.preventDefault()}}else{if(!c&&d)return;if(!c){var _=u.toOrientedRange();l.addSelectionMarker(_)}var F=u.rangeList.rangeAtPoint(h);r.capture(l.container,function(){},function(){var e=u.toOrientedRange();F&&e.isEmpty()&&n(F.cursor,e.cursor)?u.substractPoint(e.cursor):(_&&(l.removeSelectionMarker(_),u.addRange(_)),u.addRange(e))})}}var r=e("../lib/event");t.onMouseDown=i}),define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t){t.defaultCommands=[{name:"addCursorAbove",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},readonly:!0},{name:"addCursorBelow",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},readonly:!0},{name:"addCursorAboveSkipCurrent",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},readonly:!0},{name:"addCursorBelowSkipCurrent",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},readonly:!0},{name:"selectMoreBefore",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},readonly:!0},{name:"selectMoreAfter",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},readonly:!0},{name:"selectNextBefore",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},readonly:!0},{name:"selectNextAfter",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},readonly:!0},{name:"splitIntoLines",exec:function(e){e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readonly:!0},{name:"alignCursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"}}],t.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},readonly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var n=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new n(t.multiSelectCommands)}),define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/config"],function(e,t){var n=e("../lib/oop"),i=e("../lib/event_emitter").EventEmitter,r=e("../config"),o=function(t,n,i){if(this.changeListener=this.changeListener.bind(this),r.get("packaged"))this.$worker=new Worker(r.moduleUrl(n,"worker"));else{var o;"undefined"!=typeof e.supports&&e.supports.indexOf("ucjs2-pinf-0")>=0?o=e.nameToUrl("ace/worker/worker_sourcemint"):(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),o=this.$normalizePath(e.toUrl("ace/worker/worker",null,"_"))),this.$worker=new Worker(o);for(var s={},a=0;a<t.length;a++){var l=t[a],u=this.$normalizePath(e.toUrl(l,null,"_").replace(/.js(\?.*)?$/,""));s[l]=u}}this.$worker.postMessage({init:!0,tlns:s,module:n,classname:i}),this.callbackId=1,this.callbacks={};var c=this;this.$worker.onerror=function(e){throw window.console&&console.log&&console.log(e),e},this.$worker.onmessage=function(e){var t=e.data;switch(t.type){case"log":window.console&&console.log&&console.log(t.data);break;case"event":c._emit(t.name,{data:t.data});break;case"call":var n=c.callbacks[t.id];n&&(n(t.data),delete c.callbacks[t.id])}}};!function(){n.implement(this,i),this.$normalizePath=function(e){return location.host?(e=e.replace(/^[a-z]+:\/\/[^\/]+/,""),e=location.protocol+"//"+location.host+("/"==e.charAt(0)?"":location.pathname.replace(/\/[^\/]*$/,""))+"/"+e.replace(/^[\/]+/,"")):e},this.terminate=function(){this._emit("terminate",{}),this.$worker.terminate(),this.$worker=null,this.$doc.removeEventListener("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,n){if(n){var i=this.callbackId++;this.callbacks[i]=n,t.push(i)}this.send(e,t)},this.emit=function(e,t){try{this.$worker.postMessage({event:e,data:{data:t.data}})}catch(n){}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){e.range={start:e.data.range.start,end:e.data.range.end},this.emit("change",e)}}.call(o.prototype),t.WorkerClient=o}),define("ace/keyboard/state_handler",["require","exports","module"],function(e,t){function n(e){this.keymapping=this.$buildKeymappingRegex(e)}var i=!1;n.prototype={$buildKeymappingRegex:function(e){for(var t in e)this.$buildBindingsRegex(e[t]);return e},$buildBindingsRegex:function(e){e.forEach(function(e){e.key?e.key=new RegExp("^"+e.key+"$"):Array.isArray(e.regex)?("key"in e||(e.key=new RegExp("^"+e.regex[1]+"$")),e.regex=new RegExp(e.regex.join("")+"$")):e.regex&&(e.regex=new RegExp(e.regex+"$"))})},$composeBuffer:function(e,t,n,i){(null==e.state||null==e.buffer)&&(e.state="start",e.buffer="");var r=[];1&t&&r.push("ctrl"),8&t&&r.push("command"),2&t&&r.push("option"),4&t&&r.push("shift"),n&&r.push(n);var o=r.join("-"),s=e.buffer+o;2!=t&&(e.buffer=s);var a={bufferToUse:s,symbolicName:o};return i&&(a.keyIdentifier=i.keyIdentifier),a},$find:function(e,t,n,r,o,s){var a={};return this.keymapping[e.state].some(function(l){var u;if(l.key&&!l.key.test(n))return!1;if(l.regex&&!(u=l.regex.exec(t)))return!1;if(l.match&&!l.match(t,r,o,n,s))return!1;if(l.disallowMatches)for(var c=0;c<l.disallowMatches.length;c++)if(u[l.disallowMatches[c]])return!1;if(l.exec){if(a.command=l.exec,l.params){var h;a.args={},l.params.forEach(function(e){h=null!=e.match&&null!=u?u[e.match]||e.defaultValue:e.defaultValue,"number"===e.type&&(h=parseInt(h)),a.args[e.name]=h})}e.buffer=""}return l.then&&(e.state=l.then,e.buffer=""),null==a.command&&(a.command="null"),i&&console.log("KeyboardStateMapper#find",l),!0}),a.command?a:(e.buffer="",!1)},handleKeyboard:function(e,t,n,r,o){if(-1==t&&(t=0),0==t||""!=n&&n!=String.fromCharCode(0)){var s=this.$composeBuffer(e,t,n,o),a=s.bufferToUse,l=s.symbolicName,u=s.keyIdentifier;return s=this.$find(e,a,l,t,n,u),i&&console.log("KeyboardStateMapper#match",a,l,s),s}return null}},t.matchCharacterOnly=function(e,t,n){return 0==t?!0:4==t&&1==n.length?!0:!1},t.StateHandler=n}),define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t){var n=e("./range").Range,i=e("./lib/event_emitter").EventEmitter,r=e("./lib/oop"),o=function(e,t,n,i,r,o){var s=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=r,this.othersClass=o,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=i,this.$onCursorChange=function(){setTimeout(function(){s.onCursorChange()})},this.$pos=n;var a=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=a.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};!function(){r.implement(this,i),this.setup=function(){var e=this,t=this.doc,i=this.session,r=this.$pos;this.pos=t.createAnchor(r.row,r.column),this.markerId=i.addMarker(new n(r.row,r.column,r.row,r.column+this.length),this.mainClass,null,!1),this.pos.on("change",function(t){i.removeMarker(e.markerId),e.markerId=i.addMarker(new n(t.value.row,t.value.column,t.value.row,t.value.column+e.length),e.mainClass,null,!1)}),this.others=[],this.$others.forEach(function(n){var i=t.createAnchor(n.row,n.column);e.others.push(i)}),i.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var e=this.session,t=this;this.othersActive=!0,this.others.forEach(function(i){i.markerId=e.addMarker(new n(i.row,i.column,i.row,i.column+t.length),t.othersClass,null,!1),i.on("change",function(r){e.removeMarker(i.markerId),i.markerId=e.addMarker(new n(r.value.row,r.value.column,r.value.row,r.value.column+t.length),t.othersClass,null,!1)})})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)}},this.onUpdate=function(e){var t=e.data,i=t.range;if(i.start.row===i.end.row&&i.start.row===this.pos.row&&!this.$updating){this.$updating=!0;var r="insertText"===t.action?i.end.column-i.start.column:i.start.column-i.end.column;if(i.start.column>=this.pos.column&&i.start.column<=this.pos.column+this.length+1){var o=i.start.column-this.pos.column;if(this.length+=r,!this.session.$fromUndo){if("insertText"===t.action)for(var s=this.others.length-1;s>=0;s--){var a=this.others[s],l={row:a.row,column:a.column+o};a.row===i.start.row&&i.start.column<a.column&&(l.column+=r),this.doc.insert(l,t.text)}else if("removeText"===t.action)for(var s=this.others.length-1;s>=0;s--){var a=this.others[s],l={row:a.row,column:a.column+o};a.row===i.start.row&&i.start.column<a.column&&(l.column+=r),this.doc.remove(new n(l.row,l.column,l.row,l.column-r))}i.start.column===this.pos.column&&"insertText"===t.action?setTimeout(function(){this.pos.setPosition(this.pos.row,this.pos.column-r);for(var e=0;e<this.others.length;e++){var t=this.others[e],n={row:t.row,column:t.column-r};t.row===i.start.row&&i.start.column<t.column&&(n.column+=r),t.setPosition(n.row,n.column)}}.bind(this),0):i.start.column===this.pos.column&&"removeText"===t.action&&setTimeout(function(){for(var e=0;e<this.others.length;e++){var t=this.others[e];t.row===i.start.row&&i.start.column<t.column&&t.setPosition(t.row,t.column-r)}}.bind(this),0)}this.pos._emit("change",{value:this.pos});for(var s=0;s<this.others.length;s++)this.others[s]._emit("change",{value:this.others[s]})}this.$updating=!1}},this.onCursorChange=function(e){if(!this.$updating){var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))}},this.detach=function(){this.session.removeMarker(this.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.pos.detach();for(var e=0;e<this.others.length;e++)this.others[e].detach();this.session.setUndoSelect(!0)},this.cancel=function(){if(-1===this.$undoStackDepth)throw Error("Canceling placeholders only supported with undo manager attached to session.");for(var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth,n=0;t>n;n++)e.undo(!0)}}.call(o.prototype),t.PlaceHolder=o}),define("ace/theme/textmate",["require","exports","module","text!ace/theme/textmate.css","ace/lib/dom"],function(e,t){t.isDark=!1,t.cssClass="ace-tm",t.cssText=e("text!./textmate.css");var n=e("../lib/dom");n.importCssString(t.cssText,t.cssClass)}),define("text!ace/theme/textmate.css",[],'.ace-tm .ace_gutter {\n  background: #f0f0f0;\n  color: #333;\n}\n\n.ace-tm .ace_print-margin {\n  width: 1px;\n  background: #e8e8e8;\n}\n\n.ace-tm .ace_fold {\n    background-color: #6B72E6;\n}\n\n.ace-tm .ace_scroller {\n  background-color: #FFFFFF;\n}\n\n.ace-tm .ace_cursor {\n  border-left: 2px solid black;\n}\n\n.ace-tm .ace_cursor.ace_overwrite {\n  border-left: 0px;\n  border-bottom: 1px solid black;\n}\n        \n.ace-tm .ace_invisible {\n  color: rgb(191, 191, 191);\n}\n\n.ace-tm .ace_storage,\n.ace-tm .ace_keyword {\n  color: blue;\n}\n\n.ace-tm .ace_constant {\n  color: rgb(197, 6, 11);\n}\n\n.ace-tm .ace_constant.ace_buildin {\n  color: rgb(88, 72, 246);\n}\n\n.ace-tm .ace_constant.ace_language {\n  color: rgb(88, 92, 246);\n}\n\n.ace-tm .ace_constant.ace_library {\n  color: rgb(6, 150, 14);\n}\n\n.ace-tm .ace_invalid {\n  background-color: rgba(255, 0, 0, 0.1);\n  color: red;\n}\n\n.ace-tm .ace_support.ace_function {\n  color: rgb(60, 76, 114);\n}\n\n.ace-tm .ace_support.ace_constant {\n  color: rgb(6, 150, 14);\n}\n\n.ace-tm .ace_support.ace_type,\n.ace-tm .ace_support.ace_class {\n  color: rgb(109, 121, 222);\n}\n\n.ace-tm .ace_keyword.ace_operator {\n  color: rgb(104, 118, 135);\n}\n\n.ace-tm .ace_string {\n  color: rgb(3, 106, 7);\n}\n\n.ace-tm .ace_comment {\n  color: rgb(76, 136, 107);\n}\n\n.ace-tm .ace_comment.ace_doc {\n  color: rgb(0, 102, 255);\n}\n\n.ace-tm .ace_comment.ace_doc.ace_tag {\n  color: rgb(128, 159, 191);\n}\n\n.ace-tm .ace_constant.ace_numeric {\n  color: rgb(0, 0, 205);\n}\n\n.ace-tm .ace_variable {\n  color: rgb(49, 132, 149);\n}\n\n.ace-tm .ace_xml-pe {\n  color: rgb(104, 104, 91);\n}\n\n.ace-tm .ace_entity.ace_name.ace_function {\n  color: #0000A2;\n}\n\n\n.ace-tm .ace_markup.ace_heading {\n  color: rgb(12, 7, 255);\n}\n\n.ace-tm .ace_markup.ace_list {\n  color:rgb(185, 6, 144);\n}\n\n.ace-tm .ace_meta.ace_tag {\n  color:rgb(0, 22, 142);\n}\n\n.ace-tm .ace_string.ace_regex {\n  color: rgb(255, 0, 0)\n}\n\n.ace-tm .ace_marker-layer .ace_selection {\n  background: rgb(181, 213, 255);\n}\n.ace-tm.ace_multiselect .ace_selection.ace_start {\n  box-shadow: 0 0 3px 0px white;\n  border-radius: 2px;\n}\n.ace-tm .ace_marker-layer .ace_step {\n  background: rgb(252, 255, 0);\n}\n\n.ace-tm .ace_marker-layer .ace_stack {\n  background: rgb(164, 229, 101);\n}\n\n.ace-tm .ace_marker-layer .ace_bracket {\n  margin: -1px 0 0 -1px;\n  border: 1px solid rgb(192, 192, 192);\n}\n\n.ace-tm .ace_marker-layer .ace_active-line {\n  background: rgba(0, 0, 0, 0.07);\n}\n\n.ace-tm .ace_gutter-active-line {\n    background-color : #dcdcdc;\n}\n\n.ace-tm .ace_marker-layer .ace_selected-word {\n  background: rgb(250, 250, 255);\n  border: 1px solid rgb(200, 200, 250);\n}\n\n.ace-tm .ace_indent-guide {\n  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;\n}\n'),function(){window.require(["ace/ace"],function(e){e&&e.config.init(),window.ace||(window.ace={});for(var t in e)e.hasOwnProperty(t)&&(ace[t]=e[t])})}(),function(){function e(e,t){try{for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}catch(i){e.prototype=t}}function t(e){for(var t=-1,n=e.length,i=[];++t<n;)i.push(e[t]);return i}function n(e){return Array.prototype.slice.call(e)}function i(){}function r(e){return e}function o(){return this}function s(){return!0}function a(e){return"function"==typeof e?e:function(){return e}}function l(e,t,n){return function(){var i=n.apply(t,arguments);return arguments.length?e:i}}function u(e){return null!=e&&!isNaN(e)}function c(e){return e.length}function h(e){return null==e}function f(e){return e.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")}function d(e){for(var t=1;e*t%1;)t*=10;return t}function p(){}function g(e){function t(){for(var t,i=n,r=-1,o=i.length;++r<o;)(t=i[r].on)&&t.apply(this,arguments);return e}var n=[],r=new i;return t.on=function(t,i){var o,s=r.get(t);return arguments.length<2?s&&s.on:(s&&(s.on=null,n=n.slice(0,o=n.indexOf(s)).concat(n.slice(o+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function m(e,t){return t-(e?1+Math.floor(Math.log(e+Math.pow(10,1+Math.floor(Math.log(e)/Math.LN10)-t))/Math.LN10):1)}function v(e){return e+""}function y(e){for(var t=e.lastIndexOf("."),n=t>=0?e.substring(t):(t=e.length,""),i=[];t>0;)i.push(e.substring(t-=3,t+3));return i.reverse().join(",")+n}function E(e,t){var n=Math.pow(10,3*Math.abs(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function A(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function b(e){return function(t){return 1-e(1-t)}}function w(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function x(e){return e}function C(e){return function(t){return Math.pow(t,e)}}function _(e){return 1-Math.cos(e*Math.PI/2)}function F(e){return Math.pow(2,10*(e-1))}function S(e){return 1-Math.sqrt(1-e*e)}function T(e,t){var n;return arguments.length<2&&(t=.45),arguments.length<1?(e=1,n=t/4):n=t/(2*Math.PI)*Math.asin(1/e),function(i){return 1+e*Math.pow(2,10*-i)*Math.sin(2*(i-n)*Math.PI/t)}}function D(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function R(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function k(){d3.event.stopPropagation(),d3.event.preventDefault()}function B(){for(var e,t=d3.event;e=t.sourceEvent;)t=e;return t}function M(e){for(var t=new p,n=0,i=arguments.length;++n<i;)t[arguments[n]]=g(t);return t.of=function(n,i){return function(r){try{var o=r.sourceEvent=d3.event;r.target=e,d3.event=r,t[r.type].apply(n,i)}finally{d3.event=o}}},t}function L(e){var t=[e.a,e.b],n=[e.c,e.d],i=I(t),r=P(t,n),o=I($(n,t,-r))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*jr,this.translate=[e.e,e.f],this.scale=[i,o],this.skew=o?Math.atan2(r,o)*jr:0
}function P(e,t){return e[0]*t[0]+e[1]*t[1]}function I(e){var t=Math.sqrt(P(e,e));return t&&(e[0]/=t,e[1]/=t),t}function $(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function N(e){return{getItem:function(t){return{type:e.getItem(t).type,angle:0,matrix:zr}}}}function O(e){return"transform"==e?d3.interpolateTransform:d3.interpolate}function H(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return(n-e)*t}}function j(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return Math.max(0,Math.min(1,(n-e)*t))}}function z(e,t,n){return new U(e,t,n)}function U(e,t,n){this.r=e,this.g=t,this.b=n}function W(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function G(e,t,n){var i,r,o,s=0,a=0,l=0;if(i=/([a-z]+)\((.*)\)/i.exec(e))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return t(Y(r[0]),Y(r[1]),Y(r[2]))}return(o=Vr.get(e))?t(o.r,o.g,o.b):(null!=e&&"#"===e.charAt(0)&&(4===e.length?(s=e.charAt(1),s+=s,a=e.charAt(2),a+=a,l=e.charAt(3),l+=l):7===e.length&&(s=e.substring(1,3),a=e.substring(3,5),l=e.substring(5,7)),s=parseInt(s,16),a=parseInt(a,16),l=parseInt(l,16)),t(s,a,l))}function V(e,t,n){var i,r,o=Math.min(e/=255,t/=255,n/=255),s=Math.max(e,t,n),a=s-o,l=(s+o)/2;return a?(r=.5>l?a/(s+o):a/(2-s-o),i=e==s?(t-n)/a+(n>t?6:0):t==s?(n-e)/a+2:(e-t)/a+4,i*=60):r=i=0,q(i,r,l)}function Y(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function q(e,t,n){return new X(e,t,n)}function X(e,t,n){this.h=e,this.s=t,this.l=n}function J(e,t,n){function i(e){return e>360?e-=360:0>e&&(e+=360),60>e?o+(s-o)*e/60:180>e?s:240>e?o+(s-o)*(240-e)/60:o}function r(e){return Math.round(255*i(e))}var o,s;return e%=360,0>e&&(e+=360),t=0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,s=.5>=n?n*(1+t):n+t-n*t,o=2*n-s,z(r(e+120),r(e),r(e-120))}function K(e){return Sr(e,Zr),e}function Z(e){return function(){return Yr(e,this)}}function Q(e){return function(){return qr(e,this)}}function et(e,t){function n(){if(t=this.classList)return t.add(e);var t=this.className,n=null!=t.baseVal,i=n?t.baseVal:t;o.lastIndex=0,o.test(i)||(i=f(i+" "+e),n?t.baseVal=i:this.className=i)}function i(){if(t=this.classList)return t.remove(e);var t=this.className,n=null!=t.baseVal,i=n?t.baseVal:t;i&&(i=f(i.replace(o," ")),n?t.baseVal=i:this.className=i)}function r(){(t.apply(this,arguments)?n:i).call(this)}var o=new RegExp("(^|\\s+)"+d3.requote(e)+"(\\s+|$)","g");if(arguments.length<2){var s=this.node();if(a=s.classList)return a.contains(e);var a=s.className;return o.lastIndex=0,o.test(null!=a.baseVal?a.baseVal:a)}return this.each("function"==typeof t?r:t?n:i)}function tt(e){return{__data__:e}}function nt(e){return function(){return Kr(this,e)}}function it(e){return arguments.length||(e=d3.ascending),function(t,n){return e(t&&t.__data__,n&&n.__data__)}}function rt(e,t){for(var n=0,i=e.length;i>n;n++)for(var r,o=e[n],s=0,a=o.length;a>s;s++)(r=o[s])&&t(r,s,n);return e}function ot(e){return Sr(e,eo),e}function st(e,t,n){Sr(e,no);var r=new i,o=d3.dispatch("start","end"),s=co;return e.id=t,e.time=n,e.tween=function(t,n){return arguments.length<2?r.get(t):(null==n?r.remove(t):r.set(t,n),e)},e.ease=function(t){return arguments.length?(s="function"==typeof t?t:d3.ease.apply(d3,arguments),e):s},e.each=function(t,n){return arguments.length<2?ut.call(e,t):(o.on(t,n),e)},d3.timer(function(i){return rt(e,function(e,a){function l(i){return p.active>t?c():(p.active=t,r.forEach(function(t,n){(n=n.call(e,g,a))&&h.push(n)}),o.start.call(e,g,a),u(i)||d3.timer(u,0,n),1)}function u(n){if(p.active!==t)return c();for(var i=(n-f)/d,r=s(i),l=h.length;l>0;)h[--l].call(e,r);return i>=1?(c(),ro=t,o.end.call(e,g,a),ro=0,1):void 0}function c(){return--p.count||delete e.__transition__,1}var h=[],f=e.delay,d=e.duration,p=(e=e.node).__transition__||(e.__transition__={active:0,count:0}),g=e.__data__;++p.count,i>=f?l(i):d3.timer(l,f,n)})},0,n),e}function at(e,t,n){return""!=n&&to}function lt(e,t){function n(e,n,i){var o=t.call(this,e,n);return null==o?""!=i&&to:i!=o&&r(i,o)}function i(e,n,i){return i!=t&&r(i,t)}var r=O(e);return"function"==typeof t?n:null==t?at:(t+="",i)}function ut(e){var t=ro,n=co,i=lo,r=uo;return ro=this.id,co=this.ease(),rt(this,function(t,n,i){lo=t.delay,uo=t.duration,e.call(t=t.node,t.__data__,n,i)}),ro=t,co=n,lo=i,uo=r,this}function ct(){for(var e,t=Date.now(),n=po;n;)e=t-n.then,e>=n.delay&&(n.flush=n.callback(e)),n=n.next;var i=ht()-t;i>24?(isFinite(i)&&(clearTimeout(fo),fo=setTimeout(ct,i)),ho=0):(ho=1,go(ct))}function ht(){for(var e=null,t=po,n=1/0;t;)t.flush?t=e?e.next=t.next:po=t.next:(n=Math.min(n,t.then+t.delay),t=(e=t).next);return n}function ft(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();if(0>mo&&(window.scrollX||window.scrollY)){n=d3.select(document.body).append("svg").style("position","absolute").style("top",0).style("left",0);var r=n[0][0].getScreenCTM();mo=!r.f&&!r.e,n.remove()}return mo?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}function dt(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function pt(e){return e.rangeExtent?e.rangeExtent():dt(e.range())}function gt(e,t){var n,i=0,r=e.length-1,o=e[i],s=e[r];return o>s&&(n=i,i=r,r=n,n=o,o=s,s=n),(n=s-o)&&(t=t(n),e[i]=t.floor(o),e[r]=t.ceil(s)),e}function mt(){return Math}function vt(e,t,n,i){function r(){var r=Math.min(e.length,t.length)>2?Ct:xt,l=i?j:H;return s=r(e,t,l,n),a=r(t,e,l,d3.interpolate),o}function o(e){return s(e)}var s,a;return o.invert=function(e){return a(e)},o.domain=function(t){return arguments.length?(e=t.map(Number),r()):e},o.range=function(e){return arguments.length?(t=e,r()):t},o.rangeRound=function(e){return o.range(e).interpolate(d3.interpolateRound)},o.clamp=function(e){return arguments.length?(i=e,r()):i},o.interpolate=function(e){return arguments.length?(n=e,r()):n},o.ticks=function(t){return bt(e,t)},o.tickFormat=function(t){return wt(e,t)},o.nice=function(){return gt(e,Et),r()},o.copy=function(){return vt(e,t,n,i)},r()}function yt(e,t){return d3.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Et(e){return e=Math.pow(10,Math.round(Math.log(e)/Math.LN10)-1),{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}}function At(e,t){var n=dt(e),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),o=t/i*r;return.15>=o?r*=10:.35>=o?r*=5:.75>=o&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function bt(e,t){return d3.range.apply(d3,At(e,t))}function wt(e,t){return d3.format(",."+Math.max(0,-Math.floor(Math.log(At(e,t)[2])/Math.LN10+.01))+"f")}function xt(e,t,n,i){var r=n(e[0],e[1]),o=i(t[0],t[1]);return function(e){return o(r(e))}}function Ct(e,t,n,i){var r=[],o=[],s=0,a=Math.min(e.length,t.length)-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<=a;)r.push(n(e[s-1],e[s])),o.push(i(t[s-1],t[s]));return function(t){var n=d3.bisect(e,t,1,a)-1;return o[n](r[n](t))}}function _t(e,t){function n(n){return e(t(n))}var i=t.pow;return n.invert=function(t){return i(e.invert(t))},n.domain=function(r){return arguments.length?(t=r[0]<0?St:Ft,i=t.pow,e.domain(r.map(t)),n):e.domain().map(i)},n.nice=function(){return e.domain(gt(e.domain(),mt)),n},n.ticks=function(){var n=dt(e.domain()),r=[];if(n.every(isFinite)){var o=Math.floor(n[0]),s=Math.ceil(n[1]),a=i(n[0]),l=i(n[1]);if(t===St)for(r.push(i(o));o++<s;)for(var u=9;u>0;u--)r.push(i(o)*u);else{for(;s>o;o++)for(var u=1;10>u;u++)r.push(i(o)*u);r.push(i(o))}for(o=0;r[o]<a;o++);for(s=r.length;r[s-1]>l;s--);r=r.slice(o,s)}return r},n.tickFormat=function(e,r){if(arguments.length<2&&(r=vo),arguments.length<1)return r;var o,s=Math.max(.1,e/n.ticks().length),a=t===St?(o=-1e-12,Math.floor):(o=1e-12,Math.ceil);return function(e){return e/i(a(t(e)+o))<=s?r(e):""}},n.copy=function(){return _t(e.copy(),t)},yt(n,e)}function Ft(e){return Math.log(0>e?0:e)/Math.LN10}function St(e){return-Math.log(e>0?0:-e)/Math.LN10}function Tt(e,t){function n(t){return e(i(t))}var i=Dt(t),r=Dt(1/t);return n.invert=function(t){return r(e.invert(t))},n.domain=function(t){return arguments.length?(e.domain(t.map(i)),n):e.domain().map(r)},n.ticks=function(e){return bt(n.domain(),e)},n.tickFormat=function(e){return wt(n.domain(),e)},n.nice=function(){return n.domain(gt(n.domain(),Et))},n.exponent=function(e){if(!arguments.length)return t;var o=n.domain();return i=Dt(t=e),r=Dt(1/t),n.domain(o)},n.copy=function(){return Tt(e.copy(),t)},yt(n,e)}function Dt(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function Rt(e,t){function n(t){return s[((o.get(t)||o.set(t,e.push(t)))-1)%s.length]}function r(t,n){return d3.range(e.length).map(function(e){return t+n*e})}var o,s,a;return n.domain=function(r){if(!arguments.length)return e;e=[],o=new i;for(var s,a=-1,l=r.length;++a<l;)o.has(s=r[a])||o.set(s,e.push(s));return n[t.t](t.x,t.p)},n.range=function(e){return arguments.length?(s=e,a=0,t={t:"range",x:e},n):s},n.rangePoints=function(i,o){arguments.length<2&&(o=0);var l=i[0],u=i[1],c=(u-l)/(e.length-1+o);return s=r(e.length<2?(l+u)/2:l+c*o/2,c),a=0,t={t:"rangePoints",x:i,p:o},n},n.rangeBands=function(i,o){arguments.length<2&&(o=0);var l=i[1]<i[0],u=i[l-0],c=i[1-l],h=(c-u)/(e.length+o);return s=r(u+h*o,h),l&&s.reverse(),a=h*(1-o),t={t:"rangeBands",x:i,p:o},n},n.rangeRoundBands=function(i,o){arguments.length<2&&(o=0);var l=i[1]<i[0],u=i[l-0],c=i[1-l],h=Math.floor((c-u)/(e.length+o)),f=c-u-(e.length-o)*h;return s=r(u+Math.round(f/2),h),l&&s.reverse(),a=Math.round(h*(1-o)),t={t:"rangeRoundBands",x:i,p:o},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return dt(t.x)},n.copy=function(){return Rt(e,t)},n.domain(e)}function kt(e,t){function n(){var n=0,o=(e.length,t.length);for(r=[];++n<o;)r[n-1]=d3.quantile(e,n/o);return i}function i(e){return isNaN(e=+e)?0/0:t[d3.bisect(r,e)]}var r;return i.domain=function(t){return arguments.length?(e=t.filter(function(e){return!isNaN(e)}).sort(d3.ascending),n()):e},i.range=function(e){return arguments.length?(t=e,n()):t},i.quantiles=function(){return r},i.copy=function(){return kt(e,t)},n()}function Bt(e,t,n){function i(t){return n[Math.max(0,Math.min(s,Math.floor(o*(t-e))))]}function r(){return o=n.length/(t-e),s=n.length-1,i}var o,s;return i.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],r()):[e,t]},i.range=function(e){return arguments.length?(n=e,r()):n},i.copy=function(){return Bt(e,t,n)},r()}function Mt(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return bt(e,t)},t.tickFormat=function(t){return wt(e,t)},t.copy=function(){return Mt(e)},t}function Lt(e){return e.innerRadius}function Pt(e){return e.outerRadius}function It(e){return e.startAngle}function $t(e){return e.endAngle}function Nt(e){function t(t){function o(){c.push("M",l(e(h),u))}for(var s,c=[],h=[],f=-1,d=t.length,p=a(n),g=a(i);++f<d;)r.call(this,s=t[f],f)?h.push([+p.call(this,s,f),+g.call(this,s,f)]):h.length&&(o(),h=[]);return h.length&&o(),c.length?c.join(""):null}var n=Ot,i=Ht,r=s,o=Co,l=jt,u=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(i=e,t):i},t.defined=function(e){return arguments.length?(r=e,t):r},t.interpolate=function(e){return arguments.length?(_o.has(e+="")||(e=Co),l=_o.get(o=e),t):o},t.tension=function(e){return arguments.length?(u=e,t):u},t}function Ot(e){return e[0]}function Ht(e){return e[1]}function jt(e){return e.join("L")}function zt(e){return jt(e)+"Z"}function Ut(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("V",(i=e[t])[1],"H",i[0]);return r.join("")}function Wt(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("H",(i=e[t])[0],"V",i[1]);return r.join("")}function Gt(e,t){return e.length<4?jt(e):e[1]+qt(e.slice(1,e.length-1),Xt(e,t))}function Vt(e,t){return e.length<3?jt(e):e[0]+qt((e.push(e[0]),e),Xt([e[e.length-2]].concat(e,[e[1]]),t))}function Yt(e,t){return e.length<3?jt(e):e[0]+qt(e,Xt(e,t))}function qt(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return jt(e);var n=e.length!=t.length,i="",r=e[0],o=e[1],s=t[0],a=s,l=1;if(n&&(i+="Q"+(o[0]-2*s[0]/3)+","+(o[1]-2*s[1]/3)+","+o[0]+","+o[1],r=e[1],l=2),t.length>1){a=t[1],o=e[l],l++,i+="C"+(r[0]+s[0])+","+(r[1]+s[1])+","+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1];for(var u=2;u<t.length;u++,l++)o=e[l],a=t[u],i+="S"+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1]}if(n){var c=e[l];i+="Q"+(o[0]+2*a[0]/3)+","+(o[1]+2*a[1]/3)+","+c[0]+","+c[1]}return i}function Xt(e,t){for(var n,i=[],r=(1-t)/2,o=e[0],s=e[1],a=1,l=e.length;++a<l;)n=o,o=s,s=e[a],i.push([r*(s[0]-n[0]),r*(s[1]-n[1])]);return i}function Jt(e){if(e.length<3)return jt(e);var t=1,n=e.length,i=e[0],r=i[0],o=i[1],s=[r,r,r,(i=e[1])[0]],a=[o,o,o,i[1]],l=[r,",",o];for(tn(l,s,a);++t<n;)i=e[t],s.shift(),s.push(i[0]),a.shift(),a.push(i[1]),tn(l,s,a);for(t=-1;++t<2;)s.shift(),s.push(i[0]),a.shift(),a.push(i[1]),tn(l,s,a);return l.join("")}function Kt(e){if(e.length<4)return jt(e);for(var t,n=[],i=-1,r=e.length,o=[0],s=[0];++i<3;)t=e[i],o.push(t[0]),s.push(t[1]);for(n.push(en(To,o)+","+en(To,s)),--i;++i<r;)t=e[i],o.shift(),o.push(t[0]),s.shift(),s.push(t[1]),tn(n,o,s);return n.join("")}function Zt(e){for(var t,n,i=-1,r=e.length,o=r+4,s=[],a=[];++i<4;)n=e[i%r],s.push(n[0]),a.push(n[1]);for(t=[en(To,s),",",en(To,a)],--i;++i<o;)n=e[i%r],s.shift(),s.push(n[0]),a.shift(),a.push(n[1]),tn(t,s,a);return t.join("")}function Qt(e,t){var n=e.length-1;if(n)for(var i,r,o=e[0][0],s=e[0][1],a=e[n][0]-o,l=e[n][1]-s,u=-1;++u<=n;)i=e[u],r=u/n,i[0]=t*i[0]+(1-t)*(o+r*a),i[1]=t*i[1]+(1-t)*(s+r*l);return Jt(e)}function en(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function tn(e,t,n){e.push("C",en(Fo,t),",",en(Fo,n),",",en(So,t),",",en(So,n),",",en(To,t),",",en(To,n))}function nn(e,t){return(t[1]-e[1])/(t[0]-e[0])}function rn(e){for(var t=0,n=e.length-1,i=[],r=e[0],o=e[1],s=i[0]=nn(r,o);++t<n;)i[t]=s+(s=nn(r=o,o=e[t+1]));return i[t]=s,i}function on(e){for(var t,n,i,r,o=[],s=rn(e),a=-1,l=e.length-1;++a<l;)t=nn(e[a],e[a+1]),Math.abs(t)<1e-6?s[a]=s[a+1]=0:(n=s[a]/t,i=s[a+1]/t,r=n*n+i*i,r>9&&(r=3*t/Math.sqrt(r),s[a]=r*n,s[a+1]=r*i));for(a=-1;++a<=l;)r=(e[Math.min(l,a+1)][0]-e[Math.max(0,a-1)][0])/(6*(1+s[a]*s[a])),o.push([r||0,s[a]*r||0]);return o}function sn(e){return e.length<3?jt(e):e[0]+qt(e,on(e))}function an(e){for(var t,n,i,r=-1,o=e.length;++r<o;)t=e[r],n=t[0],i=t[1]+wo,t[0]=n*Math.cos(i),t[1]=n*Math.sin(i);return e}function ln(e){function t(t){function s(){m.push("M",c(e(y),d),f,h(e(v.reverse()),d),"Z")}for(var u,p,g,m=[],v=[],y=[],E=-1,A=t.length,b=a(n),w=a(r),x=n===i?function(){return p}:a(i),C=r===o?function(){return g}:a(o);++E<A;)l.call(this,u=t[E],E)?(v.push([p=+b.call(this,u,E),g=+w.call(this,u,E)]),y.push([+x.call(this,u,E),+C.call(this,u,E)])):v.length&&(s(),v=[],y=[]);return v.length&&s(),m.length?m.join(""):null}var n=Ot,i=Ot,r=0,o=Ht,l=s,u=Co,c=jt,h=jt,f="L",d=.7;return t.x=function(e){return arguments.length?(n=i=e,t):i},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(i=e,t):i},t.y=function(e){return arguments.length?(r=o=e,t):o},t.y0=function(e){return arguments.length?(r=e,t):r},t.y1=function(e){return arguments.length?(o=e,t):o},t.defined=function(e){return arguments.length?(l=e,t):l},t.interpolate=function(e){return arguments.length?(_o.has(e+="")||(e=Co),c=_o.get(u=e),h=c.reverse||c,f=/-closed$/.test(e)?"M":"L",t):u},t.tension=function(e){return arguments.length?(d=e,t):d},t}function un(e){return e.source}function cn(e){return e.target}function hn(e){return e.radius}function fn(e){return[e.x,e.y]}function dn(e){return function(){var t=e.apply(this,arguments),n=t[0],i=t[1]+wo;return[n*Math.cos(i),n*Math.sin(i)]}}function pn(){return 64}function gn(){return"circle"}function mn(e){var t=Math.sqrt(e/Math.PI);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function vn(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function yn(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function En(e,t,n){if(i=[],n&&t.length>1){for(var i,r,o,s=dt(e.domain()),a=-1,l=t.length,u=(t[1]-t[0])/++n;++a<l;)for(r=n;--r>0;)(o=+t[a]-r*u)>=s[0]&&i.push(o);for(--a,r=0;++r<n&&(o=+t[a]+r*u)<s[1];)i.push(o)}return i}function An(){Lo||(Lo=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var e,t=d3.event;try{Lo.scrollTop=1e3,Lo.dispatchEvent(t),e=1e3-Lo.scrollTop}catch(n){e=t.wheelDelta||5*-t.detail}return e}function bn(e){for(var t=e.source,n=e.target,i=xn(t,n),r=[t];t!==i;)t=t.parent,r.push(t);for(var o=r.length;n!==i;)r.splice(o,0,n),n=n.parent;return r}function wn(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function xn(e,t){if(e===t)return e;for(var n=wn(e),i=wn(t),r=n.pop(),o=i.pop(),s=null;r===o;)s=r,r=n.pop(),o=i.pop();return s}function Cn(e){e.fixed|=2}function _n(e){e!==$o&&(e.fixed&=1)}function Fn(){$o.fixed&=1,Io=$o=null}function Sn(){$o.px=d3.event.x,$o.py=d3.event.y,Io.resume()}function Tn(e,t,n){var i=0,r=0;if(e.charge=0,!e.leaf)for(var o,s=e.nodes,a=s.length,l=-1;++l<a;)o=s[l],null!=o&&(Tn(o,t,n),e.charge+=o.charge,i+=o.charge*o.cx,r+=o.charge*o.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var u=t*n[e.point.index];e.charge+=e.pointCharge=u,i+=u*e.point.x,r+=u*e.point.y}e.cx=i/e.charge,e.cy=r/e.charge}function Dn(){return 20}function Rn(){return 1}function kn(e){return e.x}function Bn(e){return e.y}function Mn(e,t,n){e.y0=t,e.y=n}function Ln(e){return d3.range(e.length)}function Pn(e){for(var t=-1,n=e[0].length,i=[];++t<n;)i[t]=0;return i}function In(e){for(var t,n=1,i=0,r=e[0][1],o=e.length;o>n;++n)(t=e[n][1])>r&&(i=n,r=t);return i}function $n(e){return e.reduce(Nn,0)}function Nn(e,t){return e+t[1]}function On(e,t){return Hn(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Hn(e,t){for(var n=-1,i=+e[0],r=(e[1]-i)/t,o=[];++n<=t;)o[n]=r*n+i;return o}function jn(e){return[d3.min(e),d3.max(e)]}function zn(e,t){return d3.rebind(e,t,"sort","children","value"),e.links=Vn,e.nodes=function(t){return jo=!0,(e.nodes=e)(t)},e}function Un(e){return e.children}function Wn(e){return e.value}function Gn(e,t){return t.value-e.value}function Vn(e){return d3.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function Yn(e,t){return e.value-t.value}function qn(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Xn(e,t){e._pack_next=t,t._pack_prev=e}function Jn(e,t){var n=t.x-e.x,i=t.y-e.y,r=e.r+t.r;return r*r-n*n-i*i>.001}function Kn(e){function t(e){a=Math.min(e.x-e.r,a),l=Math.max(e.x+e.r,l),u=Math.min(e.y-e.r,u),c=Math.max(e.y+e.r,c)}var n,i,r,o,s,a=1/0,l=-1/0,u=1/0,c=-1/0,h=e.length;if(e.forEach(Zn),n=e[0],n.x=-n.r,n.y=0,t(n),h>1&&(i=e[1],i.x=i.r,i.y=0,t(i),h>2)){r=e[2],ni(n,i,r),t(r),qn(n,r),n._pack_prev=r,qn(r,i),i=n._pack_next;for(var f=3;h>f;f++){ni(n,i,r=e[f]);var d=0,p=1,g=1;for(o=i._pack_next;o!==i;o=o._pack_next,p++)if(Jn(o,r)){d=1;break}if(1==d)for(s=n._pack_prev;s!==o._pack_prev&&!Jn(s,r);s=s._pack_prev,g++);d?(g>p||p==g&&i.r<n.r?Xn(n,i=o):Xn(n=s,i),f--):(qn(n,r),i=r,t(r))}}for(var m=(a+l)/2,v=(u+c)/2,y=0,f=0;h>f;f++){var E=e[f];E.x-=m,E.y-=v,y=Math.max(y,E.r+Math.sqrt(E.x*E.x+E.y*E.y))}return e.forEach(Qn),y}function Zn(e){e._pack_next=e._pack_prev=e}function Qn(e){delete e._pack_next,delete e._pack_prev}function ei(e){var t=e.children;t&&t.length?(t.forEach(ei),e.r=Kn(t)):e.r=Math.sqrt(e.value)}function ti(e,t,n,i){var r=e.children;if(e.x=t+=i*e.x,e.y=n+=i*e.y,e.r*=i,r)for(var o=-1,s=r.length;++o<s;)ti(r[o],t,n,i)}function ni(e,t,n){var i=e.r+n.r,r=t.x-e.x,o=t.y-e.y;if(i&&(r||o)){var s=t.r+n.r,a=r*r+o*o;s*=s,i*=i;var l=.5+(i-s)/(2*a),u=Math.sqrt(Math.max(0,2*s*(i+a)-(i-=a)*i-s*s))/(2*a);n.x=e.x+l*r+u*o,n.y=e.y+l*o-u*r}else n.x=e.x+i,n.y=e.y}function ii(e){return 1+d3.max(e,function(e){return e.y})}function ri(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function oi(e){var t=e.children;return t&&t.length?oi(t[0]):e}function si(e){var t,n=e.children;return n&&(t=n.length)?si(n[t-1]):e}function ai(e,t){return e.parent==t.parent?1:2}function li(e){var t=e.children;return t&&t.length?t[0]:e._tree.thread}function ui(e){var t,n=e.children;return n&&(t=n.length)?n[t-1]:e._tree.thread}function ci(e,t){var n=e.children;if(n&&(r=n.length))for(var i,r,o=-1;++o<r;)t(i=ci(n[o],t),e)>0&&(e=i);return e}function hi(e,t){return e.x-t.x}function fi(e,t){return t.x-e.x}function di(e,t){return e.depth-t.depth}function pi(e,t){function n(e,i){var r=e.children;if(r&&(s=r.length))for(var o,s,a=null,l=-1;++l<s;)o=r[l],n(o,a),a=o;t(e,i)}n(e,null)}function gi(e){for(var t,n=0,i=0,r=e.children,o=r.length;--o>=0;)t=r[o]._tree,t.prelim+=n,t.mod+=n,n+=t.shift+(i+=t.change)}function mi(e,t,n){e=e._tree,t=t._tree;var i=n/(t.number-e.number);e.change+=i,t.change-=i,t.shift+=n,t.prelim+=n,t.mod+=n}function vi(e,t,n){return e._tree.ancestor.parent==t.parent?e._tree.ancestor:n}function yi(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Ei(e,t){var n=e.x+t[3],i=e.y+t[0],r=e.dx-t[1]-t[3],o=e.dy-t[0]-t[2];return 0>r&&(n+=r/2,r=0),0>o&&(i+=o/2,o=0),{x:n,y:i,dx:r,dy:o}}function Ai(e){return e.map(bi).join(",")}function bi(e){return/[",\n]/.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}function wi(e,t){return function(n){return n&&e.hasOwnProperty(n.type)?e[n.type](n):t}}function xi(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Ci(e,t){Uo.hasOwnProperty(e.type)&&Uo[e.type](e,t)}function _i(e,t){Ci(e.geometry,t)}function Fi(e,t){for(var n=e.features,i=0,r=n.length;r>i;i++)Ci(n[i].geometry,t)}function Si(e,t){for(var n=e.geometries,i=0,r=n.length;r>i;i++)Ci(n[i],t)}function Ti(e,t){for(var n=e.coordinates,i=0,r=n.length;r>i;i++)t.apply(null,n[i])}function Di(e,t){for(var n=e.coordinates,i=0,r=n.length;r>i;i++)for(var o=n[i],s=0,a=o.length;a>s;s++)t.apply(null,o[s])}function Ri(e,t){for(var n=e.coordinates,i=0,r=n.length;r>i;i++)for(var o=n[i][0],s=0,a=o.length;a>s;s++)t.apply(null,o[s])}function ki(e,t){t.apply(null,e.coordinates)}function Bi(e,t){for(var n=e.coordinates[0],i=0,r=n.length;r>i;i++)t.apply(null,n[i])}function Mi(e){return e.source}function Li(e){return e.target}function Pi(){function e(e){var t=Math.sin(e*=d)*p,n=Math.sin(d-e)*p,i=n*o+t*h,a=n*s+t*f,l=n*r+t*c;return[Math.atan2(a,i)/zo,Math.atan2(l,Math.sqrt(i*i+a*a))/zo]}var t,n,i,r,o,s,a,l,u,c,h,f,d,p;return e.distance=function(){return null==d&&(p=1/Math.sin(d=Math.acos(Math.max(-1,Math.min(1,r*c+i*u*Math.cos(a-t)))))),d},e.source=function(a){var l=Math.cos(t=a[0]*zo),u=Math.sin(t);return i=Math.cos(n=a[1]*zo),r=Math.sin(n),o=i*l,s=i*u,d=null,e},e.target=function(t){var n=Math.cos(a=t[0]*zo),i=Math.sin(a);return u=Math.cos(l=t[1]*zo),c=Math.sin(l),h=u*n,f=u*i,d=null,e},e}function Ii(e,t){var n=Pi().source(e).target(t);return n.distance(),n}function $i(e){for(var t=0,n=0;;){if(e(t,n))return[t,n];0===t?(t=n+1,n=0):(t-=1,n+=1)}}function Ni(e,t,n,i){var r,o,s,a,l,u,c;return r=i[e],o=r[0],s=r[1],r=i[t],a=r[0],l=r[1],r=i[n],u=r[0],c=r[1],(c-s)*(a-o)-(l-s)*(u-o)>0}function Oi(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Hi(e,t,n,i){var r=e[0],o=t[0],s=n[0],a=i[0],l=e[1],u=t[1],c=n[1],h=i[1],f=r-s,d=o-r,p=a-s,g=l-c,m=u-l,v=h-c,y=(p*g-v*f)/(v*d-p*m);return[r+y*d,l+y*m]}function ji(e,t){var n={list:e.map(function(e,t){return{index:t,x:e[0],y:e[1]}}).sort(function(e,t){return e.y<t.y?-1:e.y>t.y?1:e.x<t.x?-1:e.x>t.x?1:0}),bottomSite:null},i={list:[],leftEnd:null,rightEnd:null,init:function(){i.leftEnd=i.createHalfEdge(null,"l"),i.rightEnd=i.createHalfEdge(null,"l"),i.leftEnd.r=i.rightEnd,i.rightEnd.l=i.leftEnd,i.list.unshift(i.leftEnd,i.rightEnd)},createHalfEdge:function(e,t){return{edge:e,side:t,vertex:null,l:null,r:null}},insert:function(e,t){t.l=e,t.r=e.r,e.r.l=t,e.r=t},leftBound:function(e){var t=i.leftEnd;do t=t.r;while(t!=i.rightEnd&&r.rightOf(t,e));return t=t.l},del:function(e){e.l.r=e.r,e.r.l=e.l,e.edge=null},right:function(e){return e.r},left:function(e){return e.l},leftRegion:function(e){return null==e.edge?n.bottomSite:e.edge.region[e.side]},rightRegion:function(e){return null==e.edge?n.bottomSite:e.edge.region[Vo[e.side]]}},r={bisect:function(e,t){var n={region:{l:e,r:t},ep:{l:null,r:null}},i=t.x-e.x,r=t.y-e.y,o=i>0?i:-i,s=r>0?r:-r;return n.c=e.x*i+e.y*r+.5*(i*i+r*r),o>s?(n.a=1,n.b=r/i,n.c/=i):(n.b=1,n.a=i/r,n.c/=r),n},intersect:function(e,t){var n=e.edge,i=t.edge;if(!n||!i||n.region.r==i.region.r)return null;var r=n.a*i.b-n.b*i.a;if(Math.abs(r)<1e-10)return null;var o,s,a=(n.c*i.b-i.c*n.b)/r,l=(i.c*n.a-n.c*i.a)/r,u=n.region.r,c=i.region.r;u.y<c.y||u.y==c.y&&u.x<c.x?(o=e,s=n):(o=t,s=i);var h=a>=s.region.r.x;return h&&"l"===o.side||!h&&"r"===o.side?null:{x:a,y:l}},rightOf:function(e,t){var n=e.edge,i=n.region.r,r=t.x>i.x;if(r&&"l"===e.side)return 1;if(!r&&"r"===e.side)return 0;if(1===n.a){var o=t.y-i.y,s=t.x-i.x,a=0,l=0;if(!r&&n.b<0||r&&n.b>=0?l=a=o>=n.b*s:(l=t.x+t.y*n.b>n.c,n.b<0&&(l=!l),l||(a=1)),!a){var u=i.x-n.region.l.x;l=n.b*(s*s-o*o)<u*o*(1+2*s/u+n.b*n.b),n.b<0&&(l=!l)}}else{var c=n.c-n.a*t.x,h=t.y-c,f=t.x-i.x,d=c-i.y;l=h*h>f*f+d*d}return"l"===e.side?l:!l},endPoint:function(e,n,i){e.ep[n]=i,e.ep[Vo[n]]&&t(e)},distance:function(e,t){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}},o={list:[],insert:function(e,t,n){e.vertex=t,e.ystar=t.y+n;for(var i=0,r=o.list,s=r.length;s>i;i++){var a=r[i];if(!(e.ystar>a.ystar||e.ystar==a.ystar&&t.x>a.vertex.x))break}r.splice(i,0,e)},del:function(e){for(var t=0,n=o.list,i=n.length;i>t&&n[t]!=e;++t);n.splice(t,1)},empty:function(){return 0===o.list.length},nextEvent:function(e){for(var t=0,n=o.list,i=n.length;i>t;++t)if(n[t]==e)return n[t+1];return null},min:function(){var e=o.list[0];return{x:e.vertex.x,y:e.ystar}},extractMin:function(){return o.list.shift()}};i.init(),n.bottomSite=n.list.shift();for(var s,a,l,u,c,h,f,d,p,g,m,v,y,E=n.list.shift();;)if(o.empty()||(s=o.min()),E&&(o.empty()||E.y<s.y||E.y==s.y&&E.x<s.x))a=i.leftBound(E),l=i.right(a),f=i.rightRegion(a),v=r.bisect(f,E),h=i.createHalfEdge(v,"l"),i.insert(a,h),g=r.intersect(a,h),g&&(o.del(a),o.insert(a,g,r.distance(g,E))),a=h,h=i.createHalfEdge(v,"r"),i.insert(a,h),g=r.intersect(h,l),g&&o.insert(h,g,r.distance(g,E)),E=n.list.shift();else{if(o.empty())break;a=o.extractMin(),u=i.left(a),l=i.right(a),c=i.right(l),f=i.leftRegion(a),d=i.rightRegion(l),m=a.vertex,r.endPoint(a.edge,a.side,m),r.endPoint(l.edge,l.side,m),i.del(a),o.del(l),i.del(l),y="l",f.y>d.y&&(p=f,f=d,d=p,y="r"),v=r.bisect(f,d),h=i.createHalfEdge(v,y),i.insert(u,h),r.endPoint(v,Vo[y],m),g=r.intersect(u,h),g&&(o.del(u),o.insert(u,g,r.distance(g,f))),g=r.intersect(h,c),g&&o.insert(h,g,r.distance(g,f))}for(a=i.right(i.leftEnd);a!=i.rightEnd;a=i.right(a))t(a.edge)}function zi(){return{leaf:!0,nodes:[],point:null}}function Ui(e,t,n,i,r,o){if(!e(t,n,i,r,o)){var s=.5*(n+r),a=.5*(i+o),l=t.nodes;l[0]&&Ui(e,l[0],n,i,s,a),l[1]&&Ui(e,l[1],s,i,r,a),l[2]&&Ui(e,l[2],n,a,s,o),l[3]&&Ui(e,l[3],s,a,r,o)}}function Wi(e){return{x:e[0],y:e[1]}}function Gi(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Vi(e,t,n,i){for(var r,o,s=0,a=t.length,l=n.length;a>s;){if(i>=l)return-1;if(r=t.charCodeAt(s++),37==r){if(o=es[t.charAt(s++)],!o||(i=o(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function Yi(e,t,n){return ts.test(t.substring(n,n+=3))?n:-1}function qi(e,t,n){ns.lastIndex=0;var i=ns.exec(t.substring(n,n+10));return i?n+=i[0].length:-1}function Xi(e,t,n){var i=rs.get(t.substring(n,n+=3).toLowerCase());return null==i?-1:(e.m=i,n)}function Ji(e,t,n){os.lastIndex=0;var i=os.exec(t.substring(n,n+12));return i?(e.m=ss.get(i[0].toLowerCase()),n+=i[0].length):-1}function Ki(e,t,n){return Vi(e,Qo.c.toString(),t,n)}function Zi(e,t,n){return Vi(e,Qo.x.toString(),t,n)}function Qi(e,t,n){return Vi(e,Qo.X.toString(),t,n)}function er(e,t,n){ls.lastIndex=0;var i=ls.exec(t.substring(n,n+4));return i?(e.y=+i[0],n+=i[0].length):-1}function tr(e,t,n){ls.lastIndex=0;var i=ls.exec(t.substring(n,n+2));return i?(e.y=nr(+i[0]),n+=i[0].length):-1}function nr(e){return e+(e>68?1900:2e3)}function ir(e,t,n){ls.lastIndex=0;var i=ls.exec(t.substring(n,n+2));return i?(e.m=i[0]-1,n+=i[0].length):-1}function rr(e,t,n){ls.lastIndex=0;var i=ls.exec(t.substring(n,n+2));return i?(e.d=+i[0],n+=i[0].length):-1}function or(e,t,n){ls.lastIndex=0;var i=ls.exec(t.substring(n,n+2));return i?(e.H=+i[0],n+=i[0].length):-1}function sr(e,t,n){ls.lastIndex=0;var i=ls.exec(t.substring(n,n+2));return i?(e.M=+i[0],n+=i[0].length):-1}function ar(e,t,n){ls.lastIndex=0;var i=ls.exec(t.substring(n,n+2));return i?(e.S=+i[0],n+=i[0].length):-1}function lr(e,t,n){ls.lastIndex=0;var i=ls.exec(t.substring(n,n+3));return i?(e.L=+i[0],n+=i[0].length):-1}function ur(e,t,n){var i=us.get(t.substring(n,n+=2).toLowerCase());return null==i?-1:(e.p=i,n)}function cr(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",i=~~(Math.abs(t)/60),r=Math.abs(t)%60;return n+Xo(i)+Xo(r)}function hr(e){return e.toISOString()}function fr(e,t,n){function i(t){var n=e(t),i=o(n,1);return i-t>t-n?n:i}function r(n){return t(n=e(new Yo(n-1)),1),n}function o(e,n){return t(e=new Yo(+e),n),e}function s(e,i,o){var s=r(e),a=[];if(o>1)for(;i>s;)n(s)%o||a.push(new Date(+s)),t(s,1);else for(;i>s;)a.push(new Date(+s)),t(s,1);return a}function a(e,t,n){try{Yo=Gi;var i=new Gi;return i._=e,s(i,t,n)}finally{Yo=Date}}e.floor=e,e.round=i,e.ceil=r,e.offset=o,e.range=s;var l=e.utc=dr(e);return l.floor=l,l.round=dr(i),l.ceil=dr(r),l.offset=dr(o),l.range=a,e}function dr(e){return function(t,n){try{Yo=Gi;var i=new Gi;return i._=t,e(i,n)._}finally{Yo=Date}}}function pr(e,t,n){function i(t){return e(t)}return i.invert=function(t){return mr(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain().map(mr)},i.nice=function(e){var t=gr(i.domain());return i.domain([e.floor(t[0]),e.ceil(t[1])])},i.ticks=function(n,r){var o=gr(i.domain());if("function"!=typeof n){var s=o[1]-o[0],a=s/n,l=d3.bisect(hs,a);if(l==hs.length)return t.year(o,n);if(!l)return e.ticks(n).map(mr);Math.log(a/hs[l-1])<Math.log(hs[l]/a)&&--l,n=t[l],r=n[1],n=n[0].range}return n(o[0],new Date(+o[1]+1),r)},i.tickFormat=function(){return n},i.copy=function(){return pr(e.copy(),t,n)},d3.rebind(i,e,"range","rangeRound","interpolate","clamp")}function gr(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function mr(e){return new Date(e)}function vr(e){return function(t){for(var n=e.length-1,i=e[n];!i[1](t);)i=e[--n];return i[0](t)}}function yr(e){var t=new Date(e,0,1);return t.setFullYear(e),t}function Er(e){var t=e.getFullYear(),n=yr(t),i=yr(t+1);return t+(e-n)/(i-n)}function Ar(e){var t=new Date(Date.UTC(e,0,1));return t.setUTCFullYear(e),t}function br(e){var t=e.getUTCFullYear(),n=Ar(t),i=Ar(t+1);return t+(e-n)/(i-n)}Date.now||(Date.now=function(){return+new Date});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(wr){var xr=CSSStyleDeclaration.prototype,Cr=xr.setProperty;xr.setProperty=function(e,t,n){Cr.call(this,e,t+"",n)}}d3={version:"2.9.7"};var _r=n;try{_r(document.documentElement.childNodes)[0].nodeType}catch(Fr){_r=t}var Sr=[].__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};d3.map=function(e){var t=new i;for(var n in e)t.set(n,e[n]);return t},e(i,{has:function(e){return Tr+e in this},get:function(e){return this[Tr+e]},set:function(e,t){return this[Tr+e]=t},remove:function(e){return e=Tr+e,e in this&&delete this[e]},keys:function(){var e=[];return this.forEach(function(t){e.push(t)}),e},values:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e},entries:function(){var e=[];return this.forEach(function(t,n){e.push({key:t,value:n})}),e},forEach:function(e){for(var t in this)t.charCodeAt(0)===Dr&&e.call(this,t.substring(1),this[t])}});var Tr="\0",Dr=Tr.charCodeAt(0);d3.functor=a,d3.rebind=function(e,t){for(var n,i=1,r=arguments.length;++i<r;)e[n=arguments[i]]=l(e,t,t[n]);return e},d3.ascending=function(e,t){return t>e?-1:e>t?1:e>=t?0:0/0},d3.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:0/0},d3.mean=function(e,t){var n,i=e.length,r=0,o=-1,s=0;if(1===arguments.length)for(;++o<i;)u(n=e[o])&&(r+=(n-r)/++s);else for(;++o<i;)u(n=t.call(e,e[o],o))&&(r+=(n-r)/++s);return s?r:void 0},d3.median=function(e,t){return arguments.length>1&&(e=e.map(t)),e=e.filter(u),e.length?d3.quantile(e.sort(d3.ascending),.5):void 0},d3.min=function(e,t){var n,i,r=-1,o=e.length;if(1===arguments.length){for(;++r<o&&(null==(n=e[r])||n!=n);)n=void 0;
for(;++r<o;)null!=(i=e[r])&&n>i&&(n=i)}else{for(;++r<o&&(null==(n=t.call(e,e[r],r))||n!=n);)n=void 0;for(;++r<o;)null!=(i=t.call(e,e[r],r))&&n>i&&(n=i)}return n},d3.max=function(e,t){var n,i,r=-1,o=e.length;if(1===arguments.length){for(;++r<o&&(null==(n=e[r])||n!=n);)n=void 0;for(;++r<o;)null!=(i=e[r])&&i>n&&(n=i)}else{for(;++r<o&&(null==(n=t.call(e,e[r],r))||n!=n);)n=void 0;for(;++r<o;)null!=(i=t.call(e,e[r],r))&&i>n&&(n=i)}return n},d3.extent=function(e,t){var n,i,r,o=-1,s=e.length;if(1===arguments.length){for(;++o<s&&(null==(n=r=e[o])||n!=n);)n=r=void 0;for(;++o<s;)null!=(i=e[o])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++o<s&&(null==(n=r=t.call(e,e[o],o))||n!=n);)n=void 0;for(;++o<s;)null!=(i=t.call(e,e[o],o))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},d3.random={normal:function(e,t){return arguments.length<2&&(t=1),arguments.length<1&&(e=0),function(){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return e+t*n*Math.sqrt(-2*Math.log(r)/r)}}},d3.sum=function(e,t){var n,i=0,r=e.length,o=-1;if(1===arguments.length)for(;++o<r;)isNaN(n=+e[o])||(i+=n);else for(;++o<r;)isNaN(n=+t.call(e,e[o],o))||(i+=n);return i},d3.quantile=function(e,t){var n=(e.length-1)*t+1,i=Math.floor(n),r=e[i-1],o=n-i;return o?r+o*(e[i]-r):r},d3.transpose=function(e){return d3.zip.apply(d3,e)},d3.zip=function(){if(!(i=arguments.length))return[];for(var e=-1,t=d3.min(arguments,c),n=new Array(t);++e<t;)for(var i,r=-1,o=n[e]=new Array(i);++r<i;)o[r]=arguments[r][e];return n},d3.bisector=function(e){return{left:function(t,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=t.length);r>i;){var o=i+r>>>1;e.call(t,t[o],o)<n?i=o+1:r=o}return i},right:function(t,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=t.length);r>i;){var o=i+r>>>1;n<e.call(t,t[o],o)?r=o:i=o+1}return i}}};var Rr=d3.bisector(function(e){return e});d3.bisectLeft=Rr.left,d3.bisect=d3.bisectRight=Rr.right,d3.first=function(e,t){var n,i=0,r=e.length,o=e[0];for(1===arguments.length&&(t=d3.ascending);++i<r;)t.call(e,o,n=e[i])>0&&(o=n);return o},d3.last=function(e,t){var n,i=0,r=e.length,o=e[0];for(1===arguments.length&&(t=d3.ascending);++i<r;)t.call(e,o,n=e[i])<=0&&(o=n);return o},d3.nest=function(){function e(t,a){if(a>=s.length)return r?r.call(o,t):n?t.sort(n):t;for(var l,u,c,h=-1,f=t.length,d=s[a++],p=new i,g={};++h<f;)(c=p.get(l=d(u=t[h])))?c.push(u):p.set(l,[u]);return p.forEach(function(t){g[t]=e(p.get(t),a)}),g}function t(e,n){if(n>=s.length)return e;var i,r=[],o=a[n++];for(i in e)r.push({key:i,values:t(e[i],n)});return o&&r.sort(function(e,t){return o(e.key,t.key)}),r}var n,r,o={},s=[],a=[];return o.map=function(t){return e(t,0)},o.entries=function(n){return t(e(n,0),0)},o.key=function(e){return s.push(e),o},o.sortKeys=function(e){return a[s.length-1]=e,o},o.sortValues=function(e){return n=e,o},o.rollup=function(e){return r=e,o},o},d3.keys=function(e){var t=[];for(var n in e)t.push(n);return t},d3.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},d3.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},d3.permute=function(e,t){for(var n=[],i=-1,r=t.length;++i<r;)n[i]=e[t[i]];return n},d3.merge=function(e){return Array.prototype.concat.apply([],e)},d3.split=function(e,t){var n,i=[],r=[],o=-1,s=e.length;for(arguments.length<2&&(t=h);++o<s;)t.call(r,n=e[o],o)?r=[]:(r.length||i.push(r),r.push(n));return i},d3.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),1/0===(t-e)/n)throw new Error("infinite range");var i,r=[],o=d(Math.abs(n)),s=-1;if(e*=o,t*=o,n*=o,0>n)for(;(i=e+n*++s)>t;)r.push(i/o);else for(;(i=e+n*++s)<t;)r.push(i/o);return r},d3.requote=function(e){return e.replace(kr,"\\$&")};var kr=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},d3.xhr=function(e,t,n){var i=new XMLHttpRequest;arguments.length<3?(n=t,t=null):t&&i.overrideMimeType&&i.overrideMimeType(t),i.open("GET",e,!0),t&&i.setRequestHeader("Accept",t),i.onreadystatechange=function(){if(4===i.readyState){var e=i.status;n(!e&&i.response||e>=200&&300>e||304===e?i:null)}},i.send(null)},d3.text=function(e,t,n){function i(e){n(e&&e.responseText)}arguments.length<3&&(n=t,t=null),d3.xhr(e,t,i)},d3.json=function(e,t){d3.text(e,"application/json",function(e){t(e?JSON.parse(e):null)})},d3.html=function(e,t){d3.text(e,"text/html",function(e){if(null!=e){var n=document.createRange();n.selectNode(document.body),e=n.createContextualFragment(e)}t(e)})},d3.xml=function(e,t,n){function i(e){n(e&&e.responseXML)}arguments.length<3&&(n=t,t=null),d3.xhr(e,t,i)};var Br={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:Br,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.substring(0,t),e=e.substring(t+1)),Br.hasOwnProperty(n)?{space:Br[n],local:e}:e}},d3.dispatch=function(){for(var e=new p,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=g(e);return e},p.prototype.on=function(e,t){var n=e.indexOf("."),i="";return n>0&&(i=e.substring(n+1),e=e.substring(0,n)),arguments.length<2?this[e].on(i):this[e].on(i,t)},d3.format=function(e){var t=Mr.exec(e),n=t[1]||" ",i=t[3]||"",r=t[5],o=+t[6],s=t[7],a=t[8],l=t[9],u=1,c="",h=!1;switch(a&&(a=+a.substring(1)),r&&(n="0",s&&(o-=Math.floor((o-1)/4))),l){case"n":s=!0,l="g";break;case"%":u=100,c="%",l="f";break;case"p":u=100,c="%",l="r";break;case"d":h=!0,a=0;break;case"s":u=-1,l="r"}return"r"==l&&!a&&(l="g"),l=Lr.get(l)||v,function(e){if(h&&e%1)return"";var t=0>e&&(e=-e)?"âˆ’":i;if(0>u){var f=d3.formatPrefix(e,a);e=f.scale(e),c=f.symbol}else e*=u;if(e=l(e,a),r){var d=e.length+t.length;o>d&&(e=new Array(o-d+1).join(n)+e),s&&(e=y(e)),e=t+e}else{s&&(e=y(e)),e=t+e;var d=e.length;o>d&&(e=new Array(o-d+1).join(n)+e)}return e+c}};var Mr=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,Lr=d3.map({g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return d3.round(e,t=m(e,t)).toFixed(Math.max(0,Math.min(20,t)))}}),Pr=["y","z","a","f","p","n","Î¼","m","","k","M","G","T","P","E","Z","Y"].map(E);d3.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=d3.round(e,m(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((0>=n?n+1:n-1)/3)))),Pr[8+n/3]};var Ir=C(2),$r=C(3),Nr=function(){return x},Or=d3.map({linear:Nr,poly:C,quad:function(){return Ir},cubic:function(){return $r},sin:function(){return _},exp:function(){return F},circle:function(){return S},elastic:T,back:D,bounce:function(){return R}}),Hr=d3.map({"in":x,out:b,"in-out":w,"out-in":function(e){return w(b(e))}});d3.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.substring(0,t):e,i=t>=0?e.substring(t+1):"in";return n=Or.get(n)||Nr,i=Hr.get(i)||x,A(i(n.apply(null,Array.prototype.slice.call(arguments,1))))},d3.event=null,d3.transform=function(e){var t=document.createElementNS(d3.ns.prefix.svg,"g");return(d3.transform=function(e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate();return new L(n?n.matrix:zr)})(e)},L.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var jr=180/Math.PI,zr={a:1,b:0,c:0,d:1,e:0,f:0};d3.interpolate=function(e,t){for(var n,i=d3.interpolators.length;--i>=0&&!(n=d3.interpolators[i](e,t)););return n},d3.interpolateNumber=function(e,t){return t-=e,function(n){return e+t*n}},d3.interpolateRound=function(e,t){return t-=e,function(n){return Math.round(e+t*n)}},d3.interpolateString=function(e,t){var n,i,r,o,s,a=0,l=0,u=[],c=[];for(Gr.lastIndex=0,i=0;n=Gr.exec(t);++i)n.index&&u.push(t.substring(a,l=n.index)),c.push({i:u.length,x:n[0]}),u.push(null),a=Gr.lastIndex;for(a<t.length&&u.push(t.substring(a)),i=0,o=c.length;(n=Gr.exec(e))&&o>i;++i)if(s=c[i],s.x==n[0]){if(s.i)if(null==u[s.i+1])for(u[s.i-1]+=s.x,u.splice(s.i,1),r=i+1;o>r;++r)c[r].i--;else for(u[s.i-1]+=s.x+u[s.i+1],u.splice(s.i,2),r=i+1;o>r;++r)c[r].i-=2;else if(null==u[s.i+1])u[s.i]=s.x;else for(u[s.i]=s.x+u[s.i+1],u.splice(s.i+1,1),r=i+1;o>r;++r)c[r].i--;c.splice(i,1),o--,i--}else s.x=d3.interpolateNumber(parseFloat(n[0]),parseFloat(s.x));for(;o>i;)s=c.pop(),null==u[s.i+1]?u[s.i]=s.x:(u[s.i]=s.x+u[s.i+1],u.splice(s.i+1,1)),o--;return 1===u.length?null==u[0]?c[0].x:function(){return t}:function(e){for(i=0;o>i;++i)u[(s=c[i]).i]=s.x(e);return u.join("")}},d3.interpolateTransform=function(e,t){if(n=Wr(e,t))return n;var n,i=[],r=[],o=d3.transform(e),s=d3.transform(t),a=o.translate,l=s.translate,u=o.rotate,c=s.rotate,h=o.skew,f=s.skew,d=o.scale,p=s.scale;return a[0]!=l[0]||a[1]!=l[1]?(i.push("translate(",null,",",null,")"),r.push({i:1,x:d3.interpolateNumber(a[0],l[0])},{i:3,x:d3.interpolateNumber(a[1],l[1])})):l[0]||l[1]?i.push("translate("+l+")"):i.push(""),u!=c?(u-c>180?c+=360:c-u>180&&(u+=360),r.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:d3.interpolateNumber(u,c)})):c&&i.push(i.pop()+"rotate("+c+")"),h!=f?r.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:d3.interpolateNumber(h,f)}):f&&i.push(i.pop()+"skewX("+f+")"),d[0]!=p[0]||d[1]!=p[1]?(n=i.push(i.pop()+"scale(",null,",",null,")"),r.push({i:n-4,x:d3.interpolateNumber(d[0],p[0])},{i:n-2,x:d3.interpolateNumber(d[1],p[1])})):(1!=p[0]||1!=p[1])&&i.push(i.pop()+"scale("+p+")"),n=r.length,function(e){for(var t,o=-1;++o<n;)i[(t=r[o]).i]=t.x(e);return i.join("")}};var Ur=["","","translate","scale","rotate","skewX","skewY"],Wr=function(e,t){var n=document.createElementNS(d3.ns.prefix.svg,"g"),i=document.createElementNS(d3.ns.prefix.svg,"g");return(Wr=function(e,t){n.setAttribute("transform",e),i.setAttribute("transform",t),e=n.transform.baseVal,t=i.transform.baseVal;var r,o,s,a=[],l=[],u=-1,c=e.numberOfItems,h=t.numberOfItems;if(h!==c)if(h){if(c)return;e=N(t),c=h}else t=N(e);else if(!h)return;for(;++u<c;){if(r=e.getItem(u),o=t.getItem(u),s=r.type,s!==o.type||!s)return;switch(s){case 1:a.push(new L(r.matrix)),l.push(new L(o.matrix));continue;case 2:ra=r.matrix.e+","+r.matrix.f,rb=o.matrix.e+","+o.matrix.f;break;case 3:ra=r.matrix.a+","+r.matrix.d,rb=o.matrix.a+","+o.matrix.d;break;default:ra=r.angle,rb=o.angle}a.push(s=Ur[s],"(",ra,")"),l.push(s,"(",rb,")")}return d3.interpolateString(a.join(""),l.join(""))})(e,t)};d3.interpolateRgb=function(e,t){e=d3.rgb(e),t=d3.rgb(t);var n=e.r,i=e.g,r=e.b,o=t.r-n,s=t.g-i,a=t.b-r;return function(e){return"#"+W(Math.round(n+o*e))+W(Math.round(i+s*e))+W(Math.round(r+a*e))}},d3.interpolateHsl=function(e,t){e=d3.hsl(e),t=d3.hsl(t);var n=e.h,i=e.s,r=e.l,o=t.h-n,s=t.s-i,a=t.l-r;return o>180?o-=360:-180>o&&(o+=360),function(e){return J(n+o*e,i+s*e,r+a*e).toString()}},d3.interpolateArray=function(e,t){var n,i=[],r=[],o=e.length,s=t.length,a=Math.min(e.length,t.length);for(n=0;a>n;++n)i.push(d3.interpolate(e[n],t[n]));for(;o>n;++n)r[n]=e[n];for(;s>n;++n)r[n]=t[n];return function(e){for(n=0;a>n;++n)r[n]=i[n](e);return r}},d3.interpolateObject=function(e,t){var n,i={},r={};for(n in e)n in t?i[n]=O(n)(e[n],t[n]):r[n]=e[n];for(n in t)n in e||(r[n]=t[n]);return function(e){for(n in i)r[n]=i[n](e);return r}};var Gr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;d3.interpolators=[d3.interpolateObject,function(e,t){return t instanceof Array&&d3.interpolateArray(e,t)},function(e,t){return("string"==typeof e||"string"==typeof t)&&d3.interpolateString(e+"",t+"")},function(e,t){return("string"==typeof t?Vr.has(t)||/^(#|rgb\(|hsl\()/.test(t):t instanceof U||t instanceof X)&&d3.interpolateRgb(e,t)},function(e,t){return!isNaN(e=+e)&&!isNaN(t=+t)&&d3.interpolateNumber(e,t)}],d3.rgb=function(e,t,n){return 1===arguments.length?e instanceof U?z(e.r,e.g,e.b):G(""+e,z,J):z(~~e,~~t,~~n)},U.prototype.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,i=this.b,r=30;return t||n||i?(t&&r>t&&(t=r),n&&r>n&&(n=r),i&&r>i&&(i=r),z(Math.min(255,Math.floor(t/e)),Math.min(255,Math.floor(n/e)),Math.min(255,Math.floor(i/e)))):z(r,r,r)},U.prototype.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),z(Math.floor(e*this.r),Math.floor(e*this.g),Math.floor(e*this.b))},U.prototype.hsl=function(){return V(this.r,this.g,this.b)},U.prototype.toString=function(){return"#"+W(this.r)+W(this.g)+W(this.b)};var Vr=d3.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});Vr.forEach(function(e,t){Vr.set(e,G(t,z,J))}),d3.hsl=function(e,t,n){return 1===arguments.length?e instanceof X?q(e.h,e.s,e.l):G(""+e,V,q):q(+e,+t,+n)},X.prototype.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),q(this.h,this.s,this.l/e)},X.prototype.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),q(this.h,this.s,e*this.l)},X.prototype.rgb=function(){return J(this.h,this.s,this.l)},X.prototype.toString=function(){return this.rgb().toString()};var Yr=function(e,t){return t.querySelector(e)},qr=function(e,t){return t.querySelectorAll(e)},Xr=document.documentElement,Jr=Xr.matchesSelector||Xr.webkitMatchesSelector||Xr.mozMatchesSelector||Xr.msMatchesSelector||Xr.oMatchesSelector,Kr=function(e,t){return Jr.call(e,t)};"function"==typeof Sizzle&&(Yr=function(e,t){return Sizzle(e,t)[0]||null},qr=function(e,t){return Sizzle.uniqueSort(Sizzle(e,t))},Kr=Sizzle.matchesSelector);var Zr=[];d3.selection=function(){return Qr},d3.selection.prototype=Zr,Zr.select=function(e){var t,n,i,r,o=[];"function"!=typeof e&&(e=Z(e));for(var s=-1,a=this.length;++s<a;){o.push(t=[]),t.parentNode=(i=this[s]).parentNode;for(var l=-1,u=i.length;++l<u;)(r=i[l])?(t.push(n=e.call(r,r.__data__,l)),n&&"__data__"in r&&(n.__data__=r.__data__)):t.push(null)}return K(o)},Zr.selectAll=function(e){var t,n,i=[];"function"!=typeof e&&(e=Q(e));for(var r=-1,o=this.length;++r<o;)for(var s=this[r],a=-1,l=s.length;++a<l;)(n=s[a])&&(i.push(t=_r(e.call(n,n.__data__,a))),t.parentNode=n);return K(i)},Zr.attr=function(e,t){function n(){this.removeAttribute(e)}function i(){this.removeAttributeNS(e.space,e.local)}function r(){this.setAttribute(e,t)}function o(){this.setAttributeNS(e.space,e.local,t)}function s(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function a(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}if(e=d3.ns.qualify(e),arguments.length<2){var l=this.node();return e.local?l.getAttributeNS(e.space,e.local):l.getAttribute(e)}return this.each(null==t?e.local?i:n:"function"==typeof t?e.local?a:s:e.local?o:r)},Zr.classed=function(e,t){var n=f(e).split(" "),i=n.length,r=-1;if(arguments.length>1){for(;++r<i;)et.call(this,n[r],t);return this}for(;++r<i;)if(!et.call(this,n[r]))return!1;return!0},Zr.style=function(e,t,n){function i(){this.style.removeProperty(e)}function r(){this.style.setProperty(e,t,n)}function o(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}return arguments.length<3&&(n=""),arguments.length<2?window.getComputedStyle(this.node(),null).getPropertyValue(e):this.each(null==t?i:"function"==typeof t?o:r)},Zr.property=function(e,t){function n(){delete this[e]}function i(){this[e]=t}function r(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return arguments.length<2?this.node()[e]:this.each(null==t?n:"function"==typeof t?r:i)},Zr.text=function(e){return arguments.length<1?this.node().textContent:this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e})},Zr.html=function(e){return arguments.length<1?this.node().innerHTML:this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e})},Zr.append=function(e){function t(){return this.appendChild(document.createElementNS(this.namespaceURI,e))}function n(){return this.appendChild(document.createElementNS(e.space,e.local))}return e=d3.ns.qualify(e),this.select(e.local?n:t)},Zr.insert=function(e,t){function n(){return this.insertBefore(document.createElementNS(this.namespaceURI,e),Yr(t,this))}function i(){return this.insertBefore(document.createElementNS(e.space,e.local),Yr(t,this))}return e=d3.ns.qualify(e),this.select(e.local?i:n)},Zr.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},Zr.data=function(e,t){function n(e,n){var r,o,s,a=e.length,h=n.length,f=Math.min(a,h),d=Math.max(a,h),p=[],g=[],m=[];if(t){var v,y=new i,E=[],A=n.length;for(r=-1;++r<a;)v=t.call(o=e[r],o.__data__,r),y.has(v)?m[A++]=o:y.set(v,o),E.push(v);for(r=-1;++r<h;)v=t.call(n,s=n[r],r),y.has(v)?(p[r]=o=y.get(v),o.__data__=s,g[r]=m[r]=null):(g[r]=tt(s),p[r]=m[r]=null),y.remove(v);for(r=-1;++r<a;)y.has(E[r])&&(m[r]=e[r])}else{for(r=-1;++r<f;)o=e[r],s=n[r],o?(o.__data__=s,p[r]=o,g[r]=m[r]=null):(g[r]=tt(s),p[r]=m[r]=null);for(;h>r;++r)g[r]=tt(n[r]),p[r]=m[r]=null;for(;d>r;++r)m[r]=e[r],g[r]=p[r]=null}g.update=p,g.parentNode=p.parentNode=m.parentNode=e.parentNode,l.push(g),u.push(p),c.push(m)}var r,o,s=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(r=this[0]).length);++s<a;)(o=r[s])&&(e[s]=o.__data__);return e}var l=ot([]),u=K([]),c=K([]);if("function"==typeof e)for(;++s<a;)n(r=this[s],e.call(r,r.parentNode.__data__,s));else for(;++s<a;)n(r=this[s],e);return u.enter=function(){return l},u.exit=function(){return c},u},Zr.datum=Zr.map=function(e){return arguments.length<1?this.property("__data__"):this.property("__data__",e)},Zr.filter=function(e){var t,n,i,r=[];"function"!=typeof e&&(e=nt(e));for(var o=0,s=this.length;s>o;o++){r.push(t=[]),t.parentNode=(n=this[o]).parentNode;for(var a=0,l=n.length;l>a;a++)(i=n[a])&&e.call(i,i.__data__,a)&&t.push(i)}return K(r)},Zr.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,i=this[e],r=i.length-1,o=i[r];--r>=0;)(n=i[r])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Zr.sort=function(e){e=it.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},Zr.on=function(e,t,n){arguments.length<3&&(n=!1);var i="__on"+e,r=e.indexOf(".");return r>0&&(e=e.substring(0,r)),arguments.length<2?(r=this.node()[i])&&r._:this.each(function(){function r(e){var n=d3.event;d3.event=e,s[0]=o.__data__;try{t.apply(o,s)}finally{d3.event=n}}var o=this,s=arguments,a=o[i];a&&(o.removeEventListener(e,a,a.$),delete o[i]),t&&(o.addEventListener(e,o[i]=r,r.$=n),r._=t)})},Zr.each=function(e){return rt(this,function(t,n,i){e.call(t,t.__data__,n,i)})},Zr.call=function(e){return e.apply(this,(arguments[0]=this,arguments)),this},Zr.empty=function(){return!this.node()},Zr.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],i=0,r=n.length;r>i;i++){var o=n[i];if(o)return o}return null},Zr.transition=function(){for(var e,t,n=[],i=-1,r=this.length;++i<r;){n.push(e=[]);for(var o=this[i],s=-1,a=o.length;++s<a;)e.push((t=o[s])?{node:t,delay:lo,duration:uo}:null)}return st(n,ro||++io,Date.now())};var Qr=K([[document]]);Qr[0].parentNode=Xr,d3.select=function(e){return"string"==typeof e?Qr.select(e):K([[e]])},d3.selectAll=function(e){return"string"==typeof e?Qr.selectAll(e):K([_r(e)])};var eo=[];d3.selection.enter=ot,d3.selection.enter.prototype=eo,eo.append=Zr.append,eo.insert=Zr.insert,eo.empty=Zr.empty,eo.node=Zr.node,eo.select=function(e){for(var t,n,i,r,o,s=[],a=-1,l=this.length;++a<l;){i=(r=this[a]).update,s.push(t=[]),t.parentNode=r.parentNode;for(var u=-1,c=r.length;++u<c;)(o=r[u])?(t.push(i[u]=n=e.call(r.parentNode,o.__data__,u)),n.__data__=o.__data__):t.push(null)}return K(s)};var to={},no=[],io=0,ro=0,oo=0,so=250,ao=d3.ease("cubic-in-out"),lo=oo,uo=so,co=ao;no.call=Zr.call,d3.transition=function(e){return arguments.length?ro?e.transition():e:Qr.transition()},d3.transition.prototype=no,no.select=function(e){var t,n,i,r=[];"function"!=typeof e&&(e=Z(e));for(var o=-1,s=this.length;++o<s;){r.push(t=[]);for(var a=this[o],l=-1,u=a.length;++l<u;)(i=a[l])&&(n=e.call(i.node,i.node.__data__,l))?("__data__"in i.node&&(n.__data__=i.node.__data__),t.push({node:n,delay:i.delay,duration:i.duration})):t.push(null)}return st(r,this.id,this.time).ease(this.ease())},no.selectAll=function(e){var t,n,i,r=[];"function"!=typeof e&&(e=Q(e));for(var o=-1,s=this.length;++o<s;)for(var a=this[o],l=-1,u=a.length;++l<u;)if(i=a[l]){n=e.call(i.node,i.node.__data__,l),r.push(t=[]);for(var c=-1,h=n.length;++c<h;)t.push({node:n[c],delay:i.delay,duration:i.duration})}return st(r,this.id,this.time).ease(this.ease())},no.filter=function(e){var t,n,i,r=[];"function"!=typeof e&&(e=nt(e));for(var o=0,s=this.length;s>o;o++){r.push(t=[]);for(var n=this[o],a=0,l=n.length;l>a;a++)(i=n[a])&&e.call(i.node,i.node.__data__,a)&&t.push(i)}return st(r,this.id,this.time).ease(this.ease())},no.attr=function(e,t){return this.attrTween(e,lt(e,t))},no.attrTween=function(e,t){function n(e,n){var i=t.call(this,e,n,this.getAttribute(r));return i===to?(this.removeAttribute(r),null):i&&function(e){this.setAttribute(r,i(e))}}function i(e,n){var i=t.call(this,e,n,this.getAttributeNS(r.space,r.local));return i===to?(this.removeAttributeNS(r.space,r.local),null):i&&function(e){this.setAttributeNS(r.space,r.local,i(e))}}var r=d3.ns.qualify(e);return this.tween("attr."+e,r.local?i:n)},no.style=function(e,t,n){return arguments.length<3&&(n=""),this.styleTween(e,lt(e,t),n)},no.styleTween=function(e,t,n){return arguments.length<3&&(n=""),this.tween("style."+e,function(i,r){var o=t.call(this,i,r,window.getComputedStyle(this,null).getPropertyValue(e));return o===to?(this.style.removeProperty(e),null):o&&function(t){this.style.setProperty(e,o(t),n)}})},no.text=function(e){return this.tween("text",function(t,n){this.textContent="function"==typeof e?e.call(this,t,n):e})},no.remove=function(){return this.each("end.transition",function(){var e;!this.__transition__&&(e=this.parentNode)&&e.removeChild(this)})},no.delay=function(e){return rt(this,"function"==typeof e?function(t,n,i){t.delay=0|e.call(t=t.node,t.__data__,n,i)}:(e|=0,function(t){t.delay=e}))},no.duration=function(e){return rt(this,"function"==typeof e?function(t,n,i){t.duration=Math.max(1,0|e.call(t=t.node,t.__data__,n,i))}:(e=Math.max(1,0|e),function(t){t.duration=e}))},no.transition=function(){return this.select(o)};var ho,fo,po=null;d3.timer=function(e,t,n){var i,r=!1,o=po;if(arguments.length<3){if(arguments.length<2)t=0;else if(!isFinite(t))return;n=Date.now()}for(;o;){if(o.callback===e){o.then=n,o.delay=t,r=!0;break}i=o,o=o.next}r||(po={callback:e,then:n,delay:t,next:po}),ho||(fo=clearTimeout(fo),ho=1,go(ct))},d3.timer.flush=function(){for(var e,t=Date.now(),n=po;n;)e=t-n.then,n.delay||(n.flush=n.callback(e)),n=n.next;ht()};var go=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,17)};d3.mouse=function(e){return ft(e,B())};var mo=/WebKit/.test(navigator.userAgent)?-1:0;d3.touches=function(e,t){return arguments.length<2&&(t=B().touches),t?_r(t).map(function(t){var n=ft(e,t);return n.identifier=t.identifier,n}):[]},d3.scale={},d3.scale.linear=function(){return vt([0,1],[0,1],d3.interpolate,!1)},d3.scale.log=function(){return _t(d3.scale.linear(),Ft)};var vo=d3.format(".0e");Ft.pow=function(e){return Math.pow(10,e)},St.pow=function(e){return-Math.pow(10,-e)},d3.scale.pow=function(){return Tt(d3.scale.linear(),1)},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return Rt([],{t:"range",x:[]})},d3.scale.category10=function(){return d3.scale.ordinal().range(yo)},d3.scale.category20=function(){return d3.scale.ordinal().range(Eo)},d3.scale.category20b=function(){return d3.scale.ordinal().range(Ao)},d3.scale.category20c=function(){return d3.scale.ordinal().range(bo)};var yo=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Eo=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],Ao=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],bo=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];d3.scale.quantile=function(){return kt([],[])},d3.scale.quantize=function(){return Bt(0,1,[0,1])},d3.scale.identity=function(){return Mt([0,1])},d3.svg={},d3.svg.arc=function(){function e(){var e=t.apply(this,arguments),o=n.apply(this,arguments),s=i.apply(this,arguments)+wo,a=r.apply(this,arguments)+wo,l=(s>a&&(l=s,s=a,a=l),a-s),u=l<Math.PI?"0":"1",c=Math.cos(s),h=Math.sin(s),f=Math.cos(a),d=Math.sin(a);return l>=xo?e?"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+-e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"Z":e?"M"+o*c+","+o*h+"A"+o+","+o+" 0 "+u+",1 "+o*f+","+o*d+"L"+e*f+","+e*d+"A"+e+","+e+" 0 "+u+",0 "+e*c+","+e*h+"Z":"M"+o*c+","+o*h+"A"+o+","+o+" 0 "+u+",1 "+o*f+","+o*d+"L0,0"+"Z"}var t=Lt,n=Pt,i=It,r=$t;return e.innerRadius=function(n){return arguments.length?(t=a(n),e):t},e.outerRadius=function(t){return arguments.length?(n=a(t),e):n},e.startAngle=function(t){return arguments.length?(i=a(t),e):i},e.endAngle=function(t){return arguments.length?(r=a(t),e):r},e.centroid=function(){var e=(t.apply(this,arguments)+n.apply(this,arguments))/2,o=(i.apply(this,arguments)+r.apply(this,arguments))/2+wo;return[Math.cos(o)*e,Math.sin(o)*e]},e};var wo=-Math.PI/2,xo=2*Math.PI-1e-6;d3.svg.line=function(){return Nt(r)};var Co="linear",_o=d3.map({linear:jt,"linear-closed":zt,"step-before":Ut,"step-after":Wt,basis:Jt,"basis-open":Kt,"basis-closed":Zt,bundle:Qt,cardinal:Yt,"cardinal-open":Gt,"cardinal-closed":Vt,monotone:sn}),Fo=[0,2/3,1/3,0],So=[0,1/3,2/3,0],To=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var e=Nt(an);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Ut.reverse=Wt,Wt.reverse=Ut,d3.svg.area=function(){return ln(Object)},d3.svg.area.radial=function(){var e=ln(an);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},d3.svg.chord=function(){function e(e,a){var l=t(this,o,e,a),u=t(this,s,e,a);return"M"+l.p0+i(l.r,l.p1,l.a1-l.a0)+(n(l,u)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,u.r,u.p0)+i(u.r,u.p1,u.a1-u.a0)+r(u.r,u.p1,l.r,l.p0))+"Z"}function t(e,t,n,i){var r=t.call(e,n,i),o=l.call(e,r,i),s=u.call(e,r,i)+wo,a=c.call(e,r,i)+wo;return{r:o,a0:s,a1:a,p0:[o*Math.cos(s),o*Math.sin(s)],p1:[o*Math.cos(a),o*Math.sin(a)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function i(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Math.PI)+",1 "+t}function r(e,t,n,i){return"Q 0,0 "+i}var o=un,s=cn,l=hn,u=It,c=$t;return e.radius=function(t){return arguments.length?(l=a(t),e):l},e.source=function(t){return arguments.length?(o=a(t),e):o},e.target=function(t){return arguments.length?(s=a(t),e):s},e.startAngle=function(t){return arguments.length?(u=a(t),e):u},e.endAngle=function(t){return arguments.length?(c=a(t),e):c},e},d3.svg.diagonal=function(){function e(e,r){var o=t.call(this,e,r),s=n.call(this,e,r),a=(o.y+s.y)/2,l=[o,{x:o.x,y:a},{x:s.x,y:a},s];return l=l.map(i),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=un,n=cn,i=fn;return e.source=function(n){return arguments.length?(t=a(n),e):t},e.target=function(t){return arguments.length?(n=a(t),e):n},e.projection=function(t){return arguments.length?(i=t,e):i},e},d3.svg.diagonal.radial=function(){var e=d3.svg.diagonal(),t=fn,n=e.projection;return e.projection=function(e){return arguments.length?n(dn(t=e)):t},e},d3.svg.mouse=d3.mouse,d3.svg.touches=d3.touches,d3.svg.symbol=function(){function e(e,i){return(Do.get(t.call(this,e,i))||mn)(n.call(this,e,i))}var t=gn,n=pn;return e.type=function(n){return arguments.length?(t=a(n),e):t},e.size=function(t){return arguments.length?(n=a(t),e):n},e};var Do=d3.map({circle:mn,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*ko)),n=t*ko;return"M0,"+-t+"L"+n+",0"+" 0,"+t+" "+-n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Ro),n=t*Ro/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Ro),n=t*Ro/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});d3.svg.symbolTypes=Do.keys();var Ro=Math.sqrt(3),ko=Math.tan(30*Math.PI/180);d3.svg.axis=function(){function e(e){e.each(function(){var e,h=d3.select(this),f=null==u?n.ticks?n.ticks.apply(n,l):n.domain():u,d=null==t?n.tickFormat?n.tickFormat.apply(n,l):String:t,p=En(n,f,c),g=h.selectAll(".minor").data(p,String),m=g.enter().insert("line","g").attr("class","tick minor").style("opacity",1e-6),v=d3.transition(g.exit()).style("opacity",1e-6).remove(),y=d3.transition(g).style("opacity",1),E=h.selectAll("g").data(f,String),A=E.enter().insert("g","path").style("opacity",1e-6),b=d3.transition(E.exit()).style("opacity",1e-6).remove(),w=d3.transition(E).style("opacity",1),x=pt(n),C=h.selectAll(".domain").data([0]),_=(C.enter().append("path").attr("class","domain"),d3.transition(C)),F=n.copy(),S=this.__chart__||F;this.__chart__=F,A.append("line").attr("class","tick"),A.append("text");var T=A.select("line"),D=w.select("line"),R=E.select("text").text(d),k=A.select("text"),B=w.select("text");switch(i){case"bottom":e=vn,m.attr("y2",o),y.attr("x2",0).attr("y2",o),T.attr("y2",r),k.attr("y",Math.max(r,0)+a),D.attr("x2",0).attr("y2",r),B.attr("x",0).attr("y",Math.max(r,0)+a),R.attr("dy",".71em").attr("text-anchor","middle"),_.attr("d","M"+x[0]+","+s+"V0H"+x[1]+"V"+s);
break;case"top":e=vn,m.attr("y2",-o),y.attr("x2",0).attr("y2",-o),T.attr("y2",-r),k.attr("y",-(Math.max(r,0)+a)),D.attr("x2",0).attr("y2",-r),B.attr("x",0).attr("y",-(Math.max(r,0)+a)),R.attr("dy","0em").attr("text-anchor","middle"),_.attr("d","M"+x[0]+","+-s+"V0H"+x[1]+"V"+-s);break;case"left":e=yn,m.attr("x2",-o),y.attr("x2",-o).attr("y2",0),T.attr("x2",-r),k.attr("x",-(Math.max(r,0)+a)),D.attr("x2",-r).attr("y2",0),B.attr("x",-(Math.max(r,0)+a)).attr("y",0),R.attr("dy",".32em").attr("text-anchor","end"),_.attr("d","M"+-s+","+x[0]+"H0V"+x[1]+"H"+-s);break;case"right":e=yn,m.attr("x2",o),y.attr("x2",o).attr("y2",0),T.attr("x2",r),k.attr("x",Math.max(r,0)+a),D.attr("x2",r).attr("y2",0),B.attr("x",Math.max(r,0)+a).attr("y",0),R.attr("dy",".32em").attr("text-anchor","start"),_.attr("d","M"+s+","+x[0]+"H0V"+x[1]+"H"+s)}if(n.ticks)A.call(e,S),w.call(e,F),b.call(e,F),m.call(e,S),y.call(e,F),v.call(e,F);else{var M=F.rangeBand()/2,L=function(e){return F(e)+M};A.call(e,L),w.call(e,L)}})}var t,n=d3.scale.linear(),i="bottom",r=6,o=6,s=6,a=3,l=[10],u=null,c=0;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(i=t,e):i},e.ticks=function(){return arguments.length?(l=arguments,e):l},e.tickValues=function(t){return arguments.length?(u=t,e):u},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t,n){if(!arguments.length)return r;var i=arguments.length-1;return r=+t,o=i>1?+n:r,s=i>0?+arguments[i]:r,e},e.tickPadding=function(t){return arguments.length?(a=+t,e):a},e.tickSubdivide=function(t){return arguments.length?(c=+t,e):c},e},d3.svg.brush=function(){function e(o){o.each(function(){var o,s=d3.select(this),c=s.selectAll(".background").data([0]),h=s.selectAll(".extent").data([0]),f=s.selectAll(".resize").data(u,String);s.style("pointer-events","all").on("mousedown.brush",r).on("touchstart.brush",r),c.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),h.enter().append("rect").attr("class","extent").style("cursor","move"),f.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Bo[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),f.style("display",e.empty()?"none":null),f.exit().remove(),a&&(o=pt(a),c.attr("x",o[0]).attr("width",o[1]-o[0]),n(s)),l&&(o=pt(l),c.attr("y",o[0]).attr("height",o[1]-o[0]),i(s)),t(s)})}function t(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+c[+/e$/.test(e)][0]+","+c[+/^s/.test(e)][1]+")"})}function n(e){e.select(".extent").attr("x",c[0][0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",c[1][0]-c[0][0])}function i(e){e.select(".extent").attr("y",c[0][1]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",c[1][1]-c[0][1])}function r(){function r(){var e=d3.event.changedTouches;return e?d3.touches(v,e)[0]:d3.mouse(v)}function u(){32==d3.event.keyCode&&(C||(g=null,_[0]-=c[1][0],_[1]-=c[1][1],C=2),k())}function h(){32==d3.event.keyCode&&2==C&&(_[0]+=c[1][0],_[1]+=c[1][1],C=0,k())}function f(){var e=r(),o=!1;m&&(e[0]+=m[0],e[1]+=m[1]),C||(d3.event.altKey?(g||(g=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2]),_[0]=c[+(e[0]<g[0])][0],_[1]=c[+(e[1]<g[1])][1]):g=null),w&&d(e,a,0)&&(n(A),o=!0),x&&d(e,l,1)&&(i(A),o=!0),o&&(t(A),E({type:"brush",mode:C?"move":"resize"}))}function d(e,t,n){var i,r,s=pt(t),a=s[0],l=s[1],u=_[n],h=c[1][n]-c[0][n];return C&&(a-=u,l-=h+u),i=Math.max(a,Math.min(l,e[n])),C?r=(i+=u)+h:(g&&(u=Math.max(a,Math.min(l,2*g[n]-i))),i>u?(r=i,i=u):r=u),c[0][n]!==i||c[1][n]!==r?(o=null,c[0][n]=i,c[1][n]=r,!0):void 0}function p(){f(),A.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),d3.select("body").style("cursor",null),F.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E({type:"brushend"}),k()}var g,m,v=this,y=d3.select(d3.event.target),E=s.of(v,arguments),A=d3.select(v),b=y.datum(),w=!/^(n|s)$/.test(b)&&a,x=!/^(e|w)$/.test(b)&&l,C=y.classed("extent"),_=r(),F=d3.select(window).on("mousemove.brush",f).on("mouseup.brush",p).on("touchmove.brush",f).on("touchend.brush",p).on("keydown.brush",u).on("keyup.brush",h);if(C)_[0]=c[0][0]-_[0],_[1]=c[0][1]-_[1];else if(b){var S=+/w$/.test(b),T=+/^n/.test(b);m=[c[1-S][0]-_[0],c[1-T][1]-_[1]],_[0]=c[S][0],_[1]=c[T][1]}else d3.event.altKey&&(g=_.slice());A.style("pointer-events","none").selectAll(".resize").style("display",null),d3.select("body").style("cursor",y.style("cursor")),E({type:"brushstart"}),f(),k()}var o,s=M(e,"brushstart","brush","brushend"),a=null,l=null,u=Mo[0],c=[[0,0],[0,0]];return e.x=function(t){return arguments.length?(a=t,u=Mo[!a<<1|!l],e):a},e.y=function(t){return arguments.length?(l=t,u=Mo[!a<<1|!l],e):l},e.extent=function(t){var n,i,r,s,u;return arguments.length?(o=[[0,0],[0,0]],a&&(n=t[0],i=t[1],l&&(n=n[0],i=i[0]),o[0][0]=n,o[1][0]=i,a.invert&&(n=a(n),i=a(i)),n>i&&(u=n,n=i,i=u),c[0][0]=0|n,c[1][0]=0|i),l&&(r=t[0],s=t[1],a&&(r=r[1],s=s[1]),o[0][1]=r,o[1][1]=s,l.invert&&(r=l(r),s=l(s)),r>s&&(u=r,r=s,s=u),c[0][1]=0|r,c[1][1]=0|s),e):(t=o||c,a&&(n=t[0][0],i=t[1][0],o||(n=c[0][0],i=c[1][0],a.invert&&(n=a.invert(n),i=a.invert(i)),n>i&&(u=n,n=i,i=u))),l&&(r=t[0][1],s=t[1][1],o||(r=c[0][1],s=c[1][1],l.invert&&(r=l.invert(r),s=l.invert(s)),r>s&&(u=r,r=s,s=u))),a&&l?[[n,r],[i,s]]:a?[n,i]:l&&[r,s])},e.clear=function(){return o=null,c[0][0]=c[0][1]=c[1][0]=c[1][1]=0,e},e.empty=function(){return a&&c[0][0]===c[1][0]||l&&c[0][1]===c[1][1]},d3.rebind(e,s,"on")};var Bo={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Mo=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];d3.behavior={},d3.behavior.drag=function(){function e(){this.on("mousedown.drag",t).on("touchstart.drag",t)}function t(){function e(){var e=a.parentNode,t=d3.event.changedTouches;return t?d3.touches(e,t)[0]:d3.mouse(e)}function t(){if(!a.parentNode)return r();var t=e(),n=t[0]-c[0],i=t[1]-c[1];h|=n|i,c=t,k(),l({type:"drag",x:t[0]+s[0],y:t[1]+s[1],dx:n,dy:i})}function r(){l({type:"dragend"}),h&&(k(),d3.event.target===u&&f.on("click.drag",o,!0)),f.on("mousemove.drag",null).on("touchmove.drag",null).on("mouseup.drag",null).on("touchend.drag",null)}function o(){k(),f.on("click.drag",null)}var s,a=this,l=n.of(a,arguments),u=d3.event.target,c=e(),h=0,f=d3.select(window).on("mousemove.drag",t).on("touchmove.drag",t).on("mouseup.drag",r,!0).on("touchend.drag",r,!0);i?(s=i.apply(a,arguments),s=[s.x-c[0],s.y-c[1]]):s=[0,0],k(),l({type:"dragstart"})}var n=M(e,"drag","dragstart","dragend"),i=null;return e.origin=function(t){return arguments.length?(i=t,e):i},d3.rebind(e,n,"on")},d3.behavior.zoom=function(){function e(){this.on("mousedown.zoom",s).on("mousewheel.zoom",a).on("mousemove.zoom",l).on("DOMMouseScroll.zoom",a).on("dblclick.zoom",u).on("touchstart.zoom",c).on("touchmove.zoom",h).on("touchend.zoom",c)}function t(e){return[(e[0]-E[0])/A,(e[1]-E[1])/A]}function n(e){return[e[0]*A+E[0],e[1]*A+E[1]]}function i(e){A=Math.max(b[0],Math.min(b[1],e))}function r(e,t){t=n(t),E[0]+=e[0]-t[0],E[1]+=e[1]-t[1]}function o(e){g&&g.domain(p.range().map(function(e){return(e-E[0])/A}).map(p.invert)),v&&v.domain(m.range().map(function(e){return(e-E[1])/A}).map(m.invert)),d3.event.preventDefault(),e({type:"zoom",scale:A,translate:E})}function s(){function e(){u=1,r(d3.mouse(s),h),o(a)}function n(){u&&k(),c.on("mousemove.zoom",null).on("mouseup.zoom",null),u&&d3.event.target===l&&c.on("click.zoom",i,!0)}function i(){k(),c.on("click.zoom",null)}var s=this,a=w.of(s,arguments),l=d3.event.target,u=0,c=d3.select(window).on("mousemove.zoom",e).on("mouseup.zoom",n),h=t(d3.mouse(s));window.focus(),k()}function a(){f||(f=t(d3.mouse(this))),i(Math.pow(2,.002*An())*A),r(d3.mouse(this),f),o(w.of(this,arguments))}function l(){f=null}function u(){var e=d3.mouse(this),n=t(e);i(d3.event.shiftKey?A/2:2*A),r(e,n),o(w.of(this,arguments))}function c(){var e=d3.touches(this),n=Date.now();if(d=A,f={},e.forEach(function(e){f[e.identifier]=t(e)}),k(),1===e.length){if(500>n-y){var s=e[0],a=t(e[0]);i(2*A),r(s,a),o(w.of(this,arguments))}y=n}}function h(){var e=d3.touches(this),t=e[0],n=f[t.identifier];if(s=e[1]){var s,a=f[s.identifier];t=[(t[0]+s[0])/2,(t[1]+s[1])/2],n=[(n[0]+a[0])/2,(n[1]+a[1])/2],i(d3.event.scale*d)}r(t,n),y=null,o(w.of(this,arguments))}var f,d,p,g,m,v,y,E=[0,0],A=1,b=Po,w=M(e,"zoom");return e.translate=function(t){return arguments.length?(E=t.map(Number),e):E},e.scale=function(t){return arguments.length?(A=+t,e):A},e.scaleExtent=function(t){return arguments.length?(b=null==t?Po:t.map(Number),e):b},e.x=function(t){return arguments.length?(g=t,p=t.copy(),e):g},e.y=function(t){return arguments.length?(v=t,m=t.copy(),e):v},d3.rebind(e,w,"on")};var Lo,Po=[0,1/0];d3.layout={},d3.layout.bundle=function(){return function(e){for(var t=[],n=-1,i=e.length;++n<i;)t.push(bn(e[n]));return t}},d3.layout.chord=function(){function e(){var e,u,h,f,d,p={},g=[],m=d3.range(o),v=[];for(n=[],i=[],e=0,f=-1;++f<o;){for(u=0,d=-1;++d<o;)u+=r[f][d];g.push(u),v.push(d3.range(o)),e+=u}for(s&&m.sort(function(e,t){return s(g[e],g[t])}),a&&v.forEach(function(e,t){e.sort(function(e,n){return a(r[t][e],r[t][n])})}),e=(2*Math.PI-c*o)/e,u=0,f=-1;++f<o;){for(h=u,d=-1;++d<o;){var y=m[f],E=v[y][d],A=r[y][E],b=u,w=u+=A*e;p[y+"-"+E]={index:y,subindex:E,startAngle:b,endAngle:w,value:A}}i[y]={index:y,startAngle:h,endAngle:u,value:(u-h)/e},u+=c}for(f=-1;++f<o;)for(d=f-1;++d<o;){var x=p[f+"-"+d],C=p[d+"-"+f];(x.value||C.value)&&n.push(x.value<C.value?{source:C,target:x}:{source:x,target:C})}l&&t()}function t(){n.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,i,r,o,s,a,l,u={},c=0;return u.matrix=function(e){return arguments.length?(o=(r=e)&&r.length,n=i=null,u):r},u.padding=function(e){return arguments.length?(c=e,n=i=null,u):c},u.sortGroups=function(e){return arguments.length?(s=e,n=i=null,u):s},u.sortSubgroups=function(e){return arguments.length?(a=e,n=null,u):a},u.sortChords=function(e){return arguments.length?(l=e,n&&t(),u):l},u.chords=function(){return n||e(),n},u.groups=function(){return i||e(),i},u},d3.layout.force=function(){function e(e){return function(t,n,i,r){if(t.point!==e){var o=t.cx-e.x,s=t.cy-e.y,a=1/Math.sqrt(o*o+s*s);if(v>(r-n)*a){var l=t.charge*a*a;return e.px-=o*l,e.py-=s*l,!0}if(t.point&&isFinite(a)){var l=t.pointCharge*a*a;e.px-=o*l,e.py-=s*l}}return!t.charge}}function t(e){Cn($o=e),Io=u}var n,i,o,s,l,u={},c=d3.dispatch("start","tick","end"),h=[1,1],f=.9,d=Dn,p=Rn,g=-30,m=.1,v=.8,y=[],E=[];return u.tick=function(){if((i*=.99)<.005)return c.end({type:"end",alpha:i=0}),!0;var t,n,r,a,u,d,p,v,A,b=y.length,w=E.length;for(n=0;w>n;++n)r=E[n],a=r.source,u=r.target,v=u.x-a.x,A=u.y-a.y,(d=v*v+A*A)&&(d=i*s[n]*((d=Math.sqrt(d))-o[n])/d,v*=d,A*=d,u.x-=v*(p=a.weight/(u.weight+a.weight)),u.y-=A*p,a.x+=v*(p=1-p),a.y+=A*p);if((p=i*m)&&(v=h[0]/2,A=h[1]/2,n=-1,p))for(;++n<b;)r=y[n],r.x+=(v-r.x)*p,r.y+=(A-r.y)*p;if(g)for(Tn(t=d3.geom.quadtree(y),i,l),n=-1;++n<b;)(r=y[n]).fixed||t.visit(e(r));for(n=-1;++n<b;)r=y[n],r.fixed?(r.x=r.px,r.y=r.py):(r.x-=(r.px-(r.px=r.x))*f,r.y-=(r.py-(r.py=r.y))*f);c.tick({type:"tick",alpha:i})},u.nodes=function(e){return arguments.length?(y=e,u):y},u.links=function(e){return arguments.length?(E=e,u):E},u.size=function(e){return arguments.length?(h=e,u):h},u.linkDistance=function(e){return arguments.length?(d=a(e),u):d},u.distance=u.linkDistance,u.linkStrength=function(e){return arguments.length?(p=a(e),u):p},u.friction=function(e){return arguments.length?(f=e,u):f},u.charge=function(e){return arguments.length?(g="function"==typeof e?e:+e,u):g},u.gravity=function(e){return arguments.length?(m=e,u):m},u.theta=function(e){return arguments.length?(v=e,u):v},u.alpha=function(e){return arguments.length?(i?i=e>0?e:0:e>0&&(c.start({type:"start",alpha:i=e}),d3.timer(u.tick)),u):i},u.start=function(){function e(e,i){for(var r,o=t(n),s=-1,a=o.length;++s<a;)if(!isNaN(r=o[s][e]))return r;return Math.random()*i}function t(){if(!r){for(r=[],i=0;c>i;++i)r[i]=[];for(i=0;f>i;++i){var e=E[i];r[e.source.index].push(e.target),r[e.target.index].push(e.source)}}return r[n]}var n,i,r,a,c=y.length,f=E.length,m=h[0],v=h[1];for(n=0;c>n;++n)(a=y[n]).index=n,a.weight=0;for(o=[],s=[],n=0;f>n;++n)a=E[n],"number"==typeof a.source&&(a.source=y[a.source]),"number"==typeof a.target&&(a.target=y[a.target]),o[n]=d.call(this,a,n),s[n]=p.call(this,a,n),++a.source.weight,++a.target.weight;for(n=0;c>n;++n)a=y[n],isNaN(a.x)&&(a.x=e("x",m)),isNaN(a.y)&&(a.y=e("y",v)),isNaN(a.px)&&(a.px=a.x),isNaN(a.py)&&(a.py=a.y);if(l=[],"function"==typeof g)for(n=0;c>n;++n)l[n]=+g.call(this,y[n],n);else for(n=0;c>n;++n)l[n]=g;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){n||(n=d3.behavior.drag().origin(r).on("dragstart",t).on("drag",Sn).on("dragend",Fn)),this.on("mouseover.force",Cn).on("mouseout.force",_n).call(n)},d3.rebind(u,c,"on")};var Io,$o;d3.layout.partition=function(){function e(t,n,i,r){var o=t.children;if(t.x=n,t.y=t.depth*r,t.dx=i,t.dy=r,o&&(s=o.length)){var s,a,l,u=-1;for(i=t.value?i/t.value:0;++u<s;)e(a=o[u],n,l=a.value*i,r),n+=l}}function t(e){var n=e.children,i=0;if(n&&(r=n.length))for(var r,o=-1;++o<r;)i=Math.max(i,t(n[o]));return 1+i}function n(n,o){var s=i.call(this,n,o);return e(s[0],0,r[0],r[1]/t(s[0])),s}var i=d3.layout.hierarchy(),r=[1,1];return n.size=function(e){return arguments.length?(r=e,n):r},zn(n,i)},d3.layout.pie=function(){function e(o){var s=o.map(function(n,i){return+t.call(e,n,i)}),a=+("function"==typeof i?i.apply(this,arguments):i),l=(("function"==typeof r?r.apply(this,arguments):r)-i)/d3.sum(s),u=d3.range(o.length);null!=n&&u.sort(n===No?function(e,t){return s[t]-s[e]}:function(e,t){return n(o[e],o[t])});var c=[];return u.forEach(function(e){var t;c[e]={data:o[e],value:t=s[e],startAngle:a,endAngle:a+=t*l}}),c}var t=Number,n=No,i=0,r=2*Math.PI;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(i=t,e):i},e.endAngle=function(t){return arguments.length?(r=t,e):r},e};var No={};d3.layout.stack=function(){function e(r,l){var u=r.map(function(n,i){return t.call(e,n,i)}),c=u.map(function(t){return t.map(function(t,n){return[s.call(e,t,n),a.call(e,t,n)]})}),h=n.call(e,c,l);u=d3.permute(u,h),c=d3.permute(c,h);var f,d,p,g=i.call(e,c,l),m=u.length,v=u[0].length;for(d=0;v>d;++d)for(o.call(e,u[0][d],p=g[d],c[0][d][1]),f=1;m>f;++f)o.call(e,u[f][d],p+=c[f-1][d][1],c[f][d][1]);return r}var t=r,n=Ln,i=Pn,o=Mn,s=kn,a=Bn;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:Oo.get(t)||Ln,e):n},e.offset=function(t){return arguments.length?(i="function"==typeof t?t:Ho.get(t)||Pn,e):i},e.x=function(t){return arguments.length?(s=t,e):s},e.y=function(t){return arguments.length?(a=t,e):a},e.out=function(t){return arguments.length?(o=t,e):o},e};var Oo=d3.map({"inside-out":function(e){var t,n,i=e.length,r=e.map(In),o=e.map($n),s=d3.range(i).sort(function(e,t){return r[e]-r[t]}),a=0,l=0,u=[],c=[];for(t=0;i>t;++t)n=s[t],l>a?(a+=o[n],u.push(n)):(l+=o[n],c.push(n));return c.reverse().concat(u)},reverse:function(e){return d3.range(e.length).reverse()},"default":Ln}),Ho=d3.map({silhouette:function(e){var t,n,i,r=e.length,o=e[0].length,s=[],a=0,l=[];for(n=0;o>n;++n){for(t=0,i=0;r>t;t++)i+=e[t][n][1];i>a&&(a=i),s.push(i)}for(n=0;o>n;++n)l[n]=(a-s[n])/2;return l},wiggle:function(e){var t,n,i,r,o,s,a,l,u,c=e.length,h=e[0],f=h.length,d=[];for(d[0]=l=u=0,n=1;f>n;++n){for(t=0,r=0;c>t;++t)r+=e[t][n][1];for(t=0,o=0,a=h[n][0]-h[n-1][0];c>t;++t){for(i=0,s=(e[t][n][1]-e[t][n-1][1])/(2*a);t>i;++i)s+=(e[i][n][1]-e[i][n-1][1])/a;o+=s*e[t][n][1]}d[n]=l-=r?o/r*a:0,u>l&&(u=l)}for(n=0;f>n;++n)d[n]-=u;return d},expand:function(e){var t,n,i,r=e.length,o=e[0].length,s=1/r,a=[];for(n=0;o>n;++n){for(t=0,i=0;r>t;t++)i+=e[t][n][1];if(i)for(t=0;r>t;t++)e[t][n][1]/=i;else for(t=0;r>t;t++)e[t][n][1]=s}for(n=0;o>n;++n)a[n]=0;return a},zero:Pn});d3.layout.histogram=function(){function e(e,o){for(var s,a,l=[],u=e.map(n,this),c=i.call(this,u,o),h=r.call(this,c,u,o),o=-1,f=u.length,d=h.length-1,p=t?1:1/f;++o<d;)s=l[o]=[],s.dx=h[o+1]-(s.x=h[o]),s.y=0;if(d>0)for(o=-1;++o<f;)a=u[o],a>=c[0]&&a<=c[1]&&(s=l[d3.bisect(h,a,1,d)-1],s.y+=p,s.push(e[o]));return l}var t=!0,n=Number,i=jn,r=On;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(i=a(t),e):i},e.bins=function(t){return arguments.length?(r="number"==typeof t?function(e){return Hn(e,t)}:a(t),e):r},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},d3.layout.hierarchy=function(){function e(t,s,a){var l=r.call(n,t,s),u=jo?t:{data:t};if(u.depth=s,a.push(u),l&&(c=l.length)){for(var c,h,f=-1,d=u.children=[],p=0,g=s+1;++f<c;)h=e(l[f],g,a),h.parent=u,d.push(h),p+=h.value;i&&d.sort(i),o&&(u.value=p)}else o&&(u.value=+o.call(n,t,s)||0);return u}function t(e,i){var r=e.children,s=0;if(r&&(a=r.length))for(var a,l=-1,u=i+1;++l<a;)s+=t(r[l],u);else o&&(s=+o.call(n,jo?e:e.data,i)||0);return o&&(e.value=s),s}function n(t){var n=[];return e(t,0,n),n}var i=Gn,r=Un,o=Wn;return n.sort=function(e){return arguments.length?(i=e,n):i},n.children=function(e){return arguments.length?(r=e,n):r},n.value=function(e){return arguments.length?(o=e,n):o},n.revalue=function(e){return t(e,0),e},n};var jo=!1;d3.layout.pack=function(){function e(e,i){var r=t.call(this,e,i),o=r[0];o.x=0,o.y=0,ei(o);var s=n[0],a=n[1],l=1/Math.max(2*o.r/s,2*o.r/a);return ti(o,s/2,a/2,l),r}var t=d3.layout.hierarchy().sort(Yn),n=[1,1];return e.size=function(t){return arguments.length?(n=t,e):n},zn(e,t)},d3.layout.cluster=function(){function e(e,r){var o,s=t.call(this,e,r),a=s[0],l=0;pi(a,function(e){var t=e.children;t&&t.length?(e.x=ri(t),e.y=ii(t)):(e.x=o?l+=n(e,o):0,e.y=0,o=e)});var u=oi(a),c=si(a),h=u.x-n(u,c)/2,f=c.x+n(c,u)/2;return pi(a,function(e){e.x=(e.x-h)/(f-h)*i[0],e.y=(1-(a.y?e.y/a.y:1))*i[1]}),s}var t=d3.layout.hierarchy().sort(null).value(null),n=ai,i=[1,1];return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=t,e):i},zn(e,t)},d3.layout.tree=function(){function e(e,r){function o(e,t){var i=e.children,r=e._tree;if(i&&(s=i.length)){for(var s,l,u,c=i[0],h=c,f=-1;++f<s;)u=i[f],o(u,l),h=a(u,l,h),l=u;gi(e);var d=.5*(c._tree.prelim+u._tree.prelim);t?(r.prelim=t._tree.prelim+n(e,t),r.mod=r.prelim-d):r.prelim=d}else t&&(r.prelim=t._tree.prelim+n(e,t))}function s(e,t){e.x=e._tree.prelim+t;var n=e.children;if(n&&(i=n.length)){var i,r=-1;for(t+=e._tree.mod;++r<i;)s(n[r],t)}}function a(e,t,i){if(t){for(var r,o=e,s=e,a=t,l=e.parent.children[0],u=o._tree.mod,c=s._tree.mod,h=a._tree.mod,f=l._tree.mod;a=ui(a),o=li(o),a&&o;)l=li(l),s=ui(s),s._tree.ancestor=e,r=a._tree.prelim+h-o._tree.prelim-u+n(a,o),r>0&&(mi(vi(a,e,i),e,r),u+=r,c+=r),h+=a._tree.mod,u+=o._tree.mod,f+=l._tree.mod,c+=s._tree.mod;a&&!ui(s)&&(s._tree.thread=a,s._tree.mod+=h-c),o&&!li(l)&&(l._tree.thread=o,l._tree.mod+=u-f,i=e)}return i}var l=t.call(this,e,r),u=l[0];pi(u,function(e,t){e._tree={ancestor:e,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.number+1:0}}),o(u),s(u,-u._tree.prelim);var c=ci(u,fi),h=ci(u,hi),f=ci(u,di),d=c.x-n(c,h)/2,p=h.x+n(h,c)/2,g=f.depth||1;return pi(u,function(e){e.x=(e.x-d)/(p-d)*i[0],e.y=e.depth/g*i[1],delete e._tree}),l}var t=d3.layout.hierarchy().sort(null).value(null),n=ai,i=[1,1];return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=t,e):i},zn(e,t)},d3.layout.treemap=function(){function e(e,t){for(var n,i,r=-1,o=e.length;++r<o;)i=(n=e[r]).value*(0>t?0:t),n.area=isNaN(i)||0>=i?0:i}function t(n){var o=n.children;if(o&&o.length){var s,a,l,u=h(n),c=[],f=o.slice(),d=1/0,p=Math.min(u.dx,u.dy);for(e(f,u.dx*u.dy/n.value),c.area=0;(l=f.length)>0;)c.push(s=f[l-1]),c.area+=s.area,(a=i(c,p))<=d?(f.pop(),d=a):(c.area-=c.pop().area,r(c,p,u,!1),p=Math.min(u.dx,u.dy),c.length=c.area=0,d=1/0);c.length&&(r(c,p,u,!0),c.length=c.area=0),o.forEach(t)}}function n(t){var i=t.children;if(i&&i.length){var o,s=h(t),a=i.slice(),l=[];for(e(a,s.dx*s.dy/t.value),l.area=0;o=a.pop();)l.push(o),l.area+=o.area,null!=o.z&&(r(l,o.z?s.dx:s.dy,s,!a.length),l.length=l.area=0);i.forEach(n)}}function i(e,t){for(var n,i=e.area,r=0,o=1/0,s=-1,a=e.length;++s<a;)(n=e[s].area)&&(o>n&&(o=n),n>r&&(r=n));return i*=i,t*=t,i?Math.max(t*r*d/i,i/(t*o*d)):1/0}function r(e,t,n,i){var r,o=-1,s=e.length,a=n.x,u=n.y,c=t?l(e.area/t):0;if(t==n.dx){for((i||c>n.dy)&&(c=n.dy);++o<s;)r=e[o],r.x=a,r.y=u,r.dy=c,a+=r.dx=Math.min(n.x+n.dx-a,c?l(r.area/c):0);r.z=!0,r.dx+=n.x+n.dx-a,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);++o<s;)r=e[o],r.x=a,r.y=u,r.dx=c,u+=r.dy=Math.min(n.y+n.dy-u,c?l(r.area/c):0);r.z=!1,r.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function o(i){var r=s||a(i),o=r[0];return o.x=0,o.y=0,o.dx=u[0],o.dy=u[1],s&&a.revalue(o),e([o],o.dx*o.dy/o.value),(s?n:t)(o),f&&(s=r),r}var s,a=d3.layout.hierarchy(),l=Math.round,u=[1,1],c=null,h=yi,f=!1,d=.5*(1+Math.sqrt(5));return o.size=function(e){return arguments.length?(u=e,o):u},o.padding=function(e){function t(t){var n=e.call(o,t,t.depth);return null==n?yi(t):Ei(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Ei(t,e)}if(!arguments.length)return c;var i;return h=null==(c=e)?yi:"function"==(i=typeof e)?t:"number"===i?(e=[e,e,e,e],n):n,o},o.round=function(e){return arguments.length?(l=e?Math.round:Number,o):l!=Number},o.sticky=function(e){return arguments.length?(f=e,s=null,o):f},o.ratio=function(e){return arguments.length?(d=e,o):d},zn(o,a)},d3.csv=function(e,t){d3.text(e,"text/csv",function(e){t(e&&d3.csv.parse(e))})},d3.csv.parse=function(e){var t;return d3.csv.parseRows(e,function(e,n){if(n){for(var i={},r=-1,o=t.length;++r<o;)i[t[r]]=e[r];return i}return t=e,null})},d3.csv.parseRows=function(e,t){function n(){if(l.lastIndex>=e.length)return s;if(r)return r=!1,o;var t=l.lastIndex;if(34===e.charCodeAt(t)){for(var n=t;n++<e.length;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;n++}l.lastIndex=n+2;var i=e.charCodeAt(n+1);return 13===i?(r=!0,10===e.charCodeAt(n+2)&&l.lastIndex++):10===i&&(r=!0),e.substring(t+1,n).replace(/""/g,'"')}var a=l.exec(e);return a?(r=44!==a[0].charCodeAt(0),e.substring(t,a.index)):(l.lastIndex=e.length,e.substring(t))}var i,r,o={},s={},a=[],l=/\r\n|[,\r\n]/g,u=0;for(l.lastIndex=0;(i=n())!==s;){for(var c=[];i!==o&&i!==s;)c.push(i),i=n();(!t||(c=t(c,u++)))&&a.push(c)}return a},d3.csv.format=function(e){return e.map(Ai).join("\n")},d3.geo={};var zo=Math.PI/180;d3.geo.azimuthal=function(){function e(e){var t,i=e[0]*zo-n,u=e[1]*zo,c=Math.cos(i),h=Math.sin(i),f=Math.cos(u),d=Math.sin(u),p="orthographic"!==s?o*d+r*f*c:null,g="stereographic"===s?1/(1+p):"gnomonic"===s?1/p:"equidistant"===s?(t=Math.acos(p),t?t/Math.sin(t):0):"equalarea"===s?Math.sqrt(2/(1+p)):1,m=g*f*h,v=g*(o*f*c-r*d);return[a*m+l[0],a*v+l[1]]}var t,n,i,r,o,s="orthographic",a=200,l=[480,250];return e.invert=function(e){var t=(e[0]-l[0])/a,i=(e[1]-l[1])/a,u=Math.sqrt(t*t+i*i),c="stereographic"===s?2*Math.atan(u):"gnomonic"===s?Math.atan(u):"equidistant"===s?u:"equalarea"===s?2*Math.asin(.5*u):Math.asin(u),h=Math.sin(c),f=Math.cos(c);return[(n+Math.atan2(t*h,u*r*f+i*o*h))/zo,Math.asin(f*o-(u?i*h*r/u:0))/zo]},e.mode=function(t){return arguments.length?(s=t+"",e):s},e.origin=function(s){return arguments.length?(t=s,n=t[0]*zo,i=t[1]*zo,r=Math.cos(i),o=Math.sin(i),e):t},e.scale=function(t){return arguments.length?(a=+t,e):a},e.translate=function(t){return arguments.length?(l=[+t[0],+t[1]],e):l},e.origin([0,0])},d3.geo.albers=function(){function e(e){var t=i*(zo*e[0]-n),s=Math.sqrt(r-2*i*Math.sin(zo*e[1]))/i;return[l*s*Math.sin(t)+u[0],l*(s*Math.cos(t)-o)+u[1]]}function t(){var t=zo*a[0],l=zo*a[1],u=zo*s[1],c=Math.sin(t),h=Math.cos(t);return n=zo*s[0],i=.5*(c+Math.sin(l)),r=h*h+2*i*c,o=Math.sqrt(r-2*i*Math.sin(u))/i,e}var n,i,r,o,s=[-98,38],a=[29.5,45.5],l=1e3,u=[480,250];return e.invert=function(e){var t=(e[0]-u[0])/l,s=(e[1]-u[1])/l,a=o+s,c=Math.atan2(t,a),h=Math.sqrt(t*t+a*a);return[(n+c/i)/zo,Math.asin((r-h*h*i*i)/(2*i))/zo]},e.origin=function(e){return arguments.length?(s=[+e[0],+e[1]],t()):s},e.parallels=function(e){return arguments.length?(a=[+e[0],+e[1]],t()):a},e.scale=function(t){return arguments.length?(l=+t,e):l},e.translate=function(t){return arguments.length?(u=[+t[0],+t[1]],e):u},t()},d3.geo.albersUsa=function(){function e(e){var o=e[0],s=e[1];return(s>50?n:-140>o?i:21>s?r:t)(e)}var t=d3.geo.albers(),n=d3.geo.albers().origin([-160,60]).parallels([55,65]),i=d3.geo.albers().origin([-160,20]).parallels([8,18]),r=d3.geo.albers().origin([-60,10]).parallels([8,18]);return e.scale=function(o){return arguments.length?(t.scale(o),n.scale(.6*o),i.scale(o),r.scale(1.5*o),e.translate(t.translate())):t.scale()},e.translate=function(o){if(!arguments.length)return t.translate();var s=t.scale()/1e3,a=o[0],l=o[1];return t.translate(o),n.translate([a-400*s,l+170*s]),i.translate([a-190*s,l+200*s]),r.translate([a+580*s,l+430*s]),e},e.scale(t.scale())},d3.geo.bonne=function(){function e(e){var a=e[0]*zo-t,l=e[1]*zo-n;if(i){var u=r+i-l,c=a*Math.cos(l)/u;a=u*Math.sin(c),l=u*Math.cos(c)-r}else a*=Math.cos(l),l*=-1;return[o*a+s[0],o*l+s[1]]}var t,n,i,r,o=200,s=[480,250];return e.invert=function(e){var n=(e[0]-s[0])/o,a=(e[1]-s[1])/o;if(i){var l=r+a,u=Math.sqrt(n*n+l*l);a=r+i-u,n=t+u*Math.atan2(n,l)/Math.cos(a)}else a*=-1,n/=Math.cos(a);return[n/zo,a/zo]},e.parallel=function(t){return arguments.length?(r=1/Math.tan(i=t*zo),e):i/zo},e.origin=function(i){return arguments.length?(t=i[0]*zo,n=i[1]*zo,e):[t/zo,n/zo]},e.scale=function(t){return arguments.length?(o=+t,e):o},e.translate=function(t){return arguments.length?(s=[+t[0],+t[1]],e):s},e.origin([0,0]).parallel(45)},d3.geo.equirectangular=function(){function e(e){var i=e[0]/360,r=-e[1]/360;return[t*i+n[0],t*r+n[1]]}var t=500,n=[480,250];return e.invert=function(e){var i=(e[0]-n[0])/t,r=(e[1]-n[1])/t;return[360*i,-360*r]},e.scale=function(n){return arguments.length?(t=+n,e):t},e.translate=function(t){return arguments.length?(n=[+t[0],+t[1]],e):n},e},d3.geo.mercator=function(){function e(e){var i=e[0]/360,r=-(Math.log(Math.tan(Math.PI/4+e[1]*zo/2))/zo)/360;return[t*i+n[0],t*Math.max(-.5,Math.min(.5,r))+n[1]]}var t=500,n=[480,250];return e.invert=function(e){var i=(e[0]-n[0])/t,r=(e[1]-n[1])/t;return[360*i,2*Math.atan(Math.exp(-360*r*zo))/zo-90]},e.scale=function(n){return arguments.length?(t=+n,e):t},e.translate=function(t){return arguments.length?(n=[+t[0],+t[1]],e):n},e},d3.geo.path=function(){function e(e){"function"==typeof o&&(s=xi(o.apply(this,arguments))),u(e);var t=l.length?l.join(""):null;return l=[],t}function t(e){return a(e).join(",")}function n(e){for(var t=r(e[0]),n=0,i=e.length;++n<i;)t-=r(e[n]);return t}function i(e){for(var t=d3.geom.polygon(e[0].map(a)),n=t.area(),i=t.centroid(0>n?(n*=-1,1):-1),r=i[0],o=i[1],s=n,l=0,u=e.length;++l<u;)t=d3.geom.polygon(e[l].map(a)),n=t.area(),i=t.centroid(0>n?(n*=-1,1):-1),r-=i[0],o-=i[1],s-=n;return[r,o,6*s]}function r(e){return Math.abs(d3.geom.polygon(e.map(a)).area())}var o=4.5,s=xi(o),a=d3.geo.albersUsa(),l=[],u=wi({FeatureCollection:function(e){for(var t=e.features,n=-1,i=t.length;++n<i;)l.push(u(t[n].geometry))},Feature:function(e){u(e.geometry)},Point:function(e){l.push("M",t(e.coordinates),s)},MultiPoint:function(e){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)l.push("M",t(n[i]),s)},LineString:function(e){var n=e.coordinates,i=-1,r=n.length;for(l.push("M");++i<r;)l.push(t(n[i]),"L");l.pop()},MultiLineString:function(e){for(var n,i,r,o=e.coordinates,s=-1,a=o.length;++s<a;){for(n=o[s],i=-1,r=n.length,l.push("M");++i<r;)l.push(t(n[i]),"L");l.pop()}},Polygon:function(e){for(var n,i,r,o=e.coordinates,s=-1,a=o.length;++s<a;)if(n=o[s],i=-1,(r=n.length-1)>0){for(l.push("M");++i<r;)l.push(t(n[i]),"L");l[l.length-1]="Z"}},MultiPolygon:function(e){for(var n,i,r,o,s,a,u=e.coordinates,c=-1,h=u.length;++c<h;)for(n=u[c],i=-1,r=n.length;++i<r;)if(o=n[i],s=-1,(a=o.length-1)>0){for(l.push("M");++s<a;)l.push(t(o[s]),"L");l[l.length-1]="Z"}},GeometryCollection:function(e){for(var t=e.geometries,n=-1,i=t.length;++n<i;)l.push(u(t[n]))}}),c=e.area=wi({FeatureCollection:function(e){for(var t=0,n=e.features,i=-1,r=n.length;++i<r;)t+=c(n[i]);return t},Feature:function(e){return c(e.geometry)},Polygon:function(e){return n(e.coordinates)},MultiPolygon:function(e){for(var t=0,i=e.coordinates,r=-1,o=i.length;++r<o;)t+=n(i[r]);return t},GeometryCollection:function(e){for(var t=0,n=e.geometries,i=-1,r=n.length;++i<r;)t+=c(n[i]);return t}},0),h=e.centroid=wi({Feature:function(e){return h(e.geometry)},Polygon:function(e){var t=i(e.coordinates);return[t[0]/t[2],t[1]/t[2]]},MultiPolygon:function(e){for(var t,n=e.coordinates,r=0,o=0,s=0,a=-1,l=n.length;++a<l;)t=i(n[a]),r+=t[0],o+=t[1],s+=t[2];return[r/s,o/s]}});return e.projection=function(t){return a=t,e},e.pointRadius=function(t){return"function"==typeof t?o=t:(o=+t,s=xi(o)),e},e},d3.geo.bounds=function(e){var t=1/0,n=1/0,i=-1/0,r=-1/0;return Ci(e,function(e,o){t>e&&(t=e),e>i&&(i=e),n>o&&(n=o),o>r&&(r=o)}),[[t,n],[i,r]]};var Uo={Feature:_i,FeatureCollection:Fi,GeometryCollection:Si,LineString:Ti,MultiLineString:Di,MultiPoint:Ti,MultiPolygon:Ri,Point:ki,Polygon:Bi};d3.geo.circle=function(){function e(){}function t(e){return l.distance(e)<a}function n(e){for(var t,n,r,o,s,u=-1,c=e.length,h=[];++u<c;)s=l.distance(r=e[u]),a>s?(n&&h.push(Ii(n,r)((o-a)/(o-s))),h.push(r),t=n=null):(n=r,!t&&h.length&&(h.push(Ii(h[h.length-1],n)((a-o)/(s-o))),t=n)),o=s;return t=e[0],n=h[0],n&&r[0]===t[0]&&r[1]===t[1]&&(r[0]!==n[0]||r[1]!==n[1])&&h.push(n),i(h)}function i(e){for(var t,n,i,r=0,o=e.length,s=o?[e[0]]:e,a=l.source();++r<o;)for(i=l.source(e[r-1])(e[r]).coordinates,t=0,n=i.length;++t<n;)s.push(i[t]);return l.source(a),s}var o=[0,0],s=89.99,a=s*zo,l=d3.geo.greatArc().source(o).target(r);e.clip=function(e){return"function"==typeof o&&l.source(o.apply(this,arguments)),u(e)||null};var u=wi({FeatureCollection:function(e){var t=e.features.map(u).filter(r);return t&&(e=Object.create(e),e.features=t,e)},Feature:function(e){var t=u(e.geometry);return t&&(e=Object.create(e),e.geometry=t,e)},Point:function(e){return t(e.coordinates)&&e},MultiPoint:function(e){var n=e.coordinates.filter(t);return n.length&&{type:e.type,coordinates:n}},LineString:function(e){var t=n(e.coordinates);return t.length&&(e=Object.create(e),e.coordinates=t,e)},MultiLineString:function(e){var t=e.coordinates.map(n).filter(function(e){return e.length});return t.length&&(e=Object.create(e),e.coordinates=t,e)},Polygon:function(e){var t=e.coordinates.map(n);return t[0].length&&(e=Object.create(e),e.coordinates=t,e)},MultiPolygon:function(e){var t=e.coordinates.map(function(e){return e.map(n)}).filter(function(e){return e[0].length});return t.length&&(e=Object.create(e),e.coordinates=t,e)},GeometryCollection:function(e){var t=e.geometries.map(u).filter(r);return t.length&&(e=Object.create(e),e.geometries=t,e)}});return e.origin=function(t){return arguments.length?(o=t,"function"!=typeof o&&l.source(o),e):o},e.angle=function(t){return arguments.length?(a=(s=+t)*zo,e):s},d3.rebind(e,l,"precision")},d3.geo.greatArc=function(){function e(){for(var i=e.distance.apply(this,arguments),r=0,a=o/i,l=[t];(r+=a)<1;)l.push(s(r));return l.push(n),{type:"LineString",coordinates:l}}var t,n,i=Mi,r=Li,o=6*zo,s=Pi();return e.distance=function(){return"function"==typeof i&&s.source(t=i.apply(this,arguments)),"function"==typeof r&&s.target(n=r.apply(this,arguments)),s.distance()},e.source=function(n){return arguments.length?(i=n,"function"!=typeof i&&s.source(t=i),e):i},e.target=function(t){return arguments.length?(r=t,"function"!=typeof r&&s.target(n=r),e):r},e.precision=function(t){return arguments.length?(o=t*zo,e):o/zo},e},d3.geo.greatCircle=d3.geo.circle,d3.geom={},d3.geom.contour=function(e,t){var n=t||$i(e),i=[],r=n[0],o=n[1],s=0,a=0,l=0/0,u=0/0,c=0;do c=0,e(r-1,o-1)&&(c+=1),e(r,o-1)&&(c+=2),e(r-1,o)&&(c+=4),e(r,o)&&(c+=8),6===c?(s=-1===u?-1:1,a=0):9===c?(s=0,a=1===l?-1:1):(s=Wo[c],a=Go[c]),s!=l&&a!=u&&(i.push([r,o]),l=s,u=a),r+=s,o+=a;while(n[0]!=r||n[1]!=o);return i};var Wo=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1,0/0],Go=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0,0/0];d3.geom.hull=function(e){if(e.length<3)return[];var t,n,i,r,o,s,a,l,u,c,h=e.length,f=h-1,d=[],p=[],g=0;for(t=1;h>t;++t)e[t][1]<e[g][1]?g=t:e[t][1]==e[g][1]&&(g=e[t][0]<e[g][0]?t:g);for(t=0;h>t;++t)t!==g&&(r=e[t][1]-e[g][1],i=e[t][0]-e[g][0],d.push({angle:Math.atan2(r,i),index:t}));
for(d.sort(function(e,t){return e.angle-t.angle}),u=d[0].angle,l=d[0].index,a=0,t=1;f>t;++t)n=d[t].index,u==d[t].angle?(i=e[l][0]-e[g][0],r=e[l][1]-e[g][1],o=e[n][0]-e[g][0],s=e[n][1]-e[g][1],i*i+r*r>=o*o+s*s?d[t].index=-1:(d[a].index=-1,u=d[t].angle,a=t,l=n)):(u=d[t].angle,a=t,l=n);for(p.push(g),t=0,n=0;2>t;++n)-1!==d[n].index&&(p.push(d[n].index),t++);for(c=p.length;f>n;++n)if(-1!==d[n].index){for(;!Ni(p[c-2],p[c-1],d[n].index,e);)--c;p[c++]=d[n].index}var m=[];for(t=0;c>t;++t)m.push(e[p[t]]);return m},d3.geom.polygon=function(e){return e.area=function(){for(var t=0,n=e.length,i=e[n-1][0]*e[0][1],r=e[n-1][1]*e[0][0];++t<n;)i+=e[t-1][0]*e[t][1],r+=e[t-1][1]*e[t][0];return.5*(r-i)},e.centroid=function(t){var n,i,r=-1,o=e.length,s=0,a=0,l=e[o-1];for(arguments.length||(t=-1/(6*e.area()));++r<o;)n=l,l=e[r],i=n[0]*l[1]-l[0]*n[1],s+=(n[0]+l[0])*i,a+=(n[1]+l[1])*i;return[s*t,a*t]},e.clip=function(t){for(var n,i,r,o,s,a,l=-1,u=e.length,c=e[u-1];++l<u;){for(n=t.slice(),t.length=0,o=e[l],s=n[(r=n.length)-1],i=-1;++i<r;)a=n[i],Oi(a,c,o)?(Oi(s,c,o)||t.push(Hi(s,a,c,o)),t.push(a)):Oi(s,c,o)&&t.push(Hi(s,a,c,o)),s=a;c=o}return t},e},d3.geom.voronoi=function(e){var t=e.map(function(){return[]});return ji(e,function(e){var n,i,r,o,s,a;1===e.a&&e.b>=0?(n=e.ep.r,i=e.ep.l):(n=e.ep.l,i=e.ep.r),1===e.a?(s=n?n.y:-1e6,r=e.c-e.b*s,a=i?i.y:1e6,o=e.c-e.b*a):(r=n?n.x:-1e6,s=e.c-e.a*r,o=i?i.x:1e6,a=e.c-e.a*o);var l=[r,s],u=[o,a];t[e.region.l.index].push(l,u),t[e.region.r.index].push(l,u)}),t.map(function(t,n){var i=e[n][0],r=e[n][1];return t.forEach(function(e){e.angle=Math.atan2(e[0]-i,e[1]-r)}),t.sort(function(e,t){return e.angle-t.angle}).filter(function(e,n){return!n||e.angle-t[n-1].angle>1e-10})})};var Vo={l:"r",r:"l"};d3.geom.delaunay=function(e){var t=e.map(function(){return[]}),n=[];return ji(e,function(n){t[n.region.l.index].push(e[n.region.r.index])}),t.forEach(function(t,i){var r=e[i],o=r[0],s=r[1];t.forEach(function(e){e.angle=Math.atan2(e[0]-o,e[1]-s)}),t.sort(function(e,t){return e.angle-t.angle});for(var a=0,l=t.length-1;l>a;a++)n.push([r,t[a],t[a+1]])}),n},d3.geom.quadtree=function(e,t,n,i,r){function o(e,t,n,i,r,o){if(!isNaN(t.x)&&!isNaN(t.y))if(e.leaf){var a=e.point;a?Math.abs(a.x-t.x)+Math.abs(a.y-t.y)<.01?s(e,t,n,i,r,o):(e.point=null,s(e,a,n,i,r,o),s(e,t,n,i,r,o)):e.point=t}else s(e,t,n,i,r,o)}function s(e,t,n,i,r,s){var a=.5*(n+r),l=.5*(i+s),u=t.x>=a,c=t.y>=l,h=(c<<1)+u;e.leaf=!1,e=e.nodes[h]||(e.nodes[h]=zi()),u?n=a:r=a,c?i=l:s=l,o(e,t,n,i,r,s)}var a,l=-1,u=e.length;if(u&&isNaN(e[0].x)&&(e=e.map(Wi)),arguments.length<5)if(3===arguments.length)r=i=n,n=t;else{for(t=n=1/0,i=r=-1/0;++l<u;)a=e[l],a.x<t&&(t=a.x),a.y<n&&(n=a.y),a.x>i&&(i=a.x),a.y>r&&(r=a.y);var c=i-t,h=r-n;c>h?r=n+c:i=t+h}var f=zi();return f.add=function(e){o(f,e,t,n,i,r)},f.visit=function(e){Ui(e,f,t,n,i,r)},e.forEach(f.add),f},d3.time={};var Yo=Date;Gi.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){qo.setUTCDate.apply(this._,arguments)},setDay:function(){qo.setUTCDay.apply(this._,arguments)},setFullYear:function(){qo.setUTCFullYear.apply(this._,arguments)},setHours:function(){qo.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){qo.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){qo.setUTCMinutes.apply(this._,arguments)},setMonth:function(){qo.setUTCMonth.apply(this._,arguments)},setSeconds:function(){qo.setUTCSeconds.apply(this._,arguments)},setTime:function(){qo.setTime.apply(this._,arguments)}};var qo=Date.prototype;d3.time.format=function(e){function t(t){for(var i,r,o=[],s=-1,a=0;++s<n;)37==e.charCodeAt(s)&&(o.push(e.substring(a,s),(r=Qo[i=e.charAt(++s)])?r(t):i),a=s+1);return o.push(e.substring(a,s)),o.join("")}var n=e.length;return t.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},i=Vi(n,e,t,0);if(i!=t.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=new Yo;return r.setFullYear(n.y,n.m,n.d),r.setHours(n.H,n.M,n.S,n.L),r},t.toString=function(){return e},t};var Xo=d3.format("02d"),Jo=d3.format("03d"),Ko=d3.format("04d"),Zo=d3.format("2d"),Qo={a:function(e){return is[e.getDay()].substring(0,3)},A:function(e){return is[e.getDay()]},b:function(e){return as[e.getMonth()].substring(0,3)},B:function(e){return as[e.getMonth()]},c:d3.time.format("%a %b %e %H:%M:%S %Y"),d:function(e){return Xo(e.getDate())},e:function(e){return Zo(e.getDate())},H:function(e){return Xo(e.getHours())},I:function(e){return Xo(e.getHours()%12||12)},j:function(e){return Jo(1+d3.time.dayOfYear(e))},L:function(e){return Jo(e.getMilliseconds())},m:function(e){return Xo(e.getMonth()+1)},M:function(e){return Xo(e.getMinutes())},p:function(e){return e.getHours()>=12?"PM":"AM"},S:function(e){return Xo(e.getSeconds())},U:function(e){return Xo(d3.time.sundayOfYear(e))},w:function(e){return e.getDay()},W:function(e){return Xo(d3.time.mondayOfYear(e))},x:d3.time.format("%m/%d/%y"),X:d3.time.format("%H:%M:%S"),y:function(e){return Xo(e.getFullYear()%100)},Y:function(e){return Ko(e.getFullYear()%1e4)},Z:cr,"%":function(){return"%"}},es={a:Yi,A:qi,b:Xi,B:Ji,c:Ki,d:rr,e:rr,H:or,I:or,L:lr,m:ir,M:sr,p:ur,S:ar,x:Zi,X:Qi,y:tr,Y:er},ts=/^(?:sun|mon|tue|wed|thu|fri|sat)/i,ns=/^(?:Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)/i,is=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],rs=d3.map({jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11}),os=/^(?:January|February|March|April|May|June|July|August|September|October|November|December)/gi,ss=d3.map({january:0,february:1,march:2,april:3,may:4,june:5,july:6,august:7,september:8,october:9,november:10,december:11}),as=["January","February","March","April","May","June","July","August","September","October","November","December"],ls=/\s*\d+/,us=d3.map({am:0,pm:1});d3.time.format.utc=function(e){function t(e){try{Yo=Gi;var t=new Yo;return t._=e,n(t)}finally{Yo=Date}}var n=d3.time.format(e);return t.parse=function(e){try{Yo=Gi;var t=n.parse(e);return t&&t._}finally{Yo=Date}},t.toString=n.toString,t};var cs=d3.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");d3.time.format.iso=Date.prototype.toISOString?hr:cs,hr.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},hr.toString=cs.toString,d3.time.second=fr(function(e){return new Yo(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),d3.time.seconds=d3.time.second.range,d3.time.seconds.utc=d3.time.second.utc.range,d3.time.minute=fr(function(e){return new Yo(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),d3.time.minutes=d3.time.minute.range,d3.time.minutes.utc=d3.time.minute.utc.range,d3.time.hour=fr(function(e){var t=e.getTimezoneOffset()/60;return new Yo(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),d3.time.hours=d3.time.hour.range,d3.time.hours.utc=d3.time.hour.utc.range,d3.time.day=fr(function(e){var t=new Yo(0,e.getMonth(),e.getDate());return t.setFullYear(e.getFullYear()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),d3.time.days=d3.time.day.range,d3.time.days.utc=d3.time.day.utc.range,d3.time.dayOfYear=function(e){var t=d3.time.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},is.forEach(function(e,t){e=e.toLowerCase(),t=7-t;var n=d3.time[e]=fr(function(e){return(e=d3.time.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=d3.time.year(e).getDay();return Math.floor((d3.time.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});d3.time[e+"s"]=n.range,d3.time[e+"s"].utc=n.utc.range,d3.time[e+"OfYear"]=function(e){var n=d3.time.year(e).getDay();return Math.floor((d3.time.dayOfYear(e)+(n+t)%7)/7)}}),d3.time.week=d3.time.sunday,d3.time.weeks=d3.time.sunday.range,d3.time.weeks.utc=d3.time.sunday.utc.range,d3.time.weekOfYear=d3.time.sundayOfYear,d3.time.month=fr(function(e){return e=d3.time.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),d3.time.months=d3.time.month.range,d3.time.months.utc=d3.time.month.utc.range,d3.time.year=fr(function(e){return e=d3.time.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),d3.time.years=d3.time.year.range,d3.time.years.utc=d3.time.year.utc.range;var hs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],fs=[[d3.time.second,1],[d3.time.second,5],[d3.time.second,15],[d3.time.second,30],[d3.time.minute,1],[d3.time.minute,5],[d3.time.minute,15],[d3.time.minute,30],[d3.time.hour,1],[d3.time.hour,3],[d3.time.hour,6],[d3.time.hour,12],[d3.time.day,1],[d3.time.day,2],[d3.time.week,1],[d3.time.month,1],[d3.time.month,3],[d3.time.year,1]],ds=[[d3.time.format("%Y"),function(){return!0}],[d3.time.format("%B"),function(e){return e.getMonth()}],[d3.time.format("%b %d"),function(e){return 1!=e.getDate()}],[d3.time.format("%a %d"),function(e){return e.getDay()&&1!=e.getDate()}],[d3.time.format("%I %p"),function(e){return e.getHours()}],[d3.time.format("%I:%M"),function(e){return e.getMinutes()}],[d3.time.format(":%S"),function(e){return e.getSeconds()}],[d3.time.format(".%L"),function(e){return e.getMilliseconds()}]],ps=d3.scale.linear(),gs=vr(ds);fs.year=function(e,t){return ps.domain(e.map(Er)).ticks(t).map(yr)},d3.time.scale=function(){return pr(d3.scale.linear(),fs,gs)};var ms=fs.map(function(e){return[e[0].utc,e[1]]}),vs=[[d3.time.format.utc("%Y"),function(){return!0}],[d3.time.format.utc("%B"),function(e){return e.getUTCMonth()}],[d3.time.format.utc("%b %d"),function(e){return 1!=e.getUTCDate()}],[d3.time.format.utc("%a %d"),function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],[d3.time.format.utc("%I %p"),function(e){return e.getUTCHours()}],[d3.time.format.utc("%I:%M"),function(e){return e.getUTCMinutes()}],[d3.time.format.utc(":%S"),function(e){return e.getUTCSeconds()}],[d3.time.format.utc(".%L"),function(e){return e.getUTCMilliseconds()}]],ys=vr(vs);ms.year=function(e,t){return ps.domain(e.map(br)).ticks(t).map(Ar)},d3.time.scale.utc=function(){return pr(d3.scale.linear(),ms,ys)}}(),Handlebars.registerHelper("urlize",function(e){return new Handlebars.SafeString(urlize(e,{autoescape:!0}))}),/*
 * Lazy Load - jQuery plugin for lazy loading images
 *
 * Copyright (c) 2007-2013 Mika Tuupola
 * Modified by Sanders Kleinfeld for use in lazy-loading iframes
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/lazyload
 *
 * Version:  1.8.4
 *
 */
$(function(){$("iframe.lazyload").lazyload()}),function(e,t,n,i){var r=e(t);e.fn.lazyload=function(n){function o(){var t=0;a.each(function(){var n=e(this);if(!l.skip_invisible||n.is(":visible"))if(e.abovethetop(this,l)||e.leftofbegin(this,l));else if(e.belowthefold(this,l)||e.rightoffold(this,l)){if(++t>l.failure_limit)return!1}else n.trigger("appear"),t=0})}var s,a=this,l={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return n&&(i!==n.failurelimit&&(n.failure_limit=n.failurelimit,delete n.failurelimit),i!==n.effectspeed&&(n.effect_speed=n.effectspeed,delete n.effectspeed),e.extend(l,n)),s=l.container===i||l.container===t?r:e(l.container),0===l.event.indexOf("scroll")&&s.bind(l.event,function(){return o()}),this.each(function(){var t=this,n=e(t);t.loaded=!1,n.one("appear",function(){if(!this.loaded){if(l.appear){var i=a.length;l.appear.call(t,i,l)}n.hide().attr("src",n.data(l.data_attribute))[l.effect](l.effect_speed),t.loaded=!0;var r=e.grep(a,function(e){return!e.loaded});if(a=e(r),l.load){var i=a.length;l.load.call(t,i,l)}}}),0!==l.event.indexOf("scroll")&&n.bind(l.event,function(){t.loaded||n.trigger("appear")})}),r.bind("resize",function(){o()}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&r.bind("pageshow",function(t){t.originalEvent.persisted&&a.each(function(){e(this).trigger("appear")})}),e(t).load(function(){o()}),this},e.belowthefold=function(n,o){var s;return s=o.container===i||o.container===t?r.height()+r.scrollTop():e(o.container).offset().top+e(o.container).height(),s<=e(n).offset().top-o.threshold},e.rightoffold=function(n,o){var s;return s=o.container===i||o.container===t?r.width()+r.scrollLeft():e(o.container).offset().left+e(o.container).width(),s<=e(n).offset().left-o.threshold},e.abovethetop=function(n,o){var s;return s=o.container===i||o.container===t?r.scrollTop():e(o.container).offset().top,s>=e(n).offset().top+o.threshold+e(n).height()},e.leftofbegin=function(n,o){var s;return s=o.container===i||o.container===t?r.scrollLeft():e(o.container).offset().left,s>=e(n).offset().left+o.threshold+e(n).width()},e.inviewport=function(t,n){return!(e.rightoffold(t,n)||e.leftofbegin(t,n)||e.belowthefold(t,n)||e.abovethetop(t,n))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document),/***

    P R O C E S S I N G . J S - 1.4.1
    a port of the Processing visualization language

    Processing.js is licensed under the MIT License, see LICENSE.
    For a list of copyright holders, please refer to AUTHORS.

    http://processingjs.org

***/
function(e,t,n,i){function r(t,n){return t in e?e[t]:"function"==typeof e[n]?e[n]:function(e){if(e instanceof Array)return e;if("number"==typeof e){var t=[];return t.length=e,t}}}function o(e){if("string"==typeof e){for(var t=0,r=0;r<e.length;++r)t=4294967295&31*t+e.charCodeAt(r);return t}return"object"!=typeof e?4294967295&e:e.hashCode instanceof Function?e.hashCode():(e.$id===i&&(e.$id=n.floor(65536*n.random())-32768<<16|n.floor(65536*n.random())),e.$id)}function s(e,t){return null===e||null===t?null===e&&null===t:"string"==typeof e?e===t:"object"!=typeof e?e===t:e.equals instanceof Function?e.equals(t):e===t}function a(){}function l(e,t,n){if(!e.hasOwnProperty(t)||"function"!=typeof e[t])return e[t]=n,void 0;var i=e[t];if("$overloads"in i)return i.$defaultOverload=n,void 0;if("$overloads"in n||i.length!==n.length){var r,o;"$overloads"in n?(r=n.$overloads.slice(0),r[i.length]=i,o=n.$defaultOverload):(r=[],r[n.length]=n,r[i.length]=i,o=i);var s=function(){var e=s.$overloads[arguments.length]||("$methodArgsIndex"in s&&arguments.length>s.$methodArgsIndex?s.$overloads[s.$methodArgsIndex]:null)||s.$defaultOverload;return e.apply(this,arguments)};s.$overloads=r,"$methodArgsIndex"in n&&(s.$methodArgsIndex=n.$methodArgsIndex),s.$defaultOverload=o,s.name=t,e[t]=s}}function u(e,t){function n(n){D.defineProperty(e,n,{get:function(){return t[n]},set:function(e){t[n]=e},enumerable:!0})}var i=[];for(var r in t)"function"==typeof t[r]?l(e,r,t[r]):"$"===r.charAt(0)||r in e||i.push(r);for(;i.length>0;)n(i.shift());e.$super=t}function c(e){return"string"!=typeof e?!1:-1!==["byte","int","char","color","float","long","double"].indexOf(e)}function h(e){var i=250,r=e.size/i,o=t.createElement("canvas");o.width=2*i,o.height=2*i,o.style.opacity=0;var s=e.getCSSDefinition(i+"px","normal"),a=o.getContext("2d");a.font=s;var l="dbflkhyjqpg";o.width=a.measureText(l).width,a.font=s;var u=t.createElement("div");u.style.position="absolute",u.style.opacity=0,u.style.fontFamily='"'+e.name+'"',u.style.fontSize=i+"px",u.innerHTML=l+"<br/>"+l,t.body.appendChild(u);var c=o.width,h=o.height,f=h/2;a.fillStyle="white",a.fillRect(0,0,c,h),a.fillStyle="black",a.fillText(l,0,f);for(var d=a.getImageData(0,0,c,h).data,p=0,g=4*c,v=d.length;++p<v&&255===d[p];)m();var y=n.round(p/g);for(p=v-1;--p>0&&255===d[p];)m();var E=n.round(p/g);if(e.ascent=r*(f-y),e.descent=r*(E-f),t.defaultView.getComputedStyle){var A=t.defaultView.getComputedStyle(u,null).getPropertyValue("height");A=r*A.replace("px",""),A>=2*e.size&&(e.leading=n.round(A/2))}return t.body.removeChild(u),e.caching?a:void 0}function f(e,t){e===i&&(e=""),this.name=e,t===i&&(t=0),this.size=t,this.glyph=!1,this.ascent=0,this.descent=0,this.leading=1.2*t;var n=e.indexOf(" Italic Bold");-1!==n&&(e=e.substring(0,n)),this.style="normal";var r=e.indexOf(" Italic");-1!==r&&(e=e.substring(0,r),this.style="italic"),this.weight="normal";var o=e.indexOf(" Bold");if(-1!==o&&(e=e.substring(0,o),this.weight="bold"),this.family="sans-serif",e!==i)switch(e){case"sans-serif":case"serif":case"monospace":case"fantasy":case"cursive":this.family=e;break;default:this.family='"'+e+'", sans-serif'}this.context2d=h(this),this.css=this.getCSSDefinition(),this.context2d&&(this.context2d.font=this.css)}function d(){var e,t,n=["abs","acos","alpha","ambient","ambientLight","append","applyMatrix","arc","arrayCopy","asin","atan","atan2","background","beginCamera","beginDraw","beginShape","bezier","bezierDetail","bezierPoint","bezierTangent","bezierVertex","binary","blend","blendColor","blit_resize","blue","box","breakShape","brightness","camera","ceil","Character","color","colorMode","concat","constrain","copy","cos","createFont","createGraphics","createImage","cursor","curve","curveDetail","curvePoint","curveTangent","curveTightness","curveVertex","day","degrees","directionalLight","disableContextMenu","dist","draw","ellipse","ellipseMode","emissive","enableContextMenu","endCamera","endDraw","endShape","exit","exp","expand","externals","fill","filter","floor","focused","frameCount","frameRate","frustum","get","glyphLook","glyphTable","green","height","hex","hint","hour","hue","image","imageMode","intersect","join","key","keyCode","keyPressed","keyReleased","keyTyped","lerp","lerpColor","lightFalloff","lights","lightSpecular","line","link","loadBytes","loadFont","loadGlyphs","loadImage","loadPixels","loadShape","loadXML","loadStrings","log","loop","mag","map","match","matchAll","max","millis","min","minute","mix","modelX","modelY","modelZ","modes","month","mouseButton","mouseClicked","mouseDragged","mouseMoved","mouseOut","mouseOver","mousePressed","mouseReleased","mouseScroll","mouseScrolled","mouseX","mouseY","name","nf","nfc","nfp","nfs","noCursor","noFill","noise","noiseDetail","noiseSeed","noLights","noLoop","norm","normal","noSmooth","noStroke","noTint","ortho","param","parseBoolean","parseByte","parseChar","parseFloat","parseInt","peg","perspective","PImage","pixels","PMatrix2D","PMatrix3D","PMatrixStack","pmouseX","pmouseY","point","pointLight","popMatrix","popStyle","pow","print","printCamera","println","printMatrix","printProjection","PShape","PShapeSVG","pushMatrix","pushStyle","quad","radians","random","Random","randomSeed","rect","rectMode","red","redraw","requestImage","resetMatrix","reverse","rotate","rotateX","rotateY","rotateZ","round","saturation","save","saveFrame","saveStrings","scale","screenX","screenY","screenZ","second","set","setup","shape","shapeMode","shared","shearX","shearY","shininess","shorten","sin","size","smooth","sort","specular","sphere","sphereDetail","splice","split","splitTokens","spotLight","sq","sqrt","status","str","stroke","strokeCap","strokeJoin","strokeWeight","subset","tan","text","textAlign","textAscent","textDescent","textFont","textLeading","textMode","textSize","texture","textureMode","textWidth","tint","toImageData","touchCancel","touchEnd","touchMove","touchStart","translate","transform","triangle","trim","unbinary","unhex","updatePixels","use3DContext","vertex","width","XMLElement","XML","year","__contains","__equals","__equalsIgnoreCase","__frameRate","__hashCode","__int_cast","__instanceof","__keyPressed","__mousePressed","__printStackTrace","__replace","__replaceAll","__replaceFirst","__toCharArray","__split","__codePointAt","__startsWith","__endsWith","__matches"],i={};for(e=0,t=n.length;t>e;++e)i[n[e]]=null;for(var r in P.lib)if(P.lib.hasOwnProperty(r)&&P.lib[r].exports){var o=P.lib[r].exports;for(e=0,t=o.length;t>e;++e)i[o[e]]=null}return i}function p(e){function t(e){for(var t=[],n=e.split(/([\{\[\(\)\]\}])/),i=n[0],r=[],o=1;o<n.length;o+=2){var s=n[o];if("["===s||"{"===s||"("===s)r.push(i),i=s;else if("]"===s||"}"===s||")"===s){var a="}"===s?"A":")"===s?"B":"C",l=t.length;t.push(i+s),i=r.pop()+'"'+a+(l+1)+'"'}i+=n[o+1]}return t.unshift(i),t}function n(e,t){return e.replace(/'(\d+)'/g,function(e,n){var i=t[n];return"/"===i.charAt(0)?i:/^'((?:[^'\\\n])|(?:\\.[0-9A-Fa-f]*))'$/.test(i)?"(new $p.Character("+i+"))":i})}function r(e){var t,n=/^\s*/.exec(e);if(n[0].length===e.length)t={left:n[0],middle:"",right:""};else{var i=/\s*$/.exec(e);t={left:n[0],middle:e.substring(n[0].length,i.index),right:i[0]}}return t.untrim=function(e){return this.left+e+this.right},t}function o(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}function s(e,t){for(var n=0,i=t.length;i>n;++n)e[t[n]]=null;return e}function a(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function l(e){return e.substring(2,e.length-1)}function u(e,t){var n=Dt.length;return Dt.push(e),'"'+t+n+'"'}function c(){return"class"+ ++kt}function h(e,t,n){e.classId=t,e.scopeId=n,Rt[t]=e}function f(e){var t=e;return t=t.replace(Bt,function(e){return u(e,"E")}),t=t.replace(Mt,function(e){return u(e,"D")}),t=t.replace($t,function(e){return u(e,"H")})}function p(e,t){var n=e.replace(Pt,function(e,n,i){return i!==t?e:u(e,"G")});return n}function g(e){this.name=e}function m(e,t){this.params=e,this.methodArgsParam=t}function v(e){var t=o(e.substring(1,e.length-1)),n=[],i=null;if(""!==t)for(var r=t.split(","),s=0;s<r.length;++s){var a=/\b([A-Za-z_$][\w$]*\b)(\s*"[ABC][\d]*")*\s*$/.exec(r[s]);if(s===r.length-1&&r[s].indexOf("...")>=0){i=new g(a[1]);break}n.push(new g(a[1]))}return new m(n,i)}function y(e){function t(e,t,n,i){var s=Dt[i];o=!0;var a=r(s.substring(1,s.length-1));return"__"+n+(""===a.middle?u("("+t.replace(/\.\s*$/,"")+")","B"):u("("+t.replace(/\.\s*$/,"")+","+a.middle+")","B"))}function n(e,t,n){return o=!0,"__instanceof"+u("("+t+", "+n+")","B")}var i=e;i=i.replace(/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\s*"C\d+")+\s*("A\d+")/g,function(e,t,n){return n}),i=i.replace(/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\s*"B\d+")\s*("A\d+")/g,function(e){return u(e,"F")}),i=i.replace($t,function(e){return u(e,"H")}),i=i.replace(/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)\s*("C\d+"(?:\s*"C\d+")*)/g,function(e,t,n){var i=n.replace(/"C(\d+)"/g,function(e,t){return Dt[t]}).replace(/\[\s*\]/g,"[null]").replace(/\s*\]\s*\[\s*/g,", "),r="{"+i.substring(1,i.length-1)+"}",o="('"+t+"', "+u(r,"A")+")";return"$p.createJavaArray"+u(o,"B")}),i=i.replace(/(\.\s*length)\s*"B\d+"/g,"$1"),i=i.replace(/#([0-9A-Fa-f]{6})\b/g,function(e,t){return"0xFF"+t}),i=i.replace(/"B(\d+)"(\s*(?:[\w$']|"B))/g,function(e,t,n){var i=Dt[t];if(!/^\(\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\s*(?:"C\d+"\s*)*\)$/.test(i))return e;if(/^\(\s*int\s*\)$/.test(i))return"(int)"+n;var r=i.split(/"C(\d+)"/g);return r.length>1&&!/^\[\s*\]$/.test(Dt[r[1]])?e:""+n}),i=i.replace(/\(int\)([^,\]\)\}\?\:\*\+\-\/\^\|\%\&\~<\>\=]+)/g,function(e,t){var n=r(t);return n.untrim("__int_cast("+n.middle+")")}),i=i.replace(/\bsuper(\s*"B\d+")/g,"$$superCstr$1").replace(/\bsuper(\s*\.)/g,"$$super$1"),i=i.replace(/\b0+((\d*)(?:\.[\d*])?(?:[eE][\-\+]?\d+)?[fF]?)\b/,function(e,t,n){return t===n?e:""===n?"0"+t:t}),i=i.replace(/\b(\.?\d+\.?)[fF]\b/g,"$1"),i=i.replace(/([^\s])%([^=\s])/g,"$1 % $2"),i=i.replace(/\b(frameRate|keyPressed|mousePressed)\b(?!\s*"B)/g,"__$1"),i=i.replace(/\b(boolean|byte|char|float|int)\s*"B/g,function(e,t){return"parse"+t.substring(0,1).toUpperCase()+t.substring(1)+'"B'}),i=i.replace(/\bpixels\b\s*(("C(\d+)")|\.length)?(\s*=(?!=)([^,\]\)\}]+))?/g,function(e,t,n,i,r,o){if(n){var s=Dt[i];return r?"pixels.setPixel"+u("("+s.substring(1,s.length-1)+","+o+")","B"):"pixels.getPixel"+u("("+s.substring(1,s.length-1)+")","B")}return t?"pixels.getLength"+u("()","B"):r?"pixels.set"+u("("+o+")","B"):"pixels.toArray"+u("()","B")});var o;do o=!1,i=i.replace(/((?:'\d+'|\b[A-Za-z_$][\w$]*\s*(?:"[BC]\d+")*)\s*\.\s*(?:[A-Za-z_$][\w$]*\s*(?:"[BC]\d+"\s*)*\.\s*)*)(replace|replaceAll|replaceFirst|contains|equals|equalsIgnoreCase|hashCode|toCharArray|printStackTrace|split|startsWith|endsWith|codePointAt|matches)\s*"B(\d+)"/g,t);while(o);do o=!1,i=i.replace(/((?:'\d+'|\b[A-Za-z_$][\w$]*\s*(?:"[BC]\d+")*)\s*(?:\.\s*[A-Za-z_$][\w$]*\s*(?:"[BC]\d+"\s*)*)*)instanceof\s+([A-Za-z_$][\w$]*\s*(?:\.\s*[A-Za-z_$][\w$]*)*)/g,n);while(o);return i=i.replace(/\bthis(\s*"B\d+")/g,"$$constr$1")}function E(e,t){this.baseInterfaceName=e,this.body=t,t.owner=this}function A(e){var t=new RegExp(/\bnew\s*([A-Za-z_$][\w$]*\s*(?:\.\s*[A-Za-z_$][\w$]*)*)\s*"B\d+"\s*"A(\d+)"/).exec(e),n=wt,i=c();wt=i;var r=t[1]+"$"+i,o=new E(r,xt(Dt[t[2]],r,"","implements "+t[1]));return h(o,i,n),wt=n,o}function b(e,t,n){this.name=e,this.params=t,this.body=n}function w(e){var t=new RegExp(/\b([A-Za-z_$][\w$]*)\s*"B(\d+)"\s*"A(\d+)"/).exec(e);return new b("function"!==t[1]?t[1]:null,v(Dt[t[2]]),_t(Dt[t[3]]))}function x(e){this.members=e}function _(e){for(var t=e.split(","),n=0;n<t.length;++n){var i=t[n].indexOf(":");t[n]=0>i?{value:Tt(t[n])}:{label:o(t[n].substring(0,i)),value:Tt(o(t[n].substring(i+1)))}}return new x(t)}function F(e){if("("===e.charAt(0)||"["===e.charAt(0))return e.charAt(0)+F(e.substring(1,e.length-1))+e.charAt(e.length-1);if("{"===e.charAt(0))return/^\{\s*(?:[A-Za-z_$][\w$]*|'\d+')\s*:/.test(e)?"{"+u(e.substring(1,e.length-1),"I")+"}":"["+F(e.substring(1,e.length-1))+"]";var t=r(e),n=y(t.middle);return n=n.replace(/"[ABC](\d+)"/g,function(e,t){return F(Dt[t])}),t.untrim(n)}function S(e){return e.replace(/(\.\s*)?((?:\b[A-Za-z_]|\$)[\w$]*)(\s*\.\s*([A-Za-z_$][\w$]*)(\s*\()?)?/g,function(e,t,n,r,o,s){if(t)return e;var a={name:n,member:o,callSign:!!s};return bt(a)+(r===i?"":r)})}function T(e,t){this.expr=e,this.transforms=t}function R(e,t,n){this.name=e,this.value=t,this.isDefault=n}function k(e,t){var n,i,r,s=e.indexOf("=");return 0>s?(n=e,i=t,r=!0):(n=e.substring(0,s),i=Tt(e.substring(s+1)),r=!1),new R(o(n.replace(/(\s*"C\d+")+/g,"")),i,r)}function B(e){return"int"===e||"float"===e?"0":"boolean"===e?"false":"color"===e?"0x00000000":"null"}function M(e,t){this.definitions=e,this.varType=t}function L(e){this.expression=e}function P(e){if(Lt.test(e)){for(var t=It.exec(e),n=e.substring(t[0].length).split(","),i=B(t[2]),r=0;r<n.length;++r)n[r]=k(n[r],i);return new M(n,t[2])}return new L(Tt(e))}function I(e,t,n){this.initStatement=e,this.condition=t,this.step=n}function $(e,t){this.initStatement=e,this.container=t}function N(e,t){this.initStatement=e,this.container=t}function O(e){var t;return/\bin\b/.test(e)?(t=e.substring(1,e.length-1).split(/\bin\b/g),new $(P(o(t[0])),Tt(t[1]))):e.indexOf(":")>=0&&e.indexOf(";")<0?(t=e.substring(1,e.length-1).split(":"),new N(P(o(t[0])),Tt(t[1]))):(t=e.substring(1,e.length-1).split(";"),new I(P(o(t[0])),Tt(t[1]),Tt(t[2])))}function H(e){e.sort(function(e,t){return t.weight-e.weight})}function j(e,t,n){this.name=e,this.body=t,this.isStatic=n,t.owner=this}function z(e,t,n){this.name=e,this.body=t,this.isStatic=n,t.owner=this}function U(e){var t=Bt.exec(e);Bt.lastIndex=0;var n,i=t[1].indexOf("static")>=0,r=Dt[l(t[6])],o=wt,s=c();return wt=s,n="interface"===t[2]?new j(t[3],Ct(r,t[3],t[4]),i):new z(t[3],xt(r,t[3],t[4],t[5]),i),h(n,s,o),wt=o,n}function W(e,t,n,i){this.name=e,this.params=t,this.body=n,this.isStatic=i}function G(e){var t=Mt.exec(e);Mt.lastIndex=0;var n=t[1].indexOf("static")>=0,i=";"!==t[6]?Dt[l(t[6])]:"{}";return new W(t[3],v(Dt[l(t[4])]),_t(i),n)}function V(e,t,n){this.definitions=e,this.fieldType=t,this.isStatic=n}function Y(e){for(var t=It.exec(e),n=t[1].indexOf("static")>=0,i=e.substring(t[0].length).split(/,\s*/g),r=B(t[2]),o=0;o<i.length;++o)i[o]=k(i[o],r);return new V(i,t[2],n)}function q(e,t){this.params=e,this.body=t}function X(e){var t=new RegExp(/"B(\d+)"\s*"A(\d+)"/).exec(e),n=v(Dt[t[1]]);return new q(n,_t(Dt[t[2]]))}function J(e,t,n,i,r,o){var s,a;for(this.name=e,this.interfacesNames=t,this.methodsNames=n,this.fields=i,this.innerClasses=r,this.misc=o,s=0,a=i.length;a>s;++s)i[s].owner=this}function K(e,t,n,i,r,o,s,a,l){var u,c;for(this.name=e,this.baseClassName=t,this.interfacesNames=n,this.functions=i,this.methods=r,this.fields=o,this.cstrs=s,this.innerClasses=a,this.misc=l,u=0,c=o.length;c>u;++u)o[u].owner=this}function Z(e,t){this.name=e,this.body=t,t.owner=this}function Q(e,t){this.name=e,this.body=t,t.owner=this}function et(e){var t=Bt.exec(e);Bt.lastIndex=0;var n=Dt[l(t[6])],i=wt,r=c();wt=r;var o;return o="interface"===t[2]?new Z(t[3],Ct(n,t[3],t[4])):new Q(t[3],xt(n,t[3],t[4],t[5])),h(o,r,i),wt=i,o}function tt(e,t,n){this.name=e,this.params=t,this.body=n}function nt(e){var t=Mt.exec(e);return Mt.lastIndex=0,new tt(t[3],v(Dt[l(t[4])]),_t(Dt[l(t[6])]))}function it(e){var t=e;return t=t.replace(/\b(catch\s*"B\d+"\s*"A\d+")(\s*catch\s*"B\d+"\s*"A\d+")+/g,"$1")}function rt(e,t){this.argument=e,this.misc=t}function ot(e,t){this.argument=e,this.misc=t}function st(e,t,n){this.name=e,this.argument=t,this.misc=n}function at(e){this.expr=e}function lt(e){this.label=e}function ut(e){for(var t=[],n=0,i=e.length;i>n;++n){var r=e[n];r instanceof M?t=t.concat(r.getNames()):r instanceof rt&&r.argument.initStatement instanceof M?t=t.concat(r.argument.initStatement.getNames()):(r instanceof j||r instanceof z||r instanceof Z||r instanceof Q||r instanceof tt||r instanceof b)&&t.push(r.name)}return s({},t)}function ct(e){this.statements=e}function ht(e){this.statements=e}function ft(){function e(e,t){for(var n,o=t.split("."),s=e.scope;s;){if(s.hasOwnProperty(o[0])){n=s[o[0]];break}s=s.scope}n===i&&(n=r[o[0]]);for(var a=1,l=o.length;l>a&&n;++a)n=n.inScope[o[a]];return n}var t,n,r={};for(t in Rt)if(Rt.hasOwnProperty(t)){n=Rt[t];var o=n.scopeId,s=n.name;if(o){var a=Rt[o];n.scope=a,a.inScope===i&&(a.inScope={}),a.inScope[s]=n}else r[s]=n}for(t in Rt)if(Rt.hasOwnProperty(t)){n=Rt[t];var l=n.body.baseClassName;if(l){var u=e(n,l);u&&(n.base=u,u.derived||(u.derived=[]),u.derived.push(n))}var c,h,f=n.body.interfacesNames,d=[];if(f&&f.length>0){for(c=0,h=f.length;h>c;++c){var p=e(n,f[c]);d.push(p),p&&(p.derived||(p.derived=[]),p.derived.push(n))}d.length>0&&(n.interfaces=d)}}}function dt(){function e(e,t){var n=o[e];if(!n)return!1;var i=n.indexOf(t);return 0>i?!1:(n.splice(i,1),n.length>0?!1:(delete o[e],!0))}var t,n,i,r=[],o={};for(t in Rt)if(Rt.hasOwnProperty(t))if(i=Rt[t],i.inScope||i.derived){var s=[];if(i.inScope)for(n in i.inScope)i.inScope.hasOwnProperty(n)&&s.push(i.inScope[n]);i.derived&&(s=s.concat(i.derived)),o[t]=s}else r.push(t),i.weight=0;for(;r.length>0;)if(t=r.shift(),i=Rt[t],i.scopeId&&e(i.scopeId,i)&&(r.push(i.scopeId),Rt[i.scopeId].weight=i.weight+1),i.base&&e(i.base.classId,i)&&(r.push(i.base.classId),i.base.weight=i.weight+1),i.interfaces){var a,l;for(a=0,l=i.interfaces.length;l>a;++a)i.interfaces[a]&&e(i.interfaces[a].classId,i)&&(r.push(i.interfaces[a].classId),i.interfaces[a].weight=i.weight+1)}}var pt=d(),gt=e.replace(/\r\n?|\n\r/g,"\n"),mt=[],vt=gt.replace(/("(?:[^"\\\n]|\\.)*")|('(?:[^'\\\n]|\\.)*')|(([\[\(=|&!\^:?]\s*)(\/(?![*\/])(?:[^\/\\\n]|\\.)*\/[gim]*)\b)|(\/\/[^\n]*\n)|(\/\*(?:(?!\*\/)(?:.|\n))*\*\/)/g,function(e,t,n,i,r,o,s,a){var l;return t||n?(l=mt.length,mt.push(e),"'"+l+"'"):i?(l=mt.length,mt.push(o),r+"'"+l+"'"):""!==a?" ":"\n"});vt=vt.replace(/__x([0-9A-F]{4})/g,function(e,t){return"__x005F_x"+t}),vt=vt.replace(/\$/g,"__x0024");var yt,Et=vt,At=function(e,t,n,i){return t||i?e:(yt=!0,"")};do yt=!1,Et=Et.replace(/([<]?)<\s*((?:\?|[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\[\])*(?:\s+(?:extends|super)\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)?(?:\s*,\s*(?:\?|[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\[\])*(?:\s+(?:extends|super)\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)?)*)\s*>([=]?)/g,At);while(yt);var bt,wt,xt,Ct,_t,Ft,St,Tt,Dt=t(Et),Rt={},kt=0,Bt=/\b((?:(?:public|private|final|protected|static|abstract)\s+)*)(class|interface)\s+([A-Za-z_$][\w$]*\b)(\s+extends\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\b)*)?(\s+implements\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\b)*)?\s*("A\d+")/g,Mt=/\b((?:(?:public|private|final|protected|static|abstract|synchronized)\s+)*)((?!(?:else|new|return|throw|function|public|private|protected)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*([A-Za-z_$][\w$]*\b)\s*("B\d+")(\s*throws\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)*)?\s*("A\d+"|;)/g,Lt=/^((?:(?:public|private|final|protected|static)\s+)*)((?!(?:else|new|return|throw)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*([A-Za-z_$][\w$]*\b)\s*(?:"C\d+"\s*)*([=,]|$)/,Pt=/\b((?:(?:public|private|final|protected|static|abstract)\s+)*)((?!(?:new|return|throw)\b)[A-Za-z_$][\w$]*\b)\s*("B\d+")(\s*throws\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)*)?\s*("A\d+")/g,It=/^((?:(?:public|private|final|protected|static)\s+)*)((?!(?:new|return|throw)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*/,$t=/\bfunction(?:\s+([A-Za-z_$][\w$]*))?\s*("B\d+")\s*("A\d+")/g;g.prototype.toString=function(){return this.name},m.prototype.getNames=function(){for(var e=[],t=0,n=this.params.length;n>t;++t)e.push(this.params[t].name);return e},m.prototype.prependMethodArgs=function(e){return this.methodArgsParam?"{\nvar "+this.methodArgsParam.name+" = Array.prototype.slice.call(arguments, "+this.params.length+");\n"+e.substring(1):e},m.prototype.toString=function(){if(0===this.params.length)return"()";for(var e="(",t=0,n=this.params.length;n>t;++t)e+=this.params[t]+", ";return e.substring(0,e.length-2)+")"},E.prototype.toString=function(){return"new ("+this.body+")"},b.prototype.toString=function(){var e=bt,t=s({"this":null},this.params.getNames());bt=function(n){return t.hasOwnProperty(n.name)?n.name:e(n)};var n="function";this.name&&(n+=" "+this.name);var i=this.params.prependMethodArgs(this.body.toString());return n+=this.params+" "+i,bt=e,n},x.prototype.toString=function(){var e=bt;bt=function(t){return"this"===t.name?"this":e(t)};for(var t="",n=0,i=this.members.length;i>n;++n)this.members[n].label&&(t+=this.members[n].label+": "),t+=this.members[n].value.toString()+", ";return bt=e,t.substring(0,t.length-2)},T.prototype.toString=function(){var e=this.transforms,t=S(this.expr);return t.replace(/"!(\d+)"/g,function(t,n){return e[n].toString()})},Tt=function(e){var t=[],n=F(e);return n=n.replace(/"H(\d+)"/g,function(e,n){return t.push(w(Dt[n])),'"!'+(t.length-1)+'"'}),n=n.replace(/"F(\d+)"/g,function(e,n){return t.push(A(Dt[n])),'"!'+(t.length-1)+'"'}),n=n.replace(/"I(\d+)"/g,function(e,n){return t.push(_(Dt[n])),'"!'+(t.length-1)+'"'}),new T(n,t)},R.prototype.toString=function(){return this.name+" = "+this.value},M.prototype.getNames=function(){for(var e=[],t=0,n=this.definitions.length;n>t;++t)e.push(this.definitions[t].name);return e},M.prototype.toString=function(){return"var "+this.definitions.join(",")},L.prototype.toString=function(){return this.expression.toString()},I.prototype.toString=function(){return"("+this.initStatement+"; "+this.condition+"; "+this.step+")"},$.prototype.toString=function(){var e=this.initStatement.toString();return e.indexOf("=")>=0&&(e=e.substring(0,e.indexOf("="))),"("+e+" in "+this.container+")"},N.iteratorId=0,N.prototype.toString=function(){var e=this.initStatement.toString(),t="$it"+N.iteratorId++,n=e.replace(/^\s*var\s*/,"").split("=")[0],i="var "+t+" = new $p.ObjectIterator("+this.container+"), "+n+" = void(0)",r=t+".hasNext() && (("+n+" = "+t+".next()) || true)";return"("+i+"; "+r+";)"},j.prototype.toString=function(){return""+this.body},z.prototype.toString=function(){return""+this.body},W.prototype.toString=function(){var e=s({},this.params.getNames()),t=bt;bt=function(n){return e.hasOwnProperty(n.name)?n.name:t(n)};var n=this.params.prependMethodArgs(this.body.toString()),i="function "+this.methodId+this.params+" "+n+"\n";return bt=t,i},V.prototype.getNames=function(){for(var e=[],t=0,n=this.definitions.length;n>t;++t)e.push(this.definitions[t].name);return e},V.prototype.toString=function(){var e=bt({name:"[this]"});if(this.isStatic){for(var t=this.owner.name,n=[],i=0,r=this.definitions.length;r>i;++i){var o=this.definitions[i],s=o.name,a=t+"."+s,l="if("+a+" === void(0)) {\n"+" "+a+" = "+o.value+"; }\n"+"$p.defineProperty("+e+", "+"'"+s+"', { get: function(){return "+a+";}, "+"set: function(val){"+a+" = val;} });\n";n.push(l)}return n.join("")}return e+"."+this.definitions.join("; "+e+".")},q.prototype.toString=function(){var e=s({},this.params.getNames()),t=bt;bt=function(n){return e.hasOwnProperty(n.name)?n.name:t(n)};var n="function $constr_"+this.params.params.length+this.params.toString(),i=this.params.prependMethodArgs(this.body.toString());return/\$(superCstr|constr)\b/.test(i)||(i="{\n$superCstr();\n"+i.substring(1)),bt=t,n+i+"\n"},J.prototype.getMembers=function(e,t,n){this.owner.base&&this.owner.base.body.getMembers(e,t,n);var i,r,o,s;for(i=0,o=this.fields.length;o>i;++i){var a=this.fields[i].getNames();for(r=0,s=a.length;s>r;++r)e[a[r]]=this.fields[i]}for(i=0,o=this.methodsNames.length;o>i;++i){var l=this.methodsNames[i];t[l]=!0}for(i=0,o=this.innerClasses.length;o>i;++i){var u=this.innerClasses[i];n[u.name]=u}},J.prototype.toString=function(){function e(e){for(var t=0;e;)++t,e=e.scope;return t}e(this.owner);var t=this.name,n="",i="",r={},o={},s={};this.getMembers(r,o,s);var a,l;if(this.owner.interfaces){var u,c=[];for(a=0,l=this.interfacesNames.length;l>a;++a)this.owner.interfaces[a]&&(u=bt({name:this.interfacesNames[a]}),c.push(u),n+="$p.extendInterfaceMembers("+t+", "+u+");\n");i+=t+".$interfaces = ["+c.join(", ")+"];\n"}for(i+=t+".$isInterface = true;\n",i+=t+".$methods = ['"+this.methodsNames.join("', '")+"'];\n",H(this.innerClasses),a=0,l=this.innerClasses.length;l>a;++a){var h=this.innerClasses[a];h.isStatic&&(n+=t+"."+h.name+" = "+h+";\n")}for(a=0,l=this.fields.length;l>a;++a){var f=this.fields[a];f.isStatic&&(n+=t+"."+f.definitions.join(";\n"+t+".")+";\n")}return"(function() {\nfunction "+t+"() { throw 'Unable to create the interface'; }\n"+n+i+"return "+t+";\n"+"})()"},Ct=function(e,t,n){var o=e.substring(1,e.length-1);o=f(o),o=p(o,t);var s=[],a=[];o=o.replace(/"([DE])(\d+)"/g,function(e,t,n){return"D"===t?s.push(n):"E"===t&&a.push(n),""});var l,u,c,h=o.split(/;(?:\s*;)*/g);for(n!==i&&(l=n.replace(/^\s*extends\s+(.+?)\s*$/g,"$1").split(/\s*,\s*/g)),u=0,c=s.length;c>u;++u){var d=G(Dt[s[u]]);s[u]=d.name}for(u=0,c=h.length-1;c>u;++u){var g=r(h[u]);h[u]=Y(g.middle)}var m=h.pop();for(u=0,c=a.length;c>u;++u)a[u]=U(Dt[a[u]]);return new J(t,l,s,h,a,{tail:m})},K.prototype.getMembers=function(e,t,n){this.owner.base&&this.owner.base.body.getMembers(e,t,n);var i,r,o,s;for(i=0,o=this.fields.length;o>i;++i){var a=this.fields[i].getNames();for(r=0,s=a.length;s>r;++r)e[a[r]]=this.fields[i]}for(i=0,o=this.methods.length;o>i;++i){var l=this.methods[i];t[l.name]=l}for(i=0,o=this.innerClasses.length;o>i;++i){var u=this.innerClasses[i];n[u.name]=u}},K.prototype.toString=function(){function e(e){for(var t=0;e;)++t,e=e.scope;return t}var t=e(this.owner),n="$this_"+t,i=this.name,r="var "+n+" = this;\n",s="",a="",l={},u={},c={};this.getMembers(l,u,c);var h=bt;bt=function(e){var t=e.name;return"this"===t?e.callSign||!e.member?n+".$self":n:l.hasOwnProperty(t)?l[t].isStatic?i+"."+t:n+"."+t:c.hasOwnProperty(t)?n+"."+t:u.hasOwnProperty(t)?u[t].isStatic?i+"."+t:n+".$self."+t:h(e)};var f;this.baseClassName?(f=h({name:this.baseClassName}),r+="var $super = { $upcast: "+n+" };\n",r+="function $superCstr(){"+f+".apply($super,arguments);if(!('$self' in $super)) $p.extendClassChain($super)}\n",a+=i+".$base = "+f+";\n"):r+="function $superCstr(){$p.extendClassChain("+n+")}\n",this.owner.base&&(s+="$p.extendStaticMembers("+i+", "+f+");\n");var d,p,g,m;if(this.owner.interfaces){var v,y=[];for(d=0,p=this.interfacesNames.length;p>d;++d)this.owner.interfaces[d]&&(v=h({name:this.interfacesNames[d]}),y.push(v),s+="$p.extendInterfaceMembers("+i+", "+v+");\n");a+=i+".$interfaces = ["+y.join(", ")+"];\n"}for(this.functions.length>0&&(r+=this.functions.join("\n")+"\n"),H(this.innerClasses),d=0,p=this.innerClasses.length;p>d;++d){var E=this.innerClasses[d];E.isStatic?(s+=i+"."+E.name+" = "+E+";\n",r+=n+"."+E.name+" = "+i+"."+E.name+";\n"):r+=n+"."+E.name+" = "+E+";\n"}for(d=0,p=this.fields.length;p>d;++d){var A=this.fields[d];if(A.isStatic)for(s+=i+"."+A.definitions.join(";\n"+i+".")+";\n",g=0,m=A.definitions.length;m>g;++g){var b=A.definitions[g].name,w=i+"."+b;r+="$p.defineProperty("+n+", '"+b+"', {"+"get: function(){return "+w+"}, "+"set: function(val){"+w+" = val}});\n"}else r+=n+"."+A.definitions.join(";\n"+n+".")+";\n"}var x={};for(d=0,p=this.methods.length;p>d;++d){var C=this.methods[d],_=x[C.name],F=C.name+"$"+C.params.params.length,S=!!C.params.methodArgsParam;_?(++_,F+="_"+_):_=1,C.methodId=F,x[C.name]=_,C.isStatic?(s+=C,s+="$p.addMethod("+i+", '"+C.name+"', "+F+", "+S+");\n",r+="$p.addMethod("+n+", '"+C.name+"', "+F+", "+S+");\n"):(r+=C,r+="$p.addMethod("+n+", '"+C.name+"', "+F+", "+S+");\n")}r+=o(this.misc.tail),this.cstrs.length>0&&(r+=this.cstrs.join("\n")+"\n"),r+="function $constr() {\n";var T=[];for(d=0,p=this.cstrs.length;p>d;++d){var D=this.cstrs[d].params.params.length,R=!!this.cstrs[d].params.methodArgsParam;T.push("if(arguments.length "+(R?">=":"===")+" "+D+") { "+"$constr_"+D+".apply("+n+", arguments); }")}return T.length>0&&(r+=T.join(" else ")+" else "),r+="$superCstr();\n}\n",r+="$constr.apply(null, arguments);\n",bt=h,"(function() {\nfunction "+i+"() {\n"+r+"}\n"+s+a+"return "+i+";\n"+"})()"},xt=function(e,t,n,o){var s=e.substring(1,e.length-1);s=f(s),s=p(s,t);var a=[],l=[],u=[],c=[];s=s.replace(/"([DEGH])(\d+)"/g,function(e,t,n){return"D"===t?a.push(n):"E"===t?l.push(n):"H"===t?c.push(n):u.push(n),""});var h,d,g,m=s.replace(/^(?:\s*;)+/,"").split(/;(?:\s*;)*/g);for(n!==i&&(h=n.replace(/^\s*extends\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)\s*$/g,"$1")),o!==i&&(d=o.replace(/^\s*implements\s+(.+?)\s*$/g,"$1").split(/\s*,\s*/g)),g=0;g<c.length;++g)c[g]=w(Dt[c[g]]);for(g=0;g<a.length;++g)a[g]=G(Dt[a[g]]);for(g=0;g<m.length-1;++g){var v=r(m[g]);m[g]=Y(v.middle)}var y=m.pop();for(g=0;g<u.length;++g)u[g]=X(Dt[u[g]]);for(g=0;g<l.length;++g)l[g]=U(Dt[l[g]]);return new K(t,h,d,c,a,m,u,l,{tail:y})},Z.prototype.toString=function(){return"var "+this.name+" = "+this.body+";\n"+"$p."+this.name+" = "+this.name+";\n"},Q.prototype.toString=function(){return"var "+this.name+" = "+this.body+";\n"+"$p."+this.name+" = "+this.name+";\n"},tt.prototype.toString=function(){var e=s({},this.params.getNames()),t=bt;bt=function(n){return e.hasOwnProperty(n.name)?n.name:t(n)};var n=this.params.prependMethodArgs(this.body.toString()),i="function "+this.name+this.params+" "+n+"\n"+"$p."+this.name+" = "+this.name+";";return bt=t,i},rt.prototype.toString=function(){return this.misc.prefix+this.argument.toString()},ot.prototype.toString=function(){return this.misc.prefix+this.argument.toString()},st.prototype.toString=function(){var e=this.misc.prefix;return this.argument!==i&&(e+=this.argument.toString()),e},at.prototype.toString=function(){return"case "+this.expr+":"},lt.prototype.toString=function(){return this.label},Ft=function(e,t,n){var s=new RegExp(/\b(catch|for|if|switch|while|with)\s*"B(\d+)"|\b(do|else|finally|return|throw|try|break|continue)\b|("[ADEH](\d+)")|\b(case)\s+([^:]+):|\b([A-Za-z_$][\w$]*\s*:)|(;)/g),a=[];e=it(e);for(var l,u,c=0;null!==(l=s.exec(e));){if(l[1]!==i){var h=e.lastIndexOf('"B',s.lastIndex),f=e.substring(c,h);"for"===l[1]?a.push(new rt(O(Dt[l[2]]),{prefix:f})):"catch"===l[1]?a.push(new ot(v(Dt[l[2]]),{prefix:f})):a.push(new st(l[1],Tt(Dt[l[2]]),{prefix:f}))}else if(l[3]!==i)a.push(new st(l[3],i,{prefix:e.substring(c,s.lastIndex)}));else if(l[4]!==i){if(u=e.substring(c,s.lastIndex-l[4].length),0!==o(u).length)continue;a.push(u);var d=l[4].charAt(1),p=l[5];"D"===d?a.push(t(Dt[p])):"E"===d?a.push(n(Dt[p])):"H"===d?a.push(w(Dt[p])):a.push(_t(Dt[p]))}else if(l[6]!==i)a.push(new at(Tt(o(l[7]))));else if(l[8]!==i){if(u=e.substring(c,s.lastIndex-l[8].length),0!==o(u).length)continue;a.push(new lt(e.substring(c,s.lastIndex)))}else{var g=r(e.substring(c,s.lastIndex-1));a.push(g.left),a.push(P(g.middle)),a.push(g.right+";")}c=s.lastIndex}var m=r(e.substring(c));return a.push(m.left),""!==m.middle&&(a.push(P(m.middle)),a.push(";"+m.right)),a},ct.prototype.toString=function(){var e=ut(this.statements),t=bt;a(e)||(bt=function(n){return e.hasOwnProperty(n.name)?n.name:t(n)});var n="{\n"+this.statements.join("")+"\n}";return bt=t,n},_t=function(e){var t=r(e.substring(1,e.length-1));return new ct(Ft(t.middle))},ht.prototype.toString=function(){for(var e,t=[],n=[],i=0,r=this.statements.length;r>i;++i)e=this.statements[i],e instanceof Q||e instanceof Z?t.push(e):n.push(e);H(t);var o=ut(this.statements);bt=function(e){var t=e.name;return o.hasOwnProperty(t)?t:pt.hasOwnProperty(t)||C.hasOwnProperty(t)||D.hasOwnProperty(t)?"$p."+t:t};var s="// this code was autogenerated from PJS\n(function($p) {\n"+t.join("")+"\n"+n.join("")+"\n})";return bt=null,s},St=function(){var e=f(Dt[0]);return e=e.replace(/\bimport\s+[^;]+;/g,""),new ht(Ft(e,nt,et))};var Nt=St();ft(Nt),dt(Nt);var Ot=Nt.toString();return Ot=Ot.replace(/\s*\n(?:[\t ]*\n)+/g,"\n\n"),Ot=Ot.replace(/__x([0-9A-F]{4})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}),n(Ot,mt)}function g(e,t){var n=new RegExp(/\/\*\s*@pjs\s+((?:[^\*]|\*+[^\*\/])*)\*\//g).exec(e);if(n&&2===n.length)for(var i=[],r=n.splice(1,2)[0].replace(/\{([\s\S]*?)\}/g,function(){return function(e,t){return i.push(t),"{"+(i.length-1)+"}"}}()).replace("\n","").replace("\r","").split(";"),o=function(e){return e.replace(/^\s*["']?/,"").replace(/["']?\s*$/,"")},s=0,a=r.length;a>s;s++){var l=r[s].split("=");if(l&&2===l.length){var u=o(l[0]),c=o(l[1]),h=[];if("preload"===u){h=c.split(",");for(var d=0,p=h.length;p>d;d++){var g=o(h[d]);
t.imageCache.add(g)}}else if("font"===u){h=c.split(",");for(var m=0,v=h.length;v>m;m++){var y=o(h[m]),E=/^\{(\d*?)\}$/.exec(y);f.preloading.add(E?JSON.parse("{"+i[E[1]]+"}"):y)}}else"pauseOnBlur"===u?t.options.pauseOnBlur="true"===c:"globalKeyEvents"===u?t.options.globalKeyEvents="true"===c:"param-"===u.substring(0,6)?t.params[u.substring(6)]=c:t.options[u]=c}}return e}var m=function(){},v=function(){return"console"in e?function(t){e.console.log("Processing.js: "+t)}:m}(),y=function(e){var t=new XMLHttpRequest;if(t.open("GET",e,!1),t.overrideMimeType&&t.overrideMimeType("text/plain"),t.setRequestHeader("If-Modified-Since","Fri, 01 Jan 1960 00:00:00 GMT"),t.send(null),200!==t.status&&0!==t.status)throw"XMLHttpRequest failed, status code "+t.status;return t.responseText},E="document"in this&&!("fake"in this.document);if(t.head=t.head||t.getElementsByTagName("head")[0],t.documentMode>=9&&!t.doctype)throw"The doctype directive is missing. The recommended doctype in Internet Explorer is the HTML5 doctype: <!DOCTYPE html>";var A=r("Float32Array","WebGLFloatArray"),b=r("Int32Array","WebGLIntArray"),w=r("Uint16Array","WebGLUnsignedShortArray"),x=r("Uint8Array","WebGLUnsignedByteArray"),C={X:0,Y:1,Z:2,R:3,G:4,B:5,A:6,U:7,V:8,NX:9,NY:10,NZ:11,EDGE:12,SR:13,SG:14,SB:15,SA:16,SW:17,TX:18,TY:19,TZ:20,VX:21,VY:22,VZ:23,VW:24,AR:25,AG:26,AB:27,DR:3,DG:4,DB:5,DA:6,SPR:28,SPG:29,SPB:30,SHINE:31,ER:32,EG:33,EB:34,BEEN_LIT:35,VERTEX_FIELD_COUNT:36,P2D:1,JAVA2D:1,WEBGL:2,P3D:2,OPENGL:2,PDF:0,DXF:0,OTHER:0,WINDOWS:1,MAXOSX:2,LINUX:3,EPSILON:1e-4,MAX_FLOAT:3.4028235e38,MIN_FLOAT:-3.4028235e38,MAX_INT:2147483647,MIN_INT:-2147483648,PI:n.PI,TWO_PI:2*n.PI,HALF_PI:n.PI/2,THIRD_PI:n.PI/3,QUARTER_PI:n.PI/4,DEG_TO_RAD:n.PI/180,RAD_TO_DEG:180/n.PI,WHITESPACE:" 	\n\r\f ",RGB:1,ARGB:2,HSB:3,ALPHA:4,CMYK:5,TIFF:0,TARGA:1,JPEG:2,GIF:3,BLUR:11,GRAY:12,INVERT:13,OPAQUE:14,POSTERIZE:15,THRESHOLD:16,ERODE:17,DILATE:18,REPLACE:0,BLEND:1,ADD:2,SUBTRACT:4,LIGHTEST:8,DARKEST:16,DIFFERENCE:32,EXCLUSION:64,MULTIPLY:128,SCREEN:256,OVERLAY:512,HARD_LIGHT:1024,SOFT_LIGHT:2048,DODGE:4096,BURN:8192,ALPHA_MASK:4278190080,RED_MASK:16711680,GREEN_MASK:65280,BLUE_MASK:255,CUSTOM:0,ORTHOGRAPHIC:2,PERSPECTIVE:3,POINT:2,POINTS:2,LINE:4,LINES:4,TRIANGLE:8,TRIANGLES:9,TRIANGLE_STRIP:10,TRIANGLE_FAN:11,QUAD:16,QUADS:16,QUAD_STRIP:17,POLYGON:20,PATH:21,RECT:30,ELLIPSE:31,ARC:32,SPHERE:40,BOX:41,GROUP:0,PRIMITIVE:1,GEOMETRY:3,VERTEX:0,BEZIER_VERTEX:1,CURVE_VERTEX:2,BREAK:3,CLOSESHAPE:4,OPEN:1,CLOSE:2,CORNER:0,CORNERS:1,RADIUS:2,CENTER_RADIUS:2,CENTER:3,DIAMETER:3,CENTER_DIAMETER:3,BASELINE:0,TOP:101,BOTTOM:102,NORMAL:1,NORMALIZED:1,IMAGE:2,MODEL:4,SHAPE:5,SQUARE:"butt",ROUND:"round",PROJECT:"square",MITER:"miter",BEVEL:"bevel",AMBIENT:0,DIRECTIONAL:1,SPOT:3,BACKSPACE:8,TAB:9,ENTER:10,RETURN:13,ESC:27,DELETE:127,CODED:65535,SHIFT:16,CONTROL:17,ALT:18,CAPSLK:20,PGUP:33,PGDN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLK:144,META:157,INSERT:155,ARROW:"default",CROSS:"crosshair",HAND:"pointer",MOVE:"move",TEXT:"text",WAIT:"wait",NOCURSOR:"url('data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=='), auto",DISABLE_OPENGL_2X_SMOOTH:1,ENABLE_OPENGL_2X_SMOOTH:-1,ENABLE_OPENGL_4X_SMOOTH:2,ENABLE_NATIVE_FONTS:3,DISABLE_DEPTH_TEST:4,ENABLE_DEPTH_TEST:-4,ENABLE_DEPTH_SORT:5,DISABLE_DEPTH_SORT:-5,DISABLE_OPENGL_ERROR_REPORT:6,ENABLE_OPENGL_ERROR_REPORT:-6,ENABLE_ACCURATE_TEXTURES:7,DISABLE_ACCURATE_TEXTURES:-7,HINT_COUNT:10,SINCOS_LENGTH:720,PRECISIONB:15,PRECISIONF:32768,PREC_MAXVAL:32767,PREC_ALPHA_SHIFT:9,PREC_RED_SHIFT:1,NORMAL_MODE_AUTO:0,NORMAL_MODE_SHAPE:1,NORMAL_MODE_VERTEX:2,MAX_LIGHTS:8},_=function(e){if(e.iterator instanceof Function)return e.iterator();if(!(e instanceof Array))throw"Unable to iterate: "+e;var t=-1;this.hasNext=function(){return++t<e.length},this.next=function(){return e[t]}},F=function(){function e(e){var t=0;this.hasNext=function(){return t<e.length},this.next=function(){return e[t++]},this.remove=function(){e.splice(t,1)}}function t(n){var i;n instanceof t?i=n.toArray():(i=[],"number"==typeof n&&(i.length=n>0?n:0)),this.get=function(e){return i[e]},this.contains=function(e){return this.indexOf(e)>-1},this.indexOf=function(e){for(var t=0,n=i.length;n>t;++t)if(s(e,i[t]))return t;return-1},this.lastIndexOf=function(e){for(var t=i.length-1;t>=0;--t)if(s(e,i[t]))return t;return-1},this.add=function(){if(1===arguments.length)i.push(arguments[0]);else{if(2!==arguments.length)throw"Please use the proper number of parameters.";var e=arguments[0];if("number"!=typeof e)throw typeof e+" is not a number";if(!(e>=0&&e<=i.length))throw e+" is not a valid index";i.splice(e,0,arguments[1])}},this.addAll=function(e,t){var n;if("number"==typeof e){if(0>e||e>i.length)throw"Index out of bounds for addAll: "+e+" greater or equal than "+i.length;for(n=new _(t);n.hasNext();)i.splice(e++,0,n.next())}else for(n=new _(e);n.hasNext();)i.push(n.next())},this.set=function(){if(2!==arguments.length)throw"Please use the proper number of parameters.";var e=arguments[0];if("number"!=typeof e)throw typeof e+" is not a number";if(!(e>=0&&e<i.length))throw e+" is not a valid index.";i.splice(e,1,arguments[1])},this.size=function(){return i.length},this.clear=function(){i.length=0},this.remove=function(e){return"number"==typeof e?i.splice(e,1)[0]:(e=this.indexOf(e),e>-1?(i.splice(e,1),!0):!1)},this.removeAll=function(e){var n,i,r,o=new t;for(o.addAll(this),this.clear(),n=0,i=0;n<o.size();n++)r=o.get(n),e.contains(r)||this.add(i++,r);return this.size()<o.size()?!0:!1},this.isEmpty=function(){return!i.length},this.clone=function(){return new t(this)},this.toArray=function(){return i.slice(0)},this.iterator=function(){return new e(i)}}return t}(),S=function(){function e(){function t(e){var t=o(e)%h.length;return 0>t?h.length+t:t}function n(){if(!(f<=c*h.length)){for(var e=[],n=0;n<h.length;++n)h[n]!==i&&(e=e.concat(h[n]));var r=2*h.length;h=[],h.length=r;for(var o=0;o<e.length;++o){var s=t(e[o].key),a=h[s];a===i&&(h[s]=a=[]),a.push(e[o])}}}function r(e,t){function n(){for(;!a;)if(++s,o>=h.length)a=!0;else{if(!(h[o]===i||s>=h[o].length))return;s=-1,++o}}var r,o=0,s=-1,a=!1;this.hasNext=function(){return!a},this.next=function(){return r=e(h[o][s]),n(),r},this.remove=function(){r!==i&&(t(r),--s,n())},n()}function a(e,t,n){this.clear=function(){d.clear()},this.contains=function(e){return t(e)},this.containsAll=function(e){for(var t=e.iterator();t.hasNext();)if(!this.contains(t.next()))return!1;return!0},this.isEmpty=function(){return d.isEmpty()},this.iterator=function(){return new r(e,n)},this.remove=function(e){return this.contains(e)?(n(e),!0):!1},this.removeAll=function(e){for(var t=e.iterator(),i=!1;t.hasNext();){var r=t.next();this.contains(r)&&(n(r),i=!0)}return!0},this.retainAll=function(e){for(var t=this.iterator(),i=[];t.hasNext();){var r=t.next();e.contains(r)||i.push(r)}for(var o=0;o<i.length;++o)n(i[o]);return i.length>0},this.size=function(){return d.size()},this.toArray=function(){for(var e=[],t=this.iterator();t.hasNext();)e.push(t.next());return e}}function l(e){this._isIn=function(t){return t===d&&e.removed===i},this.equals=function(t){return s(e.key,t.getKey())},this.getKey=function(){return e.key},this.getValue=function(){return e.value},this.hashCode=function(){return o(e.key)},this.setValue=function(t){var n=e.value;return e.value=t,n}}if(1===arguments.length&&arguments[0]instanceof e)return arguments[0].clone();var u=arguments.length>0?arguments[0]:16,c=arguments.length>1?arguments[1]:.75,h=[];h.length=u;var f=0,d=this;this.clear=function(){f=0,h=[],h.length=u},this.clone=function(){var t=new e;return t.putAll(this),t},this.containsKey=function(e){var n=t(e),r=h[n];if(r===i)return!1;for(var o=0;o<r.length;++o)if(s(r[o].key,e))return!0;return!1},this.containsValue=function(e){for(var t=0;t<h.length;++t){var n=h[t];if(n!==i)for(var r=0;r<n.length;++r)if(s(n[r].value,e))return!0}return!1},this.entrySet=function(){return new a(function(e){return new l(e)},function(e){return e instanceof l&&e._isIn(d)},function(e){return d.remove(e.getKey())})},this.get=function(e){var n=t(e),r=h[n];if(r===i)return null;for(var o=0;o<r.length;++o)if(s(r[o].key,e))return r[o].value;return null},this.isEmpty=function(){return 0===f},this.keySet=function(){return new a(function(e){return e.key},function(e){return d.containsKey(e)},function(e){return d.remove(e)})},this.values=function(){return new a(function(e){return e.value},function(e){return d.containsValue(e)},function(e){return d.removeByValue(e)})},this.put=function(e,r){var o=t(e),a=h[o];if(a===i)return++f,h[o]=[{key:e,value:r}],n(),null;for(var l=0;l<a.length;++l)if(s(a[l].key,e)){var u=a[l].value;return a[l].value=r,u}return++f,a.push({key:e,value:r}),n(),null},this.putAll=function(e){for(var t=e.entrySet().iterator();t.hasNext();){var n=t.next();this.put(n.getKey(),n.getValue())}},this.remove=function(e){var n=t(e),r=h[n];if(r===i)return null;for(var o=0;o<r.length;++o)if(s(r[o].key,e)){--f;var a=r[o].value;return r[o].removed=!0,r.length>1?r.splice(o,1):h[n]=i,a}return null},this.removeByValue=function(e){var t,n,i,r;for(t in h)if(h.hasOwnProperty(t))for(n=0,i=h[t].length;i>n;n++)if(r=h[t][n],r.value===e)return h[t].splice(n,1),!0;return!1},this.size=function(){return f}}return e}(),T=function(){function e(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function t(e){return function(t,n){var i=t.get();return i[e](n),i}}e.dist=function(e,t){return e.dist(t)},e.dot=function(e,t){return e.dot(t)},e.cross=function(e,t){return e.cross(t)},e.angleBetween=function(e,t){return n.acos(e.dot(t)/(e.mag()*t.mag()))},e.prototype={set:function(e,t,n){1===arguments.length?this.set(e.x||e[0]||0,e.y||e[1]||0,e.z||e[2]||0):(this.x=e,this.y=t,this.z=n)},get:function(){return new e(this.x,this.y,this.z)},mag:function(){var e=this.x,t=this.y,i=this.z;return n.sqrt(e*e+t*t+i*i)},add:function(e,t,n){1===arguments.length?(this.x+=e.x,this.y+=e.y,this.z+=e.z):(this.x+=e,this.y+=t,this.z+=n)},sub:function(e,t,n){1===arguments.length?(this.x-=e.x,this.y-=e.y,this.z-=e.z):(this.x-=e,this.y-=t,this.z-=n)},mult:function(e){"number"==typeof e?(this.x*=e,this.y*=e,this.z*=e):(this.x*=e.x,this.y*=e.y,this.z*=e.z)},div:function(e){"number"==typeof e?(this.x/=e,this.y/=e,this.z/=e):(this.x/=e.x,this.y/=e.y,this.z/=e.z)},dist:function(e){var t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n.sqrt(t*t+i*i+r*r)},dot:function(e,t,n){return 1===arguments.length?this.x*e.x+this.y*e.y+this.z*e.z:this.x*e+this.y*t+this.z*n},cross:function(t){var n=this.x,i=this.y,r=this.z;return new e(i*t.z-t.y*r,r*t.x-t.z*n,n*t.y-t.x*i)},normalize:function(){var e=this.mag();e>0&&this.div(e)},limit:function(e){this.mag()>e&&(this.normalize(),this.mult(e))},heading2D:function(){return-n.atan2(-this.y,this.x)},toString:function(){return"["+this.x+", "+this.y+", "+this.z+"]"},array:function(){return[this.x,this.y,this.z]}};for(var i in e.prototype)e.prototype.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&(e[i]=t(i));return e}();a.prototype=C;var D=new a;D.ArrayList=F,D.HashMap=S,D.PVector=T,D.ObjectIterator=_,D.PConstants=C,D.defineProperty=function(e,t,n){"defineProperty"in Object?Object.defineProperty(e,t,n):(n.hasOwnProperty("get")&&e.__defineGetter__(t,n.get),n.hasOwnProperty("set")&&e.__defineSetter__(t,n.set))},D.extendClassChain=function(e){for(var t=[e],n=e.$upcast;n;n=n.$upcast)u(n,e),t.push(n),e=n;for(;t.length>0;)t.pop().$self=e},D.extendStaticMembers=function(e,t){u(e,t)},D.extendInterfaceMembers=function(e,t){u(e,t)},D.addMethod=function(e,t,n,i){var r=e[t];if(r||i){var o=n.length;if("$overloads"in r)r.$overloads[o]=n;else{var s=function(){var e=s.$overloads[arguments.length]||("$methodArgsIndex"in s&&arguments.length>s.$methodArgsIndex?s.$overloads[s.$methodArgsIndex]:null)||s.$defaultOverload;return e.apply(this,arguments)},a=[];r&&(a[r.length]=r),a[o]=n,s.$overloads=a,s.$defaultOverload=r||n,i&&(s.$methodArgsIndex=o),s.name=t,e[t]=s}}else e[t]=n},D.createJavaArray=function(e,t){var n=null,i=null;if("string"==typeof e&&("boolean"===e?i=!1:c(e)&&(i=0)),"number"==typeof t[0]){var r=0|t[0];if(t.length<=1){n=[],n.length=r;for(var o=0;r>o;++o)n[o]=i}else{n=[];for(var s=t.slice(1),a=0;r>a;++a)n.push(D.createJavaArray(e,s))}}return n};var R={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};!function(e){function t(e){return function(){throw"Processing.js does not support "+e+"."}}for(var n,i,r="open() createOutput() createInput() BufferedReader selectFolder() dataPath() createWriter() selectOutput() beginRecord() saveStream() endRecord() selectInput() saveBytes() createReader() beginRaw() endRaw() PrintWriter delay()".split(" "),o=r.length;o--;)n=r[o],i=n.replace("()",""),e[i]=t(n)}(D),D.defineProperty(D,"screenWidth",{get:function(){return e.innerWidth}}),D.defineProperty(D,"screenHeight",{get:function(){return e.innerHeight}}),D.defineProperty(D,"online",{get:function(){return!0}});var k=[],B={},M=function(e){k.splice(B[e],1),delete B[e]},L=function(e){e.externals.canvas.id!==i&&e.externals.canvas.id.length||(e.externals.canvas.id="__processing"+k.length),B[e.externals.canvas.id]=k.length,k.push(e)};f.prototype.caching=!0,f.prototype.getCSSDefinition=function(e,t){e===i&&(e=this.size+"px"),t===i&&(t=this.leading+"px");var n=[this.style,"normal",this.weight,e+"/"+t,this.family];return n.join(" ")},f.prototype.measureTextWidth=function(e){return this.context2d.measureText(e).width},f.prototype.measureTextWidthFallback=function(e){var n=t.createElement("canvas"),i=n.getContext("2d");return i.font=this.css,i.measureText(e).width},f.PFontCache={length:0},f.get=function(e,t){t=(0|10*t+.5)/10;var n=f.PFontCache,i=e+"/"+t;if(!n[i]){if(n[i]=new f(e,t),n.length++,50===n.length){f.prototype.measureTextWidth=f.prototype.measureTextWidthFallback,f.prototype.caching=!1;var r;for(r in n)"length"!==r&&(n[r].context2d=null);return new f(e,t)}if(400===n.length)return f.PFontCache={},f.get=f.getFallback,new f(e,t)}return n[i]},f.getFallback=function(e,t){return new f(e,t)},f.list=function(){return["sans-serif","serif","monospace","fantasy","cursive"]},f.preloading={template:{},initialized:!1,initialize:function(){var e=function(){var e="#E3KAI2wAgT1MvMg7Eo3VmNtYX7ABi3CxnbHlm7Abw3kaGVhZ7ACs3OGhoZWE7A53CRobXR47AY3AGbG9jYQ7G03Bm1heH7ABC3CBuYW1l7Ae3AgcG9zd7AI3AE#B3AQ2kgTY18PPPUACwAg3ALSRoo3#yld0xg32QAB77#E777773B#E3C#I#Q77773E#Q7777777772CMAIw7AB77732B#M#Q3wAB#g3B#E#E2BB//82BB////w#B7#gAEg3E77x2B32B#E#Q#MTcBAQ32gAe#M#QQJ#E32M#QQJ#I#g32Q77#",t=function(e){return"AAAAAAAA".substr(~~e?7-e:6)};return e.replace(/[#237]/g,t)},n=t.createElement("style");n.setAttribute("type","text/css"),n.innerHTML='@font-face {\n  font-family: "PjsEmptyFont";\n  src: url(\'data:application/x-font-ttf;base64,'+e()+"')\n"+"       format('truetype');\n"+"}",t.head.appendChild(n);var i=t.createElement("span");i.style.cssText='position: absolute; top: 0; left: 0; opacity: 0; font-family: "PjsEmptyFont", fantasy;',i.innerHTML="AAAAAAAA",t.body.appendChild(i),this.template=i,this.initialized=!0},getElementWidth:function(e){return t.defaultView.getComputedStyle(e,"").getPropertyValue("width")},timeAttempted:0,pending:function(e){this.initialized||this.initialize();for(var n,i,r=this.getElementWidth(this.template),o=0;o<this.fontList.length;o++){if(n=this.fontList[o],i=this.getElementWidth(n),this.timeAttempted<4e3&&i===r)return this.timeAttempted+=e,!0;t.body.removeChild(n),this.fontList.splice(o--,1),this.timeAttempted=0}return 0===this.fontList.length?!1:!0},fontList:[],addedList:{},add:function(e){this.initialized||this.initialize();var n="object"==typeof e?e.fontFace:e,i="object"==typeof e?e.url:e;if(!this.addedList[n]){var r=t.createElement("style");r.setAttribute("type","text/css"),r.innerHTML="@font-face{\n  font-family: '"+n+"';\n  src:  url('"+i+"');\n}\n",t.head.appendChild(r),this.addedList[n]=!0;var o=t.createElement("span");o.style.cssText="position: absolute; top: 0; left: 0; opacity: 0;",o.style.fontFamily='"'+n+'", "PjsEmptyFont", fantasy',o.innerHTML="AAAAAAAA",t.body.appendChild(o),this.fontList.push(o)}}},D.PFont=f;var P=this.Processing=function(r,s){function a(e){P.debug("Unimplemented - "+e)}function l(e,t,n,r){var o=Jn.locations[e];o===i&&(o=_t.getUniformLocation(t,n),Jn.locations[e]=o),null!==o&&(4===r.length?_t.uniform4fv(o,r):3===r.length?_t.uniform3fv(o,r):2===r.length?_t.uniform2fv(o,r):_t.uniform1f(o,r))}function u(e,t,n,r){var o=Jn.locations[e];o===i&&(o=_t.getUniformLocation(t,n),Jn.locations[e]=o),null!==o&&(4===r.length?_t.uniform4iv(o,r):3===r.length?_t.uniform3iv(o,r):2===r.length?_t.uniform2iv(o,r):_t.uniform1i(o,r))}function c(e,t,n,r,o){var s=Jn.locations[e];s===i&&(s=_t.getUniformLocation(t,n),Jn.locations[e]=s),-1!==s&&(16===o.length?_t.uniformMatrix4fv(s,r,o):9===o.length?_t.uniformMatrix3fv(s,r,o):_t.uniformMatrix2fv(s,r,o))}function h(e,t,n,r,o){var s=Jn.attributes[e];s===i&&(s=_t.getAttribLocation(t,n),Jn.attributes[e]=s),-1!==s&&(_t.bindBuffer(_t.ARRAY_BUFFER,o),_t.vertexAttribPointer(s,r,_t.FLOAT,!1,0,0),_t.enableVertexAttribArray(s))}function d(e,t,n){var r=Jn.attributes[e];r===i&&(r=_t.getAttribLocation(t,n),Jn.attributes[e]=r),-1!==r&&_t.disableVertexAttribArray(r)}function p(e,t,i,r){var o,s,a,l;if(3===Wn){var u=Ct.color.toRGB(e,t,i);o=u[0],s=u[1],a=u[2]}else o=n.round(255*(e/On)),s=n.round(255*(t/Hn)),a=n.round(255*(i/jn));return l=n.round(255*(r/Nn)),o=0>o?0:o,s=0>s?0:s,a=0>a?0:a,l=0>l?0:l,o=o>255?255:o,s=s>255?255:s,a=a>255?255:a,l=l>255?255:l,4278190080&l<<24|16711680&o<<16|65280&s<<8|255&a}function g(e,t){var i;return 4278190080&e?(i=n.round(255*(t/Nn)),i=i>255?255:i,i=0>i?0:i,e-(4278190080&e)+(4278190080&i<<24)):1===Wn?p(e,e,e,t):3===Wn?p(0,0,e/On*jn,t):void 0}function v(e){if(On>=e&&e>=0){if(1===Wn)return p(e,e,e,Nn);if(3===Wn)return p(0,0,e/On*jn,Nn)}return e?(e>2147483647&&(e-=4294967296),e):void 0}function E(e){var t,n,i;t=(255&e>>16)/255,n=(255&e>>8)/255,i=(255&e)/255;var r,o,s=Ct.max(Ct.max(t,n),i),a=Ct.min(Ct.min(t,n),i);return a===s?[0,0,s*jn]:(o=(s-a)/s,r=t===s?(n-i)/(s-a):n===s?2+(i-t)/(s-a):4+(t-n)/(s-a),r/=6,0>r?r+=1:r>1&&(r-=1),[r*On,o*Hn,s*jn])}function _(){_t.save()}function F(){_t.restore(),gn=!0,hn=!0}function S(){var e=(Date.now()-qn)/1e3;Xn++;var t=Xn/e;e>.5&&(qn=Date.now(),Xn=0,Ct.__frameRate=t),Ct.frameCount++}function k(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n),Sr.push({elem:e,type:t,fn:n})}function B(e){var t=e.elem,n=e.type,i=e.fn;t.removeEventListener?t.removeEventListener(n,i,!1):t.detachEvent&&t.detachEvent("on"+n,i)}function I(e,t,r,o,s,a){var l=0>e?r:t,u=0===s,c=s===i||0>s?0:s,h=n.abs(e);if(u)for(c=1,h*=10;n.abs(n.round(h)-h)>1e-6&&7>c;)++c,h*=10;else 0!==c&&(h*=n.pow(10,c));var f,d=2*h;if(n.floor(h)===h)f=h;else if(n.floor(d)===d){var p=n.floor(h);f=p+p%2}else f=n.round(h);for(var g="",m=o+c;m>0||f>0;)m--,g=""+f%10+g,f=n.floor(f/10);if(a!==i)for(var v=g.length-3-c;v>0;)g=g.substring(0,v)+a+g.substring(v),v-=3;return c>0?l+g.substring(0,g.length-c)+"."+g.substring(g.length-c,g.length):l+g}function $(e,t,n,i,r,o){if(e instanceof Array){for(var s=[],a=0,l=e.length;l>a;a++)s.push(I(e[a],t,n,i,r,o));return s}return I(e,t,n,i,r,o)}function N(e){var t=parseInt("0x"+e,16);return t>2147483647&&(t-=4294967296),t}function O(e){return Array.prototype.slice.call(e,1)}function H(e){return"number"==typeof e?0!==e:"boolean"==typeof e?e:"string"==typeof e?"true"===e.toLowerCase():e instanceof vr?49===e.code||84===e.code||116===e.code:void 0}function j(e){return"number"==typeof e?e:"boolean"==typeof e?e?1:0:"string"==typeof e?parseFloat(e):e instanceof vr?e.code:void 0}function z(e,t){if("number"==typeof e)return 4294967295&e;if("boolean"==typeof e)return e?1:0;if("string"==typeof e){var n=parseInt(e,t||10);return 4294967295&n}return e instanceof vr?e.code:void 0}function U(e,t){var n=e||362436069,i=t||521288629,r=function(){return n=4294967295&36969*(65535&n)+(n>>>16),i=4294967295&18e3*(65535&i)+(i>>>16),4294967295&((65535&n)<<16|65535&i)};this.nextDouble=function(){var e=r()/4294967296;return 0>e?1+e:e},this.nextInt=r}function W(e){function t(e,t,n,i){var r=15&e,o=8>r?t:n,s=4>r?n:12===r||14===r?t:i;return(0===(1&r)?o:-o)+(0===(2&r)?s:-s)}function r(e,t,n){var i=0===(1&e)?t:n;return 0===(2&e)?-i:i}function o(e,t){return 0===(1&e)?-t:t}function s(e,t,n){return t+e*(n-t)}var a,l,u=e!==i?new U(e):U.createRandomized(),c=new x(512);for(a=0;256>a;++a)c[a]=a;for(a=0;256>a;++a){var h=c[l=255&u.nextInt()];c[l]=c[a],c[a]=h}for(a=0;256>a;++a)c[a+256]=c[a];this.noise3d=function(e,i,r){var o=255&n.floor(e),a=255&n.floor(i),l=255&n.floor(r);e-=n.floor(e),i-=n.floor(i),r-=n.floor(r);var u=(3-2*e)*e*e,h=(3-2*i)*i*i,f=(3-2*r)*r*r,d=c[o]+a,p=c[d]+l,g=c[d+1]+l,m=c[o+1]+a,v=c[m]+l,y=c[m+1]+l;return s(f,s(h,s(u,t(c[p],e,i,r),t(c[v],e-1,i,r)),s(u,t(c[g],e,i-1,r),t(c[y],e-1,i-1,r))),s(h,s(u,t(c[p+1],e,i,r-1),t(c[v+1],e-1,i,r-1)),s(u,t(c[g+1],e,i-1,r-1),t(c[y+1],e-1,i-1,r-1))))},this.noise2d=function(e,t){var i=255&n.floor(e),o=255&n.floor(t);e-=n.floor(e),t-=n.floor(t);var a=(3-2*e)*e*e,l=(3-2*t)*t*t,u=c[i]+o,h=c[i+1]+o;return s(l,s(a,r(c[u],e,t),r(c[h],e-1,t)),s(a,r(c[u+1],e,t-1),r(c[h+1],e-1,t-1)))},this.noise1d=function(e){var t=255&n.floor(e);e-=n.floor(e);var i=(3-2*e)*e*e;return s(i,o(c[t],e),o(c[t+1],e-1))}}function G(){ln&&(hn&&(_t.fillStyle=Ct.color.toString(cn),hn=!1),_t.fill())}function V(){fn&&(gn&&(_t.strokeStyle=Ct.color.toString(pn),gn=!1),_t.stroke())}function Y(){G(),V(),_t.closePath()}function q(e,n,r){var o=zr.shift();o===i&&(o={},o.canvas=t.createElement("canvas"),o.context=o.canvas.getContext("2d")),zr.push(o);var s=o.canvas,a=o.context,l=n||e.width,u=r||e.height;return s.width=l,s.height=u,e?"data"in e?a.putImageData(e,0,0):(a.clearRect(0,0,l,u),a.drawImage(e,0,0,l,u)):a.clearRect(0,0,l,u),o}function X(e){return{getLength:function(e){return function(){if(e.isRemote)throw"Image is loaded remotely. Cannot get length.";return e.imageData.data.length?e.imageData.data.length/4:0}}(e),getPixel:function(e){return function(t){var n=4*t,i=e.imageData.data;if(e.isRemote)throw"Image is loaded remotely. Cannot get pixels.";return(255&i[n+3])<<24|(255&i[n])<<16|(255&i[n+1])<<8|255&i[n+2]}}(e),setPixel:function(e){return function(t,n){var i=4*t,r=e.imageData.data;if(e.isRemote)throw"Image is loaded remotely. Cannot set pixel.";r[i+0]=255&n>>16,r[i+1]=255&n>>8,r[i+2]=255&n,r[i+3]=255&n>>24,e.__isDirty=!0}}(e),toArray:function(e){return function(){var t=[],n=e.imageData.data,i=e.width*e.height;if(e.isRemote)throw"Image is loaded remotely. Cannot get pixels.";for(var r=0,o=0;i>r;r++,o+=4)t.push((255&n[o+3])<<24|(255&n[o])<<16|(255&n[o+1])<<8|255&n[o+2]);return t}}(e),set:function(e){return function(t){var n,i,r;if(this.isRemote)throw"Image is loaded remotely. Cannot set pixels.";i=e.imageData.data;for(var o=0,s=t.length;s>o;o++)r=t[o],n=4*o,i[n+0]=255&r>>16,i[n+1]=255&r>>8,i[n+2]=255&r,i[n+3]=255&r>>24;e.__isDirty=!0}}(e)}}function J(e,t){var n;if(e>=Ct.width||0>e||0>t||t>=Ct.height)return 0;if(ci){var i=4*((0|e)+Ct.width*(0|t));return n=Ct.imageData.data,(255&n[i+3])<<24|(255&n[i])<<16|(255&n[i+1])<<8|255&n[i+2]}return n=Ct.toImageData(0|e,0|t,1,1).data,(255&n[3])<<24|(255&n[0])<<16|(255&n[1])<<8|255&n[2]}function K(e,t,n){if(n.isRemote)throw"Image is loaded remotely. Cannot get x,y.";var i=4*t*n.width+4*e,r=n.imageData.data;return(255&r[i+3])<<24|(255&r[i])<<16|(255&r[i+1])<<8|255&r[i+2]}function Z(e,t,n,i){var r=new Ur(n,i,2);return r.fromImageData(Ct.toImageData(e,t,n,i)),r}function Q(e,t,i,r,o){if(o.isRemote)throw"Image is loaded remotely. Cannot get x,y,w,h.";for(var s=new Ur(i,r,2),a=s.imageData.data,l=o.width,u=o.height,c=o.imageData.data,h=n.max(0,-t),f=n.max(0,-e),d=n.min(r,u-t),p=n.min(i,l-e),g=h;d>g;++g)for(var m=4*((t+g)*l+(e+f)),v=4*(g*i+f),y=f;p>y;++y)a[v++]=c[m++],a[v++]=c[m++],a[v++]=c[m++],a[v++]=c[m++];return s.__isDirty=!0,s}function et(){ci&&(_t=tn,ci=!1,Ct.updatePixels())}function tt(){function e(e,t){function n(){et(),_t[t].apply(_t,arguments)}e[t]=n}function t(e,t){function n(){return et(),_t[t]}function i(e){et(),_t[t]=e}Ct.defineProperty(e,t,{get:n,set:i})}for(var n in _t)"function"==typeof _t[n]?e(this,n):t(this,n)}function nt(){ci||(Ct.loadPixels(),null===ui&&(tn=_t,ui=new tt),ci=!0,_t=ui,nn=0)}function it(e,t,n){e<Ct.width&&e>=0&&t>=0&&t<Ct.height&&(nt(),Ct.pixels.setPixel((0|e)+Ct.width*(0|t),n),++nn>hi&&et())}function rt(e,t,n,i){if(i.isRemote)throw"Image is loaded remotely. Cannot set x,y.";var r=Ct.color.toArray(n),o=4*t*i.width+4*e,s=i.imageData.data;s[o]=r[0],s[o+1]=r[1],s[o+2]=r[2],s[o+3]=r[3]}function ot(e){return e instanceof String?e:"number"==typeof e?e===(0|e)?e.toString():Ct.nf(e,0,3):null===e||e===i?"":e.toString()}function st(e,t,n,i){var r,o;e.indexOf("\n")<0?(r=[e],o=1):(r=e.split(/\r?\n/g),o=r.length);var s=0;101===ti?s=oi+si:3===ti?s=oi/2-(o-1)*ai/2:102===ti&&(s=-(si+(o-1)*ai));for(var a=0;o>a;++a){var l=r[a];St.text$line(l,t,n+s,i,ei),s+=ai}}function at(e,t,i,r,o,s){if(0!==e.length&&0!==r&&0!==o&&!(ri>o)){for(var a=-1,l=0,u=0,c=[],h=0,f=e.length;f>h;h++){var d=e[h],p=" "===d,g=li.measureTextWidth(d);if("\n"!==d&&r>=u+g)p&&(a=h),u+=g;else{if(a+1===l){if(!(h>0))return;a=h}"\n"===d?(c.push({text:e.substring(l,h),width:u}),l=h+1):(c.push({text:e.substring(l,a+1),width:u}),l=a+1),u=0,h=l-1}}f>l&&c.push({text:e.substring(l),width:u});var m=1,v=oi;3===ei?m=r/2:39===ei&&(m=r);var y=c.length,E=n.min(y,n.floor(o/ai));101===ti?v=oi+si:3===ti?v=o/2-ai*(E/2-1):102===ti&&(v=si+ai);var A,b,w;for(A=0;y>A&&(w=A*ai,!(v+w>o-si));A++)b=c[A],St.text$line(b.text,t+m,i+v+w,s,ei)}}function lt(e){St="3D"===e?new pr:"2D"===e?new dr:new gr;for(var t in gr.prototype)gr.prototype.hasOwnProperty(t)&&t.indexOf("$")<0&&(Ct[t]=St[t]);St.$init()}function ut(e){return function(){return lt("2D"),St[e].apply(this,arguments)}}function ct(t){var n=t,i=0,r=0;if(Ct.pmouseX=Ct.mouseX,Ct.pmouseY=Ct.mouseY,n.offsetParent)do i+=n.offsetLeft,r+=n.offsetTop;while(n=n.offsetParent);n=t;do i-=n.scrollLeft||0,r-=n.scrollTop||0;while(n=n.parentNode);return i+=rn,r+=on,i+=sn,r+=an,i+=e.pageXOffset,r+=e.pageYOffset,{X:i,Y:r}}function ht(e,t){var n=ct(e,t);Ct.mouseX=t.pageX-n.X,Ct.mouseY=t.pageY-n.Y}function ft(e){var t,n=ct(e.changedTouches[0].target,e.changedTouches[0]);for(t=0;t<e.touches.length;t++){var i=e.touches[t];i.offsetX=i.pageX-n.X,i.offsetY=i.pageY-n.Y}for(t=0;t<e.targetTouches.length;t++){var r=e.targetTouches[t];r.offsetX=r.pageX-n.X,r.offsetY=r.pageY-n.Y}for(t=0;t<e.changedTouches.length;t++){var o=e.changedTouches[t];o.offsetX=o.pageX-n.X,o.offsetY=o.pageY-n.Y}return e}function dt(e){var t=e.which||e.keyCode;switch(t){case 13:return 10;case 91:case 93:case 224:return 157;case 57392:return 17;case 46:return 127;case 45:return 155}return t}function pt(e){var t=e.which||e.keyCode,n=e.shiftKey||e.ctrlKey||e.altKey||e.metaKey;switch(t){case 13:t=n?13:10;break;case 8:t=n?127:8}return new vr(t)}function gt(e){return"function"==typeof e.preventDefault?e.preventDefault():"function"==typeof e.stopPropagation&&e.stopPropagation(),!1}function mt(){var e;for(e in fi)if(fi.hasOwnProperty(e))return Ct.__keyPressed=!0,void 0;Ct.__keyPressed=!1}function vt(){Ct.__keyPressed=!1,fi=[],di=null}function yt(e,t){fi[e]=t,di=null,Ct.key=t,Ct.keyCode=e,Ct.keyPressed(),Ct.keyCode=0,Ct.keyTyped(),mt()}function Et(e){var t=dt(e);if(127===t)return yt(t,new vr(127)),void 0;if(pi.indexOf(t)<0)return di=t,void 0;var n=new vr(65535);return Ct.key=n,Ct.keyCode=t,fi[t]=n,Ct.keyPressed(),di=null,mt(),gt(e)}function At(e){if(null!==di){var t=di,n=pt(e);return yt(t,n),gt(e)}}function bt(e){var t=dt(e),n=fi[t];n!==i&&(Ct.key=n,Ct.keyCode=t,Ct.keyReleased(),delete fi[t],mt())}if(!(this instanceof P))throw"called Processing constructor as if it were a function: missing 'new'.";var wt,xt=r===i&&s===i;if(wt=xt?t.createElement("canvas"):"string"==typeof r?t.getElementById(r):r,!(wt instanceof HTMLCanvasElement))throw"called Processing constructor without passing canvas element reference or id.";var Ct=this;Ct.externals={canvas:wt,context:i,sketch:i},Ct.name="Processing.js Instance",Ct.use3DContext=!1,Ct.focused=!1,Ct.breakShape=!1,Ct.glyphTable={},Ct.pmouseX=0,Ct.pmouseY=0,Ct.mouseX=0,Ct.mouseY=0,Ct.mouseButton=0,Ct.mouseScroll=0,Ct.mouseClicked=i,Ct.mouseDragged=i,Ct.mouseMoved=i,Ct.mousePressed=i,Ct.mouseReleased=i,Ct.mouseScrolled=i,Ct.mouseOver=i,Ct.mouseOut=i,Ct.touchStart=i,Ct.touchEnd=i,Ct.touchMove=i,Ct.touchCancel=i,Ct.key=i,Ct.keyCode=i,Ct.keyPressed=m,Ct.keyReleased=m,Ct.keyTyped=m,Ct.draw=i,Ct.setup=i,Ct.__mousePressed=!1,Ct.__keyPressed=!1,Ct.__frameRate=60,Ct.frameCount=0,Ct.width=100,Ct.height=100;var _t,Ft,St,Tt,Dt,Rt,kt,Bt,Mt,Lt,Pt,It,$t,Nt,Ot,Ht,jt,zt,Ut,Wt,Gt,Vt,Yt,qt,Xt,Jt,Kt,Zt,Qt,en,tn,nn,rn,on,sn,an,ln=!0,un=[1,1,1,1],cn=4294967295,hn=!0,fn=!0,dn=[0,0,0,1],pn=4278190080,gn=!0,mn=1,vn=!1,yn=!1,En=!0,An=0,bn=0,wn=3,xn=0,Cn=0,_n=0,Fn=0,Sn=60,Tn=1e3/Sn,Dn="default",Rn=wt.style.cursor,kn=20,Bn=[],Mn=0,Ln=20,Pn=!1,In=-3355444,$n=20,Nn=255,On=255,Hn=255,jn=255,zn=0,Un=0,Wn=1,Gn=null,Vn=null,Yn=Date.now(),qn=Yn,Xn=0,Jn={attributes:{},locations:{}},Kn={width:0,height:0},Zn=2,Qn=!1,ei=37,ti=0,ni=4,ii="Arial",ri=12,oi=9,si=2,ai=14,li=f.get(ii,ri),ui=null,ci=!1,hi=1e3,fi=[],di=null,pi=[16,17,18,20,33,34,35,36,37,38,39,40,144,155,112,113,114,115,116,117,118,119,120,121,122,123,157];t.defaultView&&t.defaultView.getComputedStyle&&(rn=parseInt(t.defaultView.getComputedStyle(wt,null).paddingLeft,10)||0,on=parseInt(t.defaultView.getComputedStyle(wt,null).paddingTop,10)||0,sn=parseInt(t.defaultView.getComputedStyle(wt,null).borderLeftWidth,10)||0,an=parseInt(t.defaultView.getComputedStyle(wt,null).borderTopWidth,10)||0);var gi,mi,vi,yi,Ei,Ai,bi,wi,xi,Ci=0,_i=0,Fi=0,Si=[],Ti=[],Di=[],Ri=new A(720),ki=new A(720),Bi=!1,Mi=!1,Li=60*(n.PI/180),Pi=Ct.width/2,Ii=Ct.height/2,$i=Ii/n.tan(Li/2),Ni=$i/10,Oi=10*$i,Hi=Ct.width/Ct.height,ji=[],zi=[],Ui=0,Wi=!1,Gi=!1,Vi=!0,Yi=0,qi=[],Xi=new A([.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5]),Ji=new A([.5,.5,.5,.5,-.5,.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5]),Ki=new A([0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]),Zi=new A([0,0,0,0,1,0,1,1,0,1,0,0]),Qi=new A([0,0,1,0,0,1,0,0,1,0,0,1]),er="varying vec4 vFrontColor;attribute vec3 aVertex;attribute vec4 aColor;uniform mat4 uView;uniform mat4 uProjection;uniform float uPointSize;void main(void) {  vFrontColor = aColor;  gl_PointSize = uPointSize;  gl_Position = uProjection * uView * vec4(aVertex, 1.0);}",tr="#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec4 vFrontColor;uniform bool uSmooth;void main(void){  if(uSmooth == true){    float dist = distance(gl_PointCoord, vec2(0.5));    if(dist > 0.5){      discard;    }  }  gl_FragColor = vFrontColor;}",nr="varying vec4 vFrontColor;attribute vec3 aVertex;attribute vec2 aTextureCoord;uniform vec4 uColor;uniform mat4 uModel;uniform mat4 uView;uniform mat4 uProjection;uniform float uPointSize;varying vec2 vTextureCoord;void main(void) {  gl_PointSize = uPointSize;  vFrontColor = uColor;  gl_Position = uProjection * uView * uModel * vec4(aVertex, 1.0);  vTextureCoord = aTextureCoord;}",ir="#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec4 vFrontColor;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform int uIsDrawingText;uniform bool uSmooth;void main(void){  if(uSmooth == true){    float dist = distance(gl_PointCoord, vec2(0.5));    if(dist > 0.5){      discard;    }  }  if(uIsDrawingText == 1){    float alpha = texture2D(uSampler, vTextureCoord).a;    gl_FragColor = vec4(vFrontColor.rgb * alpha, alpha);  }  else{    gl_FragColor = vFrontColor;  }}",rr=/Windows/.test(navigator.userAgent),or="varying vec4 vFrontColor;attribute vec3 aVertex;attribute vec3 aNormal;attribute vec4 aColor;attribute vec2 aTexture;varying   vec2 vTexture;uniform vec4 uColor;uniform bool uUsingMat;uniform vec3 uSpecular;uniform vec3 uMaterialEmissive;uniform vec3 uMaterialAmbient;uniform vec3 uMaterialSpecular;uniform float uShininess;uniform mat4 uModel;uniform mat4 uView;uniform mat4 uProjection;uniform mat4 uNormalTransform;uniform int uLightCount;uniform vec3 uFalloff;struct Light {  int type;  vec3 color;  vec3 position;  vec3 direction;  float angle;  vec3 halfVector;  float concentration;};uniform Light uLights0;uniform Light uLights1;uniform Light uLights2;uniform Light uLights3;uniform Light uLights4;uniform Light uLights5;uniform Light uLights6;uniform Light uLights7;Light getLight(int index){  if(index == 0) return uLights0;  if(index == 1) return uLights1;  if(index == 2) return uLights2;  if(index == 3) return uLights3;  if(index == 4) return uLights4;  if(index == 5) return uLights5;  if(index == 6) return uLights6;  return uLights7;}void AmbientLight( inout vec3 totalAmbient, in vec3 ecPos, in Light light ) {  float d = length( light.position - ecPos );  float attenuation = 1.0 / ( uFalloff[0] + ( uFalloff[1] * d ) + ( uFalloff[2] * d * d ));  totalAmbient += light.color * attenuation;}void DirectionalLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {  float powerFactor = 0.0;  float nDotVP = max(0.0, dot( vertNormal, normalize(-light.position) ));  float nDotVH = max(0.0, dot( vertNormal, normalize(-light.position-normalize(ecPos) )));  if( nDotVP != 0.0 ){    powerFactor = pow( nDotVH, uShininess );  }  col += light.color * nDotVP;  spec += uSpecular * powerFactor;}void PointLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {  float powerFactor;   vec3 VP = light.position - ecPos;  float d = length( VP );   VP = normalize( VP );  float attenuation = 1.0 / ( uFalloff[0] + ( uFalloff[1] * d ) + ( uFalloff[2] * d * d ));  float nDotVP = max( 0.0, dot( vertNormal, VP ));  vec3 halfVector = normalize( VP - normalize(ecPos) );  float nDotHV = max( 0.0, dot( vertNormal, halfVector ));  if( nDotVP == 0.0 ) {    powerFactor = 0.0;  }  else {    powerFactor = pow( nDotHV, uShininess );  }  spec += uSpecular * powerFactor * attenuation;  col += light.color * nDotVP * attenuation;}void SpotLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {  float spotAttenuation;  float powerFactor = 0.0;  vec3 VP = light.position - ecPos;  vec3 ldir = normalize( -light.direction );  float d = length( VP );  VP = normalize( VP );  float attenuation = 1.0 / ( uFalloff[0] + ( uFalloff[1] * d ) + ( uFalloff[2] * d * d ) );  float spotDot = dot( VP, ldir );"+(rr?"  spotAttenuation = 1.0; ":"  if( spotDot > cos( light.angle ) ) {    spotAttenuation = pow( spotDot, light.concentration );  }  else{    spotAttenuation = 0.0;  }  attenuation *= spotAttenuation;")+"  float nDotVP = max( 0.0, dot( vertNormal, VP ) );"+"  vec3 halfVector = normalize( VP - normalize(ecPos) );"+"  float nDotHV = max( 0.0, dot( vertNormal, halfVector ) );"+"  if( nDotVP != 0.0 ) {"+"    powerFactor = pow( nDotHV, uShininess );"+"  }"+"  spec += uSpecular * powerFactor * attenuation;"+"  col += light.color * nDotVP * attenuation;"+"}"+"void main(void) {"+"  vec3 finalAmbient = vec3( 0.0 );"+"  vec3 finalDiffuse = vec3( 0.0 );"+"  vec3 finalSpecular = vec3( 0.0 );"+"  vec4 col = uColor;"+"  if ( uColor[0] == -1.0 ){"+"    col = aColor;"+"  }"+"  vec3 norm = normalize(vec3( uNormalTransform * vec4( aNormal, 0.0 ) ));"+"  vec4 ecPos4 = uView * uModel * vec4(aVertex, 1.0);"+"  vec3 ecPos = (vec3(ecPos4))/ecPos4.w;"+"  if( uLightCount == 0 ) {"+"    vFrontColor = col + vec4(uMaterialSpecular, 1.0);"+"  }"+"  else {"+"    for( int i = 0; i < 8; i++ ) {"+"      Light l = getLight(i);"+"      if( i >= uLightCount ){"+"        break;"+"      }"+"      if( l.type == 0 ) {"+"        AmbientLight( finalAmbient, ecPos, l );"+"      }"+"      else if( l.type == 1 ) {"+"        DirectionalLight( finalDiffuse, finalSpecular, norm, ecPos, l );"+"      }"+"      else if( l.type == 2 ) {"+"        PointLight( finalDiffuse, finalSpecular, norm, ecPos, l );"+"      }"+"      else {"+"        SpotLight( finalDiffuse, finalSpecular, norm, ecPos, l );"+"      }"+"    }"+"   if( uUsingMat == false ) {"+"     vFrontColor = vec4("+"       vec3( col ) * finalAmbient +"+"       vec3( col ) * finalDiffuse +"+"       vec3( col ) * finalSpecular,"+"       col[3] );"+"   }"+"   else{"+"     vFrontColor = vec4( "+"       uMaterialEmissive + "+"       (vec3(col) * uMaterialAmbient * finalAmbient ) + "+"       (vec3(col) * finalDiffuse) + "+"       (uMaterialSpecular * finalSpecular), "+"       col[3] );"+"    }"+"  }"+"  vTexture.xy = aTexture.xy;"+"  gl_Position = uProjection * uView * uModel * vec4( aVertex, 1.0 );"+"}",sr="#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec4 vFrontColor;uniform sampler2D uSampler;uniform bool uUsingTexture;varying vec2 vTexture;void main(void){  if( uUsingTexture ){    gl_FragColor = vec4(texture2D(uSampler, vTexture.xy)) * vFrontColor;  }  else{    gl_FragColor = vFrontColor;  }}",ar=function(e,t,n){var i=e.createShader(e.VERTEX_SHADER);
if(e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw e.getShaderInfoLog(i);var r=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw e.getShaderInfoLog(r);var o=e.createProgram();if(e.attachShader(o,i),e.attachShader(o,r),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw"Error linking shaders.";return o},lr=function(e,t,n,i){return{x:e,y:t,w:n,h:i}},ur=lr,cr=function(e,t,n,i,r){return{x:e,y:t,w:r?n:n-e,h:r?i:i-t}},hr=function(e,t,n,i){return{x:e-n/2,y:t-i/2,w:n,h:i}},fr=function(){},dr=function(){},pr=function(){},gr=function(){};dr.prototype=new fr,dr.prototype.constructor=dr,pr.prototype=new fr,pr.prototype.constructor=pr,gr.prototype=new fr,gr.prototype.constructor=gr,fr.prototype.a3DOnlyFunction=m;var mr={},vr=Ct.Character=function(e){return this.code="string"==typeof e&&1===e.length?e.charCodeAt(0):"number"==typeof e?e:e instanceof vr?e:0/0,mr[this.code]===i?mr[this.code]=this:mr[this.code]};vr.prototype.toString=function(){return String.fromCharCode(this.code)},vr.prototype.valueOf=function(){return this.code};var yr=Ct.PShape=function(e){this.family=e||0,this.visible=!0,this.style=!0,this.children=[],this.nameTable=[],this.params=[],this.name="",this.image=null,this.matrix=null,this.kind=null,this.close=null,this.width=null,this.height=null,this.parent=null};yr.prototype={isVisible:function(){return this.visible},setVisible:function(e){this.visible=e},disableStyle:function(){this.style=!1;for(var e=0,t=this.children.length;t>e;e++)this.children[e].disableStyle()},enableStyle:function(){this.style=!0;for(var e=0,t=this.children.length;t>e;e++)this.children[e].enableStyle()},getFamily:function(){return this.family},getWidth:function(){return this.width},getHeight:function(){return this.height},setName:function(e){this.name=e},getName:function(){return this.name},draw:function(e){e=e||Ct,this.visible&&(this.pre(e),this.drawImpl(e),this.post(e))},drawImpl:function(e){0===this.family?this.drawGroup(e):1===this.family?this.drawPrimitive(e):3===this.family?this.drawGeometry(e):21===this.family&&this.drawPath(e)},drawPath:function(e){var t,n;if(0!==this.vertices.length){if(e.beginShape(),0===this.vertexCodes.length)if(2===this.vertices[0].length)for(t=0,n=this.vertices.length;n>t;t++)e.vertex(this.vertices[t][0],this.vertices[t][1]);else for(t=0,n=this.vertices.length;n>t;t++)e.vertex(this.vertices[t][0],this.vertices[t][1],this.vertices[t][2]);else{var i=0;if(2===this.vertices[0].length)for(t=0,n=this.vertexCodes.length;n>t;t++)0===this.vertexCodes[t]?(e.vertex(this.vertices[i][0],this.vertices[i][1],this.vertices[i].moveTo),e.breakShape=!1,i++):1===this.vertexCodes[t]?(e.bezierVertex(this.vertices[i+0][0],this.vertices[i+0][1],this.vertices[i+1][0],this.vertices[i+1][1],this.vertices[i+2][0],this.vertices[i+2][1]),i+=3):2===this.vertexCodes[t]?(e.curveVertex(this.vertices[i][0],this.vertices[i][1]),i++):3===this.vertexCodes[t]&&(e.breakShape=!0);else for(t=0,n=this.vertexCodes.length;n>t;t++)0===this.vertexCodes[t]?(e.vertex(this.vertices[i][0],this.vertices[i][1],this.vertices[i][2]),this.vertices[i].moveTo===!0?ji[ji.length-1].moveTo=!0:this.vertices[i].moveTo===!1&&(ji[ji.length-1].moveTo=!1),e.breakShape=!1):1===this.vertexCodes[t]?(e.bezierVertex(this.vertices[i+0][0],this.vertices[i+0][1],this.vertices[i+0][2],this.vertices[i+1][0],this.vertices[i+1][1],this.vertices[i+1][2],this.vertices[i+2][0],this.vertices[i+2][1],this.vertices[i+2][2]),i+=3):2===this.vertexCodes[t]?(e.curveVertex(this.vertices[i][0],this.vertices[i][1],this.vertices[i][2]),i++):3===this.vertexCodes[t]&&(e.breakShape=!0)}e.endShape(this.close?2:1)}},drawGeometry:function(e){var t,n;if(e.beginShape(this.kind),this.style)for(t=0,n=this.vertices.length;n>t;t++)e.vertex(this.vertices[t]);else for(t=0,n=this.vertices.length;n>t;t++){var i=this.vertices[t];0===i[2]?e.vertex(i[0],i[1]):e.vertex(i[0],i[1],i[2])}e.endShape()},drawGroup:function(e){for(var t=0,n=this.children.length;n>t;t++)this.children[t].draw(e)},drawPrimitive:function(e){if(2===this.kind)e.point(this.params[0],this.params[1]);else if(4===this.kind)4===this.params.length?e.line(this.params[0],this.params[1],this.params[2],this.params[3]):e.line(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5]);else if(8===this.kind)e.triangle(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5]);else if(16===this.kind)e.quad(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5],this.params[6],this.params[7]);else if(30===this.kind)if(null!==this.image){var t=ur;e.imageMode(0),e.image(this.image,this.params[0],this.params[1],this.params[2],this.params[3]),ur=t}else{var n=bn;e.rectMode(0),e.rect(this.params[0],this.params[1],this.params[2],this.params[3]),bn=n}else if(31===this.kind){var i=wn;e.ellipseMode(0),e.ellipse(this.params[0],this.params[1],this.params[2],this.params[3]),wn=i}else if(32===this.kind){var r=wn;e.ellipseMode(0),e.arc(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5]),wn=r}else 41===this.kind?1===this.params.length?e.box(this.params[0]):e.box(this.params[0],this.params[1],this.params[2]):40===this.kind&&e.sphere(this.params[0])},pre:function(e){this.matrix&&(e.pushMatrix(),e.transform(this.matrix)),this.style&&(e.pushStyle(),this.styles(e))},post:function(e){this.matrix&&e.popMatrix(),this.style&&e.popStyle()},styles:function(e){this.stroke?(e.stroke(this.strokeColor),e.strokeWeight(this.strokeWeight),e.strokeCap(this.strokeCap),e.strokeJoin(this.strokeJoin)):e.noStroke(),this.fill?e.fill(this.fillColor):e.noFill()},getChild:function(e){var t,n;if("number"==typeof e)return this.children[e];var i;if(""===e||this.name===e)return this;if(this.nameTable.length>0){for(t=0,n=this.nameTable.length;n>t||i;t++)if(this.nameTable[t].getName===e){i=this.nameTable[t];break}if(i)return i}for(t=0,n=this.children.length;n>t;t++)if(i=this.children[t].getChild(e))return i;return null},getChildCount:function(){return this.children.length},addChild:function(e){this.children.push(e),e.parent=this,null!==e.getName()&&this.addName(e.getName(),e)},addName:function(e,t){null!==this.parent?this.parent.addName(e,t):this.nameTable.push([e,t])},translate:function(){2===arguments.length?(this.checkMatrix(2),this.matrix.translate(arguments[0],arguments[1])):(this.checkMatrix(3),this.matrix.translate(arguments[0],arguments[1],0))},checkMatrix:function(e){null===this.matrix?this.matrix=2===e?new Ct.PMatrix2D:new Ct.PMatrix3D:3===e&&this.matrix instanceof Ct.PMatrix2D&&(this.matrix=new Ct.PMatrix3D)},rotateX:function(e){this.rotate(e,1,0,0)},rotateY:function(e){this.rotate(e,0,1,0)},rotateZ:function(e){this.rotate(e,0,0,1)},rotate:function(){1===arguments.length?(this.checkMatrix(2),this.matrix.rotate(arguments[0])):(this.checkMatrix(3),this.matrix.rotate(arguments[0],arguments[1],arguments[2],arguments[3]))},scale:function(){2===arguments.length?(this.checkMatrix(2),this.matrix.scale(arguments[0],arguments[1])):3===arguments.length?(this.checkMatrix(2),this.matrix.scale(arguments[0],arguments[1],arguments[2])):(this.checkMatrix(2),this.matrix.scale(arguments[0]))},resetMatrix:function(){this.checkMatrix(2),this.matrix.reset()},applyMatrix:function(e){1===arguments.length?this.applyMatrix(e.elements[0],e.elements[1],0,e.elements[2],e.elements[3],e.elements[4],0,e.elements[5],0,0,1,0,0,0,0,1):6===arguments.length?(this.checkMatrix(2),this.matrix.apply(arguments[0],arguments[1],arguments[2],0,arguments[3],arguments[4],arguments[5],0,0,0,1,0,0,0,0,1)):16===arguments.length&&(this.checkMatrix(3),this.matrix.apply(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]))}};var Er=Ct.PShapeSVG=function(){if(Ct.PShape.call(this),1===arguments.length){if(this.element=arguments[0],this.vertexCodes=[],this.vertices=[],this.opacity=1,this.stroke=!1,this.strokeColor=4278190080,this.strokeWeight=1,this.strokeCap="butt",this.strokeJoin="miter",this.strokeGradient=null,this.strokeGradientPaint=null,this.strokeName=null,this.strokeOpacity=1,this.fill=!0,this.fillColor=4278190080,this.fillGradient=null,this.fillGradientPaint=null,this.fillName=null,this.fillOpacity=1,"svg"!==this.element.getName())throw"root is not <svg>, it's <"+this.element.getName()+">"}else 2===arguments.length&&("string"==typeof arguments[1]?arguments[1].indexOf(".svg")>-1&&(this.element=new Ct.XMLElement(Ct,arguments[1]),this.vertexCodes=[],this.vertices=[],this.opacity=1,this.stroke=!1,this.strokeColor=4278190080,this.strokeWeight=1,this.strokeCap="butt",this.strokeJoin="miter",this.strokeGradient="",this.strokeGradientPaint="",this.strokeName="",this.strokeOpacity=1,this.fill=!0,this.fillColor=4278190080,this.fillGradient=null,this.fillGradientPaint=null,this.fillOpacity=1):arguments[0]&&(this.element=arguments[1],this.vertexCodes=arguments[0].vertexCodes.slice(),this.vertices=arguments[0].vertices.slice(),this.stroke=arguments[0].stroke,this.strokeColor=arguments[0].strokeColor,this.strokeWeight=arguments[0].strokeWeight,this.strokeCap=arguments[0].strokeCap,this.strokeJoin=arguments[0].strokeJoin,this.strokeGradient=arguments[0].strokeGradient,this.strokeGradientPaint=arguments[0].strokeGradientPaint,this.strokeName=arguments[0].strokeName,this.fill=arguments[0].fill,this.fillColor=arguments[0].fillColor,this.fillGradient=arguments[0].fillGradient,this.fillGradientPaint=arguments[0].fillGradientPaint,this.fillName=arguments[0].fillName,this.strokeOpacity=arguments[0].strokeOpacity,this.fillOpacity=arguments[0].fillOpacity,this.opacity=arguments[0].opacity));this.name=this.element.getStringAttribute("id");var e=this.element.getStringAttribute("display","inline");this.visible="none"!==e;var t=this.element.getAttribute("transform");t&&(this.matrix=this.parseMatrix(t));var n=this.element.getStringAttribute("viewBox");if(null!==n){var i=n.split(" ");this.width=i[2],this.height=i[3]}var r=this.element.getStringAttribute("width"),o=this.element.getStringAttribute("height");if(null!==r)this.width=this.parseUnitSize(r),this.height=this.parseUnitSize(o);else if(0===this.width||0===this.height)throw this.width=1,this.height=1,"The width and/or height is not readable in the <svg> tag of this file.";this.parseColors(this.element),this.parseChildren(this.element)};Er.prototype=new yr,Er.prototype.parseMatrix=function(){function e(e){var t=[];return e.replace(/\((.*?)\)/,function(){return function(e,n){t=n.replace(/,+/g," ").split(/\s+/)}}()),t}return function(t){this.checkMatrix(2);var n=[];if(t.replace(/\s*(\w+)\((.*?)\)/g,function(e){n.push(Ct.trim(e))}),0===n.length)return null;for(var i=0,r=n.length;r>i;i++){var o=e(n[i]);if(-1!==n[i].indexOf("matrix"))this.matrix.set(o[0],o[2],o[4],o[1],o[3],o[5]);else if(-1!==n[i].indexOf("translate")){var s=o[0],a=2===o.length?o[1]:0;this.matrix.translate(s,a)}else if(-1!==n[i].indexOf("scale")){var l=o[0],u=2===o.length?o[1]:o[0];this.matrix.scale(l,u)}else if(-1!==n[i].indexOf("rotate")){var c=o[0];1===o.length?this.matrix.rotate(Ct.radians(c)):3===o.length&&(this.matrix.translate(o[1],o[2]),this.matrix.rotate(Ct.radians(o[0])),this.matrix.translate(-o[1],-o[2]))}else-1!==n[i].indexOf("skewX")?this.matrix.skewX(parseFloat(o[0])):-1!==n[i].indexOf("skewY")?this.matrix.skewY(o[0]):-1!==n[i].indexOf("shearX")?this.matrix.shearX(o[0]):-1!==n[i].indexOf("shearY")&&this.matrix.shearY(o[0])}return this.matrix}}(),Er.prototype.parseChildren=function(e){for(var t=e.getChildren(),n=new Ct.PShape,i=0,r=t.length;r>i;i++){var o=this.parseChild(t[i]);o&&n.addChild(o)}this.children.push(n)},Er.prototype.getName=function(){return this.name},Er.prototype.parseChild=function(e){var t,n=e.getName();return"g"===n?t=new Er(this,e):"defs"===n?t=new Er(this,e):"line"===n?(t=new Er(this,e),t.parseLine()):"circle"===n?(t=new Er(this,e),t.parseEllipse(!0)):"ellipse"===n?(t=new Er(this,e),t.parseEllipse(!1)):"rect"===n?(t=new Er(this,e),t.parseRect()):"polygon"===n?(t=new Er(this,e),t.parsePoly(!0)):"polyline"===n?(t=new Er(this,e),t.parsePoly(!1)):"path"===n?(t=new Er(this,e),t.parsePath()):"radialGradient"===n?a("PShapeSVG.prototype.parseChild, name = radialGradient"):"linearGradient"===n?a("PShapeSVG.prototype.parseChild, name = linearGradient"):"text"===n?a("PShapeSVG.prototype.parseChild, name = text"):"filter"===n?a("PShapeSVG.prototype.parseChild, name = filter"):"mask"===n?a("PShapeSVG.prototype.parseChild, name = mask"):m(),t},Er.prototype.parsePath=function(){this.family=21,this.kind=0;var e=Ct.trim(this.element.getStringAttribute("d").replace(/[\s,]+/g," "));if(null!==e){e=Ct.__toCharArray(e);for(var t,n,i,r,o=0,s=0,a=0,l=0,u=0,c=0,h=0,f=0,d=0,p=0,g=0,m=0,v=0,y=0,E=0,A=0,b="",w=[],x=!1;E<e.length;)if(A=e[E].valueOf(),A>=65&&90>=A||A>=97&&122>=A){if(i=E,E++,E<e.length)for(w=[],A=e[E].valueOf();!(A>=65&&90>=A||A>=97&&100>=A||A>=102&&122>=A)&&x===!1;)32===A?(""!==b&&(w.push(parseFloat(b)),b=""),E++):45===A?101===e[E-1].valueOf()?(b+=e[E].toString(),E++):(""!==b&&w.push(parseFloat(b)),b=e[E].toString(),E++):(b+=e[E].toString(),E++),E===e.length?x=!0:A=e[E].valueOf();if(""!==b&&(w.push(parseFloat(b)),b=""),n=e[i],A=n.valueOf(),77===A){if(w.length>=2&&0===w.length%2&&(o=w[0],s=w[1],this.parsePathMoveto(o,s),w.length>2))for(i=2,r=w.length;r>i;i+=2)o=w[i],s=w[i+1],this.parsePathLineto(o,s)}else if(109===A){if(w.length>=2&&0===w.length%2&&(o+=w[0],s+=w[1],this.parsePathMoveto(o,s),w.length>2))for(i=2,r=w.length;r>i;i+=2)o+=w[i],s+=w[i+1],this.parsePathLineto(o,s)}else if(76===A){if(w.length>=2&&0===w.length%2)for(i=0,r=w.length;r>i;i+=2)o=w[i],s=w[i+1],this.parsePathLineto(o,s)}else if(108===A){if(w.length>=2&&0===w.length%2)for(i=0,r=w.length;r>i;i+=2)o+=w[i],s+=w[i+1],this.parsePathLineto(o,s)}else if(72===A)for(i=0,r=w.length;r>i;i++)o=w[i],this.parsePathLineto(o,s);else if(104===A)for(i=0,r=w.length;r>i;i++)o+=w[i],this.parsePathLineto(o,s);else if(86===A)for(i=0,r=w.length;r>i;i++)s=w[i],this.parsePathLineto(o,s);else if(118===A)for(i=0,r=w.length;r>i;i++)s+=w[i],this.parsePathLineto(o,s);else if(67===A){if(w.length>=6&&0===w.length%6)for(i=0,r=w.length;r>i;i+=6)u=w[i],h=w[i+1],c=w[i+2],f=w[i+3],d=w[i+4],p=w[i+5],this.parsePathCurveto(u,h,c,f,d,p),o=d,s=p}else if(99===A){if(w.length>=6&&0===w.length%6)for(i=0,r=w.length;r>i;i+=6)u=o+w[i],h=s+w[i+1],c=o+w[i+2],f=s+w[i+3],d=o+w[i+4],p=s+w[i+5],this.parsePathCurveto(u,h,c,f,d,p),o=d,s=p}else if(83===A){if(w.length>=4&&0===w.length%4)for(i=0,r=w.length;r>i;i+=4)"c"===t.toLowerCase()||"s"===t.toLowerCase()?(g=this.vertices[this.vertices.length-2][0],m=this.vertices[this.vertices.length-2][1],v=this.vertices[this.vertices.length-1][0],y=this.vertices[this.vertices.length-1][1],u=v+(v-g),h=y+(y-m)):(u=this.vertices[this.vertices.length-1][0],h=this.vertices[this.vertices.length-1][1]),c=w[i],f=w[i+1],d=w[i+2],p=w[i+3],this.parsePathCurveto(u,h,c,f,d,p),o=d,s=p}else if(115===A){if(w.length>=4&&0===w.length%4)for(i=0,r=w.length;r>i;i+=4)"c"===t.toLowerCase()||"s"===t.toLowerCase()?(g=this.vertices[this.vertices.length-2][0],m=this.vertices[this.vertices.length-2][1],v=this.vertices[this.vertices.length-1][0],y=this.vertices[this.vertices.length-1][1],u=v+(v-g),h=y+(y-m)):(u=this.vertices[this.vertices.length-1][0],h=this.vertices[this.vertices.length-1][1]),c=o+w[i],f=s+w[i+1],d=o+w[i+2],p=s+w[i+3],this.parsePathCurveto(u,h,c,f,d,p),o=d,s=p}else if(81===A){if(w.length>=4&&0===w.length%4)for(i=0,r=w.length;r>i;i+=4)a=w[i],l=w[i+1],d=w[i+2],p=w[i+3],this.parsePathQuadto(o,s,a,l,d,p),o=d,s=p}else if(113===A){if(w.length>=4&&0===w.length%4)for(i=0,r=w.length;r>i;i+=4)a=o+w[i],l=s+w[i+1],d=o+w[i+2],p=s+w[i+3],this.parsePathQuadto(o,s,a,l,d,p),o=d,s=p}else if(84===A){if(w.length>=2&&0===w.length%2)for(i=0,r=w.length;r>i;i+=2)"q"===t.toLowerCase()||"t"===t.toLowerCase()?(g=this.vertices[this.vertices.length-2][0],m=this.vertices[this.vertices.length-2][1],v=this.vertices[this.vertices.length-1][0],y=this.vertices[this.vertices.length-1][1],a=v+(v-g),l=y+(y-m)):(a=o,l=s),d=w[i],p=w[i+1],this.parsePathQuadto(o,s,a,l,d,p),o=d,s=p}else if(116===A){if(w.length>=2&&0===w.length%2)for(i=0,r=w.length;r>i;i+=2)"q"===t.toLowerCase()||"t"===t.toLowerCase()?(g=this.vertices[this.vertices.length-2][0],m=this.vertices[this.vertices.length-2][1],v=this.vertices[this.vertices.length-1][0],y=this.vertices[this.vertices.length-1][1],a=v+(v-g),l=y+(y-m)):(a=o,l=s),d=o+w[i],p=s+w[i+1],this.parsePathQuadto(o,s,a,l,d,p),o=d,s=p}else(90===A||122===A)&&(this.close=!0);t=n.toString()}else E++}},Er.prototype.parsePathQuadto=function(e,t,n,i,r,o){if(!(this.vertices.length>0))throw"Path must start with M/m";this.parsePathCode(1),this.parsePathVertex(e+2*(n-e)/3,t+2*(i-t)/3),this.parsePathVertex(r+2*(n-r)/3,o+2*(i-o)/3),this.parsePathVertex(r,o)},Er.prototype.parsePathCurveto=function(e,t,n,i,r,o){if(!(this.vertices.length>0))throw"Path must start with M/m";this.parsePathCode(1),this.parsePathVertex(e,t),this.parsePathVertex(n,i),this.parsePathVertex(r,o)},Er.prototype.parsePathLineto=function(e,t){if(!(this.vertices.length>0))throw"Path must start with M/m";this.parsePathCode(0),this.parsePathVertex(e,t),this.vertices[this.vertices.length-1].moveTo=!1},Er.prototype.parsePathMoveto=function(e,t){this.vertices.length>0&&this.parsePathCode(3),this.parsePathCode(0),this.parsePathVertex(e,t),this.vertices[this.vertices.length-1].moveTo=!0},Er.prototype.parsePathVertex=function(e,t){var n=[];n[0]=e,n[1]=t,this.vertices.push(n)},Er.prototype.parsePathCode=function(e){this.vertexCodes.push(e)},Er.prototype.parsePoly=function(e){this.family=21,this.close=e;var t=Ct.trim(this.element.getStringAttribute("points").replace(/[,\s]+/g," "));if(null!==t){var n=t.split(" ");if(0!==n.length%2)throw"Error parsing polygon points: odd number of coordinates provided";for(var i=0,r=n.length;r>i;i++){var o=[];o[0]=n[i],o[1]=n[++i],this.vertices.push(o)}}},Er.prototype.parseRect=function(){if(this.kind=30,this.family=1,this.params=[],this.params[0]=this.element.getFloatAttribute("x"),this.params[1]=this.element.getFloatAttribute("y"),this.params[2]=this.element.getFloatAttribute("width"),this.params[3]=this.element.getFloatAttribute("height"),this.params[2]<0||this.params[3]<0)throw"svg error: negative width or height found while parsing <rect>"},Er.prototype.parseEllipse=function(e){this.kind=31,this.family=1,this.params=[],this.params[0]=0|this.element.getFloatAttribute("cx"),this.params[1]=0|this.element.getFloatAttribute("cy");var t,n;if(e){if(t=n=this.element.getFloatAttribute("r"),0>t)throw"svg error: negative radius found while parsing <circle>"}else if(t=this.element.getFloatAttribute("rx"),n=this.element.getFloatAttribute("ry"),0>t||0>n)throw"svg error: negative x-axis radius or y-axis radius found while parsing <ellipse>";this.params[0]-=t,this.params[1]-=n,this.params[2]=2*t,this.params[3]=2*n},Er.prototype.parseLine=function(){this.kind=4,this.family=1,this.params=[],this.params[0]=this.element.getFloatAttribute("x1"),this.params[1]=this.element.getFloatAttribute("y1"),this.params[2]=this.element.getFloatAttribute("x2"),this.params[3]=this.element.getFloatAttribute("y2")},Er.prototype.parseColors=function(e){if(e.hasAttribute("opacity")&&this.setOpacity(e.getAttribute("opacity")),e.hasAttribute("stroke")&&this.setStroke(e.getAttribute("stroke")),e.hasAttribute("stroke-width")&&this.setStrokeWeight(e.getAttribute("stroke-width")),e.hasAttribute("stroke-linejoin")&&this.setStrokeJoin(e.getAttribute("stroke-linejoin")),e.hasAttribute("stroke-linecap")&&this.setStrokeCap(e.getStringAttribute("stroke-linecap")),e.hasAttribute("fill")&&this.setFill(e.getStringAttribute("fill")),e.hasAttribute("style"))for(var t=e.getStringAttribute("style"),n=t.toString().split(";"),i=0,r=n.length;r>i;i++){var o=Ct.trim(n[i].split(":"));"fill"===o[0]?this.setFill(o[1]):"fill-opacity"===o[0]?this.setFillOpacity(o[1]):"stroke"===o[0]?this.setStroke(o[1]):"stroke-width"===o[0]?this.setStrokeWeight(o[1]):"stroke-linecap"===o[0]?this.setStrokeCap(o[1]):"stroke-linejoin"===o[0]?this.setStrokeJoin(o[1]):"stroke-opacity"===o[0]?this.setStrokeOpacity(o[1]):"opacity"===o[0]&&this.setOpacity(o[1])}},Er.prototype.setFillOpacity=function(e){this.fillOpacity=parseFloat(e),this.fillColor=255*this.fillOpacity<<24|16777215&this.fillColor},Er.prototype.setFill=function(e){var t=4278190080&this.fillColor;"none"===e?this.fill=!1:0===e.indexOf("#")?(this.fill=!0,4===e.length&&(e=e.replace(/#(.)(.)(.)/,"#$1$1$2$2$3$3")),this.fillColor=t|16777215&parseInt(e.substring(1),16)):0===e.indexOf("rgb")?(this.fill=!0,this.fillColor=t|this.parseRGB(e)):0===e.indexOf("url(#")?this.fillName=e.substring(5,e.length-1):R[e]&&(this.fill=!0,this.fillColor=t|16777215&parseInt(R[e].substring(1),16))},Er.prototype.setOpacity=function(e){this.strokeColor=255*parseFloat(e)<<24|16777215&this.strokeColor,this.fillColor=255*parseFloat(e)<<24|16777215&this.fillColor},Er.prototype.setStroke=function(e){var t=4278190080&this.strokeColor;"none"===e?this.stroke=!1:"#"===e.charAt(0)?(this.stroke=!0,4===e.length&&(e=e.replace(/#(.)(.)(.)/,"#$1$1$2$2$3$3")),this.strokeColor=t|16777215&parseInt(e.substring(1),16)):0===e.indexOf("rgb")?(this.stroke=!0,this.strokeColor=t|this.parseRGB(e)):0===e.indexOf("url(#")?this.strokeName=e.substring(5,e.length-1):R[e]&&(this.stroke=!0,this.strokeColor=t|16777215&parseInt(R[e].substring(1),16))},Er.prototype.setStrokeWeight=function(e){this.strokeWeight=this.parseUnitSize(e)},Er.prototype.setStrokeJoin=function(e){"miter"===e?this.strokeJoin="miter":"round"===e?this.strokeJoin="round":"bevel"===e&&(this.strokeJoin="bevel")},Er.prototype.setStrokeCap=function(e){"butt"===e?this.strokeCap="butt":"round"===e?this.strokeCap="round":"square"===e&&(this.strokeCap="square")},Er.prototype.setStrokeOpacity=function(e){this.strokeOpacity=parseFloat(e),this.strokeColor=255*this.strokeOpacity<<24|16777215&this.strokeColor},Er.prototype.parseRGB=function(e){var t=e.substring(e.indexOf("(")+1,e.indexOf(")")),n=t.split(", ");return n[0]<<16|n[1]<<8|n[2]},Er.prototype.parseUnitSize=function(e){var t=e.length-2;return 0>t?e:e.indexOf("pt")===t?1.25*parseFloat(e.substring(0,t)):e.indexOf("pc")===t?15*parseFloat(e.substring(0,t)):e.indexOf("mm")===t?3.543307*parseFloat(e.substring(0,t)):e.indexOf("cm")===t?35.43307*parseFloat(e.substring(0,t)):e.indexOf("in")===t?90*parseFloat(e.substring(0,t)):e.indexOf("px")===t?parseFloat(e.substring(0,t)):parseFloat(e)},Ct.shape=function(e,t,n,i,r){arguments.length>=1&&null!==arguments[0]&&e.isVisible()&&(Ct.pushMatrix(),3===Yi?5===arguments.length?(Ct.translate(t-i/2,n-r/2),Ct.scale(i/e.getWidth(),r/e.getHeight())):3===arguments.length?Ct.translate(t-e.getWidth()/2,-e.getHeight()/2):Ct.translate(-e.getWidth()/2,-e.getHeight()/2):0===Yi?5===arguments.length?(Ct.translate(t,n),Ct.scale(i/e.getWidth(),r/e.getHeight())):3===arguments.length&&Ct.translate(t,n):1===Yi&&(5===arguments.length?(i-=t,r-=n,Ct.translate(t,n),Ct.scale(i/e.getWidth(),r/e.getHeight())):3===arguments.length&&Ct.translate(t,n)),e.draw(Ct),(1===arguments.length&&3===Yi||arguments.length>1)&&Ct.popMatrix())},Ct.shapeMode=function(e){Yi=e},Ct.loadShape=function(e){return 1===arguments.length&&e.indexOf(".svg")>-1?new Er(null,e):null};var Ar=function(e,t,n,i,r){this.fullName=e||"",this.name=t||"",this.namespace=n||"",this.value=i,this.type=r};Ar.prototype={getName:function(){return this.name},getFullName:function(){return this.fullName},getNamespace:function(){return this.namespace},getValue:function(){return this.value},getType:function(){return this.type},setValue:function(e){this.value=e}};var br=Ct.XMLElement=function(e,t,n,r){this.attributes=[],this.children=[],this.fullName=null,this.name=null,this.namespace="",this.content=null,this.parent=null,this.lineNr="",this.systemID="",this.type="ELEMENT",e&&("string"==typeof e?t===i&&e.indexOf("<")>-1?this.parse(e):(this.fullName=e,this.namespace=t,this.systemId=n,this.lineNr=r):this.parse(t))};br.prototype={parse:function(e){var t;try{var n=e.substring(e.length-4);(".xml"===n||".svg"===n)&&(e=y(e)),t=(new DOMParser).parseFromString(e,"text/xml");var i=t.documentElement;if(!i)throw"Error loading document";return this.parseChildrenRecursive(null,i),this}catch(r){throw r}},parseChildrenRecursive:function(e,t){var n,i,r,o,s,a;if(e?(n=new br(t.nodeName),n.parent=e):(this.fullName=t.localName,this.name=t.nodeName,n=this),3===t.nodeType&&""!==t.textContent)return this.createPCDataElement(t.textContent);if(4===t.nodeType)return this.createCDataElement(t.textContent);if(t.attributes)for(o=0,s=t.attributes.length;s>o;o++)r=t.attributes[o],i=new Ar(r.getname,r.nodeName,r.namespaceURI,r.nodeValue,r.nodeType),n.attributes.push(i);if(t.childNodes)for(o=0,s=t.childNodes.length;s>o;o++){var l=t.childNodes[o];a=n.parseChildrenRecursive(n,l),null!==a&&n.children.push(a)}return n},createElement:function(e,t,n,r){return n===i?new br(e,t):new br(e,t,n,r)},createPCDataElement:function(e){if(""===e.replace(/^\s+$/g,""))return null;var t=new br;return t.type="TEXT",t.content=e,t},createCDataElement:function(e){var t=this.createPCDataElement(e);if(null===t)return null;t.type="CDATA";var n,i={"<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"};for(n in i)Object.hasOwnProperty(i,n)||(e=e.replace(new RegExp(n,"g"),i[n]));return t.cdata=e,t},hasAttribute:function(){return 1===arguments.length?null!==this.getAttribute(arguments[0]):2===arguments.length?null!==this.getAttribute(arguments[0],arguments[1]):void 0},equals:function(e){if(!(e instanceof br))return!1;var t,n;if(this.fullName!==e.fullName)return!1;if(this.attributes.length!==e.getAttributeCount())return!1;if(this.attributes.length!==e.attributes.length)return!1;var i,r,o;for(t=0,n=this.attributes.length;n>t;t++){if(i=this.attributes[t].getName(),r=this.attributes[t].getNamespace(),o=e.findAttribute(i,r),null===o)return!1;if(this.attributes[t].getValue()!==o.getValue())return!1;if(this.attributes[t].getType()!==o.getType())return!1}if(this.children.length!==e.getChildCount())return!1;if(this.children.length>0){var s,a;for(t=0,n=this.children.length;n>t;t++)if(s=this.getChild(t),a=e.getChild(t),!s.equals(a))return!1;return!0}return this.content===e.content},getContent:function(){if("TEXT"===this.type||"CDATA"===this.type)return this.content;var e=this.children;return 1!==e.length||"TEXT"!==e[0].type&&"CDATA"!==e[0].type?null:e[0].content},getAttribute:function(){var e;return 2===arguments.length?(e=this.findAttribute(arguments[0]),e?e.getValue():arguments[1]):1===arguments.length?(e=this.findAttribute(arguments[0]),e?e.getValue():null):3===arguments.length?(e=this.findAttribute(arguments[0],arguments[1]),e?e.getValue():arguments[2]):void 0},getStringAttribute:function(){return 1===arguments.length?this.getAttribute(arguments[0]):2===arguments.length?this.getAttribute(arguments[0],arguments[1]):this.getAttribute(arguments[0],arguments[1],arguments[2])},getString:function(e){return this.getStringAttribute(e)},getFloatAttribute:function(){return 1===arguments.length?parseFloat(this.getAttribute(arguments[0],0)):2===arguments.length?this.getAttribute(arguments[0],arguments[1]):this.getAttribute(arguments[0],arguments[1],arguments[2])},getFloat:function(e){return this.getFloatAttribute(e)},getIntAttribute:function(){return 1===arguments.length?this.getAttribute(arguments[0],0):2===arguments.length?this.getAttribute(arguments[0],arguments[1]):this.getAttribute(arguments[0],arguments[1],arguments[2])},getInt:function(e){return this.getIntAttribute(e)},hasChildren:function(){return this.children.length>0},addChild:function(e){null!==e&&(e.parent=this,this.children.push(e))},insertChild:function(e,t){if(e){if(null===e.getLocalName()&&!this.hasChildren()){var n=this.children[this.children.length-1];if(null===n.getLocalName())return n.setContent(n.getContent()+e.getContent()),void 0}e.parent=this,this.children.splice(t,0,e)}},getChild:function(e){if("number"==typeof e)return this.children[e];if(-1!==e.indexOf("/"))return this.getChildRecursive(e.split("/"),0);for(var t,n,i=0,r=this.getChildCount();r>i;i++)if(t=this.getChild(i),n=t.getName(),null!==n&&n===e)return t;return null},getChildren:function(){if(1===arguments.length){if("number"==typeof arguments[0])return this.getChild(arguments[0]);if(-1!==arguments[0].indexOf("/"))return this.getChildrenRecursive(arguments[0].split("/"),0);for(var e,t,n=[],i=0,r=this.getChildCount();r>i;i++)e=this.getChild(i),t=e.getName(),null!==t&&t===arguments[0]&&n.push(e);return n}return this.children},getChildCount:function(){return this.children.length},getChildRecursive:function(e,t){if(t===e.length)return this;for(var n,i,r=e[t],o=0,s=this.getChildCount();s>o;o++)if(n=this.getChild(o),i=n.getName(),null!==i&&i===r)return n.getChildRecursive(e,t+1);return null},getChildrenRecursive:function(e,t){if(t===e.length-1)return this.getChildren(e[t]);for(var n=this.getChildren(e[t]),i=[],r=0;r<n.length;r++)i=i.concat(n[r].getChildrenRecursive(e,t+1));return i},isLeaf:function(){return!this.hasChildren()},listChildren:function(){for(var e=[],t=0,n=this.children.length;n>t;t++)e.push(this.getChild(t).getName());return e},removeAttribute:function(e,t){this.namespace=t||"";for(var n=0,i=this.attributes.length;i>n;n++)if(this.attributes[n].getName()===e&&this.attributes[n].getNamespace()===this.namespace){this.attributes.splice(n,1);break}},removeChild:function(e){if(e)for(var t=0,n=this.children.length;n>t;t++)if(this.children[t].equals(e)){this.children.splice(t,1);break}},removeChildAtIndex:function(e){this.children.length>e&&this.children.splice(e,1)},findAttribute:function(e,t){this.namespace=t||"";for(var n=0,i=this.attributes.length;i>n;n++)if(this.attributes[n].getName()===e&&this.attributes[n].getNamespace()===this.namespace)return this.attributes[n];return null},setAttribute:function(){var e;if(3===arguments.length){var t=arguments[0].indexOf(":"),n=arguments[0].substring(t+1);e=this.findAttribute(n,arguments[1]),e?e.setValue(arguments[2]):(e=new Ar(arguments[0],n,arguments[1],arguments[2],"CDATA"),this.attributes.push(e))}else e=this.findAttribute(arguments[0]),e?e.setValue(arguments[1]):(e=new Ar(arguments[0],arguments[0],null,arguments[1],"CDATA"),this.attributes.push(e))},setString:function(e,t){this.setAttribute(e,t)},setInt:function(e,t){this.setAttribute(e,t)},setFloat:function(e,t){this.setAttribute(e,t)},setContent:function(e){this.children.length>0&&P.debug("Tried to set content for XMLElement with children"),this.content=e},setName:function(){if(1===arguments.length)this.name=arguments[0],this.fullName=arguments[0],this.namespace=null;else{var e=arguments[0].indexOf(":");this.name=null===arguments[1]||0>e?arguments[0]:arguments[0].substring(e+1),this.fullName=arguments[0],this.namespace=arguments[1]}},getName:function(){return this.fullName},getLocalName:function(){return this.name},getAttributeCount:function(){return this.attributes.length},toString:function(){if("TEXT"===this.type)return this.content;if("CDATA"===this.type)return this.cdata;var e,t,n=this.fullName,i="<"+n;for(e=0;e<this.attributes.length;e++){var r=this.attributes[e];i+=" "+r.getName()+"="+'"'+r.getValue()+'"'}if(0===this.children.length)i+=""===this.content?"/>":">"+this.content+"</"+n+">";else{for(i+=">",t=0;t<this.children.length;t++)i+=this.children[t].toString();i+="</"+n+">"}return i}},br.parse=function(e){var t=new br;return t.parse(e),t};var wr=Ct.XML=Ct.XMLElement;Ct.loadXML=function(e){return new wr(Ct,e)};var xr=function(e){for(var t=0,i=0;i<e.length;i++)t=0!==i?n.max(t,n.abs(e[i])):n.abs(e[i]);var r=(t+"").indexOf(".");return 0===r?r=1:-1===r&&(r=(t+"").length),r},Cr=Ct.PMatrix2D=function(){0===arguments.length?this.reset():1===arguments.length&&arguments[0]instanceof Cr?this.set(arguments[0].array()):6===arguments.length&&this.set(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])};Cr.prototype={set:function(){if(6===arguments.length){var e=arguments;this.set([e[0],e[1],e[2],e[3],e[4],e[5]])}else 1===arguments.length&&arguments[0]instanceof Cr?this.elements=arguments[0].array():1===arguments.length&&arguments[0]instanceof Array&&(this.elements=arguments[0].slice())},get:function(){var e=new Cr;return e.set(this.elements),e},reset:function(){this.set([1,0,0,0,1,0])},array:function(){return this.elements.slice()},translate:function(e,t){this.elements[2]=e*this.elements[0]+t*this.elements[1]+this.elements[2],this.elements[5]=e*this.elements[3]+t*this.elements[4]+this.elements[5]},invTranslate:function(e,t){this.translate(-e,-t)},transpose:function(){},mult:function(e,t){var n,i;return e instanceof T?(n=e.x,i=e.y,t||(t=new T)):e instanceof Array&&(n=e[0],i=e[1],t||(t=[])),t instanceof Array?(t[0]=this.elements[0]*n+this.elements[1]*i+this.elements[2],t[1]=this.elements[3]*n+this.elements[4]*i+this.elements[5]):t instanceof T&&(t.x=this.elements[0]*n+this.elements[1]*i+this.elements[2],t.y=this.elements[3]*n+this.elements[4]*i+this.elements[5],t.z=0),t
},multX:function(e,t){return e*this.elements[0]+t*this.elements[1]+this.elements[2]},multY:function(e,t){return e*this.elements[3]+t*this.elements[4]+this.elements[5]},skewX:function(e){this.apply(1,0,1,e,0,0)},skewY:function(e){this.apply(1,0,1,0,e,0)},shearX:function(e){this.apply(1,0,1,n.tan(e),0,0)},shearY:function(e){this.apply(1,0,1,0,n.tan(e),0)},determinant:function(){return this.elements[0]*this.elements[4]-this.elements[1]*this.elements[3]},invert:function(){var e=this.determinant();if(n.abs(e)>-2147483648){var t=this.elements[0],i=this.elements[1],r=this.elements[2],o=this.elements[3],s=this.elements[4],a=this.elements[5];return this.elements[0]=s/e,this.elements[3]=-o/e,this.elements[1]=-i/e,this.elements[4]=t/e,this.elements[2]=(i*a-s*r)/e,this.elements[5]=(o*r-t*a)/e,!0}return!1},scale:function(e,t){e&&!t&&(t=e),e&&t&&(this.elements[0]*=e,this.elements[1]*=t,this.elements[3]*=e,this.elements[4]*=t)},invScale:function(e,t){e&&!t&&(t=e),this.scale(1/e,1/t)},apply:function(){var e;1===arguments.length&&arguments[0]instanceof Cr?e=arguments[0].array():6===arguments.length?e=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(e=arguments[0]);for(var t=[0,0,this.elements[2],0,0,this.elements[5]],n=0,i=0;2>i;i++)for(var r=0;3>r;r++,n++)t[n]+=this.elements[3*i+0]*e[r+0]+this.elements[3*i+1]*e[r+3];this.elements=t.slice()},preApply:function(){var e;1===arguments.length&&arguments[0]instanceof Cr?e=arguments[0].array():6===arguments.length?e=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(e=arguments[0]);var t=[0,0,e[2],0,0,e[5]];t[2]=e[2]+this.elements[2]*e[0]+this.elements[5]*e[1],t[5]=e[5]+this.elements[2]*e[3]+this.elements[5]*e[4],t[0]=this.elements[0]*e[0]+this.elements[3]*e[1],t[3]=this.elements[0]*e[3]+this.elements[3]*e[4],t[1]=this.elements[1]*e[0]+this.elements[4]*e[1],t[4]=this.elements[1]*e[3]+this.elements[4]*e[4],this.elements=t.slice()},rotate:function(e){var t=n.cos(e),i=n.sin(e),r=this.elements[0],o=this.elements[1];this.elements[0]=t*r+i*o,this.elements[1]=-i*r+t*o,r=this.elements[3],o=this.elements[4],this.elements[3]=t*r+i*o,this.elements[4]=-i*r+t*o},rotateZ:function(e){this.rotate(e)},invRotateZ:function(e){this.rotateZ(e-n.PI)},print:function(){var e=xr(this.elements),t=""+Ct.nfs(this.elements[0],e,4)+" "+Ct.nfs(this.elements[1],e,4)+" "+Ct.nfs(this.elements[2],e,4)+"\n"+Ct.nfs(this.elements[3],e,4)+" "+Ct.nfs(this.elements[4],e,4)+" "+Ct.nfs(this.elements[5],e,4)+"\n\n";Ct.println(t)}};var _r=Ct.PMatrix3D=function(){this.reset()};_r.prototype={set:function(){16===arguments.length?this.elements=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof _r?this.elements=arguments[0].array():1===arguments.length&&arguments[0]instanceof Array&&(this.elements=arguments[0].slice())},get:function(){var e=new _r;return e.set(this.elements),e},reset:function(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},array:function(){return this.elements.slice()},translate:function(e,t,n){n===i&&(n=0),this.elements[3]+=e*this.elements[0]+t*this.elements[1]+n*this.elements[2],this.elements[7]+=e*this.elements[4]+t*this.elements[5]+n*this.elements[6],this.elements[11]+=e*this.elements[8]+t*this.elements[9]+n*this.elements[10],this.elements[15]+=e*this.elements[12]+t*this.elements[13]+n*this.elements[14]},transpose:function(){var e=this.elements[4];this.elements[4]=this.elements[1],this.elements[1]=e,e=this.elements[8],this.elements[8]=this.elements[2],this.elements[2]=e,e=this.elements[6],this.elements[6]=this.elements[9],this.elements[9]=e,e=this.elements[3],this.elements[3]=this.elements[12],this.elements[12]=e,e=this.elements[7],this.elements[7]=this.elements[13],this.elements[13]=e,e=this.elements[11],this.elements[11]=this.elements[14],this.elements[14]=e},mult:function(e,t){var n,i,r,o;return e instanceof T?(n=e.x,i=e.y,r=e.z,o=1,t||(t=new T)):e instanceof Array&&(n=e[0],i=e[1],r=e[2],o=e[3]||1,(!t||3!==t.length&&4!==t.length)&&(t=[0,0,0])),t instanceof Array&&(3===t.length?(t[0]=this.elements[0]*n+this.elements[1]*i+this.elements[2]*r+this.elements[3],t[1]=this.elements[4]*n+this.elements[5]*i+this.elements[6]*r+this.elements[7],t[2]=this.elements[8]*n+this.elements[9]*i+this.elements[10]*r+this.elements[11]):4===t.length&&(t[0]=this.elements[0]*n+this.elements[1]*i+this.elements[2]*r+this.elements[3]*o,t[1]=this.elements[4]*n+this.elements[5]*i+this.elements[6]*r+this.elements[7]*o,t[2]=this.elements[8]*n+this.elements[9]*i+this.elements[10]*r+this.elements[11]*o,t[3]=this.elements[12]*n+this.elements[13]*i+this.elements[14]*r+this.elements[15]*o)),t instanceof T&&(t.x=this.elements[0]*n+this.elements[1]*i+this.elements[2]*r+this.elements[3],t.y=this.elements[4]*n+this.elements[5]*i+this.elements[6]*r+this.elements[7],t.z=this.elements[8]*n+this.elements[9]*i+this.elements[10]*r+this.elements[11]),t},preApply:function(){var e;1===arguments.length&&arguments[0]instanceof _r?e=arguments[0].array():16===arguments.length?e=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(e=arguments[0]);for(var t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0,i=0;4>i;i++)for(var r=0;4>r;r++,n++)t[n]+=this.elements[r+0]*e[4*i+0]+this.elements[r+4]*e[4*i+1]+this.elements[r+8]*e[4*i+2]+this.elements[r+12]*e[4*i+3];this.elements=t.slice()},apply:function(){var e;1===arguments.length&&arguments[0]instanceof _r?e=arguments[0].array():16===arguments.length?e=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(e=arguments[0]);for(var t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0,i=0;4>i;i++)for(var r=0;4>r;r++,n++)t[n]+=this.elements[4*i+0]*e[r+0]+this.elements[4*i+1]*e[r+4]+this.elements[4*i+2]*e[r+8]+this.elements[4*i+3]*e[r+12];this.elements=t.slice()},rotate:function(e,t,n,i){if(n){var r=Ct.cos(e),o=Ct.sin(e),s=1-r;this.apply(s*t*t+r,s*t*n-o*i,s*t*i+o*n,0,s*t*n+o*i,s*n*n+r,s*n*i-o*t,0,s*t*i-o*n,s*n*i+o*t,s*i*i+r,0,0,0,0,1)}else this.rotateZ(e)},invApply:function(){wi===i&&(wi=new _r);var e=arguments;return wi.set(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]),wi.invert()?(this.preApply(wi),!0):!1},rotateX:function(e){var t=Ct.cos(e),n=Ct.sin(e);this.apply([1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1])},rotateY:function(e){var t=Ct.cos(e),n=Ct.sin(e);this.apply([t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1])},rotateZ:function(e){var t=n.cos(e),i=n.sin(e);this.apply([t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1])},scale:function(e,t,n){!e||t||n?e&&t&&!n&&(n=1):t=n=e,e&&t&&n&&(this.elements[0]*=e,this.elements[1]*=t,this.elements[2]*=n,this.elements[4]*=e,this.elements[5]*=t,this.elements[6]*=n,this.elements[8]*=e,this.elements[9]*=t,this.elements[10]*=n,this.elements[12]*=e,this.elements[13]*=t,this.elements[14]*=n)},skewX:function(e){var t=n.tan(e);this.apply(1,t,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},skewY:function(e){var t=n.tan(e);this.apply(1,0,0,0,t,1,0,0,0,0,1,0,0,0,0,1)},shearX:function(e){var t=n.tan(e);this.apply(1,t,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},shearY:function(e){var t=n.tan(e);this.apply(1,0,0,0,t,1,0,0,0,0,1,0,0,0,0,1)},multX:function(e,t,n,i){return n?i?this.elements[0]*e+this.elements[1]*t+this.elements[2]*n+this.elements[3]*i:this.elements[0]*e+this.elements[1]*t+this.elements[2]*n+this.elements[3]:this.elements[0]*e+this.elements[1]*t+this.elements[3]},multY:function(e,t,n,i){return n?i?this.elements[4]*e+this.elements[5]*t+this.elements[6]*n+this.elements[7]*i:this.elements[4]*e+this.elements[5]*t+this.elements[6]*n+this.elements[7]:this.elements[4]*e+this.elements[5]*t+this.elements[7]},multZ:function(e,t,n,i){return i?this.elements[8]*e+this.elements[9]*t+this.elements[10]*n+this.elements[11]*i:this.elements[8]*e+this.elements[9]*t+this.elements[10]*n+this.elements[11]},multW:function(e,t,n,i){return i?this.elements[12]*e+this.elements[13]*t+this.elements[14]*n+this.elements[15]*i:this.elements[12]*e+this.elements[13]*t+this.elements[14]*n+this.elements[15]},invert:function(){var e=this.elements[0]*this.elements[5]-this.elements[1]*this.elements[4],t=this.elements[0]*this.elements[6]-this.elements[2]*this.elements[4],i=this.elements[0]*this.elements[7]-this.elements[3]*this.elements[4],r=this.elements[1]*this.elements[6]-this.elements[2]*this.elements[5],o=this.elements[1]*this.elements[7]-this.elements[3]*this.elements[5],s=this.elements[2]*this.elements[7]-this.elements[3]*this.elements[6],a=this.elements[8]*this.elements[13]-this.elements[9]*this.elements[12],l=this.elements[8]*this.elements[14]-this.elements[10]*this.elements[12],u=this.elements[8]*this.elements[15]-this.elements[11]*this.elements[12],c=this.elements[9]*this.elements[14]-this.elements[10]*this.elements[13],h=this.elements[9]*this.elements[15]-this.elements[11]*this.elements[13],f=this.elements[10]*this.elements[15]-this.elements[11]*this.elements[14],d=e*f-t*h+i*c+r*u-o*l+s*a;if(n.abs(d)<=1e-9)return!1;var p=[];p[0]=+this.elements[5]*f-this.elements[6]*h+this.elements[7]*c,p[4]=-this.elements[4]*f+this.elements[6]*u-this.elements[7]*l,p[8]=+this.elements[4]*h-this.elements[5]*u+this.elements[7]*a,p[12]=-this.elements[4]*c+this.elements[5]*l-this.elements[6]*a,p[1]=-this.elements[1]*f+this.elements[2]*h-this.elements[3]*c,p[5]=+this.elements[0]*f-this.elements[2]*u+this.elements[3]*l,p[9]=-this.elements[0]*h+this.elements[1]*u-this.elements[3]*a,p[13]=+this.elements[0]*c-this.elements[1]*l+this.elements[2]*a,p[2]=+this.elements[13]*s-this.elements[14]*o+this.elements[15]*r,p[6]=-this.elements[12]*s+this.elements[14]*i-this.elements[15]*t,p[10]=+this.elements[12]*o-this.elements[13]*i+this.elements[15]*e,p[14]=-this.elements[12]*r+this.elements[13]*t-this.elements[14]*e,p[3]=-this.elements[9]*s+this.elements[10]*o-this.elements[11]*r,p[7]=+this.elements[8]*s-this.elements[10]*i+this.elements[11]*t,p[11]=-this.elements[8]*o+this.elements[9]*i-this.elements[11]*e,p[15]=+this.elements[8]*r-this.elements[9]*t+this.elements[10]*e;var g=1/d;return p[0]*=g,p[1]*=g,p[2]*=g,p[3]*=g,p[4]*=g,p[5]*=g,p[6]*=g,p[7]*=g,p[8]*=g,p[9]*=g,p[10]*=g,p[11]*=g,p[12]*=g,p[13]*=g,p[14]*=g,p[15]*=g,this.elements=p.slice(),!0},toString:function(){for(var e="",t=0;15>t;t++)e+=this.elements[t]+", ";return e+=this.elements[15]},print:function(){var e=xr(this.elements),t=""+Ct.nfs(this.elements[0],e,4)+" "+Ct.nfs(this.elements[1],e,4)+" "+Ct.nfs(this.elements[2],e,4)+" "+Ct.nfs(this.elements[3],e,4)+"\n"+Ct.nfs(this.elements[4],e,4)+" "+Ct.nfs(this.elements[5],e,4)+" "+Ct.nfs(this.elements[6],e,4)+" "+Ct.nfs(this.elements[7],e,4)+"\n"+Ct.nfs(this.elements[8],e,4)+" "+Ct.nfs(this.elements[9],e,4)+" "+Ct.nfs(this.elements[10],e,4)+" "+Ct.nfs(this.elements[11],e,4)+"\n"+Ct.nfs(this.elements[12],e,4)+" "+Ct.nfs(this.elements[13],e,4)+" "+Ct.nfs(this.elements[14],e,4)+" "+Ct.nfs(this.elements[15],e,4)+"\n\n";Ct.println(t)},invTranslate:function(e,t,n){this.preApply(1,0,0,-e,0,1,0,-t,0,0,1,-n,0,0,0,1)},invRotateX:function(e){var t=n.cos(-e),i=n.sin(-e);this.preApply([1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1])},invRotateY:function(e){var t=n.cos(-e),i=n.sin(-e);this.preApply([t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1])},invRotateZ:function(e){var t=n.cos(-e),i=n.sin(-e);this.preApply([t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1])},invScale:function(e,t,n){this.preApply([1/e,0,0,0,0,1/t,0,0,0,0,1/n,0,0,0,0,1])}};var Fr=Ct.PMatrixStack=function(){this.matrixStack=[]};Fr.prototype.load=function(){var e=St.$newPMatrix();1===arguments.length?e.set(arguments[0]):e.set(arguments),this.matrixStack.push(e)},dr.prototype.$newPMatrix=function(){return new Cr},pr.prototype.$newPMatrix=function(){return new _r},Fr.prototype.push=function(){this.matrixStack.push(this.peek())},Fr.prototype.pop=function(){return this.matrixStack.pop()},Fr.prototype.peek=function(){var e=St.$newPMatrix();return e.set(this.matrixStack[this.matrixStack.length-1]),e},Fr.prototype.mult=function(e){this.matrixStack[this.matrixStack.length-1].apply(e)},Ct.split=function(e,t){return e.split(t)},Ct.splitTokens=function(e,t){if(t===i)return e.split(/\s+/g);var n,r,o=t.split(/()/g),s="",a=e.length,l=[];for(n=0;a>n;n++)r=e[n],o.indexOf(r)>-1?(""!==s&&l.push(s),s=""):s+=r;return""!==s&&l.push(s),l},Ct.append=function(e,t){return e[e.length]=t,e},Ct.concat=function(e,t){return e.concat(t)},Ct.sort=function(e,t){var n=[];if(e.length>0){for(var i=t>0?t:e.length,r=0;i>r;r++)n.push(e[r]);if("string"==typeof e[0]?n.sort():n.sort(function(e,t){return e-t}),t>0)for(var o=n.length;o<e.length;o++)n.push(e[o])}return n},Ct.splice=function(e,t,n){if(0===t.length)return e;if(t instanceof Array)for(var i=0,r=n;i<t.length;r++,i++)e.splice(r,0,t[i]);else e.splice(n,0,t);return e},Ct.subset=function(e,t,n){var r=n!==i?t+n:e.length;return e.slice(t,r)},Ct.join=function(e,t){return e.join(t)},Ct.shorten=function(e){for(var t=[],n=e.length,i=0;n>i;i++)t[i]=e[i];return t.pop(),t},Ct.expand=function(e,t){var n=e.slice(0),i=t||2*e.length;return n.length=i,n},Ct.arrayCopy=function(){var e,t,n,r=0,o=0;2===arguments.length?(e=arguments[0],t=arguments[1],n=e.length):3===arguments.length?(e=arguments[0],t=arguments[1],n=arguments[2]):5===arguments.length&&(e=arguments[0],r=arguments[1],t=arguments[2],o=arguments[3],n=arguments[4]);for(var s=r,a=o;n+r>s;s++,a++){if(t[a]===i)throw"array index out of bounds exception";t[a]=e[s]}},Ct.reverse=function(e){return e.reverse()},Ct.mix=function(e,t,n){return e+((t-e)*n>>8)},Ct.peg=function(e){return 0>e?0:e>255?255:e},Ct.modes=function(){function e(e,t,n,i,r,o,a,l,u,c,h){var f=s(((4278190080&e)>>>24)+t,255)<<24,d=n+((u-n)*t>>8);d=(0>d?0:d>255?255:d)<<16;var p=i+((c-i)*t>>8);p=(0>p?0:p>255?255:p)<<8;var g=r+((h-r)*t>>8);return g=0>g?0:g>255?255:g,f|d|p|g}var t=4278190080,i=16711680,r=65280,o=255,s=n.min,a=n.max;return{replace:function(e,t){return t},blend:function(e,n){var a=(n&t)>>>24,l=e&i,u=e&r,c=e&o,h=n&i,f=n&r,d=n&o;return s(((e&t)>>>24)+a,255)<<24|l+((h-l)*a>>8)&i|u+((f-u)*a>>8)&r|c+((d-c)*a>>8)&o},add:function(e,n){var a=(n&t)>>>24;return s(((e&t)>>>24)+a,255)<<24|s((e&i)+((n&i)>>8)*a,i)&i|s((e&r)+((n&r)>>8)*a,r)&r|s((e&o)+((n&o)*a>>8),o)},subtract:function(e,n){var l=(n&t)>>>24;return s(((e&t)>>>24)+l,255)<<24|a((e&i)-((n&i)>>8)*l,r)&i|a((e&r)-((n&r)>>8)*l,o)&r|a((e&o)-((n&o)*l>>8),0)},lightest:function(e,n){var l=(n&t)>>>24;return s(((e&t)>>>24)+l,255)<<24|a(e&i,((n&i)>>8)*l)&i|a(e&r,((n&r)>>8)*l)&r|a(e&o,(n&o)*l>>8)},darkest:function(e,n){var a=(n&t)>>>24,l=e&i,u=e&r,c=e&o,h=s(e&i,((n&i)>>8)*a),f=s(e&r,((n&r)>>8)*a),d=s(e&o,(n&o)*a>>8);return s(((e&t)>>>24)+a,255)<<24|l+((h-l)*a>>8)&i|u+((f-u)*a>>8)&r|c+((d-c)*a>>8)&o},difference:function(n,s){var a=(s&t)>>>24,l=(n&i)>>16,u=(n&r)>>8,c=n&o,h=(s&i)>>16,f=(s&r)>>8,d=s&o,p=l>h?l-h:h-l,g=u>f?u-f:f-u,m=c>d?c-d:d-c;return e(n,a,l,u,c,h,f,d,p,g,m)},exclusion:function(n,s){var a=(s&t)>>>24,l=(n&i)>>16,u=(n&r)>>8,c=n&o,h=(s&i)>>16,f=(s&r)>>8,d=s&o,p=l+h-(l*h>>7),g=u+f-(u*f>>7),m=c+d-(c*d>>7);return e(n,a,l,u,c,h,f,d,p,g,m)},multiply:function(n,s){var a=(s&t)>>>24,l=(n&i)>>16,u=(n&r)>>8,c=n&o,h=(s&i)>>16,f=(s&r)>>8,d=s&o,p=l*h>>8,g=u*f>>8,m=c*d>>8;return e(n,a,l,u,c,h,f,d,p,g,m)},screen:function(n,s){var a=(s&t)>>>24,l=(n&i)>>16,u=(n&r)>>8,c=n&o,h=(s&i)>>16,f=(s&r)>>8,d=s&o,p=255-((255-l)*(255-h)>>8),g=255-((255-u)*(255-f)>>8),m=255-((255-c)*(255-d)>>8);return e(n,a,l,u,c,h,f,d,p,g,m)},hard_light:function(n,s){var a=(s&t)>>>24,l=(n&i)>>16,u=(n&r)>>8,c=n&o,h=(s&i)>>16,f=(s&r)>>8,d=s&o,p=128>h?l*h>>7:255-((255-l)*(255-h)>>7),g=128>f?u*f>>7:255-((255-u)*(255-f)>>7),m=128>d?c*d>>7:255-((255-c)*(255-d)>>7);return e(n,a,l,u,c,h,f,d,p,g,m)},soft_light:function(n,s){var a=(s&t)>>>24,l=(n&i)>>16,u=(n&r)>>8,c=n&o,h=(s&i)>>16,f=(s&r)>>8,d=s&o,p=(l*h>>7)+(l*l>>8)-(l*l*h>>15),g=(u*f>>7)+(u*u>>8)-(u*u*f>>15),m=(c*d>>7)+(c*c>>8)-(c*c*d>>15);return e(n,a,l,u,c,h,f,d,p,g,m)},overlay:function(n,s){var a=(s&t)>>>24,l=(n&i)>>16,u=(n&r)>>8,c=n&o,h=(s&i)>>16,f=(s&r)>>8,d=s&o,p=128>l?l*h>>7:255-((255-l)*(255-h)>>7),g=128>u?u*f>>7:255-((255-u)*(255-f)>>7),m=128>c?c*d>>7:255-((255-c)*(255-d)>>7);return e(n,a,l,u,c,h,f,d,p,g,m)},dodge:function(n,s){var a=(s&t)>>>24,l=(n&i)>>16,u=(n&r)>>8,c=n&o,h=(s&i)>>16,f=(s&r)>>8,d=s&o,p=255;255!==h&&(p=(l<<8)/(255-h),p=0>p?0:p>255?255:p);var g=255;255!==f&&(g=(u<<8)/(255-f),g=0>g?0:g>255?255:g);var m=255;return 255!==d&&(m=(c<<8)/(255-d),m=0>m?0:m>255?255:m),e(n,a,l,u,c,h,f,d,p,g,m)},burn:function(n,s){var a=(s&t)>>>24,l=(n&i)>>16,u=(n&r)>>8,c=n&o,h=(s&i)>>16,f=(s&r)>>8,d=s&o,p=0;0!==h&&(p=(255-l<<8)/h,p=255-(0>p?0:p>255?255:p));var g=0;0!==f&&(g=(255-u<<8)/f,g=255-(0>g?0:g>255?255:g));var m=0;return 0!==d&&(m=(255-c<<8)/d,m=255-(0>m?0:m>255?255:m)),e(n,a,l,u,c,h,f,d,p,g,m)}}}(),Ct.color=function(e,t,n,r){return e!==i&&t!==i&&n!==i&&r!==i?p(e,t,n,r):e!==i&&t!==i&&n!==i?p(e,t,n,Nn):e!==i&&t!==i?g(e,t):"number"==typeof e?v(e):p(On,Hn,jn,Nn)},Ct.color.toString=function(e){return"rgba("+(255&e>>16)+","+(255&e>>8)+","+(255&e)+","+(255&e>>24)/255+")"},Ct.color.toInt=function(e,t,n,i){return 4278190080&i<<24|16711680&e<<16|65280&t<<8|255&n},Ct.color.toArray=function(e){return[255&e>>16,255&e>>8,255&e,255&e>>24]},Ct.color.toGLArray=function(e){return[((16711680&e)>>>16)/255,(255&e>>8)/255,(255&e)/255,(255&e>>24)/255]},Ct.color.toRGB=function(e,t,i){e=e>On?On:e,t=t>Hn?Hn:t,i=i>jn?jn:i,e=360*(e/On),t=100*(t/Hn),i=100*(i/jn);var r=n.round(255*(i/100));if(0===t)return[r,r,r];var o=e%360,s=o%60,a=n.round(255*(i*(100-t)/1e4)),l=n.round(255*(i*(6e3-t*s)/6e5)),u=n.round(255*(i*(6e3-t*(60-s))/6e5));switch(n.floor(o/60)){case 0:return[r,u,a];case 1:return[l,r,a];case 2:return[a,r,u];case 3:return[a,l,r];case 4:return[u,a,r];case 5:return[r,a,l]}},Ct.brightness=function(e){return E(e)[2]},Ct.saturation=function(e){return E(e)[1]},Ct.hue=function(e){return E(e)[0]},Ct.red=function(e){return(255&e>>16)/255*On},Ct.green=function(e){return((65280&e)>>>8)/255*Hn},Ct.blue=function(e){return(255&e)/255*jn},Ct.alpha=function(e){return(255&e>>24)/255*Nn},Ct.lerpColor=function(e,t,n){var i,r,o,s,a,l,u,c,h,f,d,p,g,m,v,y,A,b=Ct.color(e),w=Ct.color(t);return 3===Wn?(g=E(b),c=(255&b>>24)/Nn,m=E(w),p=((4278190080&w)>>>24)/Nn,y=Ct.lerp(g[0],m[0],n),A=Ct.lerp(g[1],m[1],n),o=Ct.lerp(g[2],m[2],n),v=Ct.color.toRGB(y,A,o),s=Ct.lerp(c,p,n)*Nn,4278190080&s<<24|(255&v[0])<<16|(255&v[1])<<8|255&v[2]):(a=255&b>>16,l=255&b>>8,u=255&b,c=(255&b>>24)/Nn,h=(16711680&w)>>>16,f=255&w>>8,d=255&w,p=(255&w>>24)/Nn,i=0|Ct.lerp(a,h,n),r=0|Ct.lerp(l,f,n),o=0|Ct.lerp(u,d,n),s=Ct.lerp(c,p,n)*Nn,4278190080&s<<24|16711680&i<<16|65280&r<<8|255&o)},Ct.colorMode=function(){Wn=arguments[0],arguments.length>1&&(On=arguments[1],Hn=arguments[2]||arguments[1],jn=arguments[3]||arguments[1],Nn=arguments[4]||arguments[1])},Ct.blendColor=function(e,t,n){return 0===n?Ct.modes.replace(e,t):1===n?Ct.modes.blend(e,t):2===n?Ct.modes.add(e,t):4===n?Ct.modes.subtract(e,t):8===n?Ct.modes.lightest(e,t):16===n?Ct.modes.darkest(e,t):32===n?Ct.modes.difference(e,t):64===n?Ct.modes.exclusion(e,t):128===n?Ct.modes.multiply(e,t):256===n?Ct.modes.screen(e,t):1024===n?Ct.modes.hard_light(e,t):2048===n?Ct.modes.soft_light(e,t):512===n?Ct.modes.overlay(e,t):4096===n?Ct.modes.dodge(e,t):8192===n?Ct.modes.burn(e,t):void 0},Ct.printMatrix=function(){yi.print()},dr.prototype.translate=function(e,t){yi.translate(e,t),Ei.invTranslate(e,t),_t.translate(e,t)},pr.prototype.translate=function(e,t,n){yi.translate(e,t,n),Ei.invTranslate(e,t,n)},dr.prototype.scale=function(e,t){yi.scale(e,t),Ei.invScale(e,t),_t.scale(e,t||e)},pr.prototype.scale=function(e,t,n){yi.scale(e,t,n),Ei.invScale(e,t,n)},dr.prototype.transform=function(e){var t=e.array();_t.transform(t[0],t[3],t[1],t[4],t[2],t[5])},pr.prototype.transformm=function(){throw"p.transform is currently not supported in 3D mode"},dr.prototype.pushMatrix=function(){Ai.load(yi),bi.load(Ei),_()},pr.prototype.pushMatrix=function(){Ai.load(yi),bi.load(Ei)},dr.prototype.popMatrix=function(){yi.set(Ai.pop()),Ei.set(bi.pop()),F()},pr.prototype.popMatrix=function(){yi.set(Ai.pop()),Ei.set(bi.pop())},dr.prototype.resetMatrix=function(){yi.reset(),Ei.reset(),_t.setTransform(1,0,0,1,0,0)},pr.prototype.resetMatrix=function(){yi.reset(),Ei.reset()},fr.prototype.applyMatrix=function(){var e=arguments;yi.apply(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]),Ei.invApply(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},dr.prototype.applyMatrix=function(){for(var e=arguments,t=e.length;16>t;t++)e[t]=0;e[10]=e[15]=1,fr.prototype.applyMatrix.apply(this,e)},Ct.rotateX=function(e){yi.rotateX(e),Ei.invRotateX(e)},dr.prototype.rotateZ=function(){throw"rotateZ() is not supported in 2D mode. Use rotate(float) instead."},pr.prototype.rotateZ=function(e){yi.rotateZ(e),Ei.invRotateZ(e)},Ct.rotateY=function(e){yi.rotateY(e),Ei.invRotateY(e)},dr.prototype.rotate=function(e){yi.rotateZ(e),Ei.invRotateZ(e),_t.rotate(e)},pr.prototype.rotate=function(e){Ct.rotateZ(e)},dr.prototype.shearX=function(e){yi.shearX(e),_t.transform(1,0,e,1,0,0)},pr.prototype.shearX=function(e){yi.shearX(e)},dr.prototype.shearY=function(e){yi.shearY(e),_t.transform(1,e,0,1,0,0)},pr.prototype.shearY=function(e){yi.shearY(e)},Ct.pushStyle=function(){_(),Ct.pushMatrix();var e={doFill:ln,currentFillColor:cn,doStroke:fn,currentStrokeColor:pn,curTint:Gn,curRectMode:bn,curColorMode:Wn,colorModeX:On,colorModeZ:jn,colorModeY:Hn,colorModeA:Nn,curTextFont:li,horizontalTextAlignment:ei,verticalTextAlignment:ti,textMode:ni,curFontName:ii,curTextSize:ri,curTextAscent:oi,curTextDescent:si,curTextLeading:ai};qi.push(e)},Ct.popStyle=function(){var e=qi.pop();if(!e)throw"Too many popStyle() without enough pushStyle()";F(),Ct.popMatrix(),ln=e.doFill,cn=e.currentFillColor,fn=e.doStroke,pn=e.currentStrokeColor,Gn=e.curTint,bn=e.curRectMode,Wn=e.curColorMode,On=e.colorModeX,jn=e.colorModeZ,Hn=e.colorModeY,Nn=e.colorModeA,li=e.curTextFont,ii=e.curFontName,ri=e.curTextSize,ei=e.horizontalTextAlignment,ti=e.verticalTextAlignment,ni=e.textMode,oi=e.curTextAscent,si=e.curTextDescent,ai=e.curTextLeading},Ct.year=function(){return(new Date).getFullYear()},Ct.month=function(){return(new Date).getMonth()+1},Ct.day=function(){return(new Date).getDate()},Ct.hour=function(){return(new Date).getHours()},Ct.minute=function(){return(new Date).getMinutes()},Ct.second=function(){return(new Date).getSeconds()},Ct.millis=function(){return Date.now()-Yn},dr.prototype.redraw=function(){S(),_t.lineWidth=mn;var e=Ct.pmouseX,t=Ct.pmouseY;Ct.pmouseX=zn,Ct.pmouseY=Un,_(),Ct.draw(),F(),zn=Ct.mouseX,Un=Ct.mouseY,Ct.pmouseX=e,Ct.pmouseY=t},pr.prototype.redraw=function(){S();var e=Ct.pmouseX,t=Ct.pmouseY;Ct.pmouseX=zn,Ct.pmouseY=Un,_t.clear(_t.DEPTH_BUFFER_BIT),Jn={attributes:{},locations:{}},Ct.noLights(),Ct.lightFalloff(1,0,0),Ct.shininess(1),Ct.ambient(255,255,255),Ct.specular(0,0,0),Ct.emissive(0,0,0),Ct.camera(),Ct.draw(),zn=Ct.mouseX,Un=Ct.mouseY,Ct.pmouseX=e,Ct.pmouseY=t},Ct.noLoop=function(){En=!1,vn=!1,clearInterval(An),Ft.onPause()},Ct.loop=function(){vn||(qn=Date.now(),Xn=0,An=e.setInterval(function(){try{Ft.onFrameStart(),Ct.redraw(),Ft.onFrameEnd()}catch(t){throw e.clearInterval(An),t}},Tn),En=!0,vn=!0,Ft.onLoop())},Ct.frameRate=function(e){Sn=e,Tn=1e3/Sn,En&&(Ct.noLoop(),Ct.loop())};var Sr=[];Ct.exit=function(){e.clearInterval(An),M(Ct.externals.canvas.id),delete wt.onmousedown;for(var t in P.lib)P.lib.hasOwnProperty(t)&&P.lib[t].hasOwnProperty("detach")&&P.lib[t].detach(Ct);for(var n=Sr.length;n--;)B(Sr[n]);Ft.onExit()},Ct.cursor=function(){if(arguments.length>1||1===arguments.length&&arguments[0]instanceof Ct.PImage){var e,t,n=arguments[0];if(arguments.length>=3){if(e=arguments[1],t=arguments[2],0>e||0>t||t>=n.height||e>=n.width)throw"x and y must be non-negative and less than the dimensions of the image"}else e=n.width>>>1,t=n.height>>>1;var i=n.toDataURL(),r='url("'+i+'") '+e+" "+t+", default";Dn=wt.style.cursor=r}else if(1===arguments.length){var o=arguments[0];Dn=wt.style.cursor=o}else Dn=wt.style.cursor=Rn},Ct.noCursor=function(){Dn=wt.style.cursor=C.NOCURSOR},Ct.link=function(t,n){n!==i?e.open(t,n):e.location=t},Ct.beginDraw=m,Ct.endDraw=m,dr.prototype.toImageData=function(e,t,n,r){return e=e!==i?e:0,t=t!==i?t:0,n=n!==i?n:Ct.width,r=r!==i?r:Ct.height,_t.getImageData(e,t,n,r)},pr.prototype.toImageData=function(e,r,o,s){e=e!==i?e:0,r=r!==i?r:0,o=o!==i?o:Ct.width,s=s!==i?s:Ct.height;var a=t.createElement("canvas"),l=a.getContext("2d"),u=l.createImageData(o,s),c=new x(4*o*s);_t.readPixels(e,r,o,s,_t.RGBA,_t.UNSIGNED_BYTE,c);for(var h=0,f=c.length,d=u.data;f>h;h++)d[h]=c[4*(s-1-n.floor(h/4/o))*o+h%(4*o)];return u},Ct.status=function(t){e.status=t},Ct.binary=function(e,t){var n;if(t>0)n=t;else if(e instanceof vr)n=16,e|=0;else for(n=32;n>1&&!(1&e>>>n-1);)n--;for(var i="";n>0;)i+=1&e>>>--n?"1":"0";return i},Ct.unbinary=function(e){for(var t=e.length-1,n=1,i=0;t>=0;){var r=e[t--];if("0"!==r&&"1"!==r)throw"the value passed into unbinary was not an 8 bit binary number";"1"===r&&(i+=n),n<<=1}return i},Ct.nf=function(e,t,n){return $(e,"","-",t,n)},Ct.nfs=function(e,t,n){return $(e," ","-",t,n)},Ct.nfp=function(e,t,n){return $(e,"+","-",t,n)},Ct.nfc=function(e,t,n){return $(e,"","-",t,n,",")};var Tr=function(e,t){t=t===i||null===t?t=8:t,0>e&&(e=4294967295+e+1);for(var n=Number(e).toString(16).toUpperCase();n.length<t;)n="0"+n;return n.length>=t&&(n=n.substring(n.length-t,n.length)),n};Ct.hex=function(e,t){return 1===arguments.length&&(t=e instanceof vr?4:8),Tr(e,t)},Ct.unhex=function(e){if(e instanceof Array){for(var t=[],n=0;n<e.length;n++)t.push(N(e[n]));return t}return N(e)},Ct.loadStrings=function(e){if(localStorage[e])return localStorage[e].split("\n");var t=y(e);return"string"!=typeof t||""===t?[]:(t=t.replace(/(\r\n?)/g,"\n").replace(/\n$/,""),t.split("\n"))},Ct.saveStrings=function(e,t){localStorage[e]=t.join("\n")},Ct.loadBytes=function(e){for(var t=y(e),n=[],i=0;i<t.length;i++)n.push(t.charCodeAt(i));return n},Ct.matchAll=function(e,t){for(var n,i=[],r=new RegExp(t,"g");null!==(n=r.exec(e));)i.push(n),0===n[0].length&&++r.lastIndex;return i.length>0?i:null},Ct.__contains=function(e,t){return"string"!=typeof e?e.contains.apply(e,O(arguments)):null!==e&&null!==t&&"string"==typeof t&&e.indexOf(t)>-1},Ct.__replaceAll=function(e,t,n){return"string"!=typeof e?e.replaceAll.apply(e,O(arguments)):e.replace(new RegExp(t,"g"),n)},Ct.__replaceFirst=function(e,t,n){return"string"!=typeof e?e.replaceFirst.apply(e,O(arguments)):e.replace(new RegExp(t,""),n)},Ct.__replace=function(e,t,n){if("string"!=typeof e)return e.replace.apply(e,O(arguments));if(t instanceof RegExp)return e.replace(t,n);if("string"!=typeof t&&(t=t.toString()),""===t)return e;var i=e.indexOf(t);if(0>i)return e;var r=0,o="";do o+=e.substring(r,i)+n,r=i+t.length;while((i=e.indexOf(t,r))>=0);return o+e.substring(r)},Ct.__equals=function(e,t){return e.equals instanceof Function?e.equals.apply(e,O(arguments)):e.valueOf()===t.valueOf()},Ct.__equalsIgnoreCase=function(e,t){return"string"!=typeof e?e.equalsIgnoreCase.apply(e,O(arguments)):e.toLowerCase()===t.toLowerCase()},Ct.__toCharArray=function(e){if("string"!=typeof e)return e.toCharArray.apply(e,O(arguments));for(var t=[],n=0,i=e.length;i>n;++n)t[n]=new vr(e.charAt(n));return t},Ct.__split=function(e,t,n){if("string"!=typeof e)return e.split.apply(e,O(arguments));var r=new RegExp(t);if(n===i||1>n)return e.split(r);for(var o,s=[],a=e;-1!==(o=a.search(r))&&s.length<n-1;){var l=r.exec(a).toString();s.push(a.substring(0,o)),a=a.substring(o+l.length)}return(-1!==o||""!==a)&&s.push(a),s},Ct.__codePointAt=function(e,t){var n,i,r=e.charCodeAt(t);return r>=55296&&56319>=r?(n=r,i=e.charCodeAt(t+1),1024*(n-55296)+(i-56320)+65536):r},Ct.match=function(e,t){return e.match(t)},Ct.__matches=function(e,t){return new RegExp(t).test(e)},Ct.__startsWith=function(e,t,n){return"string"!=typeof e?e.startsWith.apply(e,O(arguments)):(n=n||0,0>n||n>e.length?!1:""===t||t===e?!0:e.indexOf(t)===n)},Ct.__endsWith=function(e,t){if("string"!=typeof e)return e.endsWith.apply(e,O(arguments));var n=t?t.length:0;return""===t||t===e?!0:e.indexOf(t)===e.length-n},Ct.__hashCode=function(e){return e.hashCode instanceof Function?e.hashCode.apply(e,O(arguments)):o(e)},Ct.__printStackTrace=function(e){Ct.println("Exception: "+e.toString())};var Dr=[];Ct.println=function(e){var t=Dr.length;t&&(P.logger.log(Dr.join("")),Dr.length=0),0===arguments.length&&0===t?P.logger.log(""):0!==arguments.length&&P.logger.log(e)},Ct.print=function(e){Dr.push(e)},Ct.str=function(e){if(e instanceof Array){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString()+"");return t}return e.toString()+""},Ct.trim=function(e){if(e instanceof Array){for(var t=[],n=0;n<e.length;n++)t.push(e[n].replace(/^\s*/,"").replace(/\s*$/,"").replace(/\r*$/,""));return t}return e.replace(/^\s*/,"").replace(/\s*$/,"").replace(/\r*$/,"")},Ct.parseBoolean=function(e){if(e instanceof Array){for(var t=[],n=0;n<e.length;n++)t.push(H(e[n]));return t}return H(e)},Ct.parseByte=function(e){if(e instanceof Array){for(var t=[],n=0;n<e.length;n++)t.push(0-(128&e[n])|127&e[n]);return t}return 0-(128&e)|127&e},Ct.parseChar=function(e){if("number"==typeof e)return new vr(String.fromCharCode(65535&e));if(e instanceof Array){for(var t=[],n=0;n<e.length;n++)t.push(new vr(String.fromCharCode(65535&e[n])));return t}throw"char() may receive only one argument of type int, byte, int[], or byte[]."},Ct.parseFloat=function(e){if(e instanceof Array){for(var t=[],n=0;n<e.length;n++)t.push(j(e[n]));return t}return j(e)},Ct.parseInt=function(e,t){if(e instanceof Array){for(var n=[],i=0;i<e.length;i++)"string"!=typeof e[i]||/^\s*[+\-]?\d+\s*$/.test(e[i])?n.push(z(e[i],t)):n.push(0);return n}return z(e,t)},Ct.__int_cast=function(e){return 0|e},Ct.__instanceof=function(e,t){if("function"!=typeof t)throw"Function is expected as type argument for instanceof operator";if("string"==typeof e)return t===Object||t===String;if(e instanceof t)return!0;if("object"!=typeof e||null===e)return!1;var n=e.constructor;if(t.$isInterface){for(var i=[];n;)n.$interfaces&&(i=i.concat(n.$interfaces)),n=n.$base;for(;i.length>0;){var r=i.shift();if(r===t)return!0;r.$interfaces&&(i=i.concat(r.$interfaces))}return!1}for(;n.hasOwnProperty("$base");)if(n=n.$base,n===t)return!0;return!1},Ct.abs=n.abs,Ct.ceil=n.ceil,Ct.constrain=function(e,t,n){return e>n?n:t>e?t:e},Ct.dist=function(){var e,t,i;return 4===arguments.length?(e=arguments[0]-arguments[2],t=arguments[1]-arguments[3],n.sqrt(e*e+t*t)):6===arguments.length?(e=arguments[0]-arguments[3],t=arguments[1]-arguments[4],i=arguments[2]-arguments[5],n.sqrt(e*e+t*t+i*i)):void 0},Ct.exp=n.exp,Ct.floor=n.floor,Ct.lerp=function(e,t,n){return(t-e)*n+e},Ct.log=n.log,Ct.mag=function(e,t,i){return i?n.sqrt(e*e+t*t+i*i):n.sqrt(e*e+t*t)},Ct.map=function(e,t,n,i,r){return i+(r-i)*((e-t)/(n-t))},Ct.max=function(){if(2===arguments.length)return arguments[0]<arguments[1]?arguments[1]:arguments[0];var e=1===arguments.length?arguments[0]:arguments;if(!("length"in e&&e.length>0))throw"Non-empty array is expected";for(var t=e[0],n=e.length,i=1;n>i;++i)t<e[i]&&(t=e[i]);return t},Ct.min=function(){if(2===arguments.length)return arguments[0]<arguments[1]?arguments[0]:arguments[1];var e=1===arguments.length?arguments[0]:arguments;if(!("length"in e&&e.length>0))throw"Non-empty array is expected";for(var t=e[0],n=e.length,i=1;n>i;++i)t>e[i]&&(t=e[i]);return t},Ct.norm=function(e,t,n){return(e-t)/(n-t)},Ct.pow=n.pow,Ct.round=n.round,Ct.sq=function(e){return e*e},Ct.sqrt=n.sqrt,Ct.acos=n.acos,Ct.asin=n.asin,Ct.atan=n.atan,Ct.atan2=n.atan2,Ct.cos=n.cos,Ct.degrees=function(e){return 180*e/n.PI},Ct.radians=function(e){return e/180*n.PI},Ct.sin=n.sin,Ct.tan=n.tan;var Rr=n.random;Ct.random=function(){if(0===arguments.length)return Rr();if(1===arguments.length)return Rr()*arguments[0];var e=arguments[0],t=arguments[1];return Rr()*(t-e)+e},U.createRandomized=function(){var e=new Date;return new U(4294967295&e/6e4,4294967295&e)},Ct.randomSeed=function(e){Rr=new U(e).nextDouble},Ct.Random=function(e){var t,r,o=!1;this.nextGaussian=function(){if(o)return o=!1,t;var e,i,s;do e=2*r()-1,i=2*r()-1,s=e*e+i*i;while(s>=1||0===s);var a=n.sqrt(-2*n.log(s)/s);return t=i*a,o=!0,e*a},r=e===i?n.random:new U(e).nextDouble};var kr={generator:i,octaves:4,fallout:.5,seed:i};Ct.noise=function(e,t,n){kr.generator===i&&(kr.generator=new W(kr.seed));for(var r=kr.generator,o=1,s=1,a=0,l=0;l<kr.octaves;++l){switch(o*=kr.fallout,arguments.length){case 1:a+=o*(1+r.noise1d(s*e))/2;break;case 2:a+=o*(1+r.noise2d(s*e,s*t))/2;break;case 3:a+=o*(1+r.noise3d(s*e,s*t,s*n))/2}s*=2}return a},Ct.noiseDetail=function(e,t){kr.octaves=e,t!==i&&(kr.fallout=t)},Ct.noiseSeed=function(e){kr.seed=e,kr.generator=i},fr.prototype.size=function(e,t){fn&&Ct.stroke(0),ln&&Ct.fill(255);var i={fillStyle:_t.fillStyle,strokeStyle:_t.strokeStyle,lineCap:_t.lineCap,lineJoin:_t.lineJoin};
wt.style.length>0&&(wt.style.removeProperty("width"),wt.style.removeProperty("height")),wt.width=Ct.width=e||100,wt.height=Ct.height=t||100;for(var r in i)i.hasOwnProperty(r)&&(_t[r]=i[r]);Ct.textFont(li),Ct.background(),hi=n.max(1e3,.05*e*t),Ct.externals.context=_t;for(var o=0;720>o;o++)Ri[o]=Ct.sin(.5*o*(n.PI/180)),ki[o]=Ct.cos(.5*o*(n.PI/180))},dr.prototype.size=function(){_t===i&&(_t=wt.getContext("2d"),Ai=new Fr,bi=new Fr,yi=new Cr,Ei=new Cr),fr.prototype.size.apply(this,arguments)},pr.prototype.size=function(){var e=!1;return function(t,n){function i(e){for(var t,n=["experimental-webgl","webgl","webkit-3d"],i=0,r=n.length;r>i&&!(t=e.getContext(n[i],{antialias:!1,preserveDrawingBuffer:!0}));i++);return t}if(e)throw"Multiple calls to size() for 3D renders are not allowed.";e=!0;try{wt.width=Ct.width=t||100,wt.height=Ct.height=n||100,_t=i(wt),Jt=_t.createTexture(),Kt=_t.createTexture()}catch(r){P.debug(r)}if(!_t)throw"WebGL context is not supported on this browser.";_t.viewport(0,0,wt.width,wt.height),_t.enable(_t.DEPTH_TEST),_t.enable(_t.BLEND),_t.blendFunc(_t.SRC_ALPHA,_t.ONE_MINUS_SRC_ALPHA),It=ar(_t,nr,ir),$t=ar(_t,er,tr),Ct.strokeWeight(1),Pt=ar(_t,or,sr),_t.useProgram(Pt),u("usingTexture3d",Pt,"usingTexture",Qn),Ct.lightFalloff(1,0,0),Ct.shininess(1),Ct.ambient(255,255,255),Ct.specular(0,0,0),Ct.emissive(0,0,0),Nt=_t.createBuffer(),_t.bindBuffer(_t.ARRAY_BUFFER,Nt),_t.bufferData(_t.ARRAY_BUFFER,Xi,_t.STATIC_DRAW),Ot=_t.createBuffer(),_t.bindBuffer(_t.ARRAY_BUFFER,Ot),_t.bufferData(_t.ARRAY_BUFFER,Ki,_t.STATIC_DRAW),Ht=_t.createBuffer(),_t.bindBuffer(_t.ARRAY_BUFFER,Ht),_t.bufferData(_t.ARRAY_BUFFER,Ji,_t.STATIC_DRAW),jt=_t.createBuffer(),_t.bindBuffer(_t.ARRAY_BUFFER,jt),_t.bufferData(_t.ARRAY_BUFFER,Zi,_t.STATIC_DRAW),zt=_t.createBuffer(),_t.bindBuffer(_t.ARRAY_BUFFER,zt),_t.bufferData(_t.ARRAY_BUFFER,Qi,_t.STATIC_DRAW),Ut=_t.createBuffer(),Wt=_t.createBuffer(),Gt=_t.createBuffer(),Vt=_t.createBuffer(),Yt=_t.createBuffer(),Xt=_t.createBuffer(),qt=_t.createBuffer(),_t.bindBuffer(_t.ARRAY_BUFFER,qt),_t.bufferData(_t.ARRAY_BUFFER,new A([0,0,0]),_t.STATIC_DRAW),Zt=_t.createBuffer(),_t.bindBuffer(_t.ARRAY_BUFFER,Zt),_t.bufferData(_t.ARRAY_BUFFER,new A([1,1,0,-1,1,0,-1,-1,0,1,-1,0]),_t.STATIC_DRAW),Qt=_t.createBuffer(),_t.bindBuffer(_t.ARRAY_BUFFER,Qt),_t.bufferData(_t.ARRAY_BUFFER,new A([0,0,1,0,1,1,0,1]),_t.STATIC_DRAW),en=_t.createBuffer(),_t.bindBuffer(_t.ELEMENT_ARRAY_BUFFER,en),_t.bufferData(_t.ELEMENT_ARRAY_BUFFER,new w([0,1,2,2,3,0]),_t.STATIC_DRAW),mi=new _r,vi=new _r,yi=new _r,Ei=new _r,xi=new _r,Ct.camera(),Ct.perspective(),Ai=new Fr,bi=new Fr,Dt=new _r,Rt=new _r,kt=new _r,Bt=new _r,Mt=new _r,Lt=new _r,Lt.set(-1,3,-3,1,3,-6,3,0,-3,3,0,0,1,0,0,0),fr.prototype.size.apply(this,arguments)}}(),dr.prototype.ambientLight=fr.prototype.a3DOnlyFunction,pr.prototype.ambientLight=function(e,t,n,i,r,o){if(8===Ci)throw"can only create 8 lights";var s=new T(i,r,o),a=new _r;a.scale(1,-1,1),a.apply(yi.array()),a.mult(s,s);var c=p(e,t,n,0),h=[(255&c>>16)/255,(255&c>>8)/255,(255&c)/255];_t.useProgram(Pt),l("uLights.color.3d."+Ci,Pt,"uLights"+Ci+".color",h),l("uLights.position.3d."+Ci,Pt,"uLights"+Ci+".position",s.array()),u("uLights.type.3d."+Ci,Pt,"uLights"+Ci+".type",0),u("uLightCount3d",Pt,"uLightCount",++Ci)},dr.prototype.directionalLight=fr.prototype.a3DOnlyFunction,pr.prototype.directionalLight=function(e,t,n,i,r,o){if(8===Ci)throw"can only create 8 lights";_t.useProgram(Pt);var s=new _r;s.scale(1,-1,1),s.apply(yi.array()),s=s.array();var a=[s[0]*i+s[4]*r+s[8]*o,s[1]*i+s[5]*r+s[9]*o,s[2]*i+s[6]*r+s[10]*o],c=p(e,t,n,0),h=[(255&c>>16)/255,(255&c>>8)/255,(255&c)/255];l("uLights.color.3d."+Ci,Pt,"uLights"+Ci+".color",h),l("uLights.position.3d."+Ci,Pt,"uLights"+Ci+".position",a),u("uLights.type.3d."+Ci,Pt,"uLights"+Ci+".type",1),u("uLightCount3d",Pt,"uLightCount",++Ci)},dr.prototype.lightFalloff=fr.prototype.a3DOnlyFunction,pr.prototype.lightFalloff=function(e,t,n){_t.useProgram(Pt),l("uFalloff3d",Pt,"uFalloff",[e,t,n])},dr.prototype.lightSpecular=fr.prototype.a3DOnlyFunction,pr.prototype.lightSpecular=function(e,t,n){var i=p(e,t,n,0),r=[(255&i>>16)/255,(255&i>>8)/255,(255&i)/255];_t.useProgram(Pt),l("uSpecular3d",Pt,"uSpecular",r)},Ct.lights=function(){Ct.ambientLight(128,128,128),Ct.directionalLight(128,128,128,0,0,-1),Ct.lightFalloff(1,0,0),Ct.lightSpecular(0,0,0)},dr.prototype.pointLight=fr.prototype.a3DOnlyFunction,pr.prototype.pointLight=function(e,t,n,i,r,o){if(8===Ci)throw"can only create 8 lights";var s=new T(i,r,o),a=new _r;a.scale(1,-1,1),a.apply(yi.array()),a.mult(s,s);var c=p(e,t,n,0),h=[(255&c>>16)/255,(255&c>>8)/255,(255&c)/255];_t.useProgram(Pt),l("uLights.color.3d."+Ci,Pt,"uLights"+Ci+".color",h),l("uLights.position.3d."+Ci,Pt,"uLights"+Ci+".position",s.array()),u("uLights.type.3d."+Ci,Pt,"uLights"+Ci+".type",2),u("uLightCount3d",Pt,"uLightCount",++Ci)},dr.prototype.noLights=fr.prototype.a3DOnlyFunction,pr.prototype.noLights=function(){Ci=0,_t.useProgram(Pt),u("uLightCount3d",Pt,"uLightCount",Ci)},dr.prototype.spotLight=fr.prototype.a3DOnlyFunction,pr.prototype.spotLight=function(e,t,n,i,r,o,s,a,c,h,f){if(8===Ci)throw"can only create 8 lights";_t.useProgram(Pt);var d=new T(i,r,o),g=new _r;g.scale(1,-1,1),g.apply(yi.array()),g.mult(d,d),g=g.array();var m=[g[0]*s+g[4]*a+g[8]*c,g[1]*s+g[5]*a+g[9]*c,g[2]*s+g[6]*a+g[10]*c],v=p(e,t,n,0),y=[(255&v>>16)/255,(255&v>>8)/255,(255&v)/255];l("uLights.color.3d."+Ci,Pt,"uLights"+Ci+".color",y),l("uLights.position.3d."+Ci,Pt,"uLights"+Ci+".position",d.array()),l("uLights.direction.3d."+Ci,Pt,"uLights"+Ci+".direction",m),l("uLights.concentration.3d."+Ci,Pt,"uLights"+Ci+".concentration",f),l("uLights.angle.3d."+Ci,Pt,"uLights"+Ci+".angle",h),u("uLights.type.3d."+Ci,Pt,"uLights"+Ci+".type",3),u("uLightCount3d",Pt,"uLightCount",++Ci)},dr.prototype.beginCamera=function(){throw"beginCamera() is not available in 2D mode"},pr.prototype.beginCamera=function(){if(Bi)throw"You cannot call beginCamera() again before calling endCamera()";Bi=!0,yi=vi,Ei=mi},dr.prototype.endCamera=function(){throw"endCamera() is not available in 2D mode"},pr.prototype.endCamera=function(){if(!Bi)throw"You cannot call endCamera() before calling beginCamera()";yi.set(mi),Ei.set(vi),Bi=!1},Ct.camera=function(e,t,r,o,s,a,l,u,c){e===i&&(Pi=Ct.width/2,Ii=Ct.height/2,$i=Ii/n.tan(Li/2),e=Pi,t=Ii,r=$i,o=Pi,s=Ii,a=0,l=0,u=1,c=0);var h=new T(e-o,t-s,r-a),f=new T(l,u,c);h.normalize();var d=T.cross(f,h);f=T.cross(h,d),d.normalize(),f.normalize();var p=d.x,g=d.y,m=d.z,v=f.x,y=f.y,E=f.z,A=h.x,b=h.y,w=h.z;mi.set(p,g,m,0,v,y,E,0,A,b,w,0,0,0,0,1),mi.translate(-e,-t,-r),vi.reset(),vi.invApply(p,g,m,0,v,y,E,0,A,b,w,0,0,0,0,1),vi.translate(e,t,r),yi.set(mi),Ei.set(vi)},Ct.perspective=function(e,t,i,r){0===arguments.length&&(Ii=wt.height/2,$i=Ii/n.tan(Li/2),Ni=$i/10,Oi=10*$i,Hi=Ct.width/Ct.height,e=Li,t=Hi,i=Ni,r=Oi);var o,s,a,l;o=i*n.tan(e/2),s=-o,a=o*t,l=s*t,Ct.frustum(l,a,s,o,i,r)},dr.prototype.frustum=function(){throw"Processing.js: frustum() is not supported in 2D mode"},pr.prototype.frustum=function(e,t,n,i,r,o){Mi=!0,xi=new _r,xi.set(2*r/(t-e),0,(t+e)/(t-e),0,0,2*r/(i-n),(i+n)/(i-n),0,0,0,-(o+r)/(o-r),-(2*o*r)/(o-r),0,0,-1,0);var s=new _r;s.set(xi),s.transpose(),_t.useProgram(It),c("projection2d",It,"uProjection",!1,s.array()),_t.useProgram(Pt),c("projection3d",Pt,"uProjection",!1,s.array()),_t.useProgram($t),c("uProjectionUS",$t,"uProjection",!1,s.array())},Ct.ortho=function(e,t,n,i,r,o){0===arguments.length&&(e=0,t=Ct.width,n=0,i=Ct.height,r=-10,o=10);var s=2/(t-e),a=2/(i-n),l=-2/(o-r),u=-(t+e)/(t-e),h=-(i+n)/(i-n),f=-(o+r)/(o-r);xi=new _r,xi.set(s,0,0,u,0,a,0,h,0,0,l,f,0,0,0,1);var d=new _r;d.set(xi),d.transpose(),_t.useProgram(It),c("projection2d",It,"uProjection",!1,d.array()),_t.useProgram(Pt),c("projection3d",Pt,"uProjection",!1,d.array()),_t.useProgram($t),c("uProjectionUS",$t,"uProjection",!1,d.array()),Mi=!1},Ct.printProjection=function(){xi.print()},Ct.printCamera=function(){mi.print()},dr.prototype.box=fr.prototype.a3DOnlyFunction,pr.prototype.box=function(e,t,n){t&&n||(t=n=e);var i=new _r;i.scale(e,t,n);var r=new _r;if(r.scale(1,-1,1),r.apply(yi.array()),r.transpose(),ln){if(_t.useProgram(Pt),c("model3d",Pt,"uModel",!1,i.array()),c("view3d",Pt,"uView",!1,r.array()),_t.enable(_t.POLYGON_OFFSET_FILL),_t.polygonOffset(1,1),l("color3d",Pt,"uColor",un),Ci>0){var o=new _r;o.set(r);var s=new _r;s.set(i),o.mult(s);var a=new _r;a.set(o),a.invert(),a.transpose(),c("uNormalTransform3d",Pt,"uNormalTransform",!1,a.array()),h("aNormal3d",Pt,"aNormal",3,Ot)}else d("aNormal3d",Pt,"aNormal");h("aVertex3d",Pt,"aVertex",3,Nt),d("aColor3d",Pt,"aColor"),d("aTexture3d",Pt,"aTexture"),_t.drawArrays(_t.TRIANGLES,0,Xi.length/3),_t.disable(_t.POLYGON_OFFSET_FILL)}mn>0&&fn&&(_t.useProgram(It),c("uModel2d",It,"uModel",!1,i.array()),c("uView2d",It,"uView",!1,r.array()),l("uColor2d",It,"uColor",dn),u("uIsDrawingText2d",It,"uIsDrawingText",!1),h("vertex2d",It,"aVertex",3,Ht),d("aTextureCoord2d",It,"aTextureCoord"),_t.drawArrays(_t.LINES,0,Ji.length/3))};var Br=function(){var e;for(gi=[],e=0;Fi>e;e++)gi.push(0),gi.push(-1),gi.push(0),gi.push(Si[e]),gi.push(Ti[e]),gi.push(Di[e]);gi.push(0),gi.push(-1),gi.push(0),gi.push(Si[0]),gi.push(Ti[0]),gi.push(Di[0]);var t,n,i,r=0;for(e=2;_i>e;e++){t=n=r,r+=Fi,i=r;for(var o=0;Fi>o;o++)gi.push(Si[t]),gi.push(Ti[t]),gi.push(Di[t++]),gi.push(Si[i]),gi.push(Ti[i]),gi.push(Di[i++]);t=n,i=r,gi.push(Si[t]),gi.push(Ti[t]),gi.push(Di[t]),gi.push(Si[i]),gi.push(Ti[i]),gi.push(Di[i])}for(e=0;Fi>e;e++)i=r+e,gi.push(Si[i]),gi.push(Ti[i]),gi.push(Di[i]),gi.push(0),gi.push(1),gi.push(0);gi.push(Si[r]),gi.push(Ti[r]),gi.push(Di[r]),gi.push(0),gi.push(1),gi.push(0),_t.bindBuffer(_t.ARRAY_BUFFER,Ut),_t.bufferData(_t.ARRAY_BUFFER,new A(gi),_t.STATIC_DRAW)};Ct.sphereDetail=function(e,t){var n;if(1===arguments.length&&(e=t=arguments[0]),3>e&&(e=3),2>t&&(t=2),e!==Fi||t!==_i){var i=720/e,r=new A(e),o=new A(e);for(n=0;e>n;n++)r[n]=ki[0|n*i%720],o[n]=Ri[0|n*i%720];var s=e*(t-1)+2,a=0;Si=new A(s),Ti=new A(s),Di=new A(s);var l=360/t,u=l;for(n=1;t>n;n++){for(var c=Ri[0|u%720],h=-ki[0|u%720],f=0;e>f;f++)Si[a]=r[f]*c,Ti[a]=h,Di[a++]=o[f]*c;u+=l}Fi=e,_i=t,Br()}},dr.prototype.sphere=fr.prototype.a3DOnlyFunction,pr.prototype.sphere=function(){var e=arguments[0];(3>Fi||2>_i)&&Ct.sphereDetail(30);var t=new _r;t.scale(e,e,e);var n=new _r;if(n.scale(1,-1,1),n.apply(yi.array()),n.transpose(),ln){if(Ci>0){var i=new _r;i.set(n);var r=new _r;r.set(t),i.mult(r);var o=new _r;o.set(i),o.invert(),o.transpose(),c("uNormalTransform3d",Pt,"uNormalTransform",!1,o.array()),h("aNormal3d",Pt,"aNormal",3,Ut)}else d("aNormal3d",Pt,"aNormal");_t.useProgram(Pt),d("aTexture3d",Pt,"aTexture"),c("uModel3d",Pt,"uModel",!1,t.array()),c("uView3d",Pt,"uView",!1,n.array()),h("aVertex3d",Pt,"aVertex",3,Ut),d("aColor3d",Pt,"aColor"),_t.enable(_t.POLYGON_OFFSET_FILL),_t.polygonOffset(1,1),l("uColor3d",Pt,"uColor",un),_t.drawArrays(_t.TRIANGLE_STRIP,0,gi.length/3),_t.disable(_t.POLYGON_OFFSET_FILL)}mn>0&&fn&&(_t.useProgram(It),c("uModel2d",It,"uModel",!1,t.array()),c("uView2d",It,"uView",!1,n.array()),h("aVertex2d",It,"aVertex",3,Ut),d("aTextureCoord2d",It,"aTextureCoord"),l("uColor2d",It,"uColor",dn),u("uIsDrawingText",It,"uIsDrawingText",!1),_t.drawArrays(_t.LINE_STRIP,0,gi.length/3))},Ct.modelX=function(e,t,n){var i=yi.array(),r=vi.array(),o=i[0]*e+i[1]*t+i[2]*n+i[3],s=i[4]*e+i[5]*t+i[6]*n+i[7],a=i[8]*e+i[9]*t+i[10]*n+i[11],l=i[12]*e+i[13]*t+i[14]*n+i[15],u=r[0]*o+r[1]*s+r[2]*a+r[3]*l,c=r[12]*o+r[13]*s+r[14]*a+r[15]*l;return 0!==c?u/c:u},Ct.modelY=function(e,t,n){var i=yi.array(),r=vi.array(),o=i[0]*e+i[1]*t+i[2]*n+i[3],s=i[4]*e+i[5]*t+i[6]*n+i[7],a=i[8]*e+i[9]*t+i[10]*n+i[11],l=i[12]*e+i[13]*t+i[14]*n+i[15],u=r[4]*o+r[5]*s+r[6]*a+r[7]*l,c=r[12]*o+r[13]*s+r[14]*a+r[15]*l;return 0!==c?u/c:u},Ct.modelZ=function(e,t,n){var i=yi.array(),r=vi.array(),o=i[0]*e+i[1]*t+i[2]*n+i[3],s=i[4]*e+i[5]*t+i[6]*n+i[7],a=i[8]*e+i[9]*t+i[10]*n+i[11],l=i[12]*e+i[13]*t+i[14]*n+i[15],u=r[8]*o+r[9]*s+r[10]*a+r[11]*l,c=r[12]*o+r[13]*s+r[14]*a+r[15]*l;return 0!==c?u/c:u},dr.prototype.ambient=fr.prototype.a3DOnlyFunction,pr.prototype.ambient=function(e,t,n){_t.useProgram(Pt),u("uUsingMat3d",Pt,"uUsingMat",!0);var i=Ct.color(e,t,n);l("uMaterialAmbient3d",Pt,"uMaterialAmbient",Ct.color.toGLArray(i).slice(0,3))},dr.prototype.emissive=fr.prototype.a3DOnlyFunction,pr.prototype.emissive=function(e,t,n){_t.useProgram(Pt),u("uUsingMat3d",Pt,"uUsingMat",!0);var i=Ct.color(e,t,n);l("uMaterialEmissive3d",Pt,"uMaterialEmissive",Ct.color.toGLArray(i).slice(0,3))},dr.prototype.shininess=fr.prototype.a3DOnlyFunction,pr.prototype.shininess=function(e){_t.useProgram(Pt),u("uUsingMat3d",Pt,"uUsingMat",!0),l("uShininess3d",Pt,"uShininess",e)},dr.prototype.specular=fr.prototype.a3DOnlyFunction,pr.prototype.specular=function(e,t,n){_t.useProgram(Pt),u("uUsingMat3d",Pt,"uUsingMat",!0);var i=Ct.color(e,t,n);l("uMaterialSpecular3d",Pt,"uMaterialSpecular",Ct.color.toGLArray(i).slice(0,3))},Ct.screenX=function(e,t,n){var i=yi.array();if(16===i.length){var r=i[0]*e+i[1]*t+i[2]*n+i[3],o=i[4]*e+i[5]*t+i[6]*n+i[7],s=i[8]*e+i[9]*t+i[10]*n+i[11],a=i[12]*e+i[13]*t+i[14]*n+i[15],l=xi.array(),u=l[0]*r+l[1]*o+l[2]*s+l[3]*a,c=l[12]*r+l[13]*o+l[14]*s+l[15]*a;return 0!==c&&(u/=c),Ct.width*(1+u)/2}return yi.multX(e,t)},Ct.screenY=function(e,t,n){var i=yi.array();if(16===i.length){var r=i[0]*e+i[1]*t+i[2]*n+i[3],o=i[4]*e+i[5]*t+i[6]*n+i[7],s=i[8]*e+i[9]*t+i[10]*n+i[11],a=i[12]*e+i[13]*t+i[14]*n+i[15],l=xi.array(),u=l[4]*r+l[5]*o+l[6]*s+l[7]*a,c=l[12]*r+l[13]*o+l[14]*s+l[15]*a;return 0!==c&&(u/=c),Ct.height*(1+u)/2}return yi.multY(e,t)},Ct.screenZ=function(e,t,n){var i=yi.array();if(16!==i.length)return 0;var r=xi.array(),o=i[0]*e+i[1]*t+i[2]*n+i[3],s=i[4]*e+i[5]*t+i[6]*n+i[7],a=i[8]*e+i[9]*t+i[10]*n+i[11],l=i[12]*e+i[13]*t+i[14]*n+i[15],u=r[8]*o+r[9]*s+r[10]*a+r[11]*l,c=r[12]*o+r[13]*s+r[14]*a+r[15]*l;return 0!==c&&(u/=c),(u+1)/2},fr.prototype.fill=function(){var e=Ct.color(arguments[0],arguments[1],arguments[2],arguments[3]);e===cn&&ln||(ln=!0,cn=e)},dr.prototype.fill=function(){fr.prototype.fill.apply(this,arguments),hn=!0},pr.prototype.fill=function(){fr.prototype.fill.apply(this,arguments),un=Ct.color.toGLArray(cn)},Ct.noFill=function(){ln=!1},fr.prototype.stroke=function(){var e=Ct.color(arguments[0],arguments[1],arguments[2],arguments[3]);e===pn&&fn||(fn=!0,pn=e)},dr.prototype.stroke=function(){fr.prototype.stroke.apply(this,arguments),gn=!0},pr.prototype.stroke=function(){fr.prototype.stroke.apply(this,arguments),dn=Ct.color.toGLArray(pn)},Ct.noStroke=function(){fn=!1},fr.prototype.strokeWeight=function(e){mn=e},dr.prototype.strokeWeight=function(e){fr.prototype.strokeWeight.apply(this,arguments),_t.lineWidth=e},pr.prototype.strokeWeight=function(e){fr.prototype.strokeWeight.apply(this,arguments),_t.useProgram(It),l("pointSize2d",It,"uPointSize",e),_t.useProgram($t),l("pointSizeUnlitShape",$t,"uPointSize",e),_t.lineWidth(e)},Ct.strokeCap=function(e){St.$ensureContext().lineCap=e},Ct.strokeJoin=function(e){St.$ensureContext().lineJoin=e},dr.prototype.smooth=function(){yn=!0;var e=wt.style;e.setProperty("image-rendering","optimizeQuality","important"),e.setProperty("-ms-interpolation-mode","bicubic","important"),_t.hasOwnProperty("mozImageSmoothingEnabled")&&(_t.mozImageSmoothingEnabled=!0)},pr.prototype.smooth=function(){yn=!0},dr.prototype.noSmooth=function(){yn=!1;var e=wt.style;e.setProperty("image-rendering","optimizeSpeed","important"),e.setProperty("image-rendering","-moz-crisp-edges","important"),e.setProperty("image-rendering","-webkit-optimize-contrast","important"),e.setProperty("image-rendering","optimize-contrast","important"),e.setProperty("-ms-interpolation-mode","nearest-neighbor","important"),_t.hasOwnProperty("mozImageSmoothingEnabled")&&(_t.mozImageSmoothingEnabled=!1)},pr.prototype.noSmooth=function(){yn=!1},dr.prototype.point=function(e,t){fn&&(e=n.round(e),t=n.round(t),_t.fillStyle=Ct.color.toString(pn),hn=!0,mn>1?(_t.beginPath(),_t.arc(e,t,mn/2,0,6.283185307179586,!1),_t.fill()):_t.fillRect(e,t,1,1))},pr.prototype.point=function(e,t,n){var i=new _r;i.translate(e,t,n||0),i.transpose();var r=new _r;r.scale(1,-1,1),r.apply(yi.array()),r.transpose(),_t.useProgram(It),c("uModel2d",It,"uModel",!1,i.array()),c("uView2d",It,"uView",!1,r.array()),mn>0&&fn&&(l("uColor2d",It,"uColor",dn),u("uIsDrawingText2d",It,"uIsDrawingText",!1),u("uSmooth2d",It,"uSmooth",yn),h("aVertex2d",It,"aVertex",3,qt),d("aTextureCoord2d",It,"aTextureCoord"),_t.drawArrays(_t.POINTS,0,1))},Ct.beginShape=function(e){kn=e,Bn=[],ji=[]},dr.prototype.vertex=function(e,t,n){var i=[];Vi&&(Vi=!1),i.isVert=!0,i[0]=e,i[1]=t,i[2]=0,i[3]=0,i[4]=0,i[5]=cn,i[6]=pn,ji.push(i),n&&(ji[ji.length-1].moveTo=n)},pr.prototype.vertex=function(e,t,n,r,o){var s=[];Vi&&(Vi=!1),s.isVert=!0,o===i&&Qn&&(o=r,r=n,n=0),r!==i&&o!==i&&(2===Zn&&(r/=Kn.width,o/=Kn.height),r=r>1?1:r,r=0>r?0:r,o=o>1?1:o,o=0>o?0:o),s[0]=e,s[1]=t,s[2]=n||0,s[3]=r||0,s[4]=o||0,s[5]=un[0],s[6]=un[1],s[7]=un[2],s[8]=un[3],s[9]=dn[0],s[10]=dn[1],s[11]=dn[2],s[12]=dn[3],s[13]=xn,s[14]=Cn,s[15]=_n,ji.push(s)};var Mr=function(e,t){var n=new _r;n.scale(1,-1,1),n.apply(yi.array()),n.transpose(),_t.useProgram($t),c("uViewUS",$t,"uView",!1,n.array()),u("uSmoothUS",$t,"uSmooth",yn),h("aVertexUS",$t,"aVertex",3,qt),_t.bufferData(_t.ARRAY_BUFFER,new A(e),_t.STREAM_DRAW),h("aColorUS",$t,"aColor",4,Vt),_t.bufferData(_t.ARRAY_BUFFER,new A(t),_t.STREAM_DRAW),_t.drawArrays(_t.POINTS,0,e.length/3)},Lr=function(e,t,n){var i;i="LINES"===t?_t.LINES:"LINE_LOOP"===t?_t.LINE_LOOP:_t.LINE_STRIP;var r=new _r;r.scale(1,-1,1),r.apply(yi.array()),r.transpose(),_t.useProgram($t),c("uViewUS",$t,"uView",!1,r.array()),h("aVertexUS",$t,"aVertex",3,Wt),_t.bufferData(_t.ARRAY_BUFFER,new A(e),_t.STREAM_DRAW),h("aColorUS",$t,"aColor",4,Yt),_t.bufferData(_t.ARRAY_BUFFER,new A(n),_t.STREAM_DRAW),_t.drawArrays(i,0,e.length/3)},Pr=function(e,t,n,i){var r;r="TRIANGLES"===t?_t.TRIANGLES:"TRIANGLE_FAN"===t?_t.TRIANGLE_FAN:_t.TRIANGLE_STRIP;var o=new _r;o.scale(1,-1,1),o.apply(yi.array()),o.transpose(),_t.useProgram(Pt),c("model3d",Pt,"uModel",!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c("view3d",Pt,"uView",!1,o.array()),_t.enable(_t.POLYGON_OFFSET_FILL),_t.polygonOffset(1,1),l("color3d",Pt,"uColor",[-1,0,0,0]),h("vertex3d",Pt,"aVertex",3,Gt),_t.bufferData(_t.ARRAY_BUFFER,new A(e),_t.STREAM_DRAW),Qn&&null!==Gn&&Vn(n),h("aColor3d",Pt,"aColor",4,Vt),_t.bufferData(_t.ARRAY_BUFFER,new A(n),_t.STREAM_DRAW),d("aNormal3d",Pt,"aNormal"),Qn&&(u("uUsingTexture3d",Pt,"uUsingTexture",Qn),h("aTexture3d",Pt,"aTexture",2,Xt),_t.bufferData(_t.ARRAY_BUFFER,new A(i),_t.STREAM_DRAW)),_t.drawArrays(r,0,e.length/3),_t.disable(_t.POLYGON_OFFSET_FILL)};dr.prototype.endShape=function(e){if(0!==ji.length){var t=2===e;t&&ji.push(ji[0]);var n,r=[],o=[],s=[],a=[];Vi=!0;var l,u,c=ji.length;for(l=0;c>l;l++)for(n=ji[l],u=0;3>u;u++)r.push(n[u]);for(l=0;c>l;l++)for(n=ji[l],u=5;9>u;u++)o.push(n[u]);for(l=0;c>l;l++)for(n=ji[l],u=9;13>u;u++)s.push(n[u]);for(l=0;c>l;l++)n=ji[l],a.push(n[3]),a.push(n[4]);if(!Wi||20!==kn&&kn!==i)if(!Gi||20!==kn&&kn!==i)if(2===kn)for(l=0;c>l;l++)n=ji[l],fn&&Ct.stroke(n[6]),Ct.point(n[0],n[1]);else if(4===kn)for(l=0;c>l+1;l+=2)n=ji[l],fn&&Ct.stroke(ji[l+1][6]),Ct.line(n[0],n[1],ji[l+1][0],ji[l+1][1]);else if(9===kn)for(l=0;c>l+2;l+=3)n=ji[l],_t.beginPath(),_t.moveTo(n[0],n[1]),_t.lineTo(ji[l+1][0],ji[l+1][1]),_t.lineTo(ji[l+2][0],ji[l+2][1]),_t.lineTo(n[0],n[1]),ln&&(Ct.fill(ji[l+2][5]),G()),fn&&(Ct.stroke(ji[l+2][6]),V()),_t.closePath();else if(10===kn)for(l=0;c>l+1;l++)n=ji[l],_t.beginPath(),_t.moveTo(ji[l+1][0],ji[l+1][1]),_t.lineTo(n[0],n[1]),fn&&Ct.stroke(ji[l+1][6]),ln&&Ct.fill(ji[l+1][5]),c>l+2&&(_t.lineTo(ji[l+2][0],ji[l+2][1]),fn&&Ct.stroke(ji[l+2][6]),ln&&Ct.fill(ji[l+2][5])),Y();else if(11===kn){if(c>2)for(_t.beginPath(),_t.moveTo(ji[0][0],ji[0][1]),_t.lineTo(ji[1][0],ji[1][1]),_t.lineTo(ji[2][0],ji[2][1]),ln&&(Ct.fill(ji[2][5]),G()),fn&&(Ct.stroke(ji[2][6]),V()),_t.closePath(),l=3;c>l;l++)n=ji[l],_t.beginPath(),_t.moveTo(ji[0][0],ji[0][1]),_t.lineTo(ji[l-1][0],ji[l-1][1]),_t.lineTo(n[0],n[1]),ln&&(Ct.fill(n[5]),G()),fn&&(Ct.stroke(n[6]),V()),_t.closePath()}else if(16===kn)for(l=0;c>l+3;l+=4){for(n=ji[l],_t.beginPath(),_t.moveTo(n[0],n[1]),u=1;4>u;u++)_t.lineTo(ji[l+u][0],ji[l+u][1]);_t.lineTo(n[0],n[1]),ln&&(Ct.fill(ji[l+3][5]),G()),fn&&(Ct.stroke(ji[l+3][6]),V()),_t.closePath()}else if(17===kn){if(c>3)for(l=0;c>l+1;l+=2)n=ji[l],_t.beginPath(),c>l+3?(_t.moveTo(ji[l+2][0],ji[l+2][1]),_t.lineTo(n[0],n[1]),_t.lineTo(ji[l+1][0],ji[l+1][1]),_t.lineTo(ji[l+3][0],ji[l+3][1]),ln&&Ct.fill(ji[l+3][5]),fn&&Ct.stroke(ji[l+3][6])):(_t.moveTo(n[0],n[1]),_t.lineTo(ji[l+1][0],ji[l+1][1])),Y()}else{for(_t.beginPath(),_t.moveTo(ji[0][0],ji[0][1]),l=1;c>l;l++)n=ji[l],n.isVert&&(n.moveTo?_t.moveTo(n[0],n[1]):_t.lineTo(n[0],n[1]));Y()}else{for(_t.beginPath(),l=0;c>l;l++)n=ji[l],ji[l].isVert?ji[l].moveTo?_t.moveTo(n[0],n[1]):_t.lineTo(n[0],n[1]):_t.bezierCurveTo(ji[l][0],ji[l][1],ji[l][2],ji[l][3],ji[l][4],ji[l][5]);Y()}else if(c>3){var h=[],f=1-Mn;for(_t.beginPath(),_t.moveTo(ji[1][0],ji[1][1]),l=1;c>l+2;l++)n=ji[l],h[0]=[n[0],n[1]],h[1]=[n[0]+(f*ji[l+1][0]-f*ji[l-1][0])/6,n[1]+(f*ji[l+1][1]-f*ji[l-1][1])/6],h[2]=[ji[l+1][0]+(f*ji[l][0]-f*ji[l+2][0])/6,ji[l+1][1]+(f*ji[l][1]-f*ji[l+2][1])/6],h[3]=[ji[l+1][0],ji[l+1][1]],_t.bezierCurveTo(h[1][0],h[1][1],h[2][0],h[2][1],h[3][0],h[3][1]);Y()}Wi=!1,Gi=!1,zi=[],Ui=0,t&&ji.pop()}},pr.prototype.endShape=function(e){if(0!==ji.length){var t,n=2===e,r=[],o=[],s=[],a=[],l=[];Vi=!0;var c,h,f,d=ji.length;for(c=0;d>c;c++)for(t=ji[c],h=0;3>h;h++)o.push(t[h]);for(c=0;d>c;c++)for(t=ji[c],h=5;9>h;h++)s.push(t[h]);for(c=0;d>c;c++)for(t=ji[c],h=9;13>h;h++)a.push(t[h]);for(c=0;d>c;c++)t=ji[c],l.push(t[3]),l.push(t[4]);if(n){for(o.push(ji[0][0]),o.push(ji[0][1]),o.push(ji[0][2]),c=5;9>c;c++)s.push(ji[0][c]);for(c=9;13>c;c++)a.push(ji[0][c]);l.push(ji[0][3]),l.push(ji[0][4])}if(!Wi||20!==kn&&kn!==i)if(!Gi||20!==kn&&kn!==i){if(2===kn){for(c=0;d>c;c++)for(t=ji[c],h=0;3>h;h++)r.push(t[h]);Mr(r,a)}else if(4===kn){for(c=0;d>c;c++)for(t=ji[c],h=0;3>h;h++)r.push(t[h]);for(c=0;d>c;c++)for(t=ji[c],h=5;9>h;h++)s.push(t[h]);Lr(r,"LINES",a)}else if(9===kn){if(d>2)for(c=0;d>c+2;c+=3){for(o=[],l=[],r=[],s=[],a=[],h=0;3>h;h++)for(f=0;3>f;f++)r.push(ji[c+h][f]),o.push(ji[c+h][f]);for(h=0;3>h;h++)for(f=3;5>f;f++)l.push(ji[c+h][f]);for(h=0;3>h;h++)for(f=5;9>f;f++)s.push(ji[c+h][f]),a.push(ji[c+h][f+4]);fn&&Lr(r,"LINE_LOOP",a),(ln||Qn)&&Pr(o,"TRIANGLES",s,l)}}else if(10===kn){if(d>2)for(c=0;d>c+2;c++){for(r=[],o=[],a=[],s=[],l=[],h=0;3>h;h++)for(f=0;3>f;f++)r.push(ji[c+h][f]),o.push(ji[c+h][f]);for(h=0;3>h;h++)for(f=3;5>f;f++)l.push(ji[c+h][f]);for(h=0;3>h;h++)for(f=5;9>f;f++)a.push(ji[c+h][f+4]),s.push(ji[c+h][f]);(ln||Qn)&&Pr(o,"TRIANGLE_STRIP",s,l),fn&&Lr(r,"LINE_LOOP",a)}}else if(11===kn){if(d>2){for(c=0;3>c;c++)for(t=ji[c],h=0;3>h;h++)r.push(t[h]);for(c=0;3>c;c++)for(t=ji[c],h=9;13>h;h++)a.push(t[h]);for(fn&&Lr(r,"LINE_LOOP",a),c=2;d>c+1;c++){for(r=[],a=[],r.push(ji[0][0]),r.push(ji[0][1]),r.push(ji[0][2]),a.push(ji[0][9]),a.push(ji[0][10]),a.push(ji[0][11]),a.push(ji[0][12]),h=0;2>h;h++)for(f=0;3>f;f++)r.push(ji[c+h][f]);for(h=0;2>h;h++)for(f=9;13>f;f++)a.push(ji[c+h][f]);fn&&Lr(r,"LINE_STRIP",a)}(ln||Qn)&&Pr(o,"TRIANGLE_FAN",s,l)}}else if(16===kn)for(c=0;d>c+3;c+=4){for(r=[],h=0;4>h;h++)for(t=ji[c+h],f=0;3>f;f++)r.push(t[f]);if(fn&&Lr(r,"LINE_LOOP",a),ln){for(o=[],s=[],l=[],h=0;3>h;h++)o.push(ji[c][h]);for(h=5;9>h;h++)s.push(ji[c][h]);for(h=0;3>h;h++)o.push(ji[c+1][h]);for(h=5;9>h;h++)s.push(ji[c+1][h]);for(h=0;3>h;h++)o.push(ji[c+3][h]);for(h=5;9>h;h++)s.push(ji[c+3][h]);for(h=0;3>h;h++)o.push(ji[c+2][h]);for(h=5;9>h;h++)s.push(ji[c+2][h]);Qn&&(l.push(ji[c+0][3]),l.push(ji[c+0][4]),l.push(ji[c+1][3]),l.push(ji[c+1][4]),l.push(ji[c+3][3]),l.push(ji[c+3][4]),l.push(ji[c+2][3]),l.push(ji[c+2][4])),Pr(o,"TRIANGLE_STRIP",s,l)}}else if(17===kn){var p=[];if(d>3){for(c=0;2>c;c++)for(t=ji[c],h=0;3>h;h++)r.push(t[h]);for(c=0;2>c;c++)for(t=ji[c],h=9;13>h;h++)a.push(t[h]);for(Lr(r,"LINE_STRIP",a),d>4&&d%2>0&&(p=o.splice(o.length-3),ji.pop()),c=0;d>c+3;c+=2){for(r=[],a=[],h=0;3>h;h++)r.push(ji[c+1][h]);for(h=0;3>h;h++)r.push(ji[c+3][h]);for(h=0;3>h;h++)r.push(ji[c+2][h]);for(h=0;3>h;h++)r.push(ji[c+0][h]);for(h=9;13>h;h++)a.push(ji[c+1][h]);for(h=9;13>h;h++)a.push(ji[c+3][h]);for(h=9;13>h;h++)a.push(ji[c+2][h]);for(h=9;13>h;h++)a.push(ji[c+0][h]);fn&&Lr(r,"LINE_STRIP",a)}(ln||Qn)&&Pr(o,"TRIANGLE_LIST",s,l)}}else if(1===d){for(h=0;3>h;h++)r.push(ji[0][h]);for(h=9;13>h;h++)a.push(ji[0][h]);Mr(r,a)}else{for(c=0;d>c;c++){for(t=ji[c],h=0;3>h;h++)r.push(t[h]);for(h=5;9>h;h++)a.push(t[h])}fn&&n?Lr(r,"LINE_LOOP",a):fn&&!n&&Lr(r,"LINE_STRIP",a),(ln||Qn)&&Pr(o,"TRIANGLE_FAN",s,l)}Qn=!1,_t.useProgram(Pt),u("usingTexture3d",Pt,"uUsingTexture",Qn)}else r=o,r.splice(r.length-3),a.splice(a.length-4),fn&&Lr(r,null,a),ln&&Pr(o,"TRIANGLES",s);else r=o,fn&&Lr(r,null,a),ln&&Pr(o,null,s);Wi=!1,Gi=!1,zi=[],Ui=0}};var Ir=function(e,t){var n=1/e,i=n*n,r=i*n;t.set(0,0,0,1,r,i,n,0,6*r,2*i,0,0,6*r,0,0,0)},$r=function(){kt||(Dt=new _r,kt=new _r,Pn=!0);var e=Mn;Dt.set((e-1)/2,(e+3)/2,(-3-e)/2,(1-e)/2,1-e,(-5-e)/2,e+2,(e-1)/2,(e-1)/2,0,(1-e)/2,0,0,1,0,0),Ir(Ln,kt),Mt||(Rt=new _r),Rt.set(Dt),Rt.preApply(Mt),kt.apply(Dt)};dr.prototype.bezierVertex=function(){Gi=!0;var e=[];if(Vi)throw"vertex() must be used at least once before calling bezierVertex()";for(var t=0;t<arguments.length;t++)e[t]=arguments[t];ji.push(e),ji[ji.length-1].isVert=!1},pr.prototype.bezierVertex=function(){if(Gi=!0,Vi)throw"vertex() must be used at least once before calling bezierVertex()";if(9===arguments.length){Bt===i&&(Bt=new _r);var e=ji.length-1;Ir($n,Bt),Bt.apply(Lt);for(var t=Bt.array(),n=ji[e][0],r=ji[e][1],o=ji[e][2],s=t[4]*n+t[5]*arguments[0]+t[6]*arguments[3]+t[7]*arguments[6],a=t[8]*n+t[9]*arguments[0]+t[10]*arguments[3]+t[11]*arguments[6],l=t[12]*n+t[13]*arguments[0]+t[14]*arguments[3]+t[15]*arguments[6],u=t[4]*r+t[5]*arguments[1]+t[6]*arguments[4]+t[7]*arguments[7],c=t[8]*r+t[9]*arguments[1]+t[10]*arguments[4]+t[11]*arguments[7],h=t[12]*r+t[13]*arguments[1]+t[14]*arguments[4]+t[15]*arguments[7],f=t[4]*o+t[5]*arguments[2]+t[6]*arguments[5]+t[7]*arguments[8],d=t[8]*o+t[9]*arguments[2]+t[10]*arguments[5]+t[11]*arguments[8],p=t[12]*o+t[13]*arguments[2]+t[14]*arguments[5]+t[15]*arguments[8],g=0;$n>g;g++)n+=s,s+=a,a+=l,r+=u,u+=c,c+=h,o+=f,f+=d,d+=p,Ct.vertex(n,r,o);Ct.vertex(arguments[6],arguments[7],arguments[8])}},Ct.texture=function(e){var n=St.$ensureContext();if(e.__texture)n.bindTexture(n.TEXTURE_2D,e.__texture);else if("canvas"===e.localName)n.bindTexture(n.TEXTURE_2D,Jt),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.generateMipmap(n.TEXTURE_2D),Kn.width=e.width,Kn.height=e.height;else{var i,r=n.createTexture(),o=t.createElement("canvas"),s=o.getContext("2d");if(e.width&0===e.width-1)o.width=e.width;else{for(i=1;i<e.width;)i*=2;o.width=i}if(e.height&0===e.height-1)o.height=e.height;else{for(i=1;i<e.height;)i*=2;o.height=i}s.drawImage(e.sourceImg,0,0,e.width,e.height,0,0,o.width,o.height),n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,o),n.generateMipmap(n.TEXTURE_2D),e.__texture=r,Kn.width=e.width,Kn.height=e.height}Qn=!0,n.useProgram(Pt),u("usingTexture3d",Pt,"uUsingTexture",Qn)},Ct.textureMode=function(e){Zn=e};var Nr=function(e,t,n,i,r,o,s,a,l,u,c,h){var f=i,d=r,p=o,g=kt.array(),m=g[4]*e+g[5]*i+g[6]*s+g[7]*u,v=g[8]*e+g[9]*i+g[10]*s+g[11]*u,y=g[12]*e+g[13]*i+g[14]*s+g[15]*u,E=g[4]*t+g[5]*r+g[6]*a+g[7]*c,A=g[8]*t+g[9]*r+g[10]*a+g[11]*c,b=g[12]*t+g[13]*r+g[14]*a+g[15]*c,w=g[4]*n+g[5]*o+g[6]*l+g[7]*h,x=g[8]*n+g[9]*o+g[10]*l+g[11]*h,C=g[12]*n+g[13]*o+g[14]*l+g[15]*h;Ct.vertex(f,d,p);for(var _=0;Ln>_;_++)f+=m,m+=v,v+=y,d+=E,E+=A,A+=b,p+=w,w+=x,x+=C,Ct.vertex(f,d,p)};dr.prototype.curveVertex=function(e,t){Wi=!0,Ct.vertex(e,t)},pr.prototype.curveVertex=function(e,t,n){Wi=!0,Pn||$r();var i=[];i[0]=e,i[1]=t,i[2]=n,zi.push(i),Ui++,Ui>3&&Nr(zi[Ui-4][0],zi[Ui-4][1],zi[Ui-4][2],zi[Ui-3][0],zi[Ui-3][1],zi[Ui-3][2],zi[Ui-2][0],zi[Ui-2][1],zi[Ui-2][2],zi[Ui-1][0],zi[Ui-1][1],zi[Ui-1][2])},dr.prototype.curve=function(e,t,n,i,r,o,s,a){Ct.beginShape(),Ct.curveVertex(e,t),Ct.curveVertex(n,i),Ct.curveVertex(r,o),Ct.curveVertex(s,a),Ct.endShape()},pr.prototype.curve=function(e,t,n,r,o,s,a,l,u,c,h,f){return f!==i?(Ct.beginShape(),Ct.curveVertex(e,t,n),Ct.curveVertex(r,o,s),Ct.curveVertex(a,l,u),Ct.curveVertex(c,h,f),Ct.endShape(),void 0):(Ct.beginShape(),Ct.curveVertex(e,t),Ct.curveVertex(n,r),Ct.curveVertex(o,s),Ct.curveVertex(a,l),Ct.endShape(),void 0)},Ct.curveTightness=function(e){Mn=e},Ct.curveDetail=function(e){Ln=e,$r()},Ct.rectMode=function(e){bn=e},Ct.imageMode=function(e){switch(e){case 0:ur=lr;break;case 1:ur=cr;break;case 3:ur=hr;break;default:throw"Invalid imageMode"}},Ct.ellipseMode=function(e){wn=e},Ct.arc=function(e,t,n,i,r,o){if(!(0>=n||r>o)){for(1===wn?(n-=e,i-=t):2===wn?(e-=n,t-=i,n=2*n,i=2*i):3===wn&&(e-=n/2,t-=i/2);0>r;)r+=6.283185307179586,o+=6.283185307179586;o-r>6.283185307179586&&(r=0,o=6.283185307179586);var s,a,l=n/2,u=i/2,c=e+l,h=t+u,f=0|.5+2*r*Ct.RAD_TO_DEG,d=0|.5+2*o*Ct.RAD_TO_DEG;if(ln){var p=fn;for(fn=!1,Ct.beginShape(),Ct.vertex(c,h),s=f;d>=s;s++)a=s%720,Ct.vertex(c+ki[a]*l,h+Ri[a]*u);Ct.endShape(2),fn=p}if(fn){var g=ln;for(ln=!1,Ct.beginShape(),s=f;d>=s;s++)a=s%720,Ct.vertex(c+ki[a]*l,h+Ri[a]*u);Ct.endShape(),ln=g}}},dr.prototype.line=function(e,t,r,o){if(fn){if(e=n.round(e),r=n.round(r),t=n.round(t),o=n.round(o),e===r&&t===o)return Ct.point(e,t),void 0;for(var s=i,a=i,l=!0,u=yi.array(),c=[1,0,0,0,1,0],h=0;6>h&&l;h++)l=u[h]===c[h];l&&(e===r?(t>o&&(s=t,t=o,o=s),o++,1===mn%2&&_t.translate(.5,0)):t===o&&(e>r&&(s=e,e=r,r=s),r++,1===mn%2&&_t.translate(0,.5)),1===mn&&(a=_t.lineCap,_t.lineCap="butt")),_t.beginPath(),_t.moveTo(e||0,t||0),_t.lineTo(r||0,o||0),V(),l&&(e===r&&1===mn%2?_t.translate(-.5,0):t===o&&1===mn%2&&_t.translate(0,-.5),1===mn&&(_t.lineCap=a))}},pr.prototype.line=function(e,t,n,r,o,s){if((o===i||s===i)&&(s=0,o=r,r=n,n=0),e===r&&t===o&&n===s)return Ct.point(e,t,n),void 0;var a=[e,t,n,r,o,s],f=new _r;f.scale(1,-1,1),f.apply(yi.array()),f.transpose(),mn>0&&fn&&(_t.useProgram(It),c("uModel2d",It,"uModel",!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c("uView2d",It,"uView",!1,f.array()),l("uColor2d",It,"uColor",dn),u("uIsDrawingText",It,"uIsDrawingText",!1),h("aVertex2d",It,"aVertex",3,Wt),d("aTextureCoord2d",It,"aTextureCoord"),_t.bufferData(_t.ARRAY_BUFFER,new A(a),_t.STREAM_DRAW),_t.drawArrays(_t.LINES,0,2))},dr.prototype.bezier=function(){if(8!==arguments.length)throw"You must use 8 parameters for bezier() in 2D mode";Ct.beginShape(),Ct.vertex(arguments[0],arguments[1]),Ct.bezierVertex(arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]),Ct.endShape()},pr.prototype.bezier=function(){if(12!==arguments.length)throw"You must use 12 parameters for bezier() in 3D mode";Ct.beginShape(),Ct.vertex(arguments[0],arguments[1],arguments[2]),Ct.bezierVertex(arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]),Ct.endShape()},Ct.bezierDetail=function(e){$n=e},Ct.bezierPoint=function(e,t,n,i,r){return(1-r)*(1-r)*(1-r)*e+3*(1-r)*(1-r)*r*t+3*(1-r)*r*r*n+r*r*r*i},Ct.bezierTangent=function(e,t,n,i,r){return 3*r*r*(-e+3*t-3*n+i)+6*r*(e-2*t+n)+3*(-e+t)},Ct.curvePoint=function(e,t,n,i,r){return.5*(2*t+(-e+n)*r+(2*e-5*t+4*n-i)*r*r+(-e+3*t-3*n+i)*r*r*r)},Ct.curveTangent=function(e,t,n,i,r){return.5*(-e+n+2*(2*e-5*t+4*n-i)*r+3*(-e+3*t-3*n+i)*r*r)},Ct.triangle=function(e,t,n,i,r,o){Ct.beginShape(9),Ct.vertex(e,t,0),Ct.vertex(n,i,0),Ct.vertex(r,o,0),Ct.endShape()},Ct.quad=function(e,t,n,i,r,o,s,a){Ct.beginShape(16),Ct.vertex(e,t,0),Ct.vertex(n,i,0),Ct.vertex(r,o,0),Ct.vertex(s,a,0),Ct.endShape()};var Or=function(e,t,r,o,s,a,l,u){u===i&&(a=s,l=s,u=s);var c=r/2,h=o/2;(s>c||s>h)&&(s=n.min(c,h)),(a>c||a>h)&&(a=n.min(c,h)),(l>c||l>h)&&(l=n.min(c,h)),(u>c||u>h)&&(u=n.min(c,h)),(!ln||fn)&&_t.translate(.5,.5),_t.beginPath(),_t.moveTo(e+s,t),_t.lineTo(e+r-a,t),_t.quadraticCurveTo(e+r,t,e+r,t+a),_t.lineTo(e+r,t+o-l),_t.quadraticCurveTo(e+r,t+o,e+r-l,t+o),_t.lineTo(e+u,t+o),_t.quadraticCurveTo(e,t+o,e,t+o-u),_t.lineTo(e,t+s),_t.quadraticCurveTo(e,t,e+s,t),(!ln||fn)&&_t.translate(-.5,-.5),G(),V()};dr.prototype.rect=function(e,t,r,o,s,a,l,u){if(r||o){if(1===bn?(r-=e,o-=t):2===bn?(r*=2,o*=2,e-=r/2,t-=o/2):3===bn&&(e-=r/2,t-=o/2),e=n.round(e),t=n.round(t),r=n.round(r),o=n.round(o),s!==i)return Or(e,t,r,o,s,a,l,u),void 0;
fn&&1===mn%2&&_t.translate(.5,.5),_t.beginPath(),_t.rect(e,t,r,o),G(),V(),fn&&1===mn%2&&_t.translate(-.5,-.5)}},pr.prototype.rect=function(e,t,n,r,o){if(o!==i)throw"rect() with rounded corners is not supported in 3D mode";1===bn?(n-=e,r-=t):2===bn?(n*=2,r*=2,e-=n/2,t-=r/2):3===bn&&(e-=n/2,t-=r/2);var s=new _r;s.translate(e,t,0),s.scale(n,r,1),s.transpose();var a=new _r;if(a.scale(1,-1,1),a.apply(yi.array()),a.transpose(),mn>0&&fn&&(_t.useProgram(It),c("uModel2d",It,"uModel",!1,s.array()),c("uView2d",It,"uView",!1,a.array()),l("uColor2d",It,"uColor",dn),u("uIsDrawingText2d",It,"uIsDrawingText",!1),h("aVertex2d",It,"aVertex",3,jt),d("aTextureCoord2d",It,"aTextureCoord"),_t.drawArrays(_t.LINE_LOOP,0,Zi.length/3)),ln){if(_t.useProgram(Pt),c("uModel3d",Pt,"uModel",!1,s.array()),c("uView3d",Pt,"uView",!1,a.array()),_t.enable(_t.POLYGON_OFFSET_FILL),_t.polygonOffset(1,1),l("color3d",Pt,"uColor",un),Ci>0){var f=new _r;f.set(a);var p=new _r;p.set(s),f.mult(p);var g=new _r;g.set(f),g.invert(),g.transpose(),c("uNormalTransform3d",Pt,"uNormalTransform",!1,g.array()),h("aNormal3d",Pt,"aNormal",3,zt)}else d("normal3d",Pt,"aNormal");h("vertex3d",Pt,"aVertex",3,jt),_t.drawArrays(_t.TRIANGLE_FAN,0,Zi.length/3),_t.disable(_t.POLYGON_OFFSET_FILL)}},dr.prototype.ellipse=function(e,t,n,i){if(e=e||0,t=t||0,!(0>=n&&0>=i))if(2===wn?(n*=2,i*=2):1===wn?(n-=e,i-=t,e+=n/2,t+=i/2):0===wn&&(e+=n/2,t+=i/2),n===i)_t.beginPath(),_t.arc(e,t,n/2,0,6.283185307179586,!1),G(),V();else{var r=n/2,o=i/2,s=.5522847498307933,a=s*r,l=s*o;Ct.beginShape(),Ct.vertex(e+r,t),Ct.bezierVertex(e+r,t-l,e+a,t-o,e,t-o),Ct.bezierVertex(e-a,t-o,e-r,t-l,e-r,t),Ct.bezierVertex(e-r,t+l,e-a,t+o,e,t+o),Ct.bezierVertex(e+a,t+o,e+r,t+l,e+r,t),Ct.endShape()}},pr.prototype.ellipse=function(e,t,n,i){if(e=e||0,t=t||0,!(0>=n&&0>=i)){2===wn?(n*=2,i*=2):1===wn?(n-=e,i-=t,e+=n/2,t+=i/2):0===wn&&(e+=n/2,t+=i/2);var r=n/2,o=i/2,s=.5522847498307933,a=s*r,l=s*o;if(Ct.beginShape(),Ct.vertex(e+r,t),Ct.bezierVertex(e+r,t-l,0,e+a,t-o,0,e,t-o,0),Ct.bezierVertex(e-a,t-o,0,e-r,t-l,0,e-r,t,0),Ct.bezierVertex(e-r,t+l,0,e-a,t+o,0,e,t+o,0),Ct.bezierVertex(e+a,t+o,0,e+r,t+l,0,e+r,t,0),Ct.endShape(),ln){var u,c,h=0,f=0;for(u=0;u<ji.length;u++)h+=ji[u][0],f+=ji[u][1];h/=ji.length,f/=ji.length;var d=[],p=[],g=[];for(d[0]=h,d[1]=f,d[2]=0,d[3]=0,d[4]=0,d[5]=un[0],d[6]=un[1],d[7]=un[2],d[8]=un[3],d[9]=dn[0],d[10]=dn[1],d[11]=dn[2],d[12]=dn[3],d[13]=xn,d[14]=Cn,d[15]=_n,ji.unshift(d),u=0;u<ji.length;u++){for(c=0;3>c;c++)p.push(ji[u][c]);for(c=5;9>c;c++)g.push(ji[u][c])}Pr(p,"TRIANGLE_FAN",g)}}},Ct.normal=function(e,t,n){if(3!==arguments.length||"number"!=typeof e||"number"!=typeof t||"number"!=typeof n)throw"normal() requires three numeric arguments.";xn=e,Cn=t,_n=n,0!==kn&&(0===Fn?Fn=1:1===Fn&&(Fn=2))},Ct.save=function(t,n){return n!==i?e.open(n.toDataURL(),"_blank"):e.open(Ct.externals.canvas.toDataURL(),"_blank")};var Hr=0;Ct.saveFrame=function(e){e===i&&(e="screen-####.png");var t=e.replace(/#+/,function(e){for(var t=""+Hr++;t.length<e.length;)t="0"+t;return t});Ct.save(t)};var jr=t.createElement("canvas").getContext("2d"),zr=[i,i,i],Ur=function(e,n,i){if(this.__isDirty=!1,e instanceof HTMLImageElement)this.fromHTMLImageData(e);else if(n||i){this.width=e||1,this.height=n||1;var r=this.sourceImg=t.createElement("canvas");if(r.width=this.width,r.height=this.height,this.imageData=r.getContext("2d").createImageData(this.width,this.height),this.format=2===i||4===i?i:1,1===this.format)for(var o=3,s=this.imageData.data,a=s.length;a>o;o+=4)s[o]=255;this.__isDirty=!0,this.updatePixels()}else this.width=0,this.height=0,this.imageData=jr.createImageData(1,1),this.format=2;this.pixels=X(this)};Ur.prototype={__isPImage:!0,updatePixels:function(){var e=this.sourceImg;e&&e instanceof HTMLCanvasElement&&this.__isDirty&&e.getContext("2d").putImageData(this.imageData,0,0),this.__isDirty=!1},fromHTMLImageData:function(e){var t=q(e);try{var n=t.context.getImageData(0,0,e.width,e.height);this.fromImageData(n)}catch(i){e.width&&e.height&&(this.isRemote=!0,this.width=e.width,this.height=e.height)}this.sourceImg=e},get:function(e,t,n,i){return arguments.length?2===arguments.length?Ct.get(e,t,this):4===arguments.length?Ct.get(e,t,n,i,this):void 0:Ct.get(this)},set:function(e,t,n){Ct.set(e,t,n,this),this.__isDirty=!0},blend:function(e,t,n,i,r,o,s,a,l,u){9===arguments.length?Ct.blend(this,e,t,n,i,r,o,s,a,l,this):10===arguments.length&&Ct.blend(e,t,n,i,r,o,s,a,l,u,this),delete this.sourceImg},copy:function(e,t,n,i,r,o,s,a,l){8===arguments.length?Ct.blend(this,e,t,n,i,r,o,s,a,0,this):9===arguments.length&&Ct.blend(e,t,n,i,r,o,s,a,l,0,this),delete this.sourceImg},filter:function(e,t){2===arguments.length?Ct.filter(e,t,this):1===arguments.length&&Ct.filter(e,null,this),delete this.sourceImg},save:function(e){Ct.save(e,this)},resize:function(e,t){if(this.isRemote)throw"Image is loaded remotely. Cannot resize.";if(0!==this.width||0!==this.height){0===e&&0!==t?e=n.floor(this.width/this.height*t):0===t&&0!==e&&(t=n.floor(this.height/this.width*e));var i=q(this.imageData).canvas,r=q(i,e,t).context.getImageData(0,0,e,t);this.fromImageData(r)}},mask:function(e){var t,n,i=this.toImageData();if(e instanceof Ur||e.__isPImage){if(e.width!==this.width||e.height!==this.height)throw"mask must have the same dimensions as PImage.";for(e=e.toImageData(),t=2,n=4*this.width*this.height;n>t;t+=4)i.data[t+1]=e.data[t]}else if(e instanceof Array){if(this.width*this.height!==e.length)throw"mask array must be the same length as PImage pixels array.";for(t=0,n=e.length;n>t;++t)i.data[4*t+3]=e[t]}this.fromImageData(i)},loadPixels:m,toImageData:function(){if(this.isRemote)return this.sourceImg;if(!this.__isDirty)return this.imageData;var e=q(this.sourceImg);return e.context.getImageData(0,0,this.width,this.height)},toDataURL:function(){if(this.isRemote)throw"Image is loaded remotely. Cannot create dataURI.";var e=q(this.imageData);return e.canvas.toDataURL()},fromImageData:function(e){var n=e.width,i=e.height,r=t.createElement("canvas"),o=r.getContext("2d");this.width=r.width=n,this.height=r.height=i,o.putImageData(e,0,0),this.format=2,this.imageData=e,this.sourceImg=r}},Ct.PImage=Ur,Ct.createImage=function(e,t,n){return new Ur(e,t,n)},Ct.loadImage=function(e,n,i){n&&(e=e+"."+n);var r;if(Ft.imageCache.images[e])return r=new Ur(Ft.imageCache.images[e]),r.loaded=!0,r;r=new Ur;var o=t.createElement("img");return r.sourceImg=o,o.onload=function(e,t,n){var i=e,r=t,o=n;return function(){r.fromHTMLImageData(i),r.loaded=!0,o&&o()}}(o,r,i),o.src=e,r},Ct.requestImage=Ct.loadImage,Ct.get=function(e,t,n,i,r){return void 0!==r?Q(e,t,n,i,r):void 0!==i?Z(e,t,n,i):void 0!==n?K(e,t,n):void 0!==t?J(e,t):void 0!==e?Q(0,0,e.width,e.height,e):Z(0,0,Ct.width,Ct.height)},Ct.createGraphics=function(e,t,n){var i=new P;return i.size(e,t,n),i.background(0,0),i},Ct.set=function(e,t,n,i){3===arguments.length?"number"==typeof n?it(e,t,n):(n instanceof Ur||n.__isPImage)&&Ct.image(n,e,t):4===arguments.length&&rt(e,t,n,i)},Ct.imageData={},Ct.pixels={getLength:function(){return Ct.imageData.data.length?Ct.imageData.data.length/4:0},getPixel:function(e){var t=4*e,n=Ct.imageData.data;return 4278190080&n[t+3]<<24|16711680&n[t+0]<<16|65280&n[t+1]<<8|255&n[t+2]},setPixel:function(e,t){var n=4*e,i=Ct.imageData.data;i[n+0]=(16711680&t)>>>16,i[n+1]=(65280&t)>>>8,i[n+2]=255&t,i[n+3]=(4278190080&t)>>>24},toArray:function(){for(var e=[],t=Ct.imageData.width*Ct.imageData.height,n=Ct.imageData.data,i=0,r=0;t>i;i++,r+=4)e.push(4278190080&n[r+3]<<24|16711680&n[r+0]<<16|65280&n[r+1]<<8|255&n[r+2]);return e},set:function(e){for(var t=0,n=e.length;n>t;t++)this.setPixel(t,e[t])}},Ct.loadPixels=function(){Ct.imageData=St.$ensureContext().getImageData(0,0,Ct.width,Ct.height)},Ct.updatePixels=function(){Ct.imageData&&St.$ensureContext().putImageData(Ct.imageData,0,0)},Ct.hint=function(e){var t=St.$ensureContext();4===e?(t.disable(t.DEPTH_TEST),t.depthMask(!1),t.clear(t.DEPTH_BUFFER_BIT)):-4===e?(t.enable(t.DEPTH_TEST),t.depthMask(!0)):-1===e||2===e?yn=!0:1===e&&(yn=!1)};var Wr=function(e,t,n,i){var r;if(e instanceof Ur||e.__isPImage){if(r=e,!r.loaded)throw"Error using image in background(): PImage not loaded.";if(r.width!==Ct.width||r.height!==Ct.height)throw"Background image must be the same dimensions as the canvas."}else r=Ct.color(e,t,n,i);In=r};dr.prototype.background=function(e,t,n,r){e!==i&&Wr(e,t,n,r),In instanceof Ur||In.__isPImage?(_(),_t.setTransform(1,0,0,1,0,0),Ct.image(In,0,0),F()):(_(),_t.setTransform(1,0,0,1,0,0),Ct.alpha(In)!==Nn&&_t.clearRect(0,0,Ct.width,Ct.height),_t.fillStyle=Ct.color.toString(In),_t.fillRect(0,0,Ct.width,Ct.height),hn=!0,F())},pr.prototype.background=function(e,t,n,i){arguments.length>0&&Wr(e,t,n,i);var r=Ct.color.toGLArray(In);_t.clearColor(r[0],r[1],r[2],r[3]),_t.clear(_t.COLOR_BUFFER_BIT|_t.DEPTH_BUFFER_BIT)},dr.prototype.image=function(e,t,i,r,o){if(t=n.round(t),i=n.round(i),e.width>0){r||e.width,o||e.height;var s=ur(t||0,i||0,r||e.width,o||e.height,arguments.length<4),a=!!e.sourceImg&&null===Gn;if(a){var l=e.sourceImg;e.__isDirty&&e.updatePixels(),_t.drawImage(l,0,0,l.width,l.height,s.x,s.y,s.w,s.h)}else{var u=e.toImageData();null!==Gn&&(Gn(u),e.__isDirty=!0),_t.drawImage(q(u).canvas,0,0,e.width,e.height,s.x,s.y,s.w,s.h)}}},pr.prototype.image=function(e,t,i,r,o){e.width>0&&(t=n.round(t),i=n.round(i),r=r||e.width,o=o||e.height,Ct.beginShape(Ct.QUADS),Ct.texture(e),Ct.vertex(t,i,0,0,0),Ct.vertex(t,i+o,0,0,o),Ct.vertex(t+r,i+o,0,r,o),Ct.vertex(t+r,i,0,r,0),Ct.endShape())},Ct.tint=function(e,t,n,i){var r=Ct.color(e,t,n,i),o=Ct.red(r)/On,s=Ct.green(r)/Hn,a=Ct.blue(r)/jn,l=Ct.alpha(r)/Nn;Gn=function(e){for(var t=e.data,n=4*e.width*e.height,i=0;n>i;)t[i++]*=o,t[i++]*=s,t[i++]*=a,t[i++]*=l},Vn=function(e){for(var t=0;t<e.length;)e[t++]=o,e[t++]=s,e[t++]=a,e[t++]=l}},Ct.noTint=function(){Gn=null,Vn=null},Ct.copy=function(e,t,n,r,o,s,a,l,u){u===i&&(u=l,l=a,a=s,s=o,o=r,r=n,n=t,t=e,e=Ct),Ct.blend(e,t,n,r,o,s,a,l,u,0)},Ct.blend=function(e,t,n,r,o,s,a,l,u,c,h){if(e.isRemote)throw"Image is loaded remotely. Cannot blend image.";c===i&&(c=u,u=l,l=a,a=s,s=o,o=r,r=n,n=t,t=e,e=Ct);var f=t+r,d=n+o,p=s+l,g=a+u,m=h||Ct;(h===i||c===i)&&Ct.loadPixels(),e.loadPixels(),e===Ct&&Ct.intersect(t,n,f,d,s,a,p,g)?Ct.blit_resize(Ct.get(t,n,f-t,d-n),0,0,f-t-1,d-n-1,m.imageData.data,m.width,m.height,s,a,p,g,c):Ct.blit_resize(e,t,n,f,d,m.imageData.data,m.width,m.height,s,a,p,g,c),h===i&&Ct.updatePixels()};var Gr=function(e){var t,n,i=Ct.floor(3.5*e);if(i=1>i?1:248>i?i:248,Ct.shared.blurRadius!==i){Ct.shared.blurRadius=i,Ct.shared.blurKernelSize=1+(Ct.shared.blurRadius<<1),Ct.shared.blurKernel=new A(Ct.shared.blurKernelSize);var r=Ct.shared.blurKernel,o=Ct.shared.blurKernelSize;for(Ct.shared.blurRadius,t=0;o>t;t++)r[t]=0;var s=(i-1)*(i-1);for(t=1;i>t;t++)r[i+t]=r[n]=s;r[i]=i*i}},Vr=function(e,t){var n,i,r,o,s,a,l,u,c,h,f,d,p,g,m,v=t.pixels.getLength(),y=new A(v),E=new A(v),b=new A(v),w=new A(v),x=0;Gr(e);var C=t.height,_=t.width,F=Ct.shared.blurKernelSize,S=Ct.shared.blurRadius,T=Ct.shared.blurKernel,D=t.imageData.data;for(p=0;C>p;p++){for(d=0;_>d;d++){if(o=r=i=s=n=0,l=d-S,0>l)f=-l,l=0;else{if(l>=_)break;f=0}for(g=f;F>g&&!(l>=_);g++)m=4*(l+x),a=T[g],s+=a*D[m+3],i+=a*D[m],r+=a*D[m+1],o+=a*D[m+2],n+=a,l++;u=x+d,w[u]=s/n,y[u]=i/n,E[u]=r/n,b[u]=o/n}x+=_}for(x=0,c=-S,h=c*_,p=0;C>p;p++){for(d=0;_>d;d++){if(o=r=i=s=n=0,0>c)f=u=-c,l=d;else{if(c>=C)break;f=0,u=c,l=d+h}for(g=f;F>g&&!(u>=C);g++)a=T[g],s+=a*w[l],i+=a*y[l],r+=a*E[l],o+=a*b[l],n+=a,u++,l+=_;m=4*(d+x),D[m]=i/n,D[m+1]=r/n,D[m+2]=o/n,D[m+3]=s/n}x+=_,h+=_,c++}},Yr=function(e,t){var n,i,r,o,s,a,l,u,c,h,f,d,p,g,m,v,y,E=0,A=t.pixels.getLength(),w=new b(A);if(e)for(;A>E;)for(n=E,i=E+t.width;i>E;)r=o=t.pixels.getPixel(E),l=E-1,a=E+1,u=E-t.width,c=E+t.width,n>l&&(l=E),a>=i&&(a=E),0>u&&(u=0),c>=A&&(c=E),d=t.pixels.getPixel(u),f=t.pixels.getPixel(l),p=t.pixels.getPixel(c),h=t.pixels.getPixel(a),s=77*(255&r>>16)+151*(255&r>>8)+28*(255&r),m=77*(255&f>>16)+151*(255&f>>8)+28*(255&f),g=77*(255&h>>16)+151*(255&h>>8)+28*(255&h),v=77*(255&d>>16)+151*(255&d>>8)+28*(255&d),y=77*(255&p>>16)+151*(255&p>>8)+28*(255&p),s>m&&(o=f,s=m),s>g&&(o=h,s=g),s>v&&(o=d,s=v),s>y&&(o=p,s=y),w[E++]=o;else for(;A>E;)for(n=E,i=E+t.width;i>E;)r=o=t.pixels.getPixel(E),l=E-1,a=E+1,u=E-t.width,c=E+t.width,n>l&&(l=E),a>=i&&(a=E),0>u&&(u=0),c>=A&&(c=E),d=t.pixels.getPixel(u),f=t.pixels.getPixel(l),p=t.pixels.getPixel(c),h=t.pixels.getPixel(a),s=77*(255&r>>16)+151*(255&r>>8)+28*(255&r),m=77*(255&f>>16)+151*(255&f>>8)+28*(255&f),g=77*(255&h>>16)+151*(255&h>>8)+28*(255&h),v=77*(255&d>>16)+151*(255&d>>8)+28*(255&d),y=77*(255&p>>16)+151*(255&p>>8)+28*(255&p),m>s&&(o=f,s=m),g>s&&(o=h,s=g),v>s&&(o=d,s=v),y>s&&(o=p,s=y),w[E++]=o;t.pixels.set(w)};Ct.filter=function(e,t,n){var r,o,s,a;if(3===arguments.length?(n.loadPixels(),r=n):(Ct.loadPixels(),r=Ct),t===i&&(t=null),r.isRemote)throw"Image is loaded remotely. Cannot filter image.";var l=r.pixels.getLength();switch(e){case 11:var u=t||1;Vr(u,r);break;case 12:if(4===r.format){for(a=0;l>a;a++)o=255-r.pixels.getPixel(a),r.pixels.setPixel(a,4278190080|o<<16|o<<8|o);r.format=1}else for(a=0;l>a;a++)o=r.pixels.getPixel(a),s=77*(255&o>>16)+151*(255&o>>8)+28*(255&o)>>8,r.pixels.setPixel(a,4278190080&o|s<<16|s<<8|s);break;case 13:for(a=0;l>a;a++)r.pixels.setPixel(a,16777215^r.pixels.getPixel(a));break;case 15:if(null===t)throw"Use filter(POSTERIZE, int levels) instead of filter(POSTERIZE)";var c=Ct.floor(t);if(2>c||c>255)throw"Levels must be between 2 and 255 for filter(POSTERIZE, levels)";var h=c-1;for(a=0;l>a;a++){var f=255&r.pixels.getPixel(a)>>16,d=255&r.pixels.getPixel(a)>>8,p=255&r.pixels.getPixel(a);f=255*(f*c>>8)/h,d=255*(d*c>>8)/h,p=255*(p*c>>8)/h,r.pixels.setPixel(a,4278190080&r.pixels.getPixel(a)|f<<16|d<<8|p)}break;case 14:for(a=0;l>a;a++)r.pixels.setPixel(a,4278190080|r.pixels.getPixel(a));r.format=1;break;case 16:if(null===t&&(t=.5),0>t||t>1)throw"Level must be between 0 and 1 for filter(THRESHOLD, level)";var g=Ct.floor(255*t);for(a=0;l>a;a++){var m=Ct.max((16711680&r.pixels.getPixel(a))>>16,Ct.max((65280&r.pixels.getPixel(a))>>8,255&r.pixels.getPixel(a)));r.pixels.setPixel(a,4278190080&r.pixels.getPixel(a)|(g>m?0:16777215))}break;case 17:Yr(!0,r);break;case 18:Yr(!1,r)}r.updatePixels()},Ct.shared={fracU:0,ifU:0,fracV:0,ifV:0,u1:0,u2:0,v1:0,v2:0,sX:0,sY:0,iw:0,iw1:0,ih1:0,ul:0,ll:0,ur:0,lr:0,cUL:0,cLL:0,cUR:0,cLR:0,srcXOffset:0,srcYOffset:0,r:0,g:0,b:0,a:0,srcBuffer:null,blurRadius:0,blurKernelSize:0,blurKernel:null},Ct.intersect=function(e,t,n,i,r,o,s,a){var l=n-e+1,u=i-t+1,c=s-r+1,h=a-o+1;if(e>r)c+=r-e,c>l&&(c=l);else{var f=l+e-r;c>f&&(c=f)}if(t>o)h+=o-t,h>u&&(h=u);else{var d=u+t-o;h>d&&(h=d)}return!(0>=c||0>=h)};var qr={};qr[1]=Ct.modes.blend,qr[2]=Ct.modes.add,qr[4]=Ct.modes.subtract,qr[8]=Ct.modes.lightest,qr[16]=Ct.modes.darkest,qr[0]=Ct.modes.replace,qr[32]=Ct.modes.difference,qr[64]=Ct.modes.exclusion,qr[128]=Ct.modes.multiply,qr[256]=Ct.modes.screen,qr[512]=Ct.modes.overlay,qr[1024]=Ct.modes.hard_light,qr[2048]=Ct.modes.soft_light,qr[4096]=Ct.modes.dodge,qr[8192]=Ct.modes.burn,Ct.blit_resize=function(e,t,i,r,o,s,a,l,u,c,h,f,d){var p,g;0>t&&(t=0),0>i&&(i=0),r>=e.width&&(r=e.width-1),o>=e.height&&(o=e.height-1);var m=r-t,v=o-i,y=h-u,E=f-c;if(!(0>=y||0>=E||0>=m||0>=v||u>=a||c>=l||t>=e.width||i>=e.height)){var A=n.floor(32768*(m/y)),b=n.floor(32768*(v/E)),w=Ct.shared;w.srcXOffset=n.floor(0>u?-u*A:32768*t),w.srcYOffset=n.floor(0>c?-c*b:32768*i),0>u&&(y+=u,u=0),0>c&&(E+=c,c=0),y=n.min(y,a-u),E=n.min(E,l-c);var x,C=c*a+u;w.srcBuffer=e.imageData.data,w.iw=e.width,w.iw1=e.width-1,w.ih1=e.height-1;var _,F,S,T,D,R,k=(Ct.filter_bilinear,Ct.filter_new_scanline,qr[d]),B=4278190080,M=16711680,L=65280,P=255,I=32767,$=15,N=1,O=9,H=w.srcBuffer,j=n.min;for(g=0;E>g;g++){for(w.sX=w.srcXOffset,w.fracV=w.srcYOffset&I,w.ifV=I-w.fracV,w.v1=(w.srcYOffset>>$)*w.iw,w.v2=j((w.srcYOffset>>$)+1,w.ih1)*w.iw,p=0;y>p;p++)F=4*(C+p),x=s[F+3]<<24&B|s[F]<<16&M|s[F+1]<<8&L|s[F+2]&P,w.fracU=w.sX&I,w.ifU=I-w.fracU,w.ul=w.ifU*w.ifV>>$,w.ll=w.ifU*w.fracV>>$,w.ur=w.fracU*w.ifV>>$,w.lr=w.fracU*w.fracV>>$,w.u1=w.sX>>$,w.u2=j(w.u1+1,w.iw1),S=4*(w.v1+w.u1),T=4*(w.v1+w.u2),D=4*(w.v2+w.u1),R=4*(w.v2+w.u2),w.cUL=H[S+3]<<24&B|H[S]<<16&M|H[S+1]<<8&L|H[S+2]&P,w.cUR=H[T+3]<<24&B|H[T]<<16&M|H[T+1]<<8&L|H[T+2]&P,w.cLL=H[D+3]<<24&B|H[D]<<16&M|H[D+1]<<8&L|H[D+2]&P,w.cLR=H[R+3]<<24&B|H[R]<<16&M|H[R+1]<<8&L|H[R+2]&P,w.r=w.ul*((w.cUL&M)>>16)+w.ll*((w.cLL&M)>>16)+w.ur*((w.cUR&M)>>16)+w.lr*((w.cLR&M)>>16)<<N&M,w.g=w.ul*(w.cUL&L)+w.ll*(w.cLL&L)+w.ur*(w.cUR&L)+w.lr*(w.cLR&L)>>>$&L,w.b=w.ul*(w.cUL&P)+w.ll*(w.cLL&P)+w.ur*(w.cUR&P)+w.lr*(w.cLR&P)>>>$,w.a=w.ul*((w.cUL&B)>>>24)+w.ll*((w.cLL&B)>>>24)+w.ur*((w.cUR&B)>>>24)+w.lr*((w.cLR&B)>>>24)<<O&B,_=k(x,w.a|w.r|w.g|w.b),s[F]=(_&M)>>>16,s[F+1]=(_&L)>>>8,s[F+2]=_&P,s[F+3]=(_&B)>>>24,w.sX+=A;C+=a,w.srcYOffset+=b}}},Ct.loadFont=function(e,t){if(e===i)throw"font name required in loadFont.";if(-1===e.indexOf(".svg"))return t===i&&(t=li.size),f.get(e,t);var n=Ct.loadGlyphs(e);return{name:e,css:"12px sans-serif",glyph:!0,units_per_em:n.units_per_em,horiz_adv_x:1/n.units_per_em*n.horiz_adv_x,ascent:n.ascent,descent:n.descent,width:function(t){for(var n=0,i=t.length,r=0;i>r;r++)try{n+=parseFloat(Ct.glyphLook(Ct.glyphTable[e],t[r]).horiz_adv_x)}catch(o){P.debug(o)}return n/Ct.glyphTable[e].units_per_em}}},Ct.createFont=function(e,t){return Ct.loadFont(e,t)},Ct.textFont=function(e,t){t!==i&&(e.glyph||(e=f.get(e.name,t)),ri=t),li=e,ii=li.name,oi=li.ascent,si=li.descent,ai=li.leading;var n=St.$ensureContext();n.font=li.css},Ct.textSize=function(e){li=f.get(ii,e),ri=e,oi=li.ascent,si=li.descent,ai=li.leading;var t=St.$ensureContext();t.font=li.css},Ct.textAscent=function(){return oi},Ct.textDescent=function(){return si},Ct.textLeading=function(e){ai=e},Ct.textAlign=function(e,t){ei=e,ti=t||0},dr.prototype.textWidth=function(e){var t,i=ot(e).split(/\r?\n/g),r=0,o=i.length;for(_t.font=li.css,t=0;o>t;++t)r=n.max(r,li.measureTextWidth(i[t]));return 0|r},pr.prototype.textWidth=function(e){var r,o=ot(e).split(/\r?\n/g),s=0,a=o.length;Tt===i&&(Tt=t.createElement("canvas"));var l=Tt.getContext("2d");for(l.font=li.css,r=0;a>r;++r)s=n.max(s,l.measureText(o[r]).width);return 0|s},Ct.glyphLook=function(e,t){try{switch(t){case"1":return e.one;case"2":return e.two;case"3":return e.three;case"4":return e.four;case"5":return e.five;case"6":return e.six;case"7":return e.seven;case"8":return e.eight;case"9":return e.nine;case"0":return e.zero;case" ":return e.space;case"$":return e.dollar;case"!":return e.exclam;case'"':return e.quotedbl;case"#":return e.numbersign;case"%":return e.percent;case"&":return e.ampersand;case"'":return e.quotesingle;case"(":return e.parenleft;case")":return e.parenright;case"*":return e.asterisk;case"+":return e.plus;case",":return e.comma;case"-":return e.hyphen;case".":return e.period;case"/":return e.slash;case"_":return e.underscore;case":":return e.colon;case";":return e.semicolon;case"<":return e.less;case"=":return e.equal;case">":return e.greater;case"?":return e.question;case"@":return e.at;case"[":return e.bracketleft;case"\\":return e.backslash;case"]":return e.bracketright;case"^":return e.asciicircum;case"`":return e.grave;case"{":return e.braceleft;case"|":return e.bar;case"}":return e.braceright;case"~":return e.asciitilde;default:return e[t]}}catch(n){P.debug(n)}},dr.prototype.text$line=function(e,t,n,i,r){var o=0,s=0;if(li.glyph){var a=Ct.glyphTable[ii];_(),_t.translate(t,n+ri),(39===r||3===r)&&(o=a.width(e),s=39===r?-o:-o/2);var l=a.units_per_em,u=1/l*ri;_t.scale(u,u);for(var c=0,h=e.length;h>c;c++)try{Ct.glyphLook(a,e[c]).draw()}catch(f){P.debug(f)}F()}else e&&"fillText"in _t&&(hn&&(_t.fillStyle=Ct.color.toString(cn),hn=!1),(39===r||3===r)&&(o=li.measureTextWidth(e),s=39===r?-o:-o/2),_t.fillText(e,t+s,n))},pr.prototype.text$line=function(e,n,r,o,s){Tt===i&&(Tt=t.createElement("canvas"));var a=_t;_t=Tt.getContext("2d"),_t.font=li.css;var f=li.measureTextWidth(e);Tt.width=f,Tt.height=ri,_t=Tt.getContext("2d"),_t.font=li.css,_t.textBaseline="top",dr.prototype.text$line(e,0,0,0,37);var d=Tt.width/Tt.height;_t=a,_t.bindTexture(_t.TEXTURE_2D,Kt),_t.texImage2D(_t.TEXTURE_2D,0,_t.RGBA,_t.RGBA,_t.UNSIGNED_BYTE,Tt),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_MAG_FILTER,_t.LINEAR),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_MIN_FILTER,_t.LINEAR),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_WRAP_T,_t.CLAMP_TO_EDGE),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_WRAP_S,_t.CLAMP_TO_EDGE);var p=0;39===s?p=-f:3===s&&(p=-f/2);var g=new _r,m=.5*ri;g.translate(n+p-m/2,r-m,o),g.scale(-d*m,-m,m),g.translate(-1,-1,-1),g.transpose();var v=new _r;v.scale(1,-1,1),v.apply(yi.array()),v.transpose(),_t.useProgram(It),h("aVertex2d",It,"aVertex",3,Zt),h("aTextureCoord2d",It,"aTextureCoord",2,Qt),u("uSampler2d",It,"uSampler",[0]),u("uIsDrawingText2d",It,"uIsDrawingText",!0),c("uModel2d",It,"uModel",!1,g.array()),c("uView2d",It,"uView",!1,v.array()),l("uColor2d",It,"uColor",un),_t.bindBuffer(_t.ELEMENT_ARRAY_BUFFER,en),_t.drawElements(_t.TRIANGLES,6,_t.UNSIGNED_SHORT,0)},Ct.text=function(){5!==ni&&(3===arguments.length?st(ot(arguments[0]),arguments[1],arguments[2],0):4===arguments.length?st(ot(arguments[0]),arguments[1],arguments[2],arguments[3]):5===arguments.length?at(ot(arguments[0]),arguments[1],arguments[2],arguments[3],arguments[4],0):6===arguments.length&&at(ot(arguments[0]),arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]))},Ct.textMode=function(e){ni=e},Ct.loadGlyphs=function(r){var o,s,a,l,u,c,h,f,d,p,g,m,v="[0-9\\-]+",y=function(e,t){var n,i=0,r=[],o=new RegExp(e,"g");for(n=r[i]=o.exec(t);n;)i++,n=r[i]=o.exec(t);return r},E=function(e){var t=y("[A-Za-z][0-9\\- ]+|Z",e),i=function(){return _(),St.$ensureContext()},r=function(){G(),V(),F()};m="return {draw:function(){var curContext=beforePathDraw();curContext.beginPath();",o=0,s=0,a=0,l=0,u=0,c=0,e=0,f=0,d="",p=t.length-1;for(var h=0;p>h;h++){var E=t[h][0],A=y(v,E);switch(E[0]){case"M":o=parseFloat(A[0][0]),s=parseFloat(A[1][0]),m+="curContext.moveTo("+o+","+-s+");";break;case"L":o=parseFloat(A[0][0]),s=parseFloat(A[1][0]),m+="curContext.lineTo("+o+","+-s+");";break;case"H":o=parseFloat(A[0][0]),m+="curContext.lineTo("+o+","+-s+");";break;case"V":s=parseFloat(A[0][0]),m+="curContext.lineTo("+o+","+-s+");";break;case"T":u=parseFloat(A[0][0]),c=parseFloat(A[1][0]),"Q"===d||"T"===d?(e=n.sqrt(n.pow(o-a,2)+n.pow(l-s,2)),f=n.PI+n.atan2(a-o,l-s),a=o+n.sin(f)*e,l=s+n.cos(f)*e):(a=o,l=s),m+="curContext.quadraticCurveTo("+a+","+-l+","+u+","+-c+");",o=u,s=c;break;case"Q":a=parseFloat(A[0][0]),l=parseFloat(A[1][0]),u=parseFloat(A[2][0]),c=parseFloat(A[3][0]),m+="curContext.quadraticCurveTo("+a+","+-l+","+u+","+-c+");",o=u,s=c;break;case"Z":m+="curContext.closePath();"}d=E[0]}return m+="afterPathDraw();",m+="curContext.translate("+g+",0);",m+="}}",new Function("beforePathDraw","afterPathDraw",m)(i,r)},A=function(e){var t=e.getElementsByTagName("font");Ct.glyphTable[r].horiz_adv_x=t[0].getAttribute("horiz-adv-x");var n=e.getElementsByTagName("font-face")[0];Ct.glyphTable[r].units_per_em=parseFloat(n.getAttribute("units-per-em")),Ct.glyphTable[r].ascent=parseFloat(n.getAttribute("ascent")),Ct.glyphTable[r].descent=parseFloat(n.getAttribute("descent"));for(var o=e.getElementsByTagName("glyph"),s=o.length,a=0;s>a;a++){var l=o[a].getAttribute("unicode"),u=o[a].getAttribute("glyph-name");g=o[a].getAttribute("horiz-adv-x"),null===g&&(g=Ct.glyphTable[r].horiz_adv_x),h=o[a].getAttribute("d"),h!==i&&(m=E(h),Ct.glyphTable[r][u]={name:u,unicode:l,horiz_adv_x:g,draw:m.draw})}},b=function(){var n;try{n=t.implementation.createDocument("","",null)}catch(i){return P.debug(i.message),void 0}try{n.async=!1,n.load(r),A(n.getElementsByTagName("svg")[0])}catch(o){P.debug(o);try{var s=new e.XMLHttpRequest;s.open("GET",r,!1),s.send(null),A(s.responseXML.documentElement)}catch(a){P.debug(o)}}};return Ct.glyphTable[r]={},b(r),Ct.glyphTable[r]},Ct.param=function(e){var t="data-processing-"+e;if(wt.hasAttribute(t))return wt.getAttribute(t);for(var n=0,i=wt.childNodes.length;i>n;++n){var r=wt.childNodes.item(n);if(1===r.nodeType&&"param"===r.tagName.toLowerCase()&&r.getAttribute("name")===e)return r.getAttribute("value")}return Ft.params.hasOwnProperty(e)?Ft.params[e]:null},gr.prototype.translate=ut("translate"),gr.prototype.transform=ut("transform"),gr.prototype.scale=ut("scale"),gr.prototype.pushMatrix=ut("pushMatrix"),gr.prototype.popMatrix=ut("popMatrix"),gr.prototype.resetMatrix=ut("resetMatrix"),gr.prototype.applyMatrix=ut("applyMatrix"),gr.prototype.rotate=ut("rotate"),gr.prototype.rotateZ=ut("rotateZ"),gr.prototype.shearX=ut("shearX"),gr.prototype.shearY=ut("shearY"),gr.prototype.redraw=ut("redraw"),gr.prototype.toImageData=ut("toImageData"),gr.prototype.ambientLight=ut("ambientLight"),gr.prototype.directionalLight=ut("directionalLight"),gr.prototype.lightFalloff=ut("lightFalloff"),gr.prototype.lightSpecular=ut("lightSpecular"),gr.prototype.pointLight=ut("pointLight"),gr.prototype.noLights=ut("noLights"),gr.prototype.spotLight=ut("spotLight"),gr.prototype.beginCamera=ut("beginCamera"),gr.prototype.endCamera=ut("endCamera"),gr.prototype.frustum=ut("frustum"),gr.prototype.box=ut("box"),gr.prototype.sphere=ut("sphere"),gr.prototype.ambient=ut("ambient"),gr.prototype.emissive=ut("emissive"),gr.prototype.shininess=ut("shininess"),gr.prototype.specular=ut("specular"),gr.prototype.fill=ut("fill"),gr.prototype.stroke=ut("stroke"),gr.prototype.strokeWeight=ut("strokeWeight"),gr.prototype.smooth=ut("smooth"),gr.prototype.noSmooth=ut("noSmooth"),gr.prototype.point=ut("point"),gr.prototype.vertex=ut("vertex"),gr.prototype.endShape=ut("endShape"),gr.prototype.bezierVertex=ut("bezierVertex"),gr.prototype.curveVertex=ut("curveVertex"),gr.prototype.curve=ut("curve"),gr.prototype.line=ut("line"),gr.prototype.bezier=ut("bezier"),gr.prototype.rect=ut("rect"),gr.prototype.ellipse=ut("ellipse"),gr.prototype.background=ut("background"),gr.prototype.image=ut("image"),gr.prototype.textWidth=ut("textWidth"),gr.prototype.text$line=ut("text$line"),gr.prototype.$ensureContext=ut("$ensureContext"),gr.prototype.$newPMatrix=ut("$newPMatrix"),gr.prototype.size=function(e,t,n){lt(2===n?"3D":"2D"),Ct.size(e,t,n)},gr.prototype.$init=m,dr.prototype.$init=function(){Ct.size(Ct.width,Ct.height),_t.lineCap="round",Ct.noSmooth(),Ct.disableContextMenu()},pr.prototype.$init=function(){Ct.use3DContext=!0,Ct.disableContextMenu()},fr.prototype.$ensureContext=function(){return _t},k(wt,"touchstart",function(e){wt.setAttribute("style","-webkit-user-select: none"),wt.setAttribute("onclick","void(0)"),wt.setAttribute("style","-webkit-tap-highlight-color:rgba(0,0,0,0)");for(var t=0,n=Sr.length;n>t;t++){var r=Sr[t].type;("mouseout"===r||"mousemove"===r||"mousedown"===r||"mouseup"===r||"DOMMouseScroll"===r||"mousewheel"===r||"touchstart"===r)&&B(Sr[t])}Ct.touchStart!==i||Ct.touchMove!==i||Ct.touchEnd!==i||Ct.touchCancel!==i?(k(wt,"touchstart",function(e){Ct.touchStart!==i&&(e=ft(e),Ct.touchStart(e))}),k(wt,"touchmove",function(e){Ct.touchMove!==i&&(e.preventDefault(),e=ft(e),Ct.touchMove(e))}),k(wt,"touchend",function(e){Ct.touchEnd!==i&&(e=ft(e),Ct.touchEnd(e))}),k(wt,"touchcancel",function(e){Ct.touchCancel!==i&&(e=ft(e),Ct.touchCancel(e))})):(k(wt,"touchstart",function(e){ht(wt,e.touches[0]),Ct.__mousePressed=!0,Ct.mouseDragging=!1,Ct.mouseButton=37,"function"==typeof Ct.mousePressed&&Ct.mousePressed()}),k(wt,"touchmove",function(e){e.preventDefault(),ht(wt,e.touches[0]),"function"!=typeof Ct.mouseMoved||Ct.__mousePressed||Ct.mouseMoved(),"function"==typeof Ct.mouseDragged&&Ct.__mousePressed&&(Ct.mouseDragged(),Ct.mouseDragging=!0)}),k(wt,"touchend",function(){Ct.__mousePressed=!1,"function"!=typeof Ct.mouseClicked||Ct.mouseDragging||Ct.mouseClicked(),"function"==typeof Ct.mouseReleased&&Ct.mouseReleased()})),wt.dispatchEvent(e)}),function(){var e=!0,t=function(e){e.preventDefault(),e.stopPropagation()};Ct.disableContextMenu=function(){e&&(k(wt,"contextmenu",t),e=!1)},Ct.enableContextMenu=function(){e||(B({elem:wt,type:"contextmenu",fn:t}),e=!0)}}(),k(wt,"mousemove",function(e){ht(wt,e),"function"!=typeof Ct.mouseMoved||Ct.__mousePressed||Ct.mouseMoved(),"function"==typeof Ct.mouseDragged&&Ct.__mousePressed&&(Ct.mouseDragged(),Ct.mouseDragging=!0)}),k(wt,"mouseout",function(){"function"==typeof Ct.mouseOut&&Ct.mouseOut()}),k(wt,"mouseover",function(e){ht(wt,e),"function"==typeof Ct.mouseOver&&Ct.mouseOver()}),wt.onmousedown=function(){return wt.focus(),!1},k(wt,"mousedown",function(e){switch(Ct.__mousePressed=!0,Ct.mouseDragging=!1,e.which){case 1:Ct.mouseButton=37;break;case 2:Ct.mouseButton=3;break;case 3:Ct.mouseButton=39}"function"==typeof Ct.mousePressed&&Ct.mousePressed()}),k(wt,"mouseup",function(){Ct.__mousePressed=!1,"function"!=typeof Ct.mouseClicked||Ct.mouseDragging||Ct.mouseClicked(),"function"==typeof Ct.mouseReleased&&Ct.mouseReleased()});var Xr=function(t){var n=0;t.wheelDelta?(n=t.wheelDelta/120,e.opera&&(n=-n)):t.detail&&(n=-t.detail/3),Ct.mouseScroll=n,n&&"function"==typeof Ct.mouseScrolled&&Ct.mouseScrolled()};if(k(t,"DOMMouseScroll",Xr),k(t,"mousewheel",Xr),wt.getAttribute("tabindex")||wt.setAttribute("tabindex",0),xt)Ft=new P.Sketch,lt(),Ct.size=function(e,t,n){n&&2===n?lt("3D"):lt("2D"),Ct.size(e,t,n)};else{Ft=s instanceof P.Sketch?s:"function"==typeof s?new P.Sketch(s):s?P.compile(s):new P.Sketch(function(){}),Ct.externals.sketch=Ft,lt(),wt.onfocus=function(){Ct.focused=!0},wt.onblur=function(){Ct.focused=!1,Ft.options.globalKeyEvents||vt()},Ft.options.pauseOnBlur&&(k(e,"focus",function(){En&&Ct.loop()}),k(e,"blur",function(){En&&vn&&(Ct.noLoop(),En=!0),vt()}));var Jr=Ft.options.globalKeyEvents?e:wt;k(Jr,"keydown",Et),k(Jr,"keypress",At),k(Jr,"keyup",bt);for(var Kr in P.lib)P.lib.hasOwnProperty(Kr)&&(P.lib[Kr].hasOwnProperty("attach")?P.lib[Kr].attach(Ct):P.lib[Kr]instanceof Function&&P.lib[Kr].call(this));var Zr=100,Qr=function(n){if(Ft.imageCache.pending||f.preloading.pending(Zr))e.setTimeout(function(){Qr(n)},Zr);else{if(e.opera){var i,r,o=Ft.imageCache.operaCache;for(i in o)o.hasOwnProperty(i)&&(r=o[i],null!==r&&t.body.removeChild(r),delete o[i])}Ft.attach(n,D),Ft.onLoad(n),n.setup&&(n.setup(),n.resetMatrix(),Ft.onSetup()),et(),n.draw&&(En?n.loop():n.redraw())}};L(this),Qr(Ct)}};P.debug=v,P.prototype=D,P.compile=function(e){var t=new P.Sketch,n=g(e,t),i=p(n);return t.sourceCode=i,t};var I=function(){var e={},n="undefined",i="function",r=!1,o=!0,s=512,a="log";return typeof tinylog!==n&&typeof tinylog[a]===i?e[a]=tinylog[a]:typeof t===n||t.fake?typeof print===i&&(e[a]=print):function(){var n=t,i="div",l="style",u="title",c={zIndex:1e4,position:"fixed",bottom:"0px",width:"100%",height:"15%",fontFamily:"sans-serif",color:"#ccc",backgroundColor:"black"},h={position:"relative",fontFamily:"monospace",overflow:"auto",height:"100%",paddingTop:"5px"},f={height:"5px",marginTop:"-5px",cursor:"n-resize",backgroundColor:"darkgrey"},d={position:"absolute",top:"5px",right:"20px",color:"#111",MozBorderRadius:"4px",webkitBorderRadius:"4px",borderRadius:"4px",cursor:"pointer",fontWeight:"normal",textAlign:"center",padding:"3px 5px",backgroundColor:"#333",fontSize:"12px"},p={minHeight:"16px"},g={fontSize:"12px",margin:"0 8px 0 8px",maxWidth:"100%",whiteSpace:"pre-wrap",overflow:"auto"},m=n.defaultView,v=n.documentElement,y=v[l],E=function(){for(var e,t,n,i=arguments.length;i--;){t=arguments[i--],e=arguments[i][l];for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}},A=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n),[e,t,n]},b=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on"+t,n)},w=function(e){for(var t=e.childNodes,n=t.length;n--;)e.removeChild(t.item(0))},x=function(e,t){return e.appendChild(t)},C=function(e){return n.createElement(e)},_=function(e){return n.createTextNode(e)},F=e[a]=function(t){var S,T=y.paddingBottom,D=C(i),R=D[l],k=x(D,C(i)),B=x(D,C(i)),M=x(D,C(i)),L=r,P=r,I=r,$=0,N=function(){y.paddingBottom=D.clientHeight+"px"},O=function(e){var t=m.innerHeight,n=k.clientHeight;0>e?e=0:e+n>t&&(e=t-n),R.height=100*(e/t)+"%",N()},H=[A(n,"mousemove",function(e){L&&(O(m.innerHeight-e.clientY),B.scrollTop=I)}),A(n,"mouseup",function(){L&&(L=I=r)}),A(k,"dblclick",function(e){e.preventDefault(),P?(O(P),P=r):(P=D.clientHeight,R.height="0px")}),A(k,"mousedown",function(e){e.preventDefault(),L=o,I=B.scrollTop}),A(k,"contextmenu",function(){L=r}),A(M,"click",function(){S()})];S=function(){for(var t=H.length;t--;)b.apply(e,H[t]);v.removeChild(D),y.paddingBottom=T,w(B),w(D),e[a]=F},E(D,c,B,h,k,f,M,d),M[u]="Close Log",x(M,_("✖")),k[u]="Double-click to toggle log minimization",v.insertBefore(D,v.firstChild),e[a]=function(e){$===s?B.removeChild(B.firstChild):$++;var t=x(B,C(i)),n=x(t,C(i));t[u]=(new Date).toLocaleTimeString(),E(t,p,n,g),x(n,_(e)),B.scrollTop=B.scrollHeight
},e[a](t),N()}}(),e}();P.logger=I,P.version="1.4.1",P.lib={},P.registerLibrary=function(e,t){P.lib[e]=t,t.hasOwnProperty("init")&&t.init(D)},P.instances=k,P.getInstanceById=function(e){return k[B[e]]},P.Sketch=function(n){this.attachFunction=n,this.options={pauseOnBlur:!1,globalKeyEvents:!1},this.onLoad=m,this.onSetup=m,this.onPause=m,this.onLoop=m,this.onFrameStart=m,this.onFrameEnd=m,this.onExit=m,this.params={},this.imageCache={pending:0,images:{},operaCache:{},add:function(n,i){if(!this.images[n]&&(E||(this.images[n]=null),i||(i=new Image,i.onload=function(e){return function(){e.pending--}}(this),this.pending++,i.src=n),this.images[n]=i,e.opera)){var r=t.createElement("div");r.appendChild(i),r.style.position="absolute",r.style.opacity=0,r.style.width="1px",r.style.height="1px",this.operaCache[n]||(t.body.appendChild(r),this.operaCache[n]=r)}}},this.sourceCode=void 0,this.attach=function(e){if("function"==typeof this.attachFunction)this.attachFunction(e);else{if(!this.sourceCode)throw"Unable to attach sketch to the processing instance";var t=new Function("return ("+this.sourceCode+");")();t(e),this.attachFunction=t}},this.toString=function(){var e,t="((function(Sketch) {\n";t+="var sketch = new Sketch(\n"+this.sourceCode+");\n";for(e in this.options)if(this.options.hasOwnProperty(e)){var n=this.options[e];t+="sketch.options."+e+" = "+("string"==typeof n?'"'+n+'"':""+n)+";\n"}for(e in this.imageCache)this.options.hasOwnProperty(e)&&(t+='sketch.imageCache.add("'+e+'");\n');return t+="return sketch;\n})(Processing.Sketch))"}};var $=function(n,i){function r(t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState){var t;200!==i.status&&0!==i.status?t="Invalid XHR status "+i.status:""===i.responseText&&(t="withCredentials"in new XMLHttpRequest&&(new XMLHttpRequest).withCredentials===!1&&"file:"===e.location.protocol?"XMLHttpRequest failure, possibly due to a same-origin policy violation. You can try loading this page in another browser, or load it from http://localhost using a local webserver. See the Processing.js README for a more detailed explanation of this problem and solutions.":"File is empty."),n(i.responseText,t)}},i.open("GET",t,!0),i.overrideMimeType&&i.overrideMimeType("application/json"),i.setRequestHeader("If-Modified-Since","Fri, 01 Jan 1960 00:00:00 GMT"),i.send(null)}function o(e,i){function o(t,r){if(s[e]=t,++u,r&&a.push(i+" ==> "+r),u===l){if(0!==a.length)throw"Processing.js: Unable to load pjs sketch files: "+a.join("\n");try{return new P(n,s.join("\n"))}catch(o){throw"Processing.js: Unable to execute pjs sketch: "+o}}}if("#"===i.charAt(0)){var c=t.getElementById(i.substring(1));return c?o(c.text||c.textContent):o("","Unable to load pjs sketch: element with id '"+i.substring(1)+"' was not found"),void 0}r(i,o)}for(var s=[],a=[],l=i.length,u=0,c=0;l>c;++c)o(c,i[c])},N=function(){t.removeEventListener("DOMContentLoaded",N,!1),k=[];for(var e,n=t.getElementsByTagName("canvas"),r=0,o=n.length;o>r;r++){var s=n[r].getAttribute("data-processing-sources");if(null===s&&(s=n[r].getAttribute("data-src"),null===s&&(s=n[r].getAttribute("datasrc"))),s){e=s.split(/\s+/g);for(var a=0;a<e.length;)e[a]?a++:e.splice(a,1);$(n[r],e)}}var l,u,c,h,f=t.getElementsByTagName("script"),d=[];for(l=f.length-1;l>=0;l--)d.push(f[l]);for(l=0,u=d.length;u>l;l++){var p=d[l];if(p.getAttribute){var g=p.getAttribute("type");if(g&&("text/processing"===g.toLowerCase()||"application/processing"===g.toLowerCase())){var m=p.getAttribute("data-processing-target");if(n=i,m)n=t.getElementById(m);else{for(var v=p.nextSibling;v&&1!==v.nodeType;)v=v.nextSibling;v&&"canvas"===v.nodeName.toLowerCase()&&(n=v)}if(n){if(p.getAttribute("src")){e=p.getAttribute("src").split(/\s+/),$(n,e);continue}c=p.textContent||p.text,h=new P(n,c)}}}}};P.reload=function(){if(k.length>0)for(var e=k.length-1;e>=0;e--)k[e]&&k[e].exit();N()},P.loadSketchFromSources=$,P.disableInit=function(){E&&t.removeEventListener("DOMContentLoaded",N,!1)},E?(e.Processing=P,t.addEventListener("DOMContentLoaded",N,!1)):this.Processing=P}(window,window.document,Math),define("ace/theme/merbivore_soft",["require","exports","module","ace/lib/dom"],function(e,t){t.isDark=!0,t.cssClass="ace-merbivore-soft",t.cssText=".ace-merbivore-soft .ace_gutter {background: #262424;color: #E6E1DC}.ace-merbivore-soft .ace_print-margin {width: 1px;background: #262424}.ace-merbivore-soft .ace_scroller {background-color: #1C1C1C}.ace-merbivore-soft .ace_text-layer {color: #E6E1DC}.ace-merbivore-soft .ace_cursor {border-left: 2px solid #FFFFFF}.ace-merbivore-soft .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #FFFFFF}.ace-merbivore-soft .ace_marker-layer .ace_selection {background: #494949}.ace-merbivore-soft.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #1C1C1C;border-radius: 2px}.ace-merbivore-soft .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-merbivore-soft .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #404040}.ace-merbivore-soft .ace_marker-layer .ace_active-line {background: #333435}.ace-merbivore-soft .ace_gutter-active-line {background-color: #333435}.ace-merbivore-soft .ace_marker-layer .ace_selected-word {border: 1px solid #494949}.ace-merbivore-soft .ace_invisible {color: #404040}.ace-merbivore-soft .ace_entity.ace_name.ace_tag,.ace-merbivore-soft .ace_keyword,.ace-merbivore-soft .ace_meta,.ace-merbivore-soft .ace_meta.ace_tag,.ace-merbivore-soft .ace_storage {color: #FC803A}.ace-merbivore-soft .ace_constant,.ace-merbivore-soft .ace_constant.ace_character,.ace-merbivore-soft .ace_constant.ace_character.ace_escape,.ace-merbivore-soft .ace_constant.ace_other,.ace-merbivore-soft .ace_support.ace_type {color: #68C1D8}.ace-merbivore-soft .ace_constant.ace_character.ace_escape {color: #B3E5B4}.ace-merbivore-soft .ace_constant.ace_language {color: #E1C582}.ace-merbivore-soft .ace_constant.ace_library,.ace-merbivore-soft .ace_string,.ace-merbivore-soft .ace_support.ace_constant {color: #8EC65F}.ace-merbivore-soft .ace_constant.ace_numeric {color: #7FC578}.ace-merbivore-soft .ace_invalid,.ace-merbivore-soft .ace_invalid.ace_deprecated {color: #FFFFFF;background-color: #FE3838}.ace-merbivore-soft .ace_fold {background-color: #FC803A;border-color: #E6E1DC}.ace-merbivore-soft .ace_comment,.ace-merbivore-soft .ace_meta {font-style: italic;color: #AC4BB8}.ace-merbivore-soft .ace_entity.ace_other.ace_attribute-name {color: #EAF1A3}.ace-merbivore-soft .ace_markup.ace_underline {text-decoration: underline}.ace-merbivore-soft .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWOQkZH5zzBz5sz/AA8EBB6crd1rAAAAAElFTkSuQmCC) right repeat-y}";var n=e("../lib/dom");n.importCssString(t.cssText,t.cssClass)}),window.Worker=void 0;var THREE=THREE||{};THREE.Color=function(e){this.autoUpdate=!0,this.setHex(e)},THREE.Color.prototype={setRGB:function(e,t,n){this.r=e,this.g=t,this.b=n,this.autoUpdate&&(this.updateHex(),this.updateStyleString())},setHex:function(e){this.hex=16777215&~~e,this.autoUpdate&&(this.updateRGBA(),this.updateStyleString())},updateHex:function(){this.hex=~~(255*this.r)<<16^~~(255*this.g)<<8^~~(255*this.b)},updateRGBA:function(){this.r=(255&this.hex>>16)/255,this.g=(255&this.hex>>8)/255,this.b=(255&this.hex)/255},updateStyleString:function(){this.__styleString="rgb("+~~(255*this.r)+","+~~(255*this.g)+","+~~(255*this.b)+")"},clone:function(){return new THREE.Color(this.hex)},toString:function(){return"THREE.Color ( r: "+this.r+", g: "+this.g+", b: "+this.b+", hex: "+this.hex+" )"}},THREE.Vector2=function(e,t){this.x=e||0,this.y=t||0},THREE.Vector2.prototype={set:function(e,t){return this.x=e,this.y=t,this},copy:function(e){return this.x=e.x,this.y=e.y,this},addSelf:function(e){return this.x+=e.x,this.y+=e.y,this},add:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},subSelf:function(e){return this.x-=e.x,this.y-=e.y,this},sub:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},unit:function(){return this.multiplyScalar(1/this.length()),this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthSq:function(){return this.x*this.x+this.y*this.y},negate:function(){return this.x=-this.x,this.y=-this.y,this},clone:function(){return new THREE.Vector2(this.x,this.y)},toString:function(){return"THREE.Vector2 ("+this.x+", "+this.y+")"}},THREE.Vector3=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0},THREE.Vector3.prototype={set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addSelf:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},sub:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},subSelf:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this},cross:function(e,t){return this.x=e.y*t.z-e.z*t.y,this.y=e.z*t.x-e.x*t.z,this.z=e.x*t.y-e.y*t.x,this},crossSelf:function(e){var t=this.x,n=this.y,i=this.z;return this.x=n*e.z-i*e.y,this.y=i*e.x-t*e.z,this.z=t*e.y-n*e.x,this},multiply:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},multiplySelf:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},divideSelf:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.x/=e,this.y/=e,this.z/=e,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},distanceTo:function(e){var t=this.x-e.x,n=this.y-e.y;return e=this.z-e.z,Math.sqrt(t*t+n*n+e*e)},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return e=this.z-e.z,t*t+n*n+e*e},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return e>0?this.multiplyScalar(1/e):this.set(0,0,0),this},setLength:function(e){return this.normalize().multiplyScalar(e)},isZero:function(){return Math.abs(this.x)<1e-4&&Math.abs(this.y)<1e-4&&Math.abs(this.z)<1e-4},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)},toString:function(){return"THREE.Vector3 ( "+this.x+", "+this.y+", "+this.z+" )"}},THREE.Vector4=function(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=i||1},THREE.Vector4.prototype={set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w||1,this},add:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addSelf:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this},sub:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},subSelf:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},divideScalar:function(e){return this.x/=e,this.y/=e,this.z/=e,this.w/=e,this},lerpSelf:function(e,t){this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)},toString:function(){return"THREE.Vector4 ("+this.x+", "+this.y+", "+this.z+", "+this.w+")"}},THREE.Ray=function(e,t){this.origin=e||new THREE.Vector3,this.direction=t||new THREE.Vector3},THREE.Ray.prototype={intersectScene:function(e){var t,n,i=e.objects,r=[];for(e=0,t=i.length;t>e;e++)n=i[e],n instanceof THREE.Mesh&&(r=r.concat(this.intersectObject(n)));return r.sort(function(e,t){return e.distance-t.distance}),r},intersectObject:function(e){function t(e,t,n,i){i=i.clone().subSelf(t),n=n.clone().subSelf(t);var r=e.clone().subSelf(t);e=i.dot(i),t=i.dot(n),i=i.dot(r);var o=n.dot(n);return n=n.dot(r),r=1/(e*o-t*t),o=(o*i-t*n)*r,e=(e*n-t*i)*r,o>0&&e>0&&1>o+e}var n,i,r,o,s,a,l,u,c,h,f,d=e.geometry,p=d.vertices,g=[];for(n=0,i=d.faces.length;i>n;n++)r=d.faces[n],h=this.origin.clone(),f=this.direction.clone(),o=e.matrix.multiplyVector3(p[r.a].position.clone()),s=e.matrix.multiplyVector3(p[r.b].position.clone()),a=e.matrix.multiplyVector3(p[r.c].position.clone()),l=r instanceof THREE.Face4?e.matrix.multiplyVector3(p[r.d].position.clone()):null,u=e.rotationMatrix.multiplyVector3(r.normal.clone()),c=f.dot(u),0>c&&(u=u.dot((new THREE.Vector3).sub(o,h))/c,h=h.addSelf(f.multiplyScalar(u)),r instanceof THREE.Face3?t(h,o,s,a)&&(r={distance:this.origin.distanceTo(h),point:h,face:r,object:e},g.push(r)):r instanceof THREE.Face4&&(t(h,o,s,l)||t(h,s,a,l))&&(r={distance:this.origin.distanceTo(h),point:h,face:r,object:e},g.push(r)));return g}},THREE.Rectangle=function(){function e(){o=i-t,s=r-n}var t,n,i,r,o,s,a=!0;this.getX=function(){return t},this.getY=function(){return n},this.getWidth=function(){return o},this.getHeight=function(){return s},this.getLeft=function(){return t},this.getTop=function(){return n},this.getRight=function(){return i},this.getBottom=function(){return r},this.set=function(o,s,l,u){a=!1,t=o,n=s,i=l,r=u,e()},this.addPoint=function(o,s){a?(a=!1,t=o,n=s,i=o,r=s):(t=o>t?t:o,n=s>n?n:s,i=i>o?i:o,r=r>s?r:s),e()},this.add3Points=function(o,s,l,u,c,h){a?(a=!1,t=l>o?c>o?o:c:c>l?l:c,n=u>s?h>s?s:h:h>u?u:h,i=o>l?o>c?o:c:l>c?l:c,r=s>u?s>h?s:h:u>h?u:h):(t=l>o?c>o?t>o?o:t:t>c?c:t:c>l?t>l?l:t:t>c?c:t,n=u>s?h>s?n>s?s:n:n>h?h:n:h>u?n>u?u:n:n>h?h:n,i=o>l?o>c?o>i?o:i:c>i?c:i:l>c?l>i?l:i:c>i?c:i,r=s>u?s>h?s>r?s:r:h>r?h:r:u>h?u>r?u:r:h>r?h:r),e()},this.addRectangle=function(o){a?(a=!1,t=o.getLeft(),n=o.getTop(),i=o.getRight(),r=o.getBottom()):(t=t<o.getLeft()?t:o.getLeft(),n=n<o.getTop()?n:o.getTop(),i=i>o.getRight()?i:o.getRight(),r=r>o.getBottom()?r:o.getBottom()),e()},this.inflate=function(o){t-=o,n-=o,i+=o,r+=o,e()},this.minSelf=function(o){t=t>o.getLeft()?t:o.getLeft(),n=n>o.getTop()?n:o.getTop(),i=i<o.getRight()?i:o.getRight(),r=r<o.getBottom()?r:o.getBottom(),e()},this.instersects=function(e){return Math.min(i,e.getRight())-Math.max(t,e.getLeft())>=0&&Math.min(r,e.getBottom())-Math.max(n,e.getTop())>=0},this.empty=function(){a=!0,r=i=n=t=0,e()},this.isEmpty=function(){return a},this.toString=function(){return"THREE.Rectangle ( left: "+t+", right: "+i+", top: "+n+", bottom: "+r+", width: "+o+", height: "+s+" )"}},THREE.Matrix3=function(){this.m=[]},THREE.Matrix3.prototype={transpose:function(){var e,t=this.m;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},THREE.Matrix4=function(e,t,n,i,r,o,s,a,l,u,c,h,f,d,p,g){this.n11=e||1,this.n12=t||0,this.n13=n||0,this.n14=i||0,this.n21=r||0,this.n22=o||1,this.n23=s||0,this.n24=a||0,this.n31=l||0,this.n32=u||0,this.n33=c||1,this.n34=h||0,this.n41=f||0,this.n42=d||0,this.n43=p||0,this.n44=g||1,this.flat=Array(16),this.m33=new THREE.Matrix3},THREE.Matrix4.prototype={identity:function(){return this.n11=1,this.n21=this.n14=this.n13=this.n12=0,this.n22=1,this.n32=this.n31=this.n24=this.n23=0,this.n33=1,this.n43=this.n42=this.n41=this.n34=0,this.n44=1,this},set:function(e,t,n,i,r,o,s,a,l,u,c,h,f,d,p,g){return this.n11=e,this.n12=t,this.n13=n,this.n14=i,this.n21=r,this.n22=o,this.n23=s,this.n24=a,this.n31=l,this.n32=u,this.n33=c,this.n34=h,this.n41=f,this.n42=d,this.n43=p,this.n44=g,this},copy:function(e){return this.n11=e.n11,this.n12=e.n12,this.n13=e.n13,this.n14=e.n14,this.n21=e.n21,this.n22=e.n22,this.n23=e.n23,this.n24=e.n24,this.n31=e.n31,this.n32=e.n32,this.n33=e.n33,this.n34=e.n34,this.n41=e.n41,this.n42=e.n42,this.n43=e.n43,this.n44=e.n44,this},lookAt:function(e,t,n){var i=THREE.Matrix4.__tmpVec1,r=THREE.Matrix4.__tmpVec2,o=THREE.Matrix4.__tmpVec3;return o.sub(e,t).normalize(),i.cross(n,o).normalize(),r.cross(o,i).normalize(),this.n11=i.x,this.n12=i.y,this.n13=i.z,this.n14=-i.dot(e),this.n21=r.x,this.n22=r.y,this.n23=r.z,this.n24=-r.dot(e),this.n31=o.x,this.n32=o.y,this.n33=o.z,this.n34=-o.dot(e),this.n43=this.n42=this.n41=0,this.n44=1,this},multiplyVector3:function(e){var t=e.x,n=e.y,i=e.z,r=1/(this.n41*t+this.n42*n+this.n43*i+this.n44);return e.x=(this.n11*t+this.n12*n+this.n13*i+this.n14)*r,e.y=(this.n21*t+this.n22*n+this.n23*i+this.n24)*r,e.z=(this.n31*t+this.n32*n+this.n33*i+this.n34)*r,e},multiplyVector4:function(e){var t=e.x,n=e.y,i=e.z,r=e.w;return e.x=this.n11*t+this.n12*n+this.n13*i+this.n14*r,e.y=this.n21*t+this.n22*n+this.n23*i+this.n24*r,e.z=this.n31*t+this.n32*n+this.n33*i+this.n34*r,e.w=this.n41*t+this.n42*n+this.n43*i+this.n44*r,e},crossVector:function(e){var t=new THREE.Vector4;return t.x=this.n11*e.x+this.n12*e.y+this.n13*e.z+this.n14*e.w,t.y=this.n21*e.x+this.n22*e.y+this.n23*e.z+this.n24*e.w,t.z=this.n31*e.x+this.n32*e.y+this.n33*e.z+this.n34*e.w,t.w=e.w?this.n41*e.x+this.n42*e.y+this.n43*e.z+this.n44*e.w:1,t},multiply:function(e,t){var n=e.n11,i=e.n12,r=e.n13,o=e.n14,s=e.n21,a=e.n22,l=e.n23,u=e.n24,c=e.n31,h=e.n32,f=e.n33,d=e.n34,p=e.n41,g=e.n42,m=e.n43,v=e.n44,y=t.n11,E=t.n12,A=t.n13,b=t.n14,w=t.n21,x=t.n22,C=t.n23,_=t.n24,F=t.n31,S=t.n32,T=t.n33,D=t.n34,R=t.n41,k=t.n42,B=t.n43,M=t.n44;return this.n11=n*y+i*w+r*F+o*R,this.n12=n*E+i*x+r*S+o*k,this.n13=n*A+i*C+r*T+o*B,this.n14=n*b+i*_+r*D+o*M,this.n21=s*y+a*w+l*F+u*R,this.n22=s*E+a*x+l*S+u*k,this.n23=s*A+a*C+l*T+u*B,this.n24=s*b+a*_+l*D+u*M,this.n31=c*y+h*w+f*F+d*R,this.n32=c*E+h*x+f*S+d*k,this.n33=c*A+h*C+f*T+d*B,this.n34=c*b+h*_+f*D+d*M,this.n41=p*y+g*w+m*F+v*R,this.n42=p*E+g*x+m*S+v*k,this.n43=p*A+g*C+m*T+v*B,this.n44=p*b+g*_+m*D+v*M,this},multiplySelf:function(e){var t=this.n11,n=this.n12,i=this.n13,r=this.n14,o=this.n21,s=this.n22,a=this.n23,l=this.n24,u=this.n31,c=this.n32,h=this.n33,f=this.n34,d=this.n41,p=this.n42,g=this.n43,m=this.n44,v=e.n11,y=e.n21,E=e.n31,A=e.n41,b=e.n12,w=e.n22,x=e.n32,C=e.n42,_=e.n13,F=e.n23,S=e.n33,T=e.n43,D=e.n14,R=e.n24,k=e.n34;return e=e.n44,this.n11=t*v+n*y+i*E+r*A,this.n12=t*b+n*w+i*x+r*C,this.n13=t*_+n*F+i*S+r*T,this.n14=t*D+n*R+i*k+r*e,this.n21=o*v+s*y+a*E+l*A,this.n22=o*b+s*w+a*x+l*C,this.n23=o*_+s*F+a*S+l*T,this.n24=o*D+s*R+a*k+l*e,this.n31=u*v+c*y+h*E+f*A,this.n32=u*b+c*w+h*x+f*C,this.n33=u*_+c*F+h*S+f*T,this.n34=u*D+c*R+h*k+f*e,this.n41=d*v+p*y+g*E+m*A,this.n42=d*b+p*w+g*x+m*C,this.n43=d*_+p*F+g*S+m*T,this.n44=d*D+p*R+g*k+m*e,this},multiplyScalar:function(e){return this.n11*=e,this.n12*=e,this.n13*=e,this.n14*=e,this.n21*=e,this.n22*=e,this.n23*=e,this.n24*=e,this.n31*=e,this.n32*=e,this.n33*=e,this.n34*=e,this.n41*=e,this.n42*=e,this.n43*=e,this.n44*=e,this},determinant:function(){var e=this.n11,t=this.n12,n=this.n13,i=this.n14,r=this.n21,o=this.n22,s=this.n23,a=this.n24,l=this.n31,u=this.n32,c=this.n33,h=this.n34,f=this.n41,d=this.n42,p=this.n43,g=this.n44;return i*s*u*f-n*a*u*f-i*o*c*f+t*a*c*f+n*o*h*f-t*s*h*f-i*s*l*d+n*a*l*d+i*r*c*d-e*a*c*d-n*r*h*d+e*s*h*d+i*o*l*p-t*a*l*p-i*r*u*p+e*a*u*p+t*r*h*p-e*o*h*p-n*o*l*g+t*s*l*g+n*r*u*g-e*s*u*g-t*r*c*g+e*o*c*g},transpose:function(){function e(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}return e(this,"n21","n12"),e(this,"n31","n13"),e(this,"n32","n23"),e(this,"n41","n14"),e(this,"n42","n24"),e(this,"n43","n34"),this},clone:function(){var e=new THREE.Matrix4;return e.n11=this.n11,e.n12=this.n12,e.n13=this.n13,e.n14=this.n14,e.n21=this.n21,e.n22=this.n22,e.n23=this.n23,e.n24=this.n24,e.n31=this.n31,e.n32=this.n32,e.n33=this.n33,e.n34=this.n34,e.n41=this.n41,e.n42=this.n42,e.n43=this.n43,e.n44=this.n44,e},flatten:function(){var e=this.flat;return e[0]=this.n11,e[1]=this.n21,e[2]=this.n31,e[3]=this.n41,e[4]=this.n12,e[5]=this.n22,e[6]=this.n32,e[7]=this.n42,e[8]=this.n13,e[9]=this.n23,e[10]=this.n33,e[11]=this.n43,e[12]=this.n14,e[13]=this.n24,e[14]=this.n34,e[15]=this.n44,e},setTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},setScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},setRotX:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this},setRotY:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this},setRotZ:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this},setRotAxis:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,o=e.x,s=e.y,a=e.z,l=r*o,u=r*s;return this.set(l*o+n,l*s-i*a,l*a+i*s,0,l*s+i*a,u*s+n,u*a-i*o,0,l*a-i*s,u*a+i*o,r*a*a+n,0,0,0,0,1),this},toString:function(){return"| "+this.n11+" "+this.n12+" "+this.n13+" "+this.n14+" |\n| "+this.n21+" "+this.n22+" "+this.n23+" "+this.n24+" |\n| "+this.n31+" "+this.n32+" "+this.n33+" "+this.n34+" |\n| "+this.n41+" "+this.n42+" "+this.n43+" "+this.n44+" |"}},THREE.Matrix4.translationMatrix=function(e,t,n){var i=new THREE.Matrix4;return i.setTranslation(e,t,n),i},THREE.Matrix4.scaleMatrix=function(e,t,n){var i=new THREE.Matrix4;return i.setScale(e,t,n),i},THREE.Matrix4.rotationXMatrix=function(e){var t=new THREE.Matrix4;return t.setRotX(e),t},THREE.Matrix4.rotationYMatrix=function(e){var t=new THREE.Matrix4;return t.setRotY(e),t},THREE.Matrix4.rotationZMatrix=function(e){var t=new THREE.Matrix4;return t.setRotZ(e),t},THREE.Matrix4.rotationAxisAngleMatrix=function(e,t){var n=new THREE.Matrix4;return n.setRotAxis(e,t),n},THREE.Matrix4.makeInvert=function(e){var t=e.n11,n=e.n12,i=e.n13,r=e.n14,o=e.n21,s=e.n22,a=e.n23,l=e.n24,u=e.n31,c=e.n32,h=e.n33,f=e.n34,d=e.n41,p=e.n42,g=e.n43,m=e.n44,v=new THREE.Matrix4;return v.n11=a*f*p-l*h*p+l*c*g-s*f*g-a*c*m+s*h*m,v.n12=r*h*p-i*f*p-r*c*g+n*f*g+i*c*m-n*h*m,v.n13=i*l*p-r*a*p+r*s*g-n*l*g-i*s*m+n*a*m,v.n14=r*a*c-i*l*c-r*s*h+n*l*h+i*s*f-n*a*f,v.n21=l*h*d-a*f*d-l*u*g+o*f*g+a*u*m-o*h*m,v.n22=i*f*d-r*h*d+r*u*g-t*f*g-i*u*m+t*h*m,v.n23=r*a*d-i*l*d-r*o*g+t*l*g+i*o*m-t*a*m,v.n24=i*l*u-r*a*u+r*o*h-t*l*h-i*o*f+t*a*f,v.n31=s*f*d-l*c*d+l*u*p-o*f*p-s*u*m+o*c*m,v.n32=r*c*d-n*f*d-r*u*p+t*f*p+n*u*m-t*c*m,v.n33=i*l*d-r*s*d+r*o*p-t*l*p-n*o*m+t*s*m,v.n34=r*s*u-n*l*u-r*o*c+t*l*c+n*o*f-t*s*f,v.n41=a*c*d-s*h*d-a*u*p+o*h*p+s*u*g-o*c*g,v.n42=n*h*d-i*c*d+i*u*p-t*h*p-n*u*g+t*c*g,v.n43=i*s*d-n*a*d-i*o*p+t*a*p+n*o*g-t*s*g,v.n44=n*a*u-i*s*u+i*o*c-t*a*c-n*o*h+t*s*h,v.multiplyScalar(1/e.determinant()),v},THREE.Matrix4.makeInvert3x3=function(e){var t=e.flatten();e=e.m33;var n=e.m,i=t[10]*t[5]-t[6]*t[9],r=-t[10]*t[1]+t[2]*t[9],o=t[6]*t[1]-t[2]*t[5],s=-t[10]*t[4]+t[6]*t[8],a=t[10]*t[0]-t[2]*t[8],l=-t[6]*t[0]+t[2]*t[4],u=t[9]*t[4]-t[5]*t[8],c=-t[9]*t[0]+t[1]*t[8],h=t[5]*t[0]-t[1]*t[4];if(t=t[0]*i+t[1]*s+t[2]*u,0==t)throw"matrix not invertible";return t=1/t,n[0]=t*i,n[1]=t*r,n[2]=t*o,n[3]=t*s,n[4]=t*a,n[5]=t*l,n[6]=t*u,n[7]=t*c,n[8]=t*h,e},THREE.Matrix4.makeFrustum=function(e,t,n,i,r,o){var s,a,l;return s=new THREE.Matrix4,a=2*r/(t-e),l=2*r/(i-n),e=(t+e)/(t-e),n=(i+n)/(i-n),i=-(o+r)/(o-r),r=-2*o*r/(o-r),s.n11=a,s.n12=0,s.n13=e,s.n14=0,s.n21=0,s.n22=l,s.n23=n,s.n24=0,s.n31=0,s.n32=0,s.n33=i,s.n34=r,s.n41=0,s.n42=0,s.n43=-1,s.n44=0,s},THREE.Matrix4.makePerspective=function(e,t,n,i){var r;return e=n*Math.tan(e*Math.PI/360),r=-e,THREE.Matrix4.makeFrustum(r*t,e*t,r,e,n,i)},THREE.Matrix4.makeOrtho=function(e,t,n,i,r,o){var s,a,l,u;return s=new THREE.Matrix4,a=t-e,l=n-i,u=o-r,e=(t+e)/a,n=(n+i)/l,r=(o+r)/u,s.n11=2/a,s.n12=0,s.n13=0,s.n14=-e,s.n21=0,s.n22=2/l,s.n23=0,s.n24=-n,s.n31=0,s.n32=0,s.n33=-2/u,s.n34=-r,s.n41=0,s.n42=0,s.n43=0,s.n44=1,s},THREE.Matrix4.__tmpVec1=new THREE.Vector3,THREE.Matrix4.__tmpVec2=new THREE.Vector3,THREE.Matrix4.__tmpVec3=new THREE.Vector3,THREE.Vertex=function(e,t){this.position=e||new THREE.Vector3,this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.normal=t||new THREE.Vector3,this.normalWorld=new THREE.Vector3,this.normalScreen=new THREE.Vector3,this.tangent=new THREE.Vector4,this.__visible=!0},THREE.Vertex.prototype={toString:function(){return"THREE.Vertex ( position: "+this.position+", normal: "+this.normal+" )"}},THREE.Face3=function(e,t,n,i,r){this.a=e,this.b=t,this.c=n,this.centroid=new THREE.Vector3,this.normal=i instanceof THREE.Vector3?i:new THREE.Vector3,this.vertexNormals=i instanceof Array?i:[],this.materials=r instanceof Array?r:[r]},THREE.Face3.prototype={toString:function(){return"THREE.Face3 ( "+this.a+", "+this.b+", "+this.c+" )"}},THREE.Face4=function(e,t,n,i,r,o){this.a=e,this.b=t,this.c=n,this.d=i,this.centroid=new THREE.Vector3,this.normal=r instanceof THREE.Vector3?r:new THREE.Vector3,this.vertexNormals=r instanceof Array?r:[],this.materials=o instanceof Array?o:[o]},THREE.Face4.prototype={toString:function(){return"THREE.Face4 ( "+this.a+", "+this.b+", "+this.c+" "+this.d+" )"}},THREE.UV=function(e,t){this.u=e||0,this.v=t||0},THREE.UV.prototype={copy:function(e){this.u=e.u,this.v=e.v},toString:function(){return"THREE.UV ("+this.u+", "+this.v+")"}},THREE.Geometry=function(){this.vertices=[],this.faces=[],this.uvs=[],this.boundingSphere=this.boundingBox=null,this.geometryChunks={},this.hasTangents=!1},THREE.Geometry.prototype={computeCentroids:function(){var e,t,n;for(e=0,t=this.faces.length;t>e;e++)n=this.faces[e],n.centroid.set(0,0,0),n instanceof THREE.Face3?(n.centroid.addSelf(this.vertices[n.a].position),n.centroid.addSelf(this.vertices[n.b].position),n.centroid.addSelf(this.vertices[n.c].position),n.centroid.divideScalar(3)):n instanceof THREE.Face4&&(n.centroid.addSelf(this.vertices[n.a].position),n.centroid.addSelf(this.vertices[n.b].position),n.centroid.addSelf(this.vertices[n.c].position),n.centroid.addSelf(this.vertices[n.d].position),n.centroid.divideScalar(4))},computeFaceNormals:function(e){var t,n,i,r,o,s,a=new THREE.Vector3,l=new THREE.Vector3;for(i=0,r=this.vertices.length;r>i;i++)o=this.vertices[i],o.normal.set(0,0,0);for(i=0,r=this.faces.length;r>i;i++){if(o=this.faces[i],e&&o.vertexNormals.length){for(a.set(0,0,0),t=0,n=o.normal.length;n>t;t++)a.addSelf(o.vertexNormals[t]);a.divideScalar(3)}else t=this.vertices[o.a],n=this.vertices[o.b],s=this.vertices[o.c],a.sub(s.position,n.position),l.sub(t.position,n.position),a.crossSelf(l);a.isZero()||a.normalize(),o.normal.copy(a)}},computeVertexNormals:function(){var e,t,n,i;if(void 0==this.__tmpVertices){for(i=this.__tmpVertices=Array(this.vertices.length),e=0,t=this.vertices.length;t>e;e++)i[e]=new THREE.Vector3;for(e=0,t=this.faces.length;t>e;e++)n=this.faces[e],n instanceof THREE.Face3?n.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3]:n instanceof THREE.Face4&&(n.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3])}else for(i=this.__tmpVertices,e=0,t=this.vertices.length;t>e;e++)i[e].set(0,0,0);for(e=0,t=this.faces.length;t>e;e++)n=this.faces[e],n instanceof THREE.Face3?(i[n.a].addSelf(n.normal),i[n.b].addSelf(n.normal),i[n.c].addSelf(n.normal)):n instanceof THREE.Face4&&(i[n.a].addSelf(n.normal),i[n.b].addSelf(n.normal),i[n.c].addSelf(n.normal),i[n.d].addSelf(n.normal));for(e=0,t=this.vertices.length;t>e;e++)i[e].normalize();for(e=0,t=this.faces.length;t>e;e++)n=this.faces[e],n instanceof THREE.Face3?(n.vertexNormals[0].copy(i[n.a]),n.vertexNormals[1].copy(i[n.b]),n.vertexNormals[2].copy(i[n.c])):n instanceof THREE.Face4&&(n.vertexNormals[0].copy(i[n.a]),n.vertexNormals[1].copy(i[n.b]),n.vertexNormals[2].copy(i[n.c]),n.vertexNormals[3].copy(i[n.d]))},computeTangents:function(){function e(e,t,n,i,F,S,T){o=e.vertices[t].position,s=e.vertices[n].position,a=e.vertices[i].position,l=r[F],u=r[S],c=r[T],h=s.x-o.x,f=a.x-o.x,d=s.y-o.y,p=a.y-o.y,g=s.z-o.z,m=a.z-o.z,v=u.u-l.u,y=c.u-l.u,E=u.v-l.v,A=c.v-l.v,b=1/(v*A-y*E),C.set((A*h-E*f)*b,(A*d-E*p)*b,(A*g-E*m)*b),_.set((v*f-y*h)*b,(v*p-y*d)*b,(v*m-y*g)*b),w[t].addSelf(C),w[n].addSelf(C),w[i].addSelf(C),x[t].addSelf(_),x[n].addSelf(_),x[i].addSelf(_)}var t,n,i,r,o,s,a,l,u,c,h,f,d,p,g,m,v,y,E,A,b,w=[],x=[],C=new THREE.Vector3,_=new THREE.Vector3,F=new THREE.Vector3,S=new THREE.Vector3,T=new THREE.Vector3;for(t=0,n=this.vertices.length;n>t;t++)w[t]=new THREE.Vector3,x[t]=new THREE.Vector3;for(t=0,n=this.faces.length;n>t;t++)i=this.faces[t],r=this.uvs[t],i instanceof THREE.Face3?(e(this,i.a,i.b,i.c,0,1,2),this.vertices[i.a].normal.copy(i.vertexNormals[0]),this.vertices[i.b].normal.copy(i.vertexNormals[1]),this.vertices[i.c].normal.copy(i.vertexNormals[2])):i instanceof THREE.Face4&&(e(this,i.a,i.b,i.c,0,1,2),e(this,i.a,i.b,i.d,0,1,3),this.vertices[i.a].normal.copy(i.vertexNormals[0]),this.vertices[i.b].normal.copy(i.vertexNormals[1]),this.vertices[i.c].normal.copy(i.vertexNormals[2]),this.vertices[i.d].normal.copy(i.vertexNormals[3]));for(t=0,n=this.vertices.length;n>t;t++)T.copy(this.vertices[t].normal),i=w[t],F.copy(i),F.subSelf(T.multiplyScalar(T.dot(i))).normalize(),S.cross(this.vertices[t].normal,i),i=S.dot(x[t]),i=0>i?-1:1,this.vertices[t].tangent.set(F.x,F.y,F.z,i);this.hasTangents=!0},computeBoundingBox:function(){var e;if(this.vertices.length>0){this.boundingBox={x:[this.vertices[0].position.x,this.vertices[0].position.x],y:[this.vertices[0].position.y,this.vertices[0].position.y],z:[this.vertices[0].position.z,this.vertices[0].position.z]};for(var t=1,n=this.vertices.length;n>t;t++)e=this.vertices[t],e.position.x<this.boundingBox.x[0]?this.boundingBox.x[0]=e.position.x:e.position.x>this.boundingBox.x[1]&&(this.boundingBox.x[1]=e.position.x),e.position.y<this.boundingBox.y[0]?this.boundingBox.y[0]=e.position.y:e.position.y>this.boundingBox.y[1]&&(this.boundingBox.y[1]=e.position.y),e.position.z<this.boundingBox.z[0]?this.boundingBox.z[0]=e.position.z:e.position.z>this.boundingBox.z[1]&&(this.boundingBox.z[1]=e.position.z)}},computeBoundingSphere:function(){for(var e=null===this.boundingSphere?0:this.boundingSphere.radius,t=0,n=this.vertices.length;n>t;t++)e=Math.max(e,this.vertices[t].position.length());this.boundingSphere={radius:e}},sortFacesByMaterial:function(){function e(e){var i=[];for(t=0,n=e.length;n>t;t++)void 0==e[t]?i.push("undefined"):i.push(e[t].toString());return i.join("_")}var t,n,i,r,o,s,a,l,u={};for(i=0,r=this.faces.length;r>i;i++)o=this.faces[i],s=o.materials,a=e(s),void 0==u[a]&&(u[a]={hash:a,counter:0}),l=u[a].hash+"_"+u[a].counter,void 0==this.geometryChunks[l]&&(this.geometryChunks[l]={faces:[],materials:s,vertices:0}),o=o instanceof THREE.Face3?3:4,this.geometryChunks[l].vertices+o>65535&&(u[a].counter+=1,l=u[a].hash+"_"+u[a].counter,void 0==this.geometryChunks[l]&&(this.geometryChunks[l]={faces:[],materials:s,vertices:0})),this.geometryChunks[l].faces.push(i),this.geometryChunks[l].vertices+=o},toString:function(){return"THREE.Geometry ( vertices: "+this.vertices+", faces: "+this.faces+", uvs: "+this.uvs+" )"}},THREE.Camera=function(e,t,n,i){this.fov=e,this.aspect=t,this.near=n,this.far=i,this.position=new THREE.Vector3,this.target={position:new THREE.Vector3},this.autoUpdateMatrix=!0,this.projectionMatrix=null,this.matrix=new THREE.Matrix4,this.up=new THREE.Vector3(0,1,0),this.tmpVec=new THREE.Vector3,this.translateX=function(e){this.tmpVec.sub(this.target.position,this.position).normalize().multiplyScalar(e),this.tmpVec.crossSelf(this.up),this.position.addSelf(this.tmpVec),this.target.position.addSelf(this.tmpVec)},this.translateZ=function(e){this.tmpVec.sub(this.target.position,this.position).normalize().multiplyScalar(e),this.position.subSelf(this.tmpVec),this.target.position.subSelf(this.tmpVec)},this.updateMatrix=function(){this.matrix.lookAt(this.position,this.target.position,this.up)},this.updateProjectionMatrix=function(){this.projectionMatrix=THREE.Matrix4.makePerspective(this.fov,this.aspect,this.near,this.far)},this.updateProjectionMatrix()},THREE.Camera.prototype={toString:function(){return"THREE.Camera ( "+this.position+", "+this.target.position+" )"}},THREE.Light=function(e){this.color=new THREE.Color(e)},THREE.AmbientLight=function(e){THREE.Light.call(this,e)},THREE.AmbientLight.prototype=new THREE.Light,THREE.AmbientLight.prototype.constructor=THREE.AmbientLight,THREE.DirectionalLight=function(e,t){THREE.Light.call(this,e),this.position=new THREE.Vector3(0,1,0),this.intensity=t||1},THREE.DirectionalLight.prototype=new THREE.Light,THREE.DirectionalLight.prototype.constructor=THREE.DirectionalLight,THREE.PointLight=function(e,t){THREE.Light.call(this,e),this.position=new THREE.Vector3,this.intensity=t||1},THREE.PointLight.prototype=new THREE.Light,THREE.PointLight.prototype.constructor=THREE.PointLight,THREE.Object3D=function(){this.id=THREE.Object3DCounter.value++,this.position=new THREE.Vector3,this.rotation=new THREE.Vector3,this.scale=new THREE.Vector3(1,1,1),this.matrix=new THREE.Matrix4,this.rotationMatrix=new THREE.Matrix4,this.tmpMatrix=new THREE.Matrix4,this.screen=new THREE.Vector3,this.visible=this.autoUpdateMatrix=!0},THREE.Object3D.prototype={updateMatrix:function(){var e=this.position,t=this.rotation,n=this.scale,i=this.tmpMatrix;this.matrix.setTranslation(e.x,e.y,e.z),this.rotationMatrix.setRotX(t.x),0!=t.y&&(i.setRotY(t.y),this.rotationMatrix.multiplySelf(i)),0!=t.z&&(i.setRotZ(t.z),this.rotationMatrix.multiplySelf(i)),this.matrix.multiplySelf(this.rotationMatrix),(0!=n.x||0!=n.y||0!=n.z)&&(i.setScale(n.x,n.y,n.z),this.matrix.multiplySelf(i))
}},THREE.Object3DCounter={value:0},THREE.Particle=function(e){THREE.Object3D.call(this),this.materials=e instanceof Array?e:[e],this.autoUpdateMatrix=!1},THREE.Particle.prototype=new THREE.Object3D,THREE.Particle.prototype.constructor=THREE.Particle,THREE.ParticleSystem=function(e,t){THREE.Object3D.call(this),this.geometry=e,this.materials=t instanceof Array?t:[t],this.autoUpdateMatrix=!1},THREE.ParticleSystem.prototype=new THREE.Object3D,THREE.ParticleSystem.prototype.constructor=THREE.ParticleSystem,THREE.Line=function(e,t,n){THREE.Object3D.call(this),this.geometry=e,this.materials=t instanceof Array?t:[t],this.type=void 0!=n?n:THREE.LineStrip},THREE.LineStrip=0,THREE.LinePieces=1,THREE.Line.prototype=new THREE.Object3D,THREE.Line.prototype.constructor=THREE.Line,THREE.Mesh=function(e,t){THREE.Object3D.call(this),this.geometry=e,this.materials=t instanceof Array?t:[t],this.overdraw=this.doubleSided=this.flipSided=!1,this.geometry.boundingSphere||this.geometry.computeBoundingSphere()},THREE.Mesh.prototype=new THREE.Object3D,THREE.Mesh.prototype.constructor=THREE.Mesh,THREE.FlatShading=0,THREE.SmoothShading=1,THREE.NormalBlending=0,THREE.AdditiveBlending=1,THREE.SubtractiveBlending=2,THREE.LineBasicMaterial=function(e){this.color=new THREE.Color(16777215),this.opacity=1,this.blending=THREE.NormalBlending,this.linewidth=1,this.linejoin=this.linecap="round",e&&(void 0!==e.color&&this.color.setHex(e.color),void 0!==e.opacity&&(this.opacity=e.opacity),void 0!==e.blending&&(this.blending=e.blending),void 0!==e.linewidth&&(this.linewidth=e.linewidth),void 0!==e.linecap&&(this.linecap=e.linecap),void 0!==e.linejoin&&(this.linejoin=e.linejoin))},THREE.LineBasicMaterial.prototype={toString:function(){return"THREE.LineBasicMaterial (<br/>color: "+this.color+"<br/>opacity: "+this.opacity+"<br/>blending: "+this.blending+"<br/>linewidth: "+this.linewidth+"<br/>linecap: "+this.linecap+"<br/>linejoin: "+this.linejoin+"<br/>)"}},THREE.MeshBasicMaterial=function(e){this.id=THREE.MeshBasicMaterialCounter.value++,this.color=new THREE.Color(16777215),this.env_map=this.map=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refraction_ratio=.98,this.fog=!0,this.opacity=1,this.shading=THREE.SmoothShading,this.blending=THREE.NormalBlending,this.wireframe=!1,this.wireframe_linewidth=1,this.wireframe_linejoin=this.wireframe_linecap="round",e&&(void 0!==e.color&&this.color.setHex(e.color),void 0!==e.map&&(this.map=e.map),void 0!==e.env_map&&(this.env_map=e.env_map),void 0!==e.combine&&(this.combine=e.combine),void 0!==e.reflectivity&&(this.reflectivity=e.reflectivity),void 0!==e.refraction_ratio&&(this.refraction_ratio=e.refraction_ratio),void 0!==e.fog&&(this.fog=e.fog),void 0!==e.opacity&&(this.opacity=e.opacity),void 0!==e.shading&&(this.shading=e.shading),void 0!==e.blending&&(this.blending=e.blending),void 0!==e.wireframe&&(this.wireframe=e.wireframe),void 0!==e.wireframe_linewidth&&(this.wireframe_linewidth=e.wireframe_linewidth),void 0!==e.wireframe_linecap&&(this.wireframe_linecap=e.wireframe_linecap),void 0!==e.wireframe_linejoin&&(this.wireframe_linejoin=e.wireframe_linejoin))},THREE.MeshBasicMaterial.prototype={toString:function(){return"THREE.MeshBasicMaterial (<br/>id: "+this.id+"<br/>color: "+this.color+"<br/>map: "+this.map+"<br/>env_map: "+this.env_map+"<br/>combine: "+this.combine+"<br/>reflectivity: "+this.reflectivity+"<br/>refraction_ratio: "+this.refraction_ratio+"<br/>opacity: "+this.opacity+"<br/>blending: "+this.blending+"<br/>wireframe: "+this.wireframe+"<br/>wireframe_linewidth: "+this.wireframe_linewidth+"<br/>wireframe_linecap: "+this.wireframe_linecap+"<br/>wireframe_linejoin: "+this.wireframe_linejoin+"<br/>)"}},THREE.MeshBasicMaterialCounter={value:0},THREE.MeshLambertMaterial=function(e){this.id=THREE.MeshLambertMaterialCounter.value++,this.color=new THREE.Color(16777215),this.env_map=this.map=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refraction_ratio=.98,this.fog=!0,this.opacity=1,this.shading=THREE.SmoothShading,this.blending=THREE.NormalBlending,this.wireframe=!1,this.wireframe_linewidth=1,this.wireframe_linejoin=this.wireframe_linecap="round",e&&(void 0!==e.color&&this.color.setHex(e.color),void 0!==e.map&&(this.map=e.map),void 0!==e.env_map&&(this.env_map=e.env_map),void 0!==e.combine&&(this.combine=e.combine),void 0!==e.reflectivity&&(this.reflectivity=e.reflectivity),void 0!==e.refraction_ratio&&(this.refraction_ratio=e.refraction_ratio),void 0!==e.fog&&(this.fog=e.fog),void 0!==e.opacity&&(this.opacity=e.opacity),void 0!==e.shading&&(this.shading=e.shading),void 0!==e.blending&&(this.blending=e.blending),void 0!==e.wireframe&&(this.wireframe=e.wireframe),void 0!==e.wireframe_linewidth&&(this.wireframe_linewidth=e.wireframe_linewidth),void 0!==e.wireframe_linecap&&(this.wireframe_linecap=e.wireframe_linecap),void 0!==e.wireframe_linejoin&&(this.wireframe_linejoin=e.wireframe_linejoin))},THREE.MeshLambertMaterial.prototype={toString:function(){return"THREE.MeshLambertMaterial (<br/>id: "+this.id+"<br/>color: "+this.color+"<br/>map: "+this.map+"<br/>env_map: "+this.env_map+"<br/>combine: "+this.combine+"<br/>reflectivity: "+this.reflectivity+"<br/>refraction_ratio: "+this.refraction_ratio+"<br/>opacity: "+this.opacity+"<br/>shading: "+this.shading+"<br/>blending: "+this.blending+"<br/>wireframe: "+this.wireframe+"<br/>wireframe_linewidth: "+this.wireframe_linewidth+"<br/>wireframe_linecap: "+this.wireframe_linecap+"<br/>wireframe_linejoin: "+this.wireframe_linejoin+"<br/> )"}},THREE.MeshLambertMaterialCounter={value:0},THREE.MeshPhongMaterial=function(e){this.id=THREE.MeshPhongMaterialCounter.value++,this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(328965),this.specular=new THREE.Color(1118481),this.shininess=30,this.env_map=this.specular_map=this.map=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refraction_ratio=.98,this.fog=!0,this.opacity=1,this.shading=THREE.SmoothShading,this.blending=THREE.NormalBlending,this.wireframe=!1,this.wireframe_linewidth=1,this.wireframe_linejoin=this.wireframe_linecap="round",e&&(void 0!==e.color&&(this.color=new THREE.Color(e.color)),void 0!==e.ambient&&(this.ambient=new THREE.Color(e.ambient)),void 0!==e.specular&&(this.specular=new THREE.Color(e.specular)),void 0!==e.shininess&&(this.shininess=e.shininess),void 0!==e.map&&(this.map=e.map),void 0!==e.specular_map&&(this.specular_map=e.specular_map),void 0!==e.env_map&&(this.env_map=e.env_map),void 0!==e.combine&&(this.combine=e.combine),void 0!==e.reflectivity&&(this.reflectivity=e.reflectivity),void 0!==e.refraction_ratio&&(this.refraction_ratio=e.refraction_ratio),void 0!==e.fog&&(this.fog=e.fog),void 0!==e.opacity&&(this.opacity=e.opacity),void 0!==e.shading&&(this.shading=e.shading),void 0!==e.blending&&(this.blending=e.blending),void 0!==e.wireframe&&(this.wireframe=e.wireframe),void 0!==e.wireframe_linewidth&&(this.wireframe_linewidth=e.wireframe_linewidth),void 0!==e.wireframe_linecap&&(this.wireframe_linecap=e.wireframe_linecap),void 0!==e.wireframe_linejoin&&(this.wireframe_linejoin=e.wireframe_linejoin))},THREE.MeshPhongMaterial.prototype={toString:function(){return"THREE.MeshPhongMaterial (<br/>id: "+this.id+"<br/>color: "+this.color+"<br/>ambient: "+this.ambient+"<br/>specular: "+this.specular+"<br/>shininess: "+this.shininess+"<br/>map: "+this.map+"<br/>specular_map: "+this.specular_map+"<br/>env_map: "+this.env_map+"<br/>combine: "+this.combine+"<br/>reflectivity: "+this.reflectivity+"<br/>refraction_ratio: "+this.refraction_ratio+"<br/>opacity: "+this.opacity+"<br/>shading: "+this.shading+"<br/>wireframe: "+this.wireframe+"<br/>wireframe_linewidth: "+this.wireframe_linewidth+"<br/>wireframe_linecap: "+this.wireframe_linecap+"<br/>wireframe_linejoin: "+this.wireframe_linejoin+"<br/>)"}},THREE.MeshPhongMaterialCounter={value:0},THREE.MeshDepthMaterial=function(e){this.opacity=1,this.shading=THREE.SmoothShading,this.blending=THREE.NormalBlending,this.wireframe=!1,this.wireframe_linewidth=1,this.wireframe_linejoin=this.wireframe_linecap="round",e&&(void 0!==e.opacity&&(this.opacity=e.opacity),void 0!==e.blending&&(this.blending=e.blending))},THREE.MeshDepthMaterial.prototype={toString:function(){return"THREE.MeshDepthMaterial"}},THREE.MeshNormalMaterial=function(e){this.opacity=1,this.shading=THREE.FlatShading,this.blending=THREE.NormalBlending,e&&(void 0!==e.opacity&&(this.opacity=e.opacity),void 0!==e.shading&&(this.shading=e.shading),void 0!==e.blending&&(this.blending=e.blending))},THREE.MeshNormalMaterial.prototype={toString:function(){return"THREE.MeshNormalMaterial"}},THREE.MeshFaceMaterial=function(){},THREE.MeshFaceMaterial.prototype={toString:function(){return"THREE.MeshFaceMaterial"}},THREE.MeshShaderMaterial=function(e){this.id=THREE.MeshShaderMaterialCounter.value++,this.vertex_shader=this.fragment_shader="void main() {}",this.uniforms={},this.opacity=1,this.shading=THREE.SmoothShading,this.blending=THREE.NormalBlending,this.wireframe=!1,this.wireframe_linewidth=1,this.wireframe_linejoin=this.wireframe_linecap="round",e&&(void 0!==e.fragment_shader&&(this.fragment_shader=e.fragment_shader),void 0!==e.vertex_shader&&(this.vertex_shader=e.vertex_shader),void 0!==e.uniforms&&(this.uniforms=e.uniforms),void 0!==e.shading&&(this.shading=e.shading),void 0!==e.blending&&(this.blending=e.blending),void 0!==e.wireframe&&(this.wireframe=e.wireframe),void 0!==e.wireframe_linewidth&&(this.wireframe_linewidth=e.wireframe_linewidth),void 0!==e.wireframe_linecap&&(this.wireframe_linecap=e.wireframe_linecap),void 0!==e.wireframe_linejoin&&(this.wireframe_linejoin=e.wireframe_linejoin))},THREE.MeshShaderMaterial.prototype={toString:function(){return"THREE.MeshShaderMaterial (<br/>id: "+this.id+"<br/>blending: "+this.blending+"<br/>wireframe: "+this.wireframe+"<br/>wireframe_linewidth: "+this.wireframe_linewidth+"<br/>wireframe_linecap: "+this.wireframe_linecap+"<br/>wireframe_linejoin: "+this.wireframe_linejoin+"<br/>)"}},THREE.MeshShaderMaterialCounter={value:0},THREE.ParticleBasicMaterial=function(e){this.color=new THREE.Color(16777215),this.map=null,this.opacity=1,this.blending=THREE.NormalBlending,this.offset=new THREE.Vector2,e&&(void 0!==e.color&&this.color.setHex(e.color),void 0!==e.map&&(this.map=e.map),void 0!==e.opacity&&(this.opacity=e.opacity),void 0!==e.blending&&(this.blending=e.blending))},THREE.ParticleBasicMaterial.prototype={toString:function(){return"THREE.ParticleBasicMaterial (<br/>color: "+this.color+"<br/>map: "+this.map+"<br/>opacity: "+this.opacity+"<br/>blending: "+this.blending+"<br/>)"}},THREE.ParticleCircleMaterial=function(e){this.color=new THREE.Color(16777215),this.opacity=1,this.blending=THREE.NormalBlending,e&&(void 0!==e.color&&this.color.setHex(e.color),void 0!==e.opacity&&(this.opacity=e.opacity),void 0!==e.blending&&(this.blending=e.blending))},THREE.ParticleCircleMaterial.prototype={toString:function(){return"THREE.ParticleCircleMaterial (<br/>color: "+this.color+"<br/>opacity: "+this.opacity+"<br/>blending: "+this.blending+"<br/>)"}},THREE.ParticleDOMMaterial=function(e){this.domElement=e},THREE.ParticleDOMMaterial.prototype={toString:function(){return"THREE.ParticleDOMMaterial ( domElement: "+this.domElement+" )"}},THREE.Texture=function(e,t,n,i,r,o){this.image=e,this.mapping=void 0!==t?t:new THREE.UVMapping,this.wrap_s=void 0!==n?n:THREE.ClampToEdgeWrapping,this.wrap_t=void 0!==i?i:THREE.ClampToEdgeWrapping,this.mag_filter=void 0!==r?r:THREE.LinearFilter,this.min_filter=void 0!==o?o:THREE.LinearMipMapLinearFilter},THREE.Texture.prototype={clone:function(){return new THREE.Texture(this.image,this.mapping,this.wrap_s,this.wrap_t,this.mag_filter,this.min_filter)},toString:function(){return"THREE.Texture (<br/>image: "+this.image+"<br/>wrap_s: "+this.wrap_s+"<br/>wrap_t: "+this.wrap_t+"<br/>mag_filter: "+this.mag_filter+"<br/>min_filter: "+this.min_filter+"<br/>)"}},THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.RepeatWrapping=0,THREE.ClampToEdgeWrapping=1,THREE.MirroredRepeatWrapping=2,THREE.NearestFilter=3,THREE.NearestMipMapNearestFilter=4,THREE.NearestMipMapLinearFilter=5,THREE.LinearFilter=6,THREE.LinearMipMapNearestFilter=7,THREE.LinearMipMapLinearFilter=8,THREE.ByteType=9,THREE.UnsignedByteType=10,THREE.ShortType=11,THREE.UnsignedShortType=12,THREE.IntType=13,THREE.UnsignedIntType=14,THREE.FloatType=15,THREE.AlphaFormat=16,THREE.RGBFormat=17,THREE.RGBAFormat=18,THREE.LuminanceFormat=19,THREE.LuminanceAlphaFormat=20,THREE.RenderTarget=function(e,t,n){this.width=e,this.height=t,n=n||{},this.wrap_s=void 0!==n.wrap_s?n.wrap_s:THREE.ClampToEdgeWrapping,this.wrap_t=void 0!==n.wrap_t?n.wrap_t:THREE.ClampToEdgeWrapping,this.mag_filter=void 0!==n.mag_filter?n.mag_filter:THREE.LinearFilter,this.min_filter=void 0!==n.min_filter?n.min_filter:THREE.LinearMipMapLinearFilter,this.format=void 0!==n.format?n.format:THREE.RGBFormat,this.type=void 0!==n.type?n.type:THREE.UnsignedByteType};var Uniforms={clone:function(e){var t,n,i,r={};for(t in e){r[t]={};for(n in e[t])i=e[t][n],r[t][n]=i instanceof THREE.Color||i instanceof THREE.Vector3||i instanceof THREE.Texture?i.clone():i}return r},merge:function(e){var t,n,i,r={};for(t=0;t<e.length;t++){i=this.clone(e[t]);for(n in i)r[n]=i[n]}return r}};THREE.CubeReflectionMapping=function(){},THREE.CubeRefractionMapping=function(){},THREE.LatitudeReflectionMapping=function(){},THREE.LatitudeRefractionMapping=function(){},THREE.SphericalReflectionMapping=function(){},THREE.SphericalRefractionMapping=function(){},THREE.UVMapping=function(){},THREE.Scene=function(){this.objects=[],this.lights=[],this.fog=null,this.addObject=function(e){-1===this.objects.indexOf(e)&&this.objects.push(e)},this.removeObject=function(e){e=this.objects.indexOf(e),-1!==e&&this.objects.splice(e,1)},this.addLight=function(e){-1===this.lights.indexOf(e)&&this.lights.push(e)},this.removeLight=function(e){e=this.lights.indexOf(e),-1!==e&&this.lights.splice(e,1)},this.toString=function(){return"THREE.Scene ( "+this.objects+" )"}},THREE.Fog=function(e,t,n){this.color=new THREE.Color(e),this.near=t||1,this.far=n||1e3},THREE.FogExp2=function(e,t){this.color=new THREE.Color(e),this.density=t||25e-5},THREE.Projector=function(){function e(e,t){return t.z-e.z}function t(e,t){var n=0,i=1,r=e.z+e.w,o=t.z+t.w,s=-e.z+e.w,a=-t.z+t.w;return r>=0&&o>=0&&s>=0&&a>=0?!0:0>r&&0>o||0>s&&0>a?!1:(0>r?n=Math.max(n,r/(r-o)):0>o&&(i=Math.min(i,r/(r-o))),0>s?n=Math.max(n,s/(s-a)):0>a&&(i=Math.min(i,s/(s-a))),n>i?!1:(e.lerpSelf(t,n),t.lerpSelf(e,1-i),!0))}var n,i,r,o,s,a,l,u,c,h,f=[],d=[],p=[],g=[],m=new THREE.Vector4,v=new THREE.Vector4,y=new THREE.Matrix4,E=new THREE.Matrix4,A=[],b=new THREE.Vector4,w=new THREE.Vector4;this.projectObjects=function(t,r,o){var s,a,l=[];for(i=0,y.multiply(r.projectionMatrix,r.matrix),A[0]=new THREE.Vector4(y.n41-y.n11,y.n42-y.n12,y.n43-y.n13,y.n44-y.n14),A[1]=new THREE.Vector4(y.n41+y.n11,y.n42+y.n12,y.n43+y.n13,y.n44+y.n14),A[2]=new THREE.Vector4(y.n41+y.n21,y.n42+y.n22,y.n43+y.n23,y.n44+y.n24),A[3]=new THREE.Vector4(y.n41-y.n21,y.n42-y.n22,y.n43-y.n23,y.n44-y.n24),A[4]=new THREE.Vector4(y.n41-y.n31,y.n42-y.n32,y.n43-y.n33,y.n44-y.n34),A[5]=new THREE.Vector4(y.n41+y.n31,y.n42+y.n32,y.n43+y.n33,y.n44+y.n34),r=0,s=A.length;s>r;r++)a=A[r],a.divideScalar(Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z));for(s=t.objects,t=0,r=s.length;r>t;t++){a=s[t];var u;if(!(u=!a.visible)){if(u=a instanceof THREE.Mesh){e:{u=void 0;for(var c=a.position,h=-a.geometry.boundingSphere.radius*Math.max(a.scale.x,Math.max(a.scale.y,a.scale.z)),d=0;6>d;d++)if(u=A[d].x*c.x+A[d].y*c.y+A[d].z*c.z+A[d].w,h>=u){u=!1;break e}u=!0}u=!u}u=u}u||(n=f[i]=f[i]||new THREE.RenderableObject,m.copy(a.position),y.multiplyVector3(m),n.object=a,n.z=m.z,l.push(n),i++)}return o&&l.sort(e),l},this.projectScene=function(n,i,f){var m,A,x,C,_,F,S,T,D,R,k,B,M,L,P,I,$=[],N=i.near,O=i.far;for(s=l=c=0,i.autoUpdateMatrix&&i.updateMatrix(),y.multiply(i.projectionMatrix,i.matrix),F=this.projectObjects(n,i,!0),n=0,m=F.length;m>n;n++)if(S=F[n].object,S.visible)if(S.autoUpdateMatrix&&S.updateMatrix(),T=S.matrix,D=S.rotationMatrix,R=S.materials,k=S.overdraw,S instanceof THREE.Mesh){for(B=S.geometry,M=B.vertices,A=0,x=M.length;x>A;A++)L=M[A],L.positionWorld.copy(L.position),T.multiplyVector3(L.positionWorld),C=L.positionScreen,C.copy(L.positionWorld),y.multiplyVector4(C),C.x/=C.w,C.y/=C.w,L.__visible=C.z>N&&C.z<O;for(B=B.faces,A=0,x=B.length;x>A;A++)if(L=B[A],L instanceof THREE.Face3){if(C=M[L.a],_=M[L.b],P=M[L.c],C.__visible&&_.__visible&&P.__visible&&(S.doubleSided||S.flipSided!=(P.positionScreen.x-C.positionScreen.x)*(_.positionScreen.y-C.positionScreen.y)-(P.positionScreen.y-C.positionScreen.y)*(_.positionScreen.x-C.positionScreen.x)<0)){for(r=d[s]=d[s]||new THREE.RenderableFace3,r.v1.positionWorld.copy(C.positionWorld),r.v2.positionWorld.copy(_.positionWorld),r.v3.positionWorld.copy(P.positionWorld),r.v1.positionScreen.copy(C.positionScreen),r.v2.positionScreen.copy(_.positionScreen),r.v3.positionScreen.copy(P.positionScreen),r.normalWorld.copy(L.normal),D.multiplyVector3(r.normalWorld),r.centroidWorld.copy(L.centroid),T.multiplyVector3(r.centroidWorld),r.centroidScreen.copy(r.centroidWorld),y.multiplyVector3(r.centroidScreen),P=L.vertexNormals,h=r.vertexNormalsWorld,C=0,_=P.length;_>C;C++)I=h[C]=h[C]||new THREE.Vector3,I.copy(P[C]),D.multiplyVector3(I);r.z=r.centroidScreen.z,r.meshMaterials=R,r.faceMaterials=L.materials,r.overdraw=k,S.geometry.uvs[A]&&(r.uvs[0]=S.geometry.uvs[A][0],r.uvs[1]=S.geometry.uvs[A][1],r.uvs[2]=S.geometry.uvs[A][2]),$.push(r),s++}}else L instanceof THREE.Face4&&(C=M[L.a],_=M[L.b],P=M[L.c],I=M[L.d],C.__visible&&_.__visible&&P.__visible&&I.__visible&&(S.doubleSided||S.flipSided!=((I.positionScreen.x-C.positionScreen.x)*(_.positionScreen.y-C.positionScreen.y)-(I.positionScreen.y-C.positionScreen.y)*(_.positionScreen.x-C.positionScreen.x)<0||(_.positionScreen.x-P.positionScreen.x)*(I.positionScreen.y-P.positionScreen.y)-(_.positionScreen.y-P.positionScreen.y)*(I.positionScreen.x-P.positionScreen.x)<0))&&(r=d[s]=d[s]||new THREE.RenderableFace3,r.v1.positionWorld.copy(C.positionWorld),r.v2.positionWorld.copy(_.positionWorld),r.v3.positionWorld.copy(I.positionWorld),r.v1.positionScreen.copy(C.positionScreen),r.v2.positionScreen.copy(_.positionScreen),r.v3.positionScreen.copy(I.positionScreen),r.normalWorld.copy(L.normal),D.multiplyVector3(r.normalWorld),r.centroidWorld.copy(L.centroid),T.multiplyVector3(r.centroidWorld),r.centroidScreen.copy(r.centroidWorld),y.multiplyVector3(r.centroidScreen),r.z=r.centroidScreen.z,r.meshMaterials=R,r.faceMaterials=L.materials,r.overdraw=k,S.geometry.uvs[A]&&(r.uvs[0]=S.geometry.uvs[A][0],r.uvs[1]=S.geometry.uvs[A][1],r.uvs[2]=S.geometry.uvs[A][3]),$.push(r),s++,o=d[s]=d[s]||new THREE.RenderableFace3,o.v1.positionWorld.copy(_.positionWorld),o.v2.positionWorld.copy(P.positionWorld),o.v3.positionWorld.copy(I.positionWorld),o.v1.positionScreen.copy(_.positionScreen),o.v2.positionScreen.copy(P.positionScreen),o.v3.positionScreen.copy(I.positionScreen),o.normalWorld.copy(r.normalWorld),o.centroidWorld.copy(r.centroidWorld),o.centroidScreen.copy(r.centroidScreen),o.z=o.centroidScreen.z,o.meshMaterials=R,o.faceMaterials=L.materials,o.overdraw=k,S.geometry.uvs[A]&&(o.uvs[0]=S.geometry.uvs[A][1],o.uvs[1]=S.geometry.uvs[A][2],o.uvs[2]=S.geometry.uvs[A][3]),$.push(o),s++))}else if(S instanceof THREE.Line)for(E.multiply(y,T),M=S.geometry.vertices,L=M[0],L.positionScreen.copy(L.position),E.multiplyVector4(L.positionScreen),A=1,x=M.length;x>A;A++)C=M[A],C.positionScreen.copy(C.position),E.multiplyVector4(C.positionScreen),_=M[A-1],b.copy(C.positionScreen),w.copy(_.positionScreen),t(b,w)&&(b.multiplyScalar(1/b.w),w.multiplyScalar(1/w.w),a=p[l]=p[l]||new THREE.RenderableLine,a.v1.positionScreen.copy(b),a.v2.positionScreen.copy(w),a.z=Math.max(b.z,w.z),a.materials=S.materials,$.push(a),l++);else S instanceof THREE.Particle&&(v.set(S.position.x,S.position.y,S.position.z,1),y.multiplyVector4(v),v.z/=v.w,v.z>0&&v.z<1&&(u=g[c]=g[c]||new THREE.RenderableParticle,u.x=v.x/v.w,u.y=v.y/v.w,u.z=v.z,u.rotation=S.rotation.z,u.scale.x=S.scale.x*Math.abs(u.x-(v.x+i.projectionMatrix.n11)/(v.w+i.projectionMatrix.n14)),u.scale.y=S.scale.y*Math.abs(u.y-(v.y+i.projectionMatrix.n22)/(v.w+i.projectionMatrix.n24)),u.materials=S.materials,$.push(u),c++));return f&&$.sort(e),$},this.unprojectVector=function(e,t){var n=THREE.Matrix4.makeInvert(t.matrix);return n.multiplySelf(THREE.Matrix4.makeInvert(t.projectionMatrix)),n.multiplyVector3(e),e}},THREE.DOMRenderer=function(){THREE.Renderer.call(this);var e,t,n,i,r=null,o=new THREE.Projector;this.domElement=document.createElement("div"),this.setSize=function(r,o){e=r,t=o,n=e/2,i=t/2},this.render=function(e,t){var s,a,l,u,c,h,f,d;for(r=o.projectScene(e,t),s=0,a=r.length;a>s;s++)if(c=r[s],c instanceof THREE.RenderableParticle)for(f=c.x*n+n,d=c.y*i+i,l=0,u=c.material.length;u>l;l++)h=c.material[l],h instanceof THREE.ParticleDOMMaterial&&(h=h.domElement,h.style.left=f+"px",h.style.top=d+"px")}},THREE.CanvasRenderer=function(){function e(e){I!=e&&(M.globalAlpha=I=e)}function t(e){if($!=e){switch(e){case THREE.NormalBlending:M.globalCompositeOperation="source-over";break;case THREE.AdditiveBlending:M.globalCompositeOperation="lighter";break;case THREE.SubtractiveBlending:M.globalCompositeOperation="darker"}$=e}}var n,i,r,o,s,a,l,u,c,h,f,d,p,g,m,v,y,E,A,b,w,x,C,_,F,S,T,D,R=null,k=new THREE.Projector,B=document.createElement("canvas"),M=B.getContext("2d"),L=new THREE.Color(0),P=0,I=1,$=0,N=null,O=null,H=1,j=new THREE.Color,z=new THREE.Color,U=new THREE.Color,W=new THREE.Color,G=new THREE.Color,V=new THREE.Rectangle,Y=new THREE.Rectangle,q=new THREE.Rectangle,X=!1,J=new THREE.Color,K=new THREE.Color,Z=new THREE.Color,Q=new THREE.Color,et=2*Math.PI,tt=new THREE.Vector3,nt=16;C=document.createElement("canvas"),C.width=C.height=2,_=C.getContext("2d"),_.fillStyle="rgba(0,0,0,1)",_.fillRect(0,0,2,2),F=_.getImageData(0,0,2,2),S=F.data,T=document.createElement("canvas"),T.width=T.height=nt,D=T.getContext("2d"),D.translate(-nt/2,-nt/2),D.scale(nt,nt),nt--,this.domElement=B,this.sortElements=this.sortObjects=this.autoClear=!0,this.setSize=function(e,t){n=e,i=t,r=n/2,o=i/2,B.width=n,B.height=i,V.set(-r,-o,r,o),I=1,$=0,O=N=null,H=1},this.setClearColor=function(e,t){L.setHex(e),P=t,Y.set(-r,-o,r,o),M.setTransform(1,0,0,-1,r,o),this.clear()},this.clear=function(){Y.isEmpty()||(Y.inflate(1),Y.minSelf(V),0==L.hex&&0==P?M.clearRect(Y.getX(),Y.getY(),Y.getWidth(),Y.getHeight()):(t(THREE.NormalBlending),e(1),M.fillStyle="rgba("+Math.floor(255*L.r)+","+Math.floor(255*L.g)+","+Math.floor(255*L.b)+","+P+")",M.fillRect(Y.getX(),Y.getY(),Y.getWidth(),Y.getHeight())),Y.empty())},this.render=function(n,i){function B(e){var t,n,i,r=e.lights;for(K.setRGB(0,0,0),Z.setRGB(0,0,0),Q.setRGB(0,0,0),e=0,t=r.length;t>e;e++)n=r[e],i=n.color,n instanceof THREE.AmbientLight?(K.r+=i.r,K.g+=i.g,K.b+=i.b):n instanceof THREE.DirectionalLight?(Z.r+=i.r,Z.g+=i.g,Z.b+=i.b):n instanceof THREE.PointLight&&(Q.r+=i.r,Q.g+=i.g,Q.b+=i.b)}function L(e,t,n,i){var r,o,s,a,l=e.lights;for(e=0,r=l.length;r>e;e++)o=l[e],s=o.color,a=o.intensity,o instanceof THREE.DirectionalLight?(o=n.dot(o.position)*a,o>0&&(i.r+=s.r*o,i.g+=s.g*o,i.b+=s.b*o)):o instanceof THREE.PointLight&&(tt.sub(o.position,t),tt.normalize(),o=n.dot(tt)*a,o>0&&(i.r+=s.r*o,i.g+=s.g*o,i.b+=s.b*o))}function P(n,i,s){if(0!=s.opacity){e(s.opacity),t(s.blending);var a,l,u,c,h,f;s instanceof THREE.ParticleBasicMaterial?s.map&&(c=s.map,h=c.width>>1,f=c.height>>1,l=i.scale.x*r,u=i.scale.y*o,s=l*h,a=u*f,q.set(n.x-s,n.y-a,n.x+s,n.y+a),V.instersects(q)&&(M.save(),M.translate(n.x,n.y),M.rotate(-i.rotation),M.scale(l,-u),M.translate(-h,-f),M.drawImage(c,0,0),M.restore())):s instanceof THREE.ParticleCircleMaterial&&(X?(J.r=K.r+Z.r+Q.r,J.g=K.g+Z.g+Q.g,J.b=K.b+Z.b+Q.b,j.r=s.color.r*J.r,j.g=s.color.g*J.g,j.b=s.color.b*J.b,j.updateStyleString()):j.__styleString=s.color.__styleString,s=i.scale.x*r,a=i.scale.y*o,q.set(n.x-s,n.y-a,n.x+s,n.y+a),V.instersects(q)&&(l=j.__styleString,O!=l&&(M.fillStyle=O=l),M.save(),M.translate(n.x,n.y),M.rotate(-i.rotation),M.scale(s,a),M.beginPath(),M.arc(0,0,1,0,et,!0),M.closePath(),M.fill(),M.restore()))}}function I(n,i,r,o){0!=o.opacity&&(e(o.opacity),t(o.blending),M.beginPath(),M.moveTo(n.positionScreen.x,n.positionScreen.y),M.lineTo(i.positionScreen.x,i.positionScreen.y),M.closePath(),o instanceof THREE.LineBasicMaterial&&(j.__styleString=o.color.__styleString,n=o.linewidth,H!=n&&(M.lineWidth=H=n),n=j.__styleString,N!=n&&(M.strokeStyle=N=n),M.stroke(),q.inflate(2*o.linewidth)))}function $(n,r,o,s,a,l){0!=a.opacity&&(e(a.opacity),t(a.blending),u=n.positionScreen.x,c=n.positionScreen.y,h=r.positionScreen.x,f=r.positionScreen.y,d=o.positionScreen.x,p=o.positionScreen.y,M.beginPath(),M.moveTo(u,c),M.lineTo(h,f),M.lineTo(d,p),M.lineTo(u,c),M.closePath(),a instanceof THREE.MeshBasicMaterial?a.map?a.map.image.loaded&&a.map.mapping instanceof THREE.UVMapping&&rt(u,c,h,f,d,p,a.map.image,s.uvs[0].u,s.uvs[0].v,s.uvs[1].u,s.uvs[1].v,s.uvs[2].u,s.uvs[2].v):a.env_map?a.env_map.image.loaded&&a.env_map.mapping instanceof THREE.SphericalReflectionMapping&&(n=i.matrix,tt.copy(s.vertexNormalsWorld[0]),y=.5*(tt.x*n.n11+tt.y*n.n12+tt.z*n.n13)+.5,E=.5*-(tt.x*n.n21+tt.y*n.n22+tt.z*n.n23)+.5,tt.copy(s.vertexNormalsWorld[1]),A=.5*(tt.x*n.n11+tt.y*n.n12+tt.z*n.n13)+.5,b=.5*-(tt.x*n.n21+tt.y*n.n22+tt.z*n.n23)+.5,tt.copy(s.vertexNormalsWorld[2]),w=.5*(tt.x*n.n11+tt.y*n.n12+tt.z*n.n13)+.5,x=.5*-(tt.x*n.n21+tt.y*n.n22+tt.z*n.n23)+.5,rt(u,c,h,f,d,p,a.env_map.image,y,E,A,b,w,x)):a.wireframe?nt(a.color.__styleString,a.wireframe_linewidth):it(a.color.__styleString):a instanceof THREE.MeshLambertMaterial?(a.map&&!a.wireframe&&(a.map.mapping instanceof THREE.UVMapping&&rt(u,c,h,f,d,p,a.map.image,s.uvs[0].u,s.uvs[0].v,s.uvs[1].u,s.uvs[1].v,s.uvs[2].u,s.uvs[2].v),t(THREE.SubtractiveBlending)),X?a.wireframe||a.shading!=THREE.SmoothShading||3!=s.vertexNormalsWorld.length?(J.r=K.r,J.g=K.g,J.b=K.b,L(l,s.centroidWorld,s.normalWorld,J),j.r=a.color.r*J.r,j.g=a.color.g*J.g,j.b=a.color.b*J.b,j.updateStyleString(),a.wireframe?nt(j.__styleString,a.wireframe_linewidth):it(j.__styleString)):(z.r=U.r=W.r=K.r,z.g=U.g=W.g=K.g,z.b=U.b=W.b=K.b,L(l,s.v1.positionWorld,s.vertexNormalsWorld[0],z),L(l,s.v2.positionWorld,s.vertexNormalsWorld[1],U),L(l,s.v3.positionWorld,s.vertexNormalsWorld[2],W),G.r=.5*(U.r+W.r),G.g=.5*(U.g+W.g),G.b=.5*(U.b+W.b),v=ot(z,U,W,G),rt(u,c,h,f,d,p,v,0,0,1,0,0,1)):a.wireframe?nt(a.color.__styleString,a.wireframe_linewidth):it(a.color.__styleString)):a instanceof THREE.MeshDepthMaterial?(g=i.near,m=i.far,z.r=z.g=z.b=1-st(n.positionScreen.z,g,m),U.r=U.g=U.b=1-st(r.positionScreen.z,g,m),W.r=W.g=W.b=1-st(o.positionScreen.z,g,m),G.r=.5*(U.r+W.r),G.g=.5*(U.g+W.g),G.b=.5*(U.b+W.b),v=ot(z,U,W,G),rt(u,c,h,f,d,p,v,0,0,1,0,0,1)):a instanceof THREE.MeshNormalMaterial&&(j.r=at(s.normalWorld.x),j.g=at(s.normalWorld.y),j.b=at(s.normalWorld.z),j.updateStyleString(),a.wireframe?nt(j.__styleString,a.wireframe_linewidth):it(j.__styleString)))}function nt(e,t){N!=e&&(M.strokeStyle=N=e),H!=t&&(M.lineWidth=H=t),M.stroke(),q.inflate(2*t)}function it(e){O!=e&&(M.fillStyle=O=e),M.fill()}function rt(e,t,n,i,r,o,s,a,l,u,c,h,f){var d,p;d=s.width-1,p=s.height-1,a*=d,l*=p,u*=d,c*=p,h*=d,f*=p,n-=e,i-=t,r-=e,o-=t,u-=a,c-=l,h-=a,f-=l,p=1/(u*f-h*c),d=(f*n-c*r)*p,c=(f*i-c*o)*p,n=(u*r-h*n)*p,i=(u*o-h*i)*p,e=e-d*a-n*l,t=t-c*a-i*l,M.save(),M.transform(d,c,n,i,e,t),M.clip(),M.drawImage(s,0,0),M.restore()}function ot(e,t,n,i){var r=~~(255*e.r),o=~~(255*e.g);e=~~(255*e.b);var s=~~(255*t.r),a=~~(255*t.g);t=~~(255*t.b);var l=~~(255*n.r),u=~~(255*n.g);n=~~(255*n.b);var c=~~(255*i.r),h=~~(255*i.g);return i=~~(255*i.b),S[0]=0>r?0:r>255?255:r,S[1]=0>o?0:o>255?255:o,S[2]=0>e?0:e>255?255:e,S[4]=0>s?0:s>255?255:s,S[5]=0>a?0:a>255?255:a,S[6]=0>t?0:t>255?255:t,S[8]=0>l?0:l>255?255:l,S[9]=0>u?0:u>255?255:u,S[10]=0>n?0:n>255?255:n,S[12]=0>c?0:c>255?255:c,S[13]=0>h?0:h>255?255:h,S[14]=0>i?0:i>255?255:i,_.putImageData(F,0,0),D.drawImage(C,0,0),T}function st(e,t,n){return e=(e-t)/(n-t),e*e*(3-2*e)}function at(e){return e=.5*(e+1),0>e?0:e>1?1:e}function lt(e,t){var n=t.x-e.x,i=t.y-e.y,r=1/Math.sqrt(n*n+i*i);n*=r,i*=r,t.x+=n,t.y+=i,e.x-=n,e.y-=i}var ut,ct,ht,ft,dt,pt,gt,mt;for(M.setTransform(1,0,0,-1,r,o),this.autoClear&&this.clear(),R=k.projectScene(n,i,this.sortElements),(X=n.lights.length>0)&&B(n),ut=0,ct=R.length;ct>ut;ut++){if(ht=R[ut],q.empty(),ht instanceof THREE.RenderableParticle)for(s=ht,s.x*=r,s.y*=o,ft=0,dt=ht.materials.length;dt>ft;ft++)P(s,ht,ht.materials[ft],n);else if(ht instanceof THREE.RenderableLine){if(s=ht.v1,a=ht.v2,s.positionScreen.x*=r,s.positionScreen.y*=o,a.positionScreen.x*=r,a.positionScreen.y*=o,q.addPoint(s.positionScreen.x,s.positionScreen.y),q.addPoint(a.positionScreen.x,a.positionScreen.y),V.instersects(q))for(ft=0,dt=ht.materials.length;dt>ft;)I(s,a,ht,ht.materials[ft++],n)}else if(ht instanceof THREE.RenderableFace3&&(s=ht.v1,a=ht.v2,l=ht.v3,s.positionScreen.x*=r,s.positionScreen.y*=o,a.positionScreen.x*=r,a.positionScreen.y*=o,l.positionScreen.x*=r,l.positionScreen.y*=o,ht.overdraw&&(lt(s.positionScreen,a.positionScreen),lt(a.positionScreen,l.positionScreen),lt(l.positionScreen,s.positionScreen)),q.add3Points(s.positionScreen.x,s.positionScreen.y,a.positionScreen.x,a.positionScreen.y,l.positionScreen.x,l.positionScreen.y),V.instersects(q)))for(ft=0,dt=ht.meshMaterials.length;dt>ft;)if(mt=ht.meshMaterials[ft++],mt instanceof THREE.MeshFaceMaterial)for(pt=0,gt=ht.faceMaterials.length;gt>pt;)(mt=ht.faceMaterials[pt++])&&$(s,a,l,ht,mt,n);else $(s,a,l,ht,mt,n);Y.addRectangle(q)}M.setTransform(1,0,0,1,0,0)}},THREE.SVGRenderer=function(){function e(e,t,n){var i,r,o,s;for(i=0,r=e.lights.length;r>i;i++)o=e.lights[i],o instanceof THREE.DirectionalLight?(s=t.normalWorld.dot(o.position)*o.intensity,s>0&&(n.r+=o.color.r*s,n.g+=o.color.g*s,n.b+=o.color.b*s)):o instanceof THREE.PointLight&&(D.sub(o.position,t.centroidWorld),D.normalize(),s=t.normalWorld.dot(D)*o.intensity,s>0&&(n.r+=o.color.r*s,n.g+=o.color.g*s,n.b+=o.color.b*s))}function t(t,n,o,s,a,l){p=i(g++),p.setAttribute("d","M "+t.positionScreen.x+" "+t.positionScreen.y+" L "+n.positionScreen.x+" "+n.positionScreen.y+" L "+o.positionScreen.x+","+o.positionScreen.y+"z"),a instanceof THREE.MeshBasicMaterial?C.__styleString=a.color.__styleString:a instanceof THREE.MeshLambertMaterial?x?(_.r=F.r,_.g=F.g,_.b=F.b,e(l,s,_),C.r=a.color.r*_.r,C.g=a.color.g*_.g,C.b=a.color.b*_.b,C.updateStyleString()):C.__styleString=a.color.__styleString:a instanceof THREE.MeshDepthMaterial?(d=1-a.__2near/(a.__farPlusNear-s.z*a.__farMinusNear),C.setRGB(d,d,d)):a instanceof THREE.MeshNormalMaterial&&C.setRGB(r(s.normalWorld.x),r(s.normalWorld.y),r(s.normalWorld.z)),a.wireframe?p.setAttribute("style","fill: none; stroke: "+C.__styleString+"; stroke-width: "+a.wireframe_linewidth+"; stroke-opacity: "+a.opacity+"; stroke-linecap: "+a.wireframe_linecap+"; stroke-linejoin: "+a.wireframe_linejoin):p.setAttribute("style","fill: "+C.__styleString+"; fill-opacity: "+a.opacity),A.appendChild(p)}function n(t,n,o,s,a,l,u){p=i(g++),p.setAttribute("d","M "+t.positionScreen.x+" "+t.positionScreen.y+" L "+n.positionScreen.x+" "+n.positionScreen.y+" L "+o.positionScreen.x+","+o.positionScreen.y+" L "+s.positionScreen.x+","+s.positionScreen.y+"z"),l instanceof THREE.MeshBasicMaterial?C.__styleString=l.color.__styleString:l instanceof THREE.MeshLambertMaterial?x?(_.r=F.r,_.g=F.g,_.b=F.b,e(u,a,_),C.r=l.color.r*_.r,C.g=l.color.g*_.g,C.b=l.color.b*_.b,C.updateStyleString()):C.__styleString=l.color.__styleString:l instanceof THREE.MeshDepthMaterial?(d=1-l.__2near/(l.__farPlusNear-a.z*l.__farMinusNear),C.setRGB(d,d,d)):l instanceof THREE.MeshNormalMaterial&&C.setRGB(r(a.normalWorld.x),r(a.normalWorld.y),r(a.normalWorld.z)),l.wireframe?p.setAttribute("style","fill: none; stroke: "+C.__styleString+"; stroke-width: "+l.wireframe_linewidth+"; stroke-opacity: "+l.opacity+"; stroke-linecap: "+l.wireframe_linecap+"; stroke-linejoin: "+l.wireframe_linejoin):p.setAttribute("style","fill: "+C.__styleString+"; fill-opacity: "+l.opacity),A.appendChild(p)}function i(e){return null==R[e]?(R[e]=document.createElementNS("http://www.w3.org/2000/svg","path"),0==M&&R[e].setAttribute("shape-rendering","crispEdges"),R[e]):R[e]}function r(e){return 0>e?Math.min(.5*(1+e),.5):.5+Math.min(.5*e,.5)}var o,s,a,l,u,c,h,f,d,p,g,m,v,y=null,E=new THREE.Projector,A=document.createElementNS("http://www.w3.org/2000/svg","svg"),b=new THREE.Rectangle,w=new THREE.Rectangle,x=!1,C=new THREE.Color(16777215),_=new THREE.Color(16777215),F=new THREE.Color(0),S=new THREE.Color(0),T=new THREE.Color(0),D=new THREE.Vector3,R=[],k=[],B=[],M=1;this.domElement=A,this.sortElements=this.sortObjects=this.autoClear=!0,this.setQuality=function(e){switch(e){case"high":M=1;
break;case"low":M=0}},this.setSize=function(e,t){o=e,s=t,a=o/2,l=s/2,A.setAttribute("viewBox",-a+" "+-l+" "+o+" "+s),A.setAttribute("width",o),A.setAttribute("height",s),b.set(-a,-l,a,l)},this.clear=function(){for(;A.childNodes.length>0;)A.removeChild(A.childNodes[0])},this.render=function(e,i){var r,o,s,d,D,R,L,P;if(this.autoClear&&this.clear(),y=E.projectScene(e,i,this.sortElements),v=m=g=0,x=e.lights.length>0)for(L=e.lights,F.setRGB(0,0,0),S.setRGB(0,0,0),T.setRGB(0,0,0),r=0,o=L.length;o>r;r++)s=L[r],d=s.color,s instanceof THREE.AmbientLight?(F.r+=d.r,F.g+=d.g,F.b+=d.b):s instanceof THREE.DirectionalLight?(S.r+=d.r,S.g+=d.g,S.b+=d.b):s instanceof THREE.PointLight&&(T.r+=d.r,T.g+=d.g,T.b+=d.b);for(r=0,o=y.length;o>r;r++)if(L=y[r],w.empty(),L instanceof THREE.RenderableParticle){for(u=L,u.x*=a,u.y*=-l,s=0,d=L.materials.length;d>s;s++)if(P=L.materials[s]){D=u,R=L,P=P;var I=m++;null==k[I]&&(k[I]=document.createElementNS("http://www.w3.org/2000/svg","circle"),0==M&&k[I].setAttribute("shape-rendering","crispEdges")),p=k[I],p.setAttribute("cx",D.x),p.setAttribute("cy",D.y),p.setAttribute("r",R.scale.x*a),P instanceof THREE.ParticleCircleMaterial&&(x?(_.r=F.r+S.r+T.r,_.g=F.g+S.g+T.g,_.b=F.b+S.b+T.b,C.r=P.color.r*_.r,C.g=P.color.g*_.g,C.b=P.color.b*_.b,C.updateStyleString()):C=P.color,p.setAttribute("style","fill: "+C.__styleString)),A.appendChild(p)}}else if(L instanceof THREE.RenderableLine){if(u=L.v1,c=L.v2,u.positionScreen.x*=a,u.positionScreen.y*=-l,c.positionScreen.x*=a,c.positionScreen.y*=-l,w.addPoint(u.positionScreen.x,u.positionScreen.y),w.addPoint(c.positionScreen.x,c.positionScreen.y),b.instersects(w))for(s=0,d=L.materials.length;d>s;)(P=L.materials[s++])&&(D=u,R=c,P=P,I=v++,null==B[I]&&(B[I]=document.createElementNS("http://www.w3.org/2000/svg","line"),0==M&&B[I].setAttribute("shape-rendering","crispEdges")),p=B[I],p.setAttribute("x1",D.positionScreen.x),p.setAttribute("y1",D.positionScreen.y),p.setAttribute("x2",R.positionScreen.x),p.setAttribute("y2",R.positionScreen.y),P instanceof THREE.LineBasicMaterial&&(C.__styleString=P.color.__styleString,p.setAttribute("style","fill: none; stroke: "+C.__styleString+"; stroke-width: "+P.linewidth+"; stroke-opacity: "+P.opacity+"; stroke-linecap: "+P.linecap+"; stroke-linejoin: "+P.linejoin),A.appendChild(p)))}else if(L instanceof THREE.RenderableFace3){if(u=L.v1,c=L.v2,h=L.v3,u.positionScreen.x*=a,u.positionScreen.y*=-l,c.positionScreen.x*=a,c.positionScreen.y*=-l,h.positionScreen.x*=a,h.positionScreen.y*=-l,w.addPoint(u.positionScreen.x,u.positionScreen.y),w.addPoint(c.positionScreen.x,c.positionScreen.y),w.addPoint(h.positionScreen.x,h.positionScreen.y),b.instersects(w))for(s=0,d=L.meshMaterials.length;d>s;)if(P=L.meshMaterials[s++],P instanceof THREE.MeshFaceMaterial)for(D=0,R=L.faceMaterials.length;R>D;)(P=L.faceMaterials[D++])&&t(u,c,h,L,P,e);else P&&t(u,c,h,L,P,e)}else if(L instanceof THREE.RenderableFace4&&(u=L.v1,c=L.v2,h=L.v3,f=L.v4,u.positionScreen.x*=a,u.positionScreen.y*=-l,c.positionScreen.x*=a,c.positionScreen.y*=-l,h.positionScreen.x*=a,h.positionScreen.y*=-l,f.positionScreen.x*=a,f.positionScreen.y*=-l,w.addPoint(u.positionScreen.x,u.positionScreen.y),w.addPoint(c.positionScreen.x,c.positionScreen.y),w.addPoint(h.positionScreen.x,h.positionScreen.y),w.addPoint(f.positionScreen.x,f.positionScreen.y),b.instersects(w)))for(s=0,d=L.meshMaterials.length;d>s;)if(P=L.meshMaterials[s++],P instanceof THREE.MeshFaceMaterial)for(D=0,R=L.faceMaterials.length;R>D;)(P=L.faceMaterials[D++])&&n(u,c,h,f,L,P,e);else P&&n(u,c,h,f,L,P,e)}},THREE.WebGLRenderer=function(e){function t(e,t){e.fragment_shader=t.fragment_shader,e.vertex_shader=t.vertex_shader,e.uniforms=Uniforms.clone(t.uniforms)}function n(e,t){e.uniforms.color.value.setRGB(e.color.r*e.opacity,e.color.g*e.opacity,e.color.b*e.opacity),e.uniforms.opacity.value=e.opacity,e.uniforms.map.texture=e.map,e.uniforms.env_map.texture=e.env_map,e.uniforms.reflectivity.value=e.reflectivity,e.uniforms.refraction_ratio.value=e.refraction_ratio,e.uniforms.combine.value=e.combine,e.uniforms.useRefract.value=e.env_map&&e.env_map.mapping instanceof THREE.CubeRefractionMapping,t&&(e.uniforms.fogColor.value.setHex(t.color.hex),t instanceof THREE.Fog?(e.uniforms.fogNear.value=t.near,e.uniforms.fogFar.value=t.far):t instanceof THREE.FogExp2&&(e.uniforms.fogDensity.value=t.density))}function i(e,t){e.uniforms.color.value.setRGB(e.color.r*e.opacity,e.color.g*e.opacity,e.color.b*e.opacity),e.uniforms.opacity.value=e.opacity,t&&(e.uniforms.fogColor.value.setHex(t.color.hex),t instanceof THREE.Fog?(e.uniforms.fogNear.value=t.near,e.uniforms.fogFar.value=t.far):t instanceof THREE.FogExp2&&(e.uniforms.fogDensity.value=t.density))}function r(e,t){var n;return"fragment"==e?n=s.createShader(s.FRAGMENT_SHADER):"vertex"==e&&(n=s.createShader(s.VERTEX_SHADER)),s.shaderSource(n,t),s.compileShader(n),s.getShaderParameter(n,s.COMPILE_STATUS)?n:(alert(s.getShaderInfoLog(n)),null)}function o(e){switch(e){case THREE.RepeatWrapping:return s.REPEAT;case THREE.ClampToEdgeWrapping:return s.CLAMP_TO_EDGE;case THREE.MirroredRepeatWrapping:return s.MIRRORED_REPEAT;case THREE.NearestFilter:return s.NEAREST;case THREE.NearestMipMapNearestFilter:return s.NEAREST_MIPMAP_NEAREST;case THREE.NearestMipMapLinearFilter:return s.NEAREST_MIPMAP_LINEAR;case THREE.LinearFilter:return s.LINEAR;case THREE.LinearMipMapNearestFilter:return s.LINEAR_MIPMAP_NEAREST;case THREE.LinearMipMapLinearFilter:return s.LINEAR_MIPMAP_LINEAR;case THREE.ByteType:return s.BYTE;case THREE.UnsignedByteType:return s.UNSIGNED_BYTE;case THREE.ShortType:return s.SHORT;case THREE.UnsignedShortType:return s.UNSIGNED_SHORT;case THREE.IntType:return s.INT;case THREE.UnsignedShortType:return s.UNSIGNED_INT;case THREE.FloatType:return s.FLOAT;case THREE.AlphaFormat:return s.ALPHA;case THREE.RGBFormat:return s.RGB;case THREE.RGBAFormat:return s.RGBA;case THREE.LuminanceFormat:return s.LUMINANCE;case THREE.LuminanceAlphaFormat:return s.LUMINANCE_ALPHA}return 0}var s,a,l=document.createElement("canvas"),u=null,c=null,h=new THREE.Matrix4,f=new Float32Array(16),d=new Float32Array(16),p=new Float32Array(16),g=new Float32Array(9),m=new Float32Array(16),v=!0,y=new THREE.Color(0),E=0;e&&(void 0!==e.antialias&&(v=e.antialias),void 0!==e.clearColor&&y.setHex(e.clearColor),void 0!==e.clearAlpha&&(E=e.clearAlpha)),this.domElement=l,this.autoClear=!0,function(e,t,n){try{s=l.getContext("experimental-webgl",{antialias:e})}catch(i){}if(!s)throw alert("WebGL not supported"),"cannot create webgl context";s.clearColor(0,0,0,1),s.clearDepth(1),s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL),s.frontFace(s.CCW),s.cullFace(s.BACK),s.enable(s.CULL_FACE),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.clearColor(t.r,t.g,t.b,n)}(v,y,E),this.context=s,this.lights={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[]}},this.setSize=function(e,t){l.width=e,l.height=t,s.viewport(0,0,l.width,l.height)},this.setClearColor=function(e,t){var n=new THREE.Color(e);s.clearColor(n.r,n.g,n.b,t)},this.clear=function(){s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)},this.setupLights=function(e,t){var n,i,r,o,s,a,l=0,u=0,c=0,h=this.lights,f=h.directional.colors,d=h.directional.positions,p=h.point.colors,g=h.point.positions,m=0,v=0;for(n=0,i=t.length;i>n;n++)r=t[n],o=r.color,s=r.position,a=r.intensity,r instanceof THREE.AmbientLight?(l+=o.r,u+=o.g,c+=o.b):r instanceof THREE.DirectionalLight?(f[3*m]=o.r*a,f[3*m+1]=o.g*a,f[3*m+2]=o.b*a,d[3*m]=s.x,d[3*m+1]=s.y,d[3*m+2]=s.z,m+=1):r instanceof THREE.PointLight&&(p[3*v]=o.r*a,p[3*v+1]=o.g*a,p[3*v+2]=o.b*a,g[3*v]=s.x,g[3*v+1]=s.y,g[3*v+2]=s.z,v+=1);h.point.length=v,h.directional.length=m,h.ambient[0]=l,h.ambient[1]=u,h.ambient[2]=c},this.createParticleBuffers=function(e){e.__webGLVertexBuffer=s.createBuffer(),e.__webGLFaceBuffer=s.createBuffer()},this.createLineBuffers=function(e){e.__webGLVertexBuffer=s.createBuffer(),e.__webGLLineBuffer=s.createBuffer()},this.createMeshBuffers=function(e){e.__webGLVertexBuffer=s.createBuffer(),e.__webGLNormalBuffer=s.createBuffer(),e.__webGLTangentBuffer=s.createBuffer(),e.__webGLUVBuffer=s.createBuffer(),e.__webGLFaceBuffer=s.createBuffer(),e.__webGLLineBuffer=s.createBuffer()},this.initLineBuffers=function(e){var t=e.vertices.length;e.__vertexArray=new Float32Array(3*t),e.__lineArray=new Uint16Array(t),e.__webGLLineCount=t},this.initMeshBuffers=function(e,t){var n,i,r=0,o=0,s=0,a=t.geometry.faces,l=e.faces;for(n=0,i=l.length;i>n;n++)fi=l[n],face=a[fi],face instanceof THREE.Face3?(r+=3,o+=1,s+=3):face instanceof THREE.Face4&&(r+=4,o+=2,s+=4);for(e.__vertexArray=new Float32Array(3*r),e.__normalArray=new Float32Array(3*r),e.__tangentArray=new Float32Array(4*r),e.__uvArray=new Float32Array(2*r),e.__faceArray=new Uint16Array(3*o),e.__lineArray=new Uint16Array(2*s),r=!1,n=0,i=t.materials.length;i>n;n++){if(a=t.materials[n],a instanceof THREE.MeshFaceMaterial){for(a=0,l=e.materials.length;l>a;a++)if(e.materials[a]&&void 0!=e.materials[a].shading&&e.materials[a].shading==THREE.SmoothShading){r=!0;break}}else if(a&&void 0!=a.shading&&a.shading==THREE.SmoothShading){r=!0;break}if(r)break}e.__needsSmoothNormals=r,e.__webGLFaceCount=3*o,e.__webGLLineCount=2*s},this.setMeshBuffers=function(e,t,n,i,r,o,a,l){var u,c,h,f,d,p,g,m,v,y=0,E=0,A=0,b=0,w=0,x=0,C=0,_=e.__vertexArray,F=e.__uvArray,S=e.__normalArray,T=e.__tangentArray,D=e.__faceArray,R=e.__lineArray,k=e.__needsSmoothNormals,B=t.geometry,M=B.vertices,L=e.faces,P=B.faces,I=B.uvs;for(t=0,u=L.length;u>t;t++)if(c=L[t],h=P[c],c=I[c],f=h.vertexNormals,d=h.normal,h instanceof THREE.Face3){if(i&&(p=M[h.a].position,g=M[h.b].position,m=M[h.c].position,_[E]=p.x,_[E+1]=p.y,_[E+2]=p.z,_[E+3]=g.x,_[E+4]=g.y,_[E+5]=g.z,_[E+6]=m.x,_[E+7]=m.y,_[E+8]=m.z,E+=9),l&&B.hasTangents&&(p=M[h.a].tangent,g=M[h.b].tangent,m=M[h.c].tangent,T[x]=p.x,T[x+1]=p.y,T[x+2]=p.z,T[x+3]=p.w,T[x+4]=g.x,T[x+5]=g.y,T[x+6]=g.z,T[x+7]=g.w,T[x+8]=m.x,T[x+9]=m.y,T[x+10]=m.z,T[x+11]=m.w,x+=12),a)if(3==f.length&&k)for(h=0;3>h;h++)d=f[h],S[w]=d.x,S[w+1]=d.y,S[w+2]=d.z,w+=3;else for(h=0;3>h;h++)S[w]=d.x,S[w+1]=d.y,S[w+2]=d.z,w+=3;if(o&&c)for(h=0;3>h;h++)f=c[h],F[A]=f.u,F[A+1]=f.v,A+=2;r&&(D[b]=y,D[b+1]=y+1,D[b+2]=y+2,b+=3,R[C]=y,R[C+1]=y+1,R[C+2]=y,R[C+3]=y+2,R[C+4]=y+1,R[C+5]=y+2,C+=6,y+=3)}else if(h instanceof THREE.Face4){if(i&&(p=M[h.a].position,g=M[h.b].position,m=M[h.c].position,v=M[h.d].position,_[E]=p.x,_[E+1]=p.y,_[E+2]=p.z,_[E+3]=g.x,_[E+4]=g.y,_[E+5]=g.z,_[E+6]=m.x,_[E+7]=m.y,_[E+8]=m.z,_[E+9]=v.x,_[E+10]=v.y,_[E+11]=v.z,E+=12),l&&B.hasTangents&&(p=M[h.a].tangent,g=M[h.b].tangent,m=M[h.c].tangent,h=M[h.d].tangent,T[x]=p.x,T[x+1]=p.y,T[x+2]=p.z,T[x+3]=p.w,T[x+4]=g.x,T[x+5]=g.y,T[x+6]=g.z,T[x+7]=g.w,T[x+8]=m.x,T[x+9]=m.y,T[x+10]=m.z,T[x+11]=m.w,T[x+12]=h.x,T[x+13]=h.y,T[x+14]=h.z,T[x+15]=h.w,x+=16),a)if(4==f.length&&k)for(h=0;4>h;h++)d=f[h],S[w]=d.x,S[w+1]=d.y,S[w+2]=d.z,w+=3;else for(h=0;4>h;h++)S[w]=d.x,S[w+1]=d.y,S[w+2]=d.z,w+=3;if(o&&c)for(h=0;4>h;h++)f=c[h],F[A]=f.u,F[A+1]=f.v,A+=2;r&&(D[b]=y,D[b+1]=y+1,D[b+2]=y+2,D[b+3]=y,D[b+4]=y+2,D[b+5]=y+3,b+=6,R[C]=y,R[C+1]=y+1,R[C+2]=y,R[C+3]=y+3,R[C+4]=y+1,R[C+5]=y+2,R[C+6]=y+2,R[C+7]=y+3,C+=8,y+=4)}i&&(s.bindBuffer(s.ARRAY_BUFFER,e.__webGLVertexBuffer),s.bufferData(s.ARRAY_BUFFER,_,n)),a&&(s.bindBuffer(s.ARRAY_BUFFER,e.__webGLNormalBuffer),s.bufferData(s.ARRAY_BUFFER,S,n)),l&&B.hasTangents&&(s.bindBuffer(s.ARRAY_BUFFER,e.__webGLTangentBuffer),s.bufferData(s.ARRAY_BUFFER,T,n)),o&&A>0&&(s.bindBuffer(s.ARRAY_BUFFER,e.__webGLUVBuffer),s.bufferData(s.ARRAY_BUFFER,F,n)),r&&(s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,e.__webGLFaceBuffer),s.bufferData(s.ELEMENT_ARRAY_BUFFER,D,n),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,e.__webGLLineBuffer),s.bufferData(s.ELEMENT_ARRAY_BUFFER,R,n))},this.setLineBuffers=function(e,t,n,i){var r,o,a=e.vertices,l=a.length,u=e.__vertexArray,c=e.__lineArray;if(n)for(n=0;l>n;n++)r=a[n].position,o=3*n,u[o]=r.x,u[o+1]=r.y,u[o+2]=r.z;if(i)for(n=0;l>n;n++)c[n]=n;s.bindBuffer(s.ARRAY_BUFFER,e.__webGLVertexBuffer),s.bufferData(s.ARRAY_BUFFER,u,t),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,e.__webGLLineBuffer),s.bufferData(s.ELEMENT_ARRAY_BUFFER,c,t)},this.setParticleBuffers=function(){},this.renderBuffer=function(e,a,l,c,h,f){var d,p,g,m;if(!c.program){c instanceof THREE.MeshDepthMaterial?(t(c,THREE.ShaderLib.depth),c.uniforms.mNear.value=e.near,c.uniforms.mFar.value=e.far):c instanceof THREE.MeshNormalMaterial?t(c,THREE.ShaderLib.normal):c instanceof THREE.MeshBasicMaterial?(t(c,THREE.ShaderLib.basic),n(c,l)):c instanceof THREE.MeshLambertMaterial?(t(c,THREE.ShaderLib.lambert),n(c,l)):c instanceof THREE.MeshPhongMaterial?(t(c,THREE.ShaderLib.phong),n(c,l)):c instanceof THREE.LineBasicMaterial&&(t(c,THREE.ShaderLib.basic),i(c,l));var v,y,E;for(v=m=p=0,y=a.length;y>v;v++)E=a[v],E instanceof THREE.DirectionalLight&&m++,E instanceof THREE.PointLight&&p++;4>=p+m?(v=m,p=p):(v=Math.ceil(4*m/(p+m)),p=4-v),p={directional:v,point:p},m={fog:l,map:c.map,env_map:c.env_map,maxDirLights:p.directional,maxPointLights:p.point},p=c.fragment_shader,v=c.vertex_shader,y=s.createProgram(),E=["#ifdef GL_ES\nprecision highp float;\n#endif","#define MAX_DIR_LIGHTS "+m.maxDirLights,"#define MAX_POINT_LIGHTS "+m.maxPointLights,m.fog?"#define USE_FOG":"",m.fog instanceof THREE.FogExp2?"#define FOG_EXP2":"",m.map?"#define USE_MAP":"",m.env_map?"#define USE_ENVMAP":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n"),m=[s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0?"#define VERTEX_TEXTURES":"","#define MAX_DIR_LIGHTS "+m.maxDirLights,"#define MAX_POINT_LIGHTS "+m.maxPointLights,m.map?"#define USE_MAP":"",m.env_map?"#define USE_ENVMAP":"","uniform mat4 objectMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n"].join("\n"),s.attachShader(y,r("fragment",E+p)),s.attachShader(y,r("vertex",m+v)),s.linkProgram(y),s.getProgramParameter(y,s.LINK_STATUS)||alert("Could not initialise shaders\nVALIDATE_STATUS: "+s.getProgramParameter(y,s.VALIDATE_STATUS)+", gl error ["+s.getError()+"]"),y.uniforms={},y.attributes={},c.program=y,p=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","objectMatrix","cameraPosition"];for(d in c.uniforms)p.push(d);for(d=c.program,v=0,y=p.length;y>v;v++)E=p[v],d.uniforms[E]=s.getUniformLocation(d,E);for(d=c.program,p=["position","normal","uv","tangent"],v=0,y=p.length;y>v;v++)E=p[v],d.attributes[E]=s.getAttribLocation(d,E)}d=c.program,d!=u&&(s.useProgram(d),u=d),this.loadCamera(d,e),this.loadMatrices(d),(c instanceof THREE.MeshPhongMaterial||c instanceof THREE.MeshLambertMaterial)&&(this.setupLights(d,a),e=this.lights,c.uniforms.enableLighting.value=e.directional.length+e.point.length,c.uniforms.ambientLightColor.value=e.ambient,c.uniforms.directionalLightColor.value=e.directional.colors,c.uniforms.directionalLightDirection.value=e.directional.positions,c.uniforms.pointLightColor.value=e.point.colors,c.uniforms.pointLightPosition.value=e.point.positions),(c instanceof THREE.MeshBasicMaterial||c instanceof THREE.MeshLambertMaterial||c instanceof THREE.MeshPhongMaterial)&&n(c,l),c instanceof THREE.LineBasicMaterial&&i(c,l),c instanceof THREE.MeshPhongMaterial&&(c.uniforms.ambient.value.setRGB(c.ambient.r,c.ambient.g,c.ambient.b),c.uniforms.specular.value.setRGB(c.specular.r,c.specular.g,c.specular.b),c.uniforms.shininess.value=c.shininess),l=c.uniforms;for(g in l)if(v=d.uniforms[g])if(a=l[g],p=a.type,e=a.value,"i"==p)s.uniform1i(v,e);else if("f"==p)s.uniform1f(v,e);else if("fv1"==p)s.uniform1fv(v,e);else if("fv"==p)s.uniform3fv(v,e);else if("v2"==p)s.uniform2f(v,e.x,e.y);else if("v3"==p)s.uniform3f(v,e.x,e.y,e.z);else if("c"==p)s.uniform3f(v,e.r,e.g,e.b);else if("t"==p&&(s.uniform1i(v,e),a=a.texture))if(a.image instanceof Array&&6==a.image.length){if(a=a,e=e,6==a.image.length){if(!a.image.__webGLTextureCube&&!a.image.__cubeMapInitialized&&6==a.image.loadCount){for(a.image.__webGLTextureCube=s.createTexture(),s.bindTexture(s.TEXTURE_CUBE_MAP,a.image.__webGLTextureCube),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_MIN_FILTER,s.LINEAR_MIPMAP_LINEAR),p=0;6>p;++p)s.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,a.image[p]);s.generateMipmap(s.TEXTURE_CUBE_MAP),s.bindTexture(s.TEXTURE_CUBE_MAP,null),a.image.__cubeMapInitialized=!0}s.activeTexture(s.TEXTURE0+e),s.bindTexture(s.TEXTURE_CUBE_MAP,a.image.__webGLTextureCube)}}else a=a,e=e,!a.__webGLTexture&&a.image.loaded&&(a.__webGLTexture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,a.__webGLTexture),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,a.image),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,o(a.wrap_s)),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,o(a.wrap_t)),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,o(a.mag_filter)),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,o(a.min_filter)),s.generateMipmap(s.TEXTURE_2D),s.bindTexture(s.TEXTURE_2D,null)),s.activeTexture(s.TEXTURE0+e),s.bindTexture(s.TEXTURE_2D,a.__webGLTexture);g=d.attributes,s.bindBuffer(s.ARRAY_BUFFER,h.__webGLVertexBuffer),s.vertexAttribPointer(g.position,3,s.FLOAT,!1,0,0),s.enableVertexAttribArray(g.position),g.normal>=0&&(s.bindBuffer(s.ARRAY_BUFFER,h.__webGLNormalBuffer),s.vertexAttribPointer(g.normal,3,s.FLOAT,!1,0,0),s.enableVertexAttribArray(g.normal)),g.tangent>=0&&(s.bindBuffer(s.ARRAY_BUFFER,h.__webGLTangentBuffer),s.vertexAttribPointer(g.tangent,4,s.FLOAT,!1,0,0),s.enableVertexAttribArray(g.tangent)),g.uv>=0&&(h.__webGLUVBuffer?(s.bindBuffer(s.ARRAY_BUFFER,h.__webGLUVBuffer),s.vertexAttribPointer(g.uv,2,s.FLOAT,!1,0,0),s.enableVertexAttribArray(g.uv)):s.disableVertexAttribArray(g.uv)),c.wireframe||c instanceof THREE.LineBasicMaterial?(g=void 0!==c.wireframe_linewidth?c.wireframe_linewidth:void 0!==c.linewidth?c.linewidth:1,c=c instanceof THREE.LineBasicMaterial&&f.type==THREE.LineStrip?s.LINE_STRIP:s.LINES,s.lineWidth(g),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,h.__webGLLineBuffer),s.drawElements(c,h.__webGLLineCount,s.UNSIGNED_SHORT,0)):(s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,h.__webGLFaceBuffer),s.drawElements(s.TRIANGLES,h.__webGLFaceCount,s.UNSIGNED_SHORT,0))},this.renderPass=function(e,t,n,i,r,o,s){var a,l,u,c,h;for(u=0,c=i.materials.length;c>u;u++)if(a=i.materials[u],a instanceof THREE.MeshFaceMaterial)for(a=0,l=r.materials.length;l>a;a++)(h=r.materials[a])&&h.blending==o&&h.opacity<1==s&&(this.setBlending(h.blending),this.renderBuffer(e,t,n,h,r,i));else(h=a)&&h.blending==o&&h.opacity<1==s&&(this.setBlending(h.blending),this.renderBuffer(e,t,n,h,r,i))},this.render=function(e,t,n,i){var r,a,u,h=e.lights,d=e.fog;for(this.initWebGLObjects(e),i=void 0!==i?i:!0,n&&!n.__webGLFramebuffer&&(n.__webGLFramebuffer=s.createFramebuffer(),n.__webGLRenderbuffer=s.createRenderbuffer(),n.__webGLTexture=s.createTexture(),s.bindRenderbuffer(s.RENDERBUFFER,n.__webGLRenderbuffer),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_COMPONENT16,n.width,n.height),s.bindTexture(s.TEXTURE_2D,n.__webGLTexture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,o(n.wrap_s)),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,o(n.wrap_t)),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,o(n.mag_filter)),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,o(n.min_filter)),s.texImage2D(s.TEXTURE_2D,0,o(n.format),n.width,n.height,0,o(n.format),o(n.type),null),s.bindFramebuffer(s.FRAMEBUFFER,n.__webGLFramebuffer),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,n.__webGLTexture,0),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,n.__webGLRenderbuffer),s.bindTexture(s.TEXTURE_2D,null),s.bindRenderbuffer(s.RENDERBUFFER,null),s.bindFramebuffer(s.FRAMEBUFFER,null)),n?(r=n.__webGLFramebuffer,u=n.width,a=n.height):(r=null,u=l.width,a=l.height),r!=c&&(s.bindFramebuffer(s.FRAMEBUFFER,r),s.viewport(0,0,u,a),i&&s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),c=r),this.autoClear&&this.clear(),t.autoUpdateMatrix&&t.updateMatrix(),f.set(t.matrix.flatten()),p.set(t.projectionMatrix.flatten()),i=0,r=e.__webGLObjects.length;r>i;i++)a=e.__webGLObjects[i],u=a.object,a=a.buffer,u.visible&&(this.setupMatrices(u,t),this.renderPass(t,h,d,u,a,THREE.NormalBlending,!1));for(i=0,r=e.__webGLObjects.length;r>i;i++)a=e.__webGLObjects[i],u=a.object,a=a.buffer,u.visible&&(this.setupMatrices(u,t),u.doubleSided?s.disable(s.CULL_FACE):(s.enable(s.CULL_FACE),u.flipSided?s.frontFace(s.CW):s.frontFace(s.CCW)),this.renderPass(t,h,d,u,a,THREE.AdditiveBlending,!1),this.renderPass(t,h,d,u,a,THREE.SubtractiveBlending,!1),this.renderPass(t,h,d,u,a,THREE.AdditiveBlending,!0),this.renderPass(t,h,d,u,a,THREE.SubtractiveBlending,!0),this.renderPass(t,h,d,u,a,THREE.NormalBlending,!0));n&&n.min_filter!==THREE.NearestFilter&&n.min_filter!==THREE.LinearFilter&&(s.bindTexture(s.TEXTURE_2D,n.__webGLTexture),s.generateMipmap(s.TEXTURE_2D),s.bindTexture(s.TEXTURE_2D,null))},this.initWebGLObjects=function(e){function t(t,n,i,r){void 0==t[n]&&(e.__webGLObjects.push({buffer:i,object:r}),t[n]=1)}var n,i,r,o,a,l,u;for(e.__webGLObjects||(e.__webGLObjects=[],e.__webGLObjectsMap={}),n=0,i=e.objects.length;i>n;n++)if(r=e.objects[n],a=r.geometry,void 0==e.__webGLObjectsMap[r.id]&&(e.__webGLObjectsMap[r.id]={}),u=e.__webGLObjectsMap[r.id],r instanceof THREE.Mesh){for(o in a.geometryChunks)l=a.geometryChunks[o],l.__webGLVertexBuffer||(this.createMeshBuffers(l),this.initMeshBuffers(l,r),a.__dirtyVertices=!0,a.__dirtyElements=!0,a.__dirtyUvs=!0,a.__dirtyNormals=!0,a.__dirtyTangents=!0),(a.__dirtyVertices||a.__dirtyElements||a.__dirtyUvs)&&this.setMeshBuffers(l,r,s.DYNAMIC_DRAW,a.__dirtyVertices,a.__dirtyElements,a.__dirtyUvs,a.__dirtyNormals,a.__dirtyTangents),t(u,o,l,r);a.__dirtyVertices=!1,a.__dirtyElements=!1,a.__dirtyUvs=!1,a.__dirtyNormals=!1,a.__dirtyTangents=!1}else r instanceof THREE.Line?(a.__webGLVertexBuffer||(this.createLineBuffers(a),this.initLineBuffers(a),a.__dirtyVertices=!0,a.__dirtyElements=!0),a.__dirtyVertices&&this.setLineBuffers(a,s.DYNAMIC_DRAW,a.__dirtyVertices,a.__dirtyElements),t(u,0,a,r),a.__dirtyVertices=!1,a.__dirtyElements=!1):r instanceof THREE.ParticleSystem&&(a.__webGLVertexBuffer||this.createParticleBuffers(a),t(u,0,a,r))},this.removeObject=function(e,t){var n,i;for(n=e.__webGLObjects.length-1;n>=0;n--)i=e.__webGLObjects[n].object,t==i&&e.__webGLObjects.splice(n,1)},this.setupMatrices=function(e,t){e.autoUpdateMatrix&&e.updateMatrix(),h.multiply(t.matrix,e.matrix),d.set(h.flatten()),a=THREE.Matrix4.makeInvert3x3(h).transpose(),g.set(a.m),m.set(e.matrix.flatten())},this.loadMatrices=function(e){s.uniformMatrix4fv(e.uniforms.viewMatrix,!1,f),s.uniformMatrix4fv(e.uniforms.modelViewMatrix,!1,d),s.uniformMatrix4fv(e.uniforms.projectionMatrix,!1,p),s.uniformMatrix3fv(e.uniforms.normalMatrix,!1,g),s.uniformMatrix4fv(e.uniforms.objectMatrix,!1,m)},this.loadCamera=function(e,t){s.uniform3f(e.uniforms.cameraPosition,t.position.x,t.position.y,t.position.z)},this.setBlending=function(e){switch(e){case THREE.AdditiveBlending:s.blendEquation(s.FUNC_ADD),s.blendFunc(s.ONE,s.ONE);break;case THREE.SubtractiveBlending:s.blendFunc(s.DST_COLOR,s.ZERO);break;default:s.blendEquation(s.FUNC_ADD),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA)}},this.setFaceCulling=function(e,t){e?(t&&"ccw"!=t?s.frontFace(s.CW):s.frontFace(s.CCW),"back"==e?s.cullFace(s.BACK):"front"==e?s.cullFace(s.FRONT):s.cullFace(s.FRONT_AND_BACK),s.enable(s.CULL_FACE)):s.disable(s.CULL_FACE)},this.supportsVertexTextures=function(){return s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0}},THREE.Snippets={fog_pars_fragment:"#ifdef USE_FOG\nuniform vec3 fogColor;\n#ifdef FOG_EXP2\nuniform float fogDensity;\n#else\nuniform float fogNear;\nuniform float fogFar;\n#endif\n#endif",fog_fragment:"#ifdef USE_FOG\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n#ifdef FOG_EXP2\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n#else\nfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n#endif\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, 1.0 ), fogFactor );\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\nvarying vec3 vReflect;\nuniform float reflectivity;\nuniform samplerCube env_map;\nuniform int combine;\n#endif",envmap_fragment:"#ifdef USE_ENVMAP\ncubeColor = textureCube( env_map, vec3( -vReflect.x, vReflect.yz ) );\nif ( combine == 1 ) {\ngl_FragColor = mix( gl_FragColor, cubeColor, reflectivity );\n} else {\ngl_FragColor = gl_FragColor * cubeColor;\n}\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\nvarying vec3 vReflect;\nuniform float refraction_ratio;\nuniform bool useRefract;\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\nvec4 mPosition = objectMatrix * vec4( position, 1.0 );\nvec3 nWorld = mat3( objectMatrix[0].xyz, objectMatrix[1].xyz, objectMatrix[2].xyz ) * normal;\nif ( useRefract ) {\nvReflect = refract( normalize( mPosition.xyz - cameraPosition ), normalize( nWorld.xyz ), refraction_ratio );\n} else {\nvReflect = reflect( normalize( mPosition.xyz - cameraPosition ), normalize( nWorld.xyz ) );\n}\n#endif",map_pars_fragment:"#ifdef USE_MAP\nvarying vec2 vUv;\nuniform sampler2D map;\n#endif",map_pars_vertex:"#ifdef USE_MAP\nvarying vec2 vUv;\n#endif",map_fragment:"#ifdef USE_MAP\nmapColor = texture2D( map, vUv );\n#endif",map_vertex:"#ifdef USE_MAP\nvUv = uv;\n#endif",lights_pars_vertex:"uniform bool enableLighting;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n#ifdef PHONG\nvarying vec3 vPointLightVector[ MAX_POINT_LIGHTS ];\n#endif\n#endif",lights_vertex:"if ( !enableLighting ) {\nvLightWeighting = vec3( 1.0 );\n} else {\nvLightWeighting = ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nfor( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nfloat directionalLightWeighting = max( dot( transformedNormal, normalize( lDirection.xyz ) ), 0.0 );\nvLightWeighting += directionalLightColor[ i ] * directionalLightWeighting;\n}\n#endif\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 pointLightVector = normalize( lPosition.xyz - mvPosition.xyz );\nfloat pointLightWeighting = max( dot( transformedNormal, pointLightVector ), 0.0 );\nvLightWeighting += pointLightColor[ i ] * pointLightWeighting;\n#ifdef PHONG\nvPointLightVector[ i ] = pointLightVector;\n#endif\n}\n#endif\n}",lights_pars_fragment:"#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nvarying vec3 vPointLightVector[ MAX_POINT_LIGHTS ];\n#endif\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",lights_fragment:"vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\nvec4 mSpecular = vec4( specular, opacity );\n#if MAX_POINT_LIGHTS > 0\nvec4 pointDiffuse  = vec4( 0.0 );\nvec4 pointSpecular = vec4( 0.0 );\nfor( int i = 0; i < MAX_POINT_LIGHTS; i++ ) {\nvec3 pointVector = normalize( vPointLightVector[ i ] );\nvec3 pointHalfVector = normalize( vPointLightVector[ i ] + vViewPosition );\nfloat pointDotNormalHalf = dot( normal, pointHalfVector );\nfloat pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );\nfloat pointSpecularWeight = 0.0;\nif ( pointDotNormalHalf >= 0.0 )\npointSpecularWeight = pow( pointDotNormalHalf, shininess );\npointDiffuse  += mColor * pointDiffuseWeight;\npointSpecular += mSpecular * pointSpecularWeight;\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec4 dirDiffuse  = vec4( 0.0 );\nvec4 dirSpecular = vec4( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nvec3 dirHalfVector = normalize( lDirection.xyz + vViewPosition );\nfloat dirDotNormalHalf = dot( normal, dirHalfVector );\nfloat dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );\nfloat dirSpecularWeight = 0.0;\nif ( dirDotNormalHalf >= 0.0 )\ndirSpecularWeight = pow( dirDotNormalHalf, shininess );\ndirDiffuse  += mColor * dirDiffuseWeight;\ndirSpecular += mSpecular * dirSpecularWeight;\n}\n#endif\nvec4 totalLight = vec4( ambient, opacity );\n#if MAX_DIR_LIGHTS > 0\ntotalLight += dirDiffuse + dirSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalLight += pointDiffuse + pointSpecular;\n#endif"},THREE.UniformsLib={common:{color:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:0,texture:null},env_map:{type:"t",value:1,texture:null},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refraction_ratio:{type:"f",value:.98},combine:{type:"i",value:0},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{enableLighting:{type:"i",value:1},ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]}}},THREE.ShaderLib={depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3}},fragment_shader:"uniform float mNear;\nuniform float mFar;\nvoid main() {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat color = 1.0 - smoothstep( mNear, mFar, depth );\ngl_FragColor = vec4( vec3( color ), 1.0 );\n}",vertex_shader:"void main() {\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}"},normal:{uniforms:{},fragment_shader:"varying vec3 vNormal;\nvoid main() {\ngl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, 1.0 );\n}",vertex_shader:"varying vec3 vNormal;\nvoid main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\nvNormal = normalize( normalMatrix * normal );\ngl_Position = projectionMatrix * mvPosition;\n}"},basic:{uniforms:THREE.UniformsLib.common,fragment_shader:["uniform vec3 color;\nuniform float opacity;",THREE.Snippets.map_pars_fragment,THREE.Snippets.envmap_pars_fragment,THREE.Snippets.fog_pars_fragment,"void main() {\nvec4 mColor = vec4( color, opacity );\nvec4 mapColor = vec4( 1.0 );\nvec4 cubeColor = vec4( 1.0 );",THREE.Snippets.map_fragment,"gl_FragColor = mColor * mapColor;",THREE.Snippets.envmap_fragment,THREE.Snippets.fog_fragment,"}"].join("\n"),vertex_shader:[THREE.Snippets.map_pars_vertex,THREE.Snippets.envmap_pars_vertex,"void main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",THREE.Snippets.map_vertex,THREE.Snippets.envmap_vertex,"gl_Position = projectionMatrix * mvPosition;\n}"].join("\n")},lambert:{uniforms:Uniforms.merge([THREE.UniformsLib.common,THREE.UniformsLib.lights]),fragment_shader:["uniform vec3 color;\nuniform float opacity;\nvarying vec3 vLightWeighting;",THREE.Snippets.map_pars_fragment,THREE.Snippets.envmap_pars_fragment,THREE.Snippets.fog_pars_fragment,"void main() {\nvec4 mColor = vec4( color, opacity );\nvec4 mapColor = vec4( 1.0 );\nvec4 cubeColor = vec4( 1.0 );",THREE.Snippets.map_fragment,"gl_FragColor =  mColor * mapColor * vec4( vLightWeighting, 1.0 );",THREE.Snippets.envmap_fragment,THREE.Snippets.fog_fragment,"}"].join("\n"),vertex_shader:["varying vec3 vLightWeighting;",THREE.Snippets.map_pars_vertex,THREE.Snippets.envmap_pars_vertex,THREE.Snippets.lights_pars_vertex,"void main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",THREE.Snippets.map_vertex,THREE.Snippets.envmap_vertex,"vec3 transformedNormal = normalize( normalMatrix * normal );",THREE.Snippets.lights_vertex,"gl_Position = projectionMatrix * mvPosition;\n}"].join("\n")},phong:{uniforms:Uniforms.merge([THREE.UniformsLib.common,THREE.UniformsLib.lights,{ambient:{type:"c",value:new THREE.Color(328965)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30}}]),fragment_shader:["uniform vec3 color;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 specular;\nuniform float shininess;\nvarying vec3 vLightWeighting;",THREE.Snippets.map_pars_fragment,THREE.Snippets.envmap_pars_fragment,THREE.Snippets.fog_pars_fragment,THREE.Snippets.lights_pars_fragment,"void main() {\nvec4 mColor = vec4( color, opacity );\nvec4 mapColor = vec4( 1.0 );\nvec4 cubeColor = vec4( 1.0 );",THREE.Snippets.map_fragment,THREE.Snippets.lights_fragment,"gl_FragColor =  mapColor * totalLight * vec4( vLightWeighting, 1.0 );",THREE.Snippets.envmap_fragment,THREE.Snippets.fog_fragment,"}"].join("\n"),vertex_shader:["#define PHONG\nvarying vec3 vLightWeighting;\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.Snippets.map_pars_vertex,THREE.Snippets.envmap_pars_vertex,THREE.Snippets.lights_pars_vertex,"void main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",THREE.Snippets.map_vertex,THREE.Snippets.envmap_vertex,"#ifndef USE_ENVMAP\nvec4 mPosition = objectMatrix * vec4( position, 1.0 );\n#endif\nvViewPosition = cameraPosition - mPosition.xyz;\nvec3 transformedNormal = normalize( normalMatrix * normal );\nvNormal = transformedNormal;",THREE.Snippets.lights_vertex,"gl_Position = projectionMatrix * mvPosition;\n}"].join("\n")}},THREE.RenderableObject=function(){this.z=this.object=null
},THREE.RenderableFace3=function(){this.z=null,this.v1=new THREE.Vertex,this.v2=new THREE.Vertex,this.v3=new THREE.Vertex,this.centroidWorld=new THREE.Vector3,this.centroidScreen=new THREE.Vector3,this.normalWorld=new THREE.Vector3,this.vertexNormalsWorld=[],this.faceMaterials=this.meshMaterials=null,this.overdraw=!1,this.uvs=[null,null,null]},THREE.RenderableParticle=function(){this.rotation=this.z=this.y=this.x=null,this.scale=new THREE.Vector2,this.materials=null},THREE.RenderableLine=function(){this.z=null,this.v1=new THREE.Vertex,this.v2=new THREE.Vertex,this.materials=null};var Plane=function(e,t,n,i){THREE.Geometry.call(this);var r,o,s=e/2,a=t/2,l=n||1,u=i||1,c=l+1,h=u+1,f=e/l,d=t/u;for(o=0;h>o;o++)for(r=0;c>r;r++){var p=r*f-s,g=o*d-a;this.vertices.push(new THREE.Vertex(new THREE.Vector3(p,-g,0)))}for(o=0;u>o;o++)for(r=0;l>r;r++){var m=r+c*o,v=r+c*(o+1),y=r+1+c*(o+1),E=r+1+c*o;this.faces.push(new THREE.Face4(m,v,y,E)),this.uvs.push([new THREE.UV(r/l,o/u),new THREE.UV(r/l,(o+1)/u),new THREE.UV((r+1)/l,(o+1)/u),new THREE.UV((r+1)/l,o/u)])}this.computeCentroids(),this.computeFaceNormals(),this.sortFacesByMaterial()};Plane.prototype=new THREE.Geometry,Plane.prototype.constructor=Plane,Thingiview=function(e){function t(){u=new THREE.Mesh(new Plane(100,100,10,10),new THREE.MeshBasicMaterial({color:11513775,wireframe:!0})),s.addObject(u)}function n(){s&&H&&(material="wireframe"==L?new THREE.MeshBasicMaterial({color:P,wireframe:!0}):$?new THREE.MeshLambertMaterial({color:P,shading:THREE.FlatShading}):new THREE.MeshLambertMaterial({color:P,shading:THREE.FlatShading}),l&&(l.materials=[new THREE.MeshBasicMaterial({color:16777215,opacity:0})],s.removeObject(l)),l=new THREE.Mesh(H,material),s.addObject(l),"wireframe"!=L&&(l.overdraw=!0,l.doubleSided=!0),l.updateMatrix(),d=0,v=0,sceneLoop())}scope=this,this.containerId=e;var r=document.getElementById(e),o=null,s=null,a=null,l=null,u=null,c=null,h=null,f=null,d=0,p=0,g=0,m=0,v=0,y=0,E=0,A=0,b=!1,w=!1,x=window.innerWidth/2,C=window.innerHeight/2,_=null,F=null,S=null,T=null,D=null,R=null,k="diagonal",B=0,M="#606060",L="solid",P=16777215,I=!0,$=!1;if(document.defaultView&&document.defaultView.getComputedStyle)var N=parseFloat(document.defaultView.getComputedStyle(r,null).getPropertyValue("width")),O=parseFloat(document.defaultView.getComputedStyle(r,null).getPropertyValue("height"));else var N=parseFloat(r.currentStyle.width),O=parseFloat(r.currentStyle.height);var H;this.initScene=function(){r.style.position="relative",r.innerHTML="",o=new THREE.Camera(45,N/O,1,1e5),o.updateMatrix(),s=new THREE.Scene,c=new THREE.AmbientLight(2105376),s.addLight(c),h=new THREE.DirectionalLight(16777215,.75),h.position.x=1,h.position.y=1,h.position.z=2,h.position.normalize(),s.addLight(h),f=new THREE.PointLight(16777215,.3),f.position.x=0,f.position.y=-25,f.position.z=10,s.addLight(f),_=document.createElement("div"),_.style.position="absolute",_.style.top="0px",_.style.left="0px",_.style.backgroundColor="red",_.style.padding="5px",_.style.display="none",_.style.overflow="visible",_.style.whiteSpace="nowrap",_.style.zIndex=100,r.appendChild(_),F=document.createElement("div"),F.id="alertBox",F.style.position="absolute",F.style.top="25%",F.style.left="25%",F.style.width="50%",F.style.height="50%",F.style.backgroundColor="#dddddd",F.style.padding="10px",F.style.display="none",F.style.zIndex=100,r.appendChild(F),I&&t(),this.setCameraView(k),this.setObjectMaterial(L),testCanvas=document.createElement("canvas");try{testCanvas.getContext("experimental-webgl")?($=!0,a=new THREE.WebGLRenderer):a=new THREE.CanvasRenderer}catch(e){a=new THREE.CanvasRenderer}a.setSize(N,O),a.domElement.style.backgroundColor=M,r.appendChild(a.domElement),window.addEventListener("mousemove",onRendererMouseMove,!1),a.domElement.addEventListener("mouseover",onRendererMouseOver,!1),a.domElement.addEventListener("mouseout",onRendererMouseOut,!1),a.domElement.addEventListener("mousedown",onRendererMouseDown,!1),window.addEventListener("mouseup",onRendererMouseUp,!1),a.domElement.addEventListener("touchstart",onRendererTouchStart,!1),a.domElement.addEventListener("touchend",onRendererTouchEnd,!1),a.domElement.addEventListener("touchmove",onRendererTouchMove,!1),a.domElement.addEventListener("DOMMouseScroll",onRendererScroll,!1),a.domElement.addEventListener("mousewheel",onRendererScroll,!1),a.domElement.addEventListener("gesturechange",onRendererGestureChange,!1)},onRendererScroll=function(e){e.preventDefault();var t=0;t=void 0===e.wheelDelta?-40*e.detail:e.wheelDelta,t>0?scope.setCameraZoom(10):scope.setCameraZoom(-10)},onRendererGestureChange=function(e){e.preventDefault(),e.scale>1?scope.setCameraZoom(5):scope.setCameraZoom(-5)},onRendererMouseOver=function(){w=!0,null==S&&(S=setInterval(sceneLoop,1e3/60))},onRendererMouseDown=function(e){e.preventDefault(),b=!0,scope.getRotation()?(R=!0,scope.setRotation(!1)):R=!1,m=e.clientX-x,A=e.clientY-C,p=d,y=v},onRendererMouseMove=function(e){b&&(g=e.clientX-x,xrot=p+.02*(g-m),E=e.clientY-C,yrot=y+.02*(E-A),d=xrot,v=yrot)},onRendererMouseUp=function(){b&&(b=!1,w||(clearInterval(S),S=null),R&&scope.setRotation(!0))},onRendererMouseOut=function(){b||(clearInterval(S),S=null),w=!1},onRendererTouchStart=function(e){d=l.rotation.z,v=l.rotation.x,S=setInterval(sceneLoop,1e3/60),1==e.touches.length&&(e.preventDefault(),m=e.touches[0].pageX-x,p=d,A=e.touches[0].pageY-C,y=v)},onRendererTouchEnd=function(){clearInterval(S),S=null},onRendererTouchMove=function(e){1==e.touches.length&&(e.preventDefault(),g=e.touches[0].pageX-x,d=p+.05*(g-m),E=e.touches[0].pageY-C,v=y+.05*(E-A))},sceneLoop=function(){l&&(I?(u.rotation.z=l.rotation.z=.2*(d-l.rotation.z),u.rotation.x=l.rotation.x=.2*(v-l.rotation.x)):(l.rotation.z=.2*(d-l.rotation.z),l.rotation.x=.2*(v-l.rotation.x)),o.updateMatrix(),l.updateMatrix(),I&&u.updateMatrix(),a.render(s,o))},rotateLoop=function(){d+=.05,sceneLoop()},this.getShowPlane=function(){return I},this.setShowPlane=function(e){I=e,e?(s&&!u&&t(),u.material[0].opacity=1):s&&u&&(u.material[0].opacity=0),sceneLoop()},this.getRotation=function(){return null!==T},this.setRotation=function(e){rotation=e,e?T=setInterval(rotateLoop,1e3/60):(clearInterval(T),T=null),scope.onSetRotation()},this.onSetRotation=function(e){if(void 0===e){if(null!==D)try{D(scope.getRotation())}catch(t){}}else D=e},this.setCameraView=function(e){k=e,d=0,v=0,l&&(l.rotation.x=0,l.rotation.y=0,l.rotation.z=0),I&&l&&(u.rotation.x=l.rotation.x,u.rotation.y=l.rotation.y,u.rotation.z=l.rotation.z),"top"==e?I&&(u.flipSided=!1):"side"==e?(v=-4.5,I&&(u.flipSided=!1)):"bottom"==e?I&&(u.flipSided=!0):I&&(u.flipSided=!1),g=d,m=d,E=v,A=v,scope.centerCamera(),sceneLoop()},this.setCameraZoom=function(e){B=e,"bottom"==k?o.position.z+e>0&&(e=0):o.position.z-e<0&&(e=0),"top"==k?o.position.z-=e:"bottom"==k?o.position.z+=e:"side"==k?(o.position.y+=e,o.position.z-=e):(o.position.y+=e,o.position.z-=e),sceneLoop()},this.getObjectMaterial=function(){return L},this.setObjectMaterial=function(e){L=e,n()},this.setBackgroundColor=function(e){M=e,a&&(a.domElement.style.backgroundColor=e)},this.setObjectColor=function(e){P=parseInt(e.replace(/\#/g,""),16),n()},this.loadSTL=function(e){scope.newWorker("loadSTL",e)},this.loadOBJ=function(e){scope.newWorker("loadOBJ",e)},this.loadSTLString=function(e){scope.newWorker("loadSTLString",e)},this.loadSTLBinary=function(e){scope.newWorker("loadSTLBinary",e)},this.loadOBJString=function(e){scope.newWorker("loadOBJString",e)},this.loadJSON=function(e){scope.newWorker("loadJSON",e)},this.loadPLY=function(e){scope.newWorker("loadPLY",e)},this.loadPLYString=function(e){scope.newWorker("loadPLYString",e)},this.loadPLYBinary=function(e){scope.newWorker("loadPLYBinary",e)},this.centerCamera=function(){H?(o.target.position.x=H.center_x,o.target.position.y=H.center_y,o.target.position.z=H.center_z,o.position.x=H.center_x,o.position.y=H.center_y,o.position.z=H.center_z,distance=H.boundingSphere.radius/Math.sin(o.fov/2*(Math.PI/180)),scope.setCameraZoom(-distance/1.9),h.position.x=2*H.min_y,h.position.y=2*H.min_y,h.position.z=2*H.max_z,f.position.x=H.center_y,f.position.y=H.center_y,f.position.z=2*H.max_z):(o.position.y=-70,o.position.z=70,o.target.position.z=0)},this.loadArray=function(e){log("loading array..."),H=new STLGeometry(e),n(),scope.setRotation(!1),scope.setRotation(!0),scope.centerCamera(),log("finished loading "+H.faces.length+" faces.")},this.newWorker=function(e,t){scope.setRotation(!1);var r=new WorkerFacade(thingiurlbase+"/thingiloader.js");r.onmessage=function(e){if("complete"==e.data.status)_.innerHTML="Initializing geometry...",H=new STLGeometry(e.data.content),n(),_.innerHTML="",_.style.display="none",scope.setRotation(!1),scope.setRotation(!0),log("finished loading "+H.faces.length+" faces."),scope.centerCamera();else if("complete_points"==e.data.status){_.innerHTML="Initializing points...",H=new THREE.Geometry;var t=new THREE.ParticleBasicMaterial({color:16711680,opacity:1});for(i in e.data.content[0])vector=new THREE.Vector3(e.data.content[0][i][0],e.data.content[0][i][1],e.data.content[0][i][2]),H.vertices.push(new THREE.Vertex(vector));particles=new THREE.ParticleSystem(H,t),particles.sortParticles=!0,particles.updateMatrix(),s.addObject(particles),o.updateMatrix(),a.render(s,o),_.innerHTML="",_.style.display="none",scope.setRotation(!1),scope.setRotation(!0),log("finished loading "+e.data.content[0].length+" points.")}else"progress"==e.data.status?(_.style.display="block",_.style.width=e.data.content):"message"==e.data.status?(_.style.display="block",_.innerHTML=e.data.content,log(e.data.content)):"alert"==e.data.status?scope.displayAlert(e.data.content):(alert("Error: "+e.data),log("Unknown Worker Message: "+e.data))},r.onerror=function(e){log(e),e.preventDefault()},r.postMessage({cmd:e,param:t})},this.displayAlert=function(e){e+='<br/><br/><center><input type="button" value="Ok" onclick="document.getElementById(\'alertBox\').style.display=\'none\'"></center>',F.innerHTML=e,F.style.display="block"}};var STLGeometry=function(e){function t(e,t,n){i.vertices.push(new THREE.Vertex(new THREE.Vector3(e,t,n)))}function n(e,t,n){i.faces.push(new THREE.Face3(e,t,n))}THREE.Geometry.call(this);for(var i=this,r=0;r<e[0].length;r++)t(e[0][r][0],e[0][r][1],e[0][r][2]);for(var r=0;r<e[1].length;r++)n(e[1][r][0],e[1][r][1],e[1][r][2]);this.computeCentroids(),this.computeFaceNormals(),this.sortFacesByMaterial(),i.min_x=0,i.min_y=0,i.min_z=0,i.max_x=0,i.max_y=0,i.max_z=0;for(var t=0,o=i.vertices.length;o>t;t++)i.max_x=Math.max(i.max_x,i.vertices[t].position.x),i.max_y=Math.max(i.max_y,i.vertices[t].position.y),i.max_z=Math.max(i.max_z,i.vertices[t].position.z),i.min_x=Math.min(i.min_x,i.vertices[t].position.x),i.min_y=Math.min(i.min_y,i.vertices[t].position.y),i.min_z=Math.min(i.min_z,i.vertices[t].position.z);i.center_x=(i.max_x+i.min_x)/2,i.center_y=(i.max_y+i.min_y)/2,i.center_z=(i.max_z+i.min_z)/2};STLGeometry.prototype=new THREE.Geometry,STLGeometry.prototype.constructor=STLGeometry;var WorkerFacade;WorkerFacade=window.Worker?function(){return function(e){return new window.Worker(e)}}():function(){var e={},t={},n=function(n){var i={},r=!1,o=[];i.postToWorkerFunction=function(t){try{e[n]({data:t})}catch(r){i.onerror(r)}},i.postMessage=function(e){return r?(i.postToWorkerFunction(e),void 0):(o.push(e),void 0)},t[n]=i;var s=document.createElement("SCRIPT");s.src=n,s.type="text/javascript",s.onload=function(){for(r=!0;o.length>0;)i.postToWorkerFunction(o[0]),o.shift()},document.body.appendChild(s);var a=document.createElement("SCRIPT");return a.src=thingiurlbase+"/binaryReader.js",a.type="text/javascript",document.body.appendChild(a),i};return n.fake=!0,n.add=function(n,i){return e[n]=i,function(e){t[n].onmessage({data:e})}},n.toString=function(){return"FakeWorker('"+path+"')"},n}();var urlize=function(){function e(e,t){return e.substr(0,t.length)==t}function t(e,t){return e.substr(e.length-t.length,t.length)==t}function n(e,t){for(var n=0,i=0;;){if(i=e.indexOf(t,i),-1==i)break;n++,i+=t.length}return n}function i(e){return-1==e.indexOf("%")||e.match(l)?encodeURI(e):e}function r(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function o(e){var t;return t=2==e.length&&"object"==typeof e[1]?e[1]:{nofollow:e[1],autoescape:e[2],trim_url_limit:e[3],target:e[4]},"django_compatible"in t||(t.django_compatible=!0),t}function s(s,l){function y(e,t){return void 0===t&&(t=l.trim_url_limit),t&&e.length>t?e.substr(0,t-3)+"...":e}l=o(arguments);for(var E=!1,A=l.django_compatible?d:p,b=l.django_compatible?u:c,w=l.django_compatible?h:f,x=a(s,A),C=0;C<x.length;C++){var _=x[C];if(-1!=_.indexOf(".")||-1!=_.indexOf("@")||-1!=_.indexOf(":")){for(var F="",S=_,T="",D=0;D<b.length;D++){var R=b[D];t(S,R)&&(S=S.substr(0,S.length-R.length),T=R+T)}for(var D=0;D<w.length;D++){var k=w[D][0],B=w[D][1];e(S,k)&&(S=S.substr(k.length),F+=k),t(S,B)&&n(S,B)==n(S,k)+1&&(S=S.substr(0,S.length-B.length),T=B+T)}var M=void 0,L=l.nofollow?' rel="nofollow"':"",P=l.target?' target="'+l.target+'"':"";if(S.match(g)?M=i(S):S.match(m)?M=i("http://"+S):-1==S.indexOf(":")&&S.match(v)&&(M="mailto:"+S,L=""),M){var I=y(S);l.autoescape&&(F=r(F),T=r(T),M=r(M),I=r(I)),S='<a href="'+M+'"'+L+P+">"+I+"</a>",x[C]=F+S+T}else E||l.autoescape&&(x[C]=r(_))}else E||l.autoescape&&(x[C]=r(_))}return x.join("")}/*!
 * Cross-Browser Split 1.1.1
 * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>
 * Available under the MIT License
 * ECMAScript compliant, uniform cross-browser split method
 */
var a;a=a||function(e){var t,n=String.prototype.split,i=/()??/.exec("")[1]===e;return t=function(t,r,o){if("[object RegExp]"!==Object.prototype.toString.call(r))return n.call(t,r,o);var s,a,l,u,c=[],h=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.extended?"x":"")+(r.sticky?"y":""),f=0,r=new RegExp(r.source,h+"g");for(t+="",i||(s=new RegExp("^"+r.source+"$(?!\\s)",h)),o=o===e?-1>>>0:o>>>0;(a=r.exec(t))&&(l=a.index+a[0].length,!(l>f&&(c.push(t.slice(f,a.index)),!i&&a.length>1&&a[0].replace(s,function(){for(var t=1;t<arguments.length-2;t++)arguments[t]===e&&(a[t]=e)}),a.length>1&&a.index<t.length&&Array.prototype.push.apply(c,a.slice(1)),u=a[0].length,f=l,c.length>=o)));)r.lastIndex===a.index&&r.lastIndex++;return f===t.length?(u||!r.test(""))&&c.push(""):c.push(t.slice(f)),c.length>o?c.slice(0,o):c}}();var l=/%(?![0-9A-Fa-f]{2})/,u=[".",",",":",";"],c=[".",",",":",";",".)"],h=[["(",")"],["<",">"],["&lt;","&gt;"]],f=[["(",")"],["<",">"],["&lt;","&gt;"],["“","”"],["‘","’"]],d=/(\s+)/,p=/([\s<>"]+)/,g=/^https?:\/\/\w/,m=/^www\.|^(?!http)\w[^@]+\.(com|edu|gov|int|mil|net|org)$/,v=/^\S+@\S+\.\S+$/;return s.test={},s.test.split=a,s.test.convert_arguments=o,s}(),AceLoader=Backbone.View.extend({count:0,initialize:function(){this.add_aceviews()},add_aceviews:function(){_.each($("pre.editable"),function(e){this.add_aceview(e)},this)},add_aceview:function(e){var t=$(e),n="ace_"+this.count;t.attr("id",n);var i=ace.edit(n);i.resize(),i.setTheme("ace/theme/merbivore_soft"),this.count+=1}}),BookApp=Backbone.View.extend({initialize:function(){this.track_user(),this.scroll=new Scroll,this.comments=new Comments,this.pjslive=new PJSLive,this.toc=new TOC({toc_url:app.data.get("book").toc_url}),this.external_assets=new ExternalAssets({metadata_url:app.data.get("book").metadata_url}),this.thingiview=new ThingiviewLoader,this.solutionHandler=new SolutionHandler,this.ace_loader=new AceLoader,this.shoutout=new Shoutouts,this.advertise(),$(".titlepage .copyright").click(function(){$(".titlepage .legalnotice").toggle()})},track_user:function(){var e=app.data.get("user");e&&e.id&&analytics.identify(e.id,{email:e.email,username:e.name})},advertise:function(){var e=app.data.get("advertisement");if(e&&!_.isEmpty(e.body)){var t="feedback"==e.body?"book/templates/feedbackad":"book/templates/ad";$("#menu").after(JST[t](e))}}}),Constants={comments_load:"comments:load",comments_show:"comments:show",comments_hide:"comments:hide",comments_new:"comments:new",comments_save:"comments:save"},CommentState=Backbone.Model.extend({defaults:{state:!1,label:"Comments Off",loaded:!1},toggle:function(){var e=this.get("state"),t=e?"Comments Off":"Comments On";this.set({state:!e,label:t}),this.notify()},notify:function(){this.get("state")&&!this.get("loaded")?(this.set("loaded",!0),this.trigger(Constants.comments_load)):this.get("state")&&this.get("loaded")?this.trigger(Constants.comments_show):this.trigger(Constants.comments_hide)}}),CommentMenuLink=Backbone.View.extend({events:{"click a":"toggle"},initialize:function(){this.model.on("change",this.render,this),this.template=JST["book/templates/comment_link"],this.render()},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.model.get("state")?this.$el.addClass("active"):this.$el.removeClass("active"),this},toggle:function(){return this.model.toggle(),this.render(),!1}}),Comment=Backbone.Model.extend({defaults:{show:!0},toJSON:function(){var e=Backbone.Model.prototype.toJSON.apply(this,arguments);return app.data.get("user")&&(e.can_destroy=app.data.get("abilities").can_destroy_all_comments||e.user_id==app.data.get("user").id),e}},{class_name:"Comment"}),CommentCollection=Backbone.Collection.extend({model:Comment,isbn:"",filenames:[],url:"/api/comments",initialize:function(e,t){this.isbn=t.isbn,this.filenames=t.filenames},fetch_with_params:function(){return this.fetch({data:{book:{isbn:this.isbn},file:this.filenames}})}}),CommentView=Backbone.View.extend({tagName:"div",className:"comment",template:JST["book/templates/comment"],events:{"click .delete-link":"alert_delete"},initialize:function(){this.model.bind("change",this.render,this)},render:function(){return this.model.get("show")?(this.$el.html(this.template(this.model.toJSON())),this.$el.show()):this.$el.hide(),this},alert_delete:function(){var e=window.confirm("Are you sure you want to delete this comment?");return e&&this.delete(),!1},"delete":function(){var e=this;this.model.destroy({success:function(){e.$el.remove()},error:function(){alert("There was an error deleting your comment")}})}}),CommentElement=Backbone.View.extend({state:!1,events:{click:"notify"},enable:function(){this.state=!0,this.$el.addClass("comment-element")},disable:function(){this.state=!1,this.$el.removeClass("comment-element")},notify:function(e){return this.state&&!$(e.target).is("a, video, audio")?(this.trigger(Constants.comments_new,this.el),!1):void 0}}),NewCommentForm=Backbone.View.extend({tagName:"div",className:"comment new-comment",template:JST["book/templates/new_comment"],events:{"click a.submit-form":"notify","click a.cancel-form":"remove"},render:function(){return this.$el.html(this.template({user:app.data.get("user")})),this},notify:function(){var e=$(this.options.target_el),t=e.closest("*[data-original-filename]"),n=t.attr("data-original-filename");if(t&&n){var i=new Comment({selector:e.attr("id"),file:n,body:this.$("textarea").val(),book:{isbn:app.data.get("book").isbn}});this.remove(),this.trigger(Constants.comments_save,i)}else alert("Cannot find original filename to attach comment to. Aborting.");return!1},remove:function(){return this.$el.remove(),!1}}),Comments=Backbone.View.extend({selector_containers:["section",".sect1",".sect2",".sect3"],selector_elements:["p[id]",".figure[id]","pre[id]:not(.editable)",".example[id], .table[id]",".informalfigure[id]",".itemizedlist[id]",".shoutout[id]"],state:{},menu_link:{},comments:{},comment_elements:[],initialize:function(){var e=_.chain($("*[data-original-filename]")).map(function(e){return $(e).attr("data-original-filename")}).compact().value();e.length>0&&this.init_comments()},init_comments:function(e){this.state=new CommentState,this.state.on(Constants.comments_load,this.load_comments,this),this.state.on(Constants.comments_show,this.show_comments,this),this.state.on(Constants.comments_hide,this.hide_comments,this),this.menu_link=new CommentMenuLink({el:"#comments-link",model:this.state}),this.comments=new CommentCollection([],{isbn:app.data.get("book").isbn,filenames:e}),this.comments.on("add",this.add_comment,this),this.comments.on("reset",this.add_comments,this)},create_comment_elements:function(){_.each($(this.get_query()),function(e){var t=new CommentElement({el:e});t.on(Constants.comments_new,this.new_comment,this),t.enable(),this.comment_elements.push(t)},this)},load_comments:function(){app.data.get("abilities").can_create_comments&&this.create_comment_elements(),this.comments.fetch_with_params()},show_comments:function(){_.each(this.comment_elements,function(e){e.enable()}),this.comments.each(function(e){e.set("show",!0)})},hide_comments:function(){_.each(this.comment_elements,function(e){e.disable()}),this.comments.each(function(e){e.set("show",!1)})},add_comment:function(e){var t=new CommentView({model:e}),n=$("#"+e.get("selector"));n&&this.element_comments_box(n).append(t.render().el)},add_comments:function(){this.comments.each(this.add_comment,this)},new_comment:function(e){var t=new NewCommentForm({target_el:e,isbn:app.data.get("book").isbn,user:app.data.get("user")});t.on(Constants.comments_save,this.save_comment,this),this.element_comments_box($(e)).prepend(t.render().el),t.$("textarea").focus()},save_comment:function(e){this.comments.create(e)},element_comments_box:function(e){var t=e.next();return t.hasClass("comments_box")||(t=$("<div class='comments_box'></div>"),e.after(t)),t},get_query:function(){return _.map(this.selector_containers,function(e){return _.map(this.selector_elements,function(t){return e+" > "+t},this).join(", ")},this).join(", ")}}),Metadata=Backbone.Model.extend({url:function(){return this.get("metadata_url")}}),Video=Backbone.Model.extend({rtmp_cloudfront_url:function(){return"rtmp://"+this.get("cloudfront_videos_streaming")+"/cfx/st"},http_encoding_file_path_cloudfront:function(e){return"http://"+this.get("cloudfront_videos_progressive")+"/"+this.encoding_file_path(e)},encoding_file_path:function(e){var t=this.find_encoding(e);return _.first(t.files)},find_encoding:function(e){return _.find(this.get("encodings"),function(t){return t.profile_name==e})}}),VideoList=Backbone.Collection.extend({model:Video}),VideoView=Backbone.View.extend({render:function(){var e=this,t=this.$el.attr("id");return t||this.$el.attr("id",this.model.find_encoding("default_mp4").video_id),jwplayer(this.$el[0]).setup({controlbar:"bottom",modes:[{type:"flash",src:"/assets/player.swf",config:{width:e.model.find_encoding("default_mp4").width,height:e.model.find_encoding("default_mp4").height,file:e.model.encoding_file_path("default_mp4"),streamer:e.model.rtmp_cloudfront_url(),provider:"rtmp"}},{type:"flash",src:"/assets/player.swf",config:{width:e.model.find_encoding("default_mp4").width,height:e.model.find_encoding("default_mp4").height,file:e.model.http_encoding_file_path_cloudfront("default_mp4")}},{type:"html5",config:{width:e.model.find_encoding("default_mp4").width,height:e.model.find_encoding("default_mp4").height,levels:[{file:e.model.http_encoding_file_path_cloudfront("default_mp4")},{file:e.model.http_encoding_file_path_cloudfront("default_ogg")}],provider:"video"}},{type:"download",config:{width:e.model.find_encoding("default_mp4").width,height:e.model.find_encoding("default_mp4").height,file:e.model.http_encoding_file_path_cloudfront("default_mp4"),provider:"video"}}]}),this}}),ExternalAssets=Backbone.View.extend({metadata:{},videos:{},initialize:function(){this.options.metadata_url&&(this.metadata=new Metadata({metadata_url:this.options.metadata_url}),this.metadata.on("change",this.create_videos,this),this.metadata.fetch())},create_videos:function(){this.videos=new VideoList,this.videos.bind("add",this.add_video_view,this),this.videos.bind("reset",this.add_video_views,this),this.videos.reset(this.metadata.get("external_assets").videos)},add_video_view:function(e){e.set("cloudfront_videos_streaming",this.metadata.get("external_assets").cloudfront_videos_streaming),e.set("cloudfront_videos_progressive",this.metadata.get("external_assets").cloudfront_videos_progressive);var t=$("video[src='"+e.http_encoding_file_path_cloudfront("default_mp4")+"']")[0];if(t){var n=new VideoView({model:e,el:t});n.render()}},add_video_views:function(){this.videos.each(this.add_video_view,this)}}),PJSLive=Backbone.View.extend({initialize:function(){this.run_them()},run_them:function(){_.each($(".processingjslive"),function(e){var t=$(e).find("textarea")[0],n=$(e).find("canvas")[0];new Processing(n,$(t).val()),$(t).before("<div class='processing-header'><h3 class='title'>Processing Console</h3><a href='#' class='processing-runit'>Run</a></div>"),$(e).find("a.processing-runit").click(function(){return new Processing(n,$(t).val()),!1})})}}),Scroll=Backbone.View.extend({scrollElements:[],previousElement:null,initialize:function(){this.enable_scroll_check()},enable_scroll_check:function(){var e=this;this.scrollElements=$(".sect1, .sect2").toArray().reverse(),$(document).scroll(function(){var t=$(document).scrollTop(),n=_.find(e.scrollElements,function(e){return t>=$(e).position().top});if(n&&n!==e.previousElement){var i=$(n).attr("id");i&&(history.replaceState({path:i},"",document.location.pathname+"#"+i),e.previousElement=n)}else!n&&e.previousElement&&(e.previousElement=null,history.replaceState({path:$(n).attr("id")},"",document.location.pathname))})}}),Shoutout=Backbone.View.extend({initialize:function(){this.template=JST["book/templates/shoutout"],this.render()},render:function(){this.$el.append(this.template())}}),Shoutouts=Backbone.View.extend({shoutouts:[],initialize:function(){_.each($(".shoutout"),function(e){this.shoutouts.push(new Shoutout({el:e}))},this)}}),Solution=Backbone.View.extend({template:{},click_el:{},initialize:function(){var e=this;this.template=JST["book/templates/solution"],this.$el.hide(),this.click_el=$(this.template()),this.$el.before(this.click_el),this.click_el.click(function(){e.toggle_element()})},toggle_element:function(){this.$el.slideToggle(200)}}),SolutionHandler=Backbone.View.extend({solutions:[],initialize:function(){this.add_solutions()},add_solutions:function(){_.each($(".solution"),function(e){this.solutions=new Solution({el:e})},this)}}),ThingiviewLoader=Backbone.View.extend({count:0,initialize:function(){this.add_thingiviews()},add_thingiviews:function(){_.each($(".thingiview"),function(e){this.add_thingiview(e)},this)},add_thingiview:function(e){var t=$(e),n="thingiview-"+this.count;t.attr("id",n),t.css("width",t.attr("width")),t.css("height",t.attr("height")),thingiurlbase="http://d2krthdk0nu57h.cloudfront.net",thingiview=new Thingiview(n),thingiview.setObjectColor("#C0D8F0"),thingiview.initScene(),$.get($(e).attr("data-object"),function(e){thingiview.loadSTLString(e)}),this.count+=1}}),TOC=Backbone.View.extend({initialize:function(){this.load_toc()},load_toc:function(){$.ajax({url:this.options.toc_url,dataType:"html",success:function(e){$("#toc-popup").html(e)}})}});